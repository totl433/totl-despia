import{g as fn,r as P,s as se,j as s,u as Rr,i as hn,a as fr,T as hr,D as mn,b as pn,c as gn,d as xn,L as mr,e as pr,f as bn,I as gr,h as xr}from"./index-DeVe_2uN.js";function wn(d,u){return u.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(t){if(t!=="default"&&!(t in d)){var e=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(d,t,e.get?e:{enumerable:!0,get:function(){return r[t]}})}}))})),Object.freeze(d)}function Dr(d,u){return new Promise((function(r,t){let e;return vn(d).then((function(n){try{return e=n,r(new Blob([u.slice(0,2),e,u.slice(2)],{type:"image/jpeg"}))}catch(a){return t(a)}}),t)}))}const vn=d=>new Promise(((u,r)=>{const t=new FileReader;t.addEventListener("load",(({target:{result:e}})=>{const n=new DataView(e);let a=0;if(n.getUint16(a)!==65496)return r("not a valid JPEG");for(a+=2;;){const c=n.getUint16(a);if(c===65498)break;const b=n.getUint16(a+2);if(c===65505&&n.getUint32(a+4)===1165519206){const x=a+10;let o;switch(n.getUint16(x)){case 18761:o=!0;break;case 19789:o=!1;break;default:return r("TIFF header contains invalid endian")}if(n.getUint16(x+2,o)!==42)return r("TIFF header contains invalid version");const l=n.getUint32(x+4,o),i=x+l+2+12*n.getUint16(x+l,o);for(let f=x+l+2;f<i;f+=12)if(n.getUint16(f,o)==274){if(n.getUint16(f+2,o)!==3)return r("Orientation data type is invalid");if(n.getUint32(f+4,o)!==1)return r("Orientation data count is invalid");n.setUint16(f+8,1,o);break}return u(e.slice(a,a+2+b))}a+=2+b}return u(new Blob)})),t.readAsArrayBuffer(d)}));var Pt={},yn={get exports(){return Pt},set exports(d){Pt=d}};(function(d){var u,r,t={};yn.exports=t,t.parse=function(e,n){for(var a=t.bin.readUshort,c=t.bin.readUint,b=0,x={},o=new Uint8Array(e),l=o.length-4;c(o,l)!=101010256;)l--;b=l,b+=4;var i=a(o,b+=4);a(o,b+=2);var f=c(o,b+=2),g=c(o,b+=4);b+=4,b=g;for(var j=0;j<i;j++){c(o,b),b+=4,b+=4,b+=4,c(o,b+=4),f=c(o,b+=4);var E=c(o,b+=4),S=a(o,b+=4),I=a(o,b+2),D=a(o,b+4);b+=6;var L=c(o,b+=8);b+=4,b+=S+I+D,t._readLocal(o,L,x,f,E,n)}return x},t._readLocal=function(e,n,a,c,b,x){var o=t.bin.readUshort,l=t.bin.readUint;l(e,n),o(e,n+=4),o(e,n+=2);var i=o(e,n+=2);l(e,n+=2),l(e,n+=4),n+=4;var f=o(e,n+=8),g=o(e,n+=2);n+=2;var j=t.bin.readUTF8(e,n,f);if(n+=f,n+=g,x)a[j]={size:b,csize:c};else{var E=new Uint8Array(e.buffer,n);if(i==0)a[j]=new Uint8Array(E.buffer.slice(n,n+c));else{if(i!=8)throw"unknown compression method: "+i;var S=new Uint8Array(b);t.inflateRaw(E,S),a[j]=S}}},t.inflateRaw=function(e,n){return t.F.inflate(e,n)},t.inflate=function(e,n){return e[0],e[1],t.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),n)},t.deflate=function(e,n){n==null&&(n={level:6});var a=0,c=new Uint8Array(50+Math.floor(1.1*e.length));c[a]=120,c[a+1]=156,a+=2,a=t.F.deflateRaw(e,c,a,n.level);var b=t.adler(e,0,e.length);return c[a+0]=b>>>24&255,c[a+1]=b>>>16&255,c[a+2]=b>>>8&255,c[a+3]=b>>>0&255,new Uint8Array(c.buffer,0,a+4)},t.deflateRaw=function(e,n){n==null&&(n={level:6});var a=new Uint8Array(50+Math.floor(1.1*e.length)),c=t.F.deflateRaw(e,a,c,n.level);return new Uint8Array(a.buffer,0,c)},t.encode=function(e,n){n==null&&(n=!1);var a=0,c=t.bin.writeUint,b=t.bin.writeUshort,x={};for(var o in e){var l=!t._noNeed(o)&&!n,i=e[o],f=t.crc.crc(i,0,i.length);x[o]={cpr:l,usize:i.length,crc:f,file:l?t.deflateRaw(i):i}}for(var o in x)a+=x[o].file.length+30+46+2*t.bin.sizeUTF8(o);a+=22;var g=new Uint8Array(a),j=0,E=[];for(var o in x){var S=x[o];E.push(j),j=t._writeHeader(g,j,o,S,0)}var I=0,D=j;for(var o in x)S=x[o],E.push(j),j=t._writeHeader(g,j,o,S,1,E[I++]);var L=j-D;return c(g,j,101010256),j+=4,b(g,j+=4,I),b(g,j+=2,I),c(g,j+=2,L),c(g,j+=4,D),j+=4,j+=2,g.buffer},t._noNeed=function(e){var n=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(n)!=-1},t._writeHeader=function(e,n,a,c,b,x){var o=t.bin.writeUint,l=t.bin.writeUshort,i=c.file;return o(e,n,b==0?67324752:33639248),n+=4,b==1&&(n+=2),l(e,n,20),l(e,n+=2,0),l(e,n+=2,c.cpr?8:0),o(e,n+=2,0),o(e,n+=4,c.crc),o(e,n+=4,i.length),o(e,n+=4,c.usize),l(e,n+=4,t.bin.sizeUTF8(a)),l(e,n+=2,0),n+=2,b==1&&(n+=2,n+=2,o(e,n+=6,x),n+=4),n+=t.bin.writeUTF8(e,n,a),b==0&&(e.set(i,n),n+=i.length),n},t.crc={table:(function(){for(var e=new Uint32Array(256),n=0;n<256;n++){for(var a=n,c=0;c<8;c++)1&a?a=3988292384^a>>>1:a>>>=1;e[n]=a}return e})(),update:function(e,n,a,c){for(var b=0;b<c;b++)e=t.crc.table[255&(e^n[a+b])]^e>>>8;return e},crc:function(e,n,a){return 4294967295^t.crc.update(4294967295,e,n,a)}},t.adler=function(e,n,a){for(var c=1,b=0,x=n,o=n+a;x<o;){for(var l=Math.min(x+5552,o);x<l;)b+=c+=e[x++];c%=65521,b%=65521}return b<<16|c},t.bin={readUshort:function(e,n){return e[n]|e[n+1]<<8},writeUshort:function(e,n,a){e[n]=255&a,e[n+1]=a>>8&255},readUint:function(e,n){return 16777216*e[n+3]+(e[n+2]<<16|e[n+1]<<8|e[n])},writeUint:function(e,n,a){e[n]=255&a,e[n+1]=a>>8&255,e[n+2]=a>>16&255,e[n+3]=a>>24&255},readASCII:function(e,n,a){for(var c="",b=0;b<a;b++)c+=String.fromCharCode(e[n+b]);return c},writeASCII:function(e,n,a){for(var c=0;c<a.length;c++)e[n+c]=a.charCodeAt(c)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,n,a){for(var c,b="",x=0;x<a;x++)b+="%"+t.bin.pad(e[n+x].toString(16));try{c=decodeURIComponent(b)}catch{return t.bin.readASCII(e,n,a)}return c},writeUTF8:function(e,n,a){for(var c=a.length,b=0,x=0;x<c;x++){var o=a.charCodeAt(x);if((4294967168&o)==0)e[n+b]=o,b++;else if((4294965248&o)==0)e[n+b]=192|o>>6,e[n+b+1]=128|o>>0&63,b+=2;else if((4294901760&o)==0)e[n+b]=224|o>>12,e[n+b+1]=128|o>>6&63,e[n+b+2]=128|o>>0&63,b+=3;else{if((4292870144&o)!=0)throw"e";e[n+b]=240|o>>18,e[n+b+1]=128|o>>12&63,e[n+b+2]=128|o>>6&63,e[n+b+3]=128|o>>0&63,b+=4}}return b},sizeUTF8:function(e){for(var n=e.length,a=0,c=0;c<n;c++){var b=e.charCodeAt(c);if((4294967168&b)==0)a++;else if((4294965248&b)==0)a+=2;else if((4294901760&b)==0)a+=3;else{if((4292870144&b)!=0)throw"e";a+=4}}return a}},t.F={},t.F.deflateRaw=function(e,n,a,c){var b=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],x=t.F.U,o=t.F._goodIndex;t.F._hash;var l=t.F._putsE,i=0,f=a<<3,g=0,j=e.length;if(c==0){for(;i<j;)l(n,f,i+(N=Math.min(65535,j-i))==j?1:0),f=t.F._copyExact(e,i,N,n,f+8),i+=N;return f>>>3}var E=x.lits,S=x.strt,I=x.prev,D=0,L=0,U=0,v=0,M=0,h=0;for(j>2&&(S[h=t.F._hash(e,0)]=0),i=0;i<j;i++){if(M=h,i+1<j-2){h=t.F._hash(e,i+1);var p=i+1&32767;I[p]=S[h],S[h]=p}if(g<=i){(D>14e3||L>26697)&&j-i>100&&(g<i&&(E[D]=i-g,D+=2,g=i),f=t.F._writeBlock(i==j-1||g==j?1:0,E,D,v,e,U,i-U,n,f),D=L=v=0,U=i);var C=0;i<j-2&&(C=t.F._bestMatch(e,i,I,M,Math.min(b[2],j-i),b[3]));var N=C>>>16,y=65535&C;if(C!=0){y=65535&C;var A=o(N=C>>>16,x.of0);x.lhst[257+A]++;var _=o(y,x.df0);x.dhst[_]++,v+=x.exb[A]+x.dxb[_],E[D]=N<<23|i-g,E[D+1]=y<<16|A<<8|_,D+=2,g=i+N}else x.lhst[e[i]]++;L++}}for(U==i&&e.length!=0||(g<i&&(E[D]=i-g,D+=2,g=i),f=t.F._writeBlock(1,E,D,v,e,U,i-U,n,f),D=0,L=0,D=L=v=0,U=i);(7&f)!=0;)f++;return f>>>3},t.F._bestMatch=function(e,n,a,c,b,x){var o=32767&n,l=a[o],i=o-l+32768&32767;if(l==o||c!=t.F._hash(e,n-i))return 0;for(var f=0,g=0,j=Math.min(32767,n);i<=j&&--x!=0&&l!=o;){if(f==0||e[n+f]==e[n+f-i]){var E=t.F._howLong(e,n,i);if(E>f){if(g=i,(f=E)>=b)break;i+2<E&&(E=i+2);for(var S=0,I=0;I<E-2;I++){var D=n-i+I+32768&32767,L=D-a[D]+32768&32767;L>S&&(S=L,l=D)}}}i+=(o=l)-(l=a[o])+32768&32767}return f<<16|g},t.F._howLong=function(e,n,a){if(e[n]!=e[n-a]||e[n+1]!=e[n+1-a]||e[n+2]!=e[n+2-a])return 0;var c=n,b=Math.min(e.length,n+258);for(n+=3;n<b&&e[n]==e[n-a];)n++;return n-c},t.F._hash=function(e,n){return(e[n]<<8|e[n+1])+(e[n+2]<<4)&65535},t.saved=0,t.F._writeBlock=function(e,n,a,c,b,x,o,l,i){var f,g,j,E,S,I,D,L,U,v=t.F.U,M=t.F._putsF,h=t.F._putsE;v.lhst[256]++,g=(f=t.F.getTrees())[0],j=f[1],E=f[2],S=f[3],I=f[4],D=f[5],L=f[6],U=f[7];var p=32+((i+3&7)==0?0:8-(i+3&7))+(o<<3),C=c+t.F.contSize(v.fltree,v.lhst)+t.F.contSize(v.fdtree,v.dhst),N=c+t.F.contSize(v.ltree,v.lhst)+t.F.contSize(v.dtree,v.dhst);N+=14+3*D+t.F.contSize(v.itree,v.ihst)+(2*v.ihst[16]+3*v.ihst[17]+7*v.ihst[18]);for(var y=0;y<286;y++)v.lhst[y]=0;for(y=0;y<30;y++)v.dhst[y]=0;for(y=0;y<19;y++)v.ihst[y]=0;var A=p<C&&p<N?0:C<N?1:2;if(M(l,i,e),M(l,i+1,A),i+=3,A==0){for(;(7&i)!=0;)i++;i=t.F._copyExact(b,x,o,l,i)}else{var _,T;if(A==1&&(_=v.fltree,T=v.fdtree),A==2){t.F.makeCodes(v.ltree,g),t.F.revCodes(v.ltree,g),t.F.makeCodes(v.dtree,j),t.F.revCodes(v.dtree,j),t.F.makeCodes(v.itree,E),t.F.revCodes(v.itree,E),_=v.ltree,T=v.dtree,h(l,i,S-257),h(l,i+=5,I-1),h(l,i+=5,D-4),i+=4;for(var w=0;w<D;w++)h(l,i+3*w,v.itree[1+(v.ordr[w]<<1)]);i+=3*D,i=t.F._codeTiny(L,v.itree,l,i),i=t.F._codeTiny(U,v.itree,l,i)}for(var m=x,H=0;H<a;H+=2){for(var R=n[H],W=R>>>23,X=m+(8388607&R);m<X;)i=t.F._writeLit(b[m++],_,l,i);if(W!=0){var K=n[H+1],J=K>>16,B=K>>8&255,z=255&K;h(l,i=t.F._writeLit(257+B,_,l,i),W-v.of0[B]),i+=v.exb[B],M(l,i=t.F._writeLit(z,T,l,i),J-v.df0[z]),i+=v.dxb[z],m+=W}}i=t.F._writeLit(256,_,l,i)}return i},t.F._copyExact=function(e,n,a,c,b){var x=b>>>3;return c[x]=a,c[x+1]=a>>>8,c[x+2]=255-c[x],c[x+3]=255-c[x+1],x+=4,c.set(new Uint8Array(e.buffer,n,a),x),b+(a+4<<3)},t.F.getTrees=function(){for(var e=t.F.U,n=t.F._hufTree(e.lhst,e.ltree,15),a=t.F._hufTree(e.dhst,e.dtree,15),c=[],b=t.F._lenCodes(e.ltree,c),x=[],o=t.F._lenCodes(e.dtree,x),l=0;l<c.length;l+=2)e.ihst[c[l]]++;for(l=0;l<x.length;l+=2)e.ihst[x[l]]++;for(var i=t.F._hufTree(e.ihst,e.itree,7),f=19;f>4&&e.itree[1+(e.ordr[f-1]<<1)]==0;)f--;return[n,a,i,b,o,f,c,x]},t.F.getSecond=function(e){for(var n=[],a=0;a<e.length;a+=2)n.push(e[a+1]);return n},t.F.nonZero=function(e){for(var n="",a=0;a<e.length;a+=2)e[a+1]!=0&&(n+=(a>>1)+",");return n},t.F.contSize=function(e,n){for(var a=0,c=0;c<n.length;c++)a+=n[c]*e[1+(c<<1)];return a},t.F._codeTiny=function(e,n,a,c){for(var b=0;b<e.length;b+=2){var x=e[b],o=e[b+1];c=t.F._writeLit(x,n,a,c);var l=x==16?2:x==17?3:7;x>15&&(t.F._putsE(a,c,o,l),c+=l)}return c},t.F._lenCodes=function(e,n){for(var a=e.length;a!=2&&e[a-1]==0;)a-=2;for(var c=0;c<a;c+=2){var b=e[c+1],x=c+3<a?e[c+3]:-1,o=c+5<a?e[c+5]:-1,l=c==0?-1:e[c-1];if(b==0&&x==b&&o==b){for(var i=c+5;i+2<a&&e[i+2]==b;)i+=2;(f=Math.min(i+1-c>>>1,138))<11?n.push(17,f-3):n.push(18,f-11),c+=2*f-2}else if(b==l&&x==b&&o==b){for(i=c+5;i+2<a&&e[i+2]==b;)i+=2;var f=Math.min(i+1-c>>>1,6);n.push(16,f-3),c+=2*f-2}else n.push(b,0)}return a>>>1},t.F._hufTree=function(e,n,a){var c=[],b=e.length,x=n.length,o=0;for(o=0;o<x;o+=2)n[o]=0,n[o+1]=0;for(o=0;o<b;o++)e[o]!=0&&c.push({lit:o,f:e[o]});var l=c.length,i=c.slice(0);if(l==0)return 0;if(l==1){var f=c[0].lit;return i=f==0?1:0,n[1+(f<<1)]=1,n[1+(i<<1)]=1,1}c.sort((function(L,U){return L.f-U.f}));var g=c[0],j=c[1],E=0,S=1,I=2;for(c[0]={lit:-1,f:g.f+j.f,l:g,r:j,d:0};S!=l-1;)g=E!=S&&(I==l||c[E].f<c[I].f)?c[E++]:c[I++],j=E!=S&&(I==l||c[E].f<c[I].f)?c[E++]:c[I++],c[S++]={lit:-1,f:g.f+j.f,l:g,r:j};var D=t.F.setDepth(c[S-1],0);for(D>a&&(t.F.restrictDepth(i,a,D),D=a),o=0;o<l;o++)n[1+(i[o].lit<<1)]=i[o].d;return D},t.F.setDepth=function(e,n){return e.lit!=-1?(e.d=n,n):Math.max(t.F.setDepth(e.l,n+1),t.F.setDepth(e.r,n+1))},t.F.restrictDepth=function(e,n,a){var c=0,b=1<<a-n,x=0;for(e.sort((function(l,i){return i.d==l.d?l.f-i.f:i.d-l.d})),c=0;c<e.length&&e[c].d>n;c++){var o=e[c].d;e[c].d=n,x+=b-(1<<a-o)}for(x>>>=a-n;x>0;)(o=e[c].d)<n?(e[c].d++,x-=1<<n-o-1):c++;for(;c>=0;c--)e[c].d==n&&x<0&&(e[c].d--,x++);x!=0&&console.log("debt left")},t.F._goodIndex=function(e,n){var a=0;return n[16|a]<=e&&(a|=16),n[8|a]<=e&&(a|=8),n[4|a]<=e&&(a|=4),n[2|a]<=e&&(a|=2),n[1|a]<=e&&(a|=1),a},t.F._writeLit=function(e,n,a,c){return t.F._putsF(a,c,n[e<<1]),c+n[1+(e<<1)]},t.F.inflate=function(e,n){var a=Uint8Array;if(e[0]==3&&e[1]==0)return n||new a(0);var c=t.F,b=c._bitsF,x=c._bitsE,o=c._decodeTiny,l=c.makeCodes,i=c.codes2map,f=c._get17,g=c.U,j=n==null;j&&(n=new a(e.length>>>2<<3));for(var E,S,I=0,D=0,L=0,U=0,v=0,M=0,h=0,p=0,C=0;I==0;)if(I=b(e,C,1),D=b(e,C+1,2),C+=3,D!=0){if(j&&(n=t.F._check(n,p+(1<<17))),D==1&&(E=g.flmap,S=g.fdmap,M=511,h=31),D==2){L=x(e,C,5)+257,U=x(e,C+5,5)+1,v=x(e,C+10,4)+4,C+=14;for(var N=0;N<38;N+=2)g.itree[N]=0,g.itree[N+1]=0;var y=1;for(N=0;N<v;N++){var A=x(e,C+3*N,3);g.itree[1+(g.ordr[N]<<1)]=A,A>y&&(y=A)}C+=3*v,l(g.itree,y),i(g.itree,y,g.imap),E=g.lmap,S=g.dmap,C=o(g.imap,(1<<y)-1,L+U,e,C,g.ttree);var _=c._copyOut(g.ttree,0,L,g.ltree);M=(1<<_)-1;var T=c._copyOut(g.ttree,L,U,g.dtree);h=(1<<T)-1,l(g.ltree,_),i(g.ltree,_,E),l(g.dtree,T),i(g.dtree,T,S)}for(;;){var w=E[f(e,C)&M];C+=15&w;var m=w>>>4;if(!(m>>>8))n[p++]=m;else{if(m==256)break;var H=p+m-254;if(m>264){var R=g.ldef[m-257];H=p+(R>>>3)+x(e,C,7&R),C+=7&R}var W=S[f(e,C)&h];C+=15&W;var X=W>>>4,K=g.ddef[X],J=(K>>>4)+b(e,C,15&K);for(C+=15&K,j&&(n=t.F._check(n,p+(1<<17)));p<H;)n[p]=n[p++-J],n[p]=n[p++-J],n[p]=n[p++-J],n[p]=n[p++-J];p=H}}}else{(7&C)!=0&&(C+=8-(7&C));var B=4+(C>>>3),z=e[B-4]|e[B-3]<<8;j&&(n=t.F._check(n,p+z)),n.set(new a(e.buffer,e.byteOffset+B,z),p),C=B+z<<3,p+=z}return n.length==p?n:n.slice(0,p)},t.F._check=function(e,n){var a=e.length;if(n<=a)return e;var c=new Uint8Array(Math.max(a<<1,n));return c.set(e,0),c},t.F._decodeTiny=function(e,n,a,c,b,x){for(var o=t.F._bitsE,l=t.F._get17,i=0;i<a;){var f=e[l(c,b)&n];b+=15&f;var g=f>>>4;if(g<=15)x[i]=g,i++;else{var j=0,E=0;g==16?(E=3+o(c,b,2),b+=2,j=x[i-1]):g==17?(E=3+o(c,b,3),b+=3):g==18&&(E=11+o(c,b,7),b+=7);for(var S=i+E;i<S;)x[i]=j,i++}}return b},t.F._copyOut=function(e,n,a,c){for(var b=0,x=0,o=c.length>>>1;x<a;){var l=e[x+n];c[x<<1]=0,c[1+(x<<1)]=l,l>b&&(b=l),x++}for(;x<o;)c[x<<1]=0,c[1+(x<<1)]=0,x++;return b},t.F.makeCodes=function(e,n){for(var a,c,b,x,o=t.F.U,l=e.length,i=o.bl_count,f=0;f<=n;f++)i[f]=0;for(f=1;f<l;f+=2)i[e[f]]++;var g=o.next_code;for(a=0,i[0]=0,c=1;c<=n;c++)a=a+i[c-1]<<1,g[c]=a;for(b=0;b<l;b+=2)(x=e[b+1])!=0&&(e[b]=g[x],g[x]++)},t.F.codes2map=function(e,n,a){for(var c=e.length,b=t.F.U.rev15,x=0;x<c;x+=2)if(e[x+1]!=0)for(var o=x>>1,l=e[x+1],i=o<<4|l,f=n-l,g=e[x]<<f,j=g+(1<<f);g!=j;)a[b[g]>>>15-n]=i,g++},t.F.revCodes=function(e,n){for(var a=t.F.U.rev15,c=15-n,b=0;b<e.length;b+=2){var x=e[b]<<n-e[b+1];e[b]=a[x]>>>c}},t.F._putsE=function(e,n,a){a<<=7&n;var c=n>>>3;e[c]|=a,e[c+1]|=a>>>8},t.F._putsF=function(e,n,a){a<<=7&n;var c=n>>>3;e[c]|=a,e[c+1]|=a>>>8,e[c+2]|=a>>>16},t.F._bitsE=function(e,n,a){return(e[n>>>3]|e[1+(n>>>3)]<<8)>>>(7&n)&(1<<a)-1},t.F._bitsF=function(e,n,a){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)&(1<<a)-1},t.F._get17=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)},t.F._get25=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16|e[3+(n>>>3)]<<24)>>>(7&n)},t.F.U=(u=Uint16Array,r=Uint32Array,{next_code:new u(16),bl_count:new u(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new u(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new u(512),fltree:[],fdmap:new u(32),fdtree:[],lmap:new u(32768),ltree:[],ttree:[],dmap:new u(32768),dtree:[],imap:new u(512),itree:[],rev15:new u(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new u(65536),prev:new u(32768)}),(function(){for(var e=t.F.U,n=0;n<32768;n++){var a=n;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.rev15[n]=(a>>>16|a<<16)>>>17}function c(b,x,o){for(;x--!=0;)b.push(0,o)}for(n=0;n<32;n++)e.ldef[n]=e.of0[n]<<3|e.exb[n],e.ddef[n]=e.df0[n]<<4|e.dxb[n];c(e.fltree,144,8),c(e.fltree,112,9),c(e.fltree,24,7),c(e.fltree,8,8),t.F.makeCodes(e.fltree,9),t.F.codes2map(e.fltree,9,e.flmap),t.F.revCodes(e.fltree,9),c(e.fdtree,32,5),t.F.makeCodes(e.fdtree,5),t.F.codes2map(e.fdtree,5,e.fdmap),t.F.revCodes(e.fdtree,5),c(e.itree,19,0),c(e.ltree,286,0),c(e.dtree,30,0),c(e.ttree,320,0)})()})();var _n=wn({__proto__:null,default:Pt},[Pt]);const rt=(function(){var d={nextZero(o,l){for(;o[l]!=0;)l++;return l},readUshort:(o,l)=>o[l]<<8|o[l+1],writeUshort(o,l,i){o[l]=i>>8&255,o[l+1]=255&i},readUint:(o,l)=>16777216*o[l]+(o[l+1]<<16|o[l+2]<<8|o[l+3]),writeUint(o,l,i){o[l]=i>>24&255,o[l+1]=i>>16&255,o[l+2]=i>>8&255,o[l+3]=255&i},readASCII(o,l,i){let f="";for(let g=0;g<i;g++)f+=String.fromCharCode(o[l+g]);return f},writeASCII(o,l,i){for(let f=0;f<i.length;f++)o[l+f]=i.charCodeAt(f)},readBytes(o,l,i){const f=[];for(let g=0;g<i;g++)f.push(o[l+g]);return f},pad:o=>o.length<2?`0${o}`:o,readUTF8(o,l,i){let f,g="";for(let j=0;j<i;j++)g+=`%${d.pad(o[l+j].toString(16))}`;try{f=decodeURIComponent(g)}catch{return d.readASCII(o,l,i)}return f}};function u(o,l,i,f){const g=l*i,j=n(f),E=Math.ceil(l*j/8),S=new Uint8Array(4*g),I=new Uint32Array(S.buffer),{ctype:D}=f,{depth:L}=f,U=d.readUshort;if(D==6){const R=g<<2;if(L==8)for(var v=0;v<R;v+=4)S[v]=o[v],S[v+1]=o[v+1],S[v+2]=o[v+2],S[v+3]=o[v+3];if(L==16)for(v=0;v<R;v++)S[v]=o[v<<1]}else if(D==2){const R=f.tabs.tRNS;if(R==null){if(L==8)for(v=0;v<g;v++){var M=3*v;I[v]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M]}if(L==16)for(v=0;v<g;v++)M=6*v,I[v]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M]}else{var h=R[0];const W=R[1],X=R[2];if(L==8)for(v=0;v<g;v++){var p=v<<2;M=3*v,I[v]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M],o[M]==h&&o[M+1]==W&&o[M+2]==X&&(S[p+3]=0)}if(L==16)for(v=0;v<g;v++)p=v<<2,M=6*v,I[v]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M],U(o,M)==h&&U(o,M+2)==W&&U(o,M+4)==X&&(S[p+3]=0)}}else if(D==3){const R=f.tabs.PLTE,W=f.tabs.tRNS,X=W?W.length:0;if(L==1)for(var C=0;C<i;C++){var N=C*E,y=C*l;for(v=0;v<l;v++){p=y+v<<2;var A=3*(_=o[N+(v>>3)]>>7-((7&v)<<0)&1);S[p]=R[A],S[p+1]=R[A+1],S[p+2]=R[A+2],S[p+3]=_<X?W[_]:255}}if(L==2)for(C=0;C<i;C++)for(N=C*E,y=C*l,v=0;v<l;v++)p=y+v<<2,A=3*(_=o[N+(v>>2)]>>6-((3&v)<<1)&3),S[p]=R[A],S[p+1]=R[A+1],S[p+2]=R[A+2],S[p+3]=_<X?W[_]:255;if(L==4)for(C=0;C<i;C++)for(N=C*E,y=C*l,v=0;v<l;v++)p=y+v<<2,A=3*(_=o[N+(v>>1)]>>4-((1&v)<<2)&15),S[p]=R[A],S[p+1]=R[A+1],S[p+2]=R[A+2],S[p+3]=_<X?W[_]:255;if(L==8)for(v=0;v<g;v++){var _;p=v<<2,A=3*(_=o[v]),S[p]=R[A],S[p+1]=R[A+1],S[p+2]=R[A+2],S[p+3]=_<X?W[_]:255}}else if(D==4){if(L==8)for(v=0;v<g;v++){p=v<<2;var T=o[w=v<<1];S[p]=T,S[p+1]=T,S[p+2]=T,S[p+3]=o[w+1]}if(L==16)for(v=0;v<g;v++){var w;p=v<<2,T=o[w=v<<2],S[p]=T,S[p+1]=T,S[p+2]=T,S[p+3]=o[w+2]}}else if(D==0)for(h=f.tabs.tRNS?f.tabs.tRNS:-1,C=0;C<i;C++){const R=C*E,W=C*l;if(L==1)for(var m=0;m<l;m++){var H=(T=255*(o[R+(m>>>3)]>>>7-(7&m)&1))==255*h?0:255;I[W+m]=H<<24|T<<16|T<<8|T}else if(L==2)for(m=0;m<l;m++)H=(T=85*(o[R+(m>>>2)]>>>6-((3&m)<<1)&3))==85*h?0:255,I[W+m]=H<<24|T<<16|T<<8|T;else if(L==4)for(m=0;m<l;m++)H=(T=17*(o[R+(m>>>1)]>>>4-((1&m)<<2)&15))==17*h?0:255,I[W+m]=H<<24|T<<16|T<<8|T;else if(L==8)for(m=0;m<l;m++)H=(T=o[R+m])==h?0:255,I[W+m]=H<<24|T<<16|T<<8|T;else if(L==16)for(m=0;m<l;m++)T=o[R+(m<<1)],H=U(o,R+(m<<1))==h?0:255,I[W+m]=H<<24|T<<16|T<<8|T}return S}function r(o,l,i,f){const g=n(o),j=Math.ceil(i*g/8),E=new Uint8Array((j+1+o.interlace)*f);return l=o.tabs.CgBI?e(l,E):t(l,E),o.interlace==0?l=a(l,o,0,i,f):o.interlace==1&&(l=(function(I,D){const L=D.width,U=D.height,v=n(D),M=v>>3,h=Math.ceil(L*v/8),p=new Uint8Array(U*h);let C=0;const N=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],A=[8,8,8,4,4,2,2],_=[8,8,4,4,2,2,1];let T=0;for(;T<7;){const m=A[T],H=_[T];let R=0,W=0,X=N[T];for(;X<U;)X+=m,W++;let K=y[T];for(;K<L;)K+=H,R++;const J=Math.ceil(R*v/8);a(I,D,C,R,W);let B=0,z=N[T];for(;z<U;){let ne=y[T],pe=C+B*J<<3;for(;ne<L;){var w;if(v==1&&(w=(w=I[pe>>3])>>7-(7&pe)&1,p[z*h+(ne>>3)]|=w<<7-((7&ne)<<0)),v==2&&(w=(w=I[pe>>3])>>6-(7&pe)&3,p[z*h+(ne>>2)]|=w<<6-((3&ne)<<1)),v==4&&(w=(w=I[pe>>3])>>4-(7&pe)&15,p[z*h+(ne>>1)]|=w<<4-((1&ne)<<2)),v>=8){const de=z*h+ne*M;for(let le=0;le<M;le++)p[de+le]=I[(pe>>3)+le]}pe+=v,ne+=H}B++,z+=m}R*W!=0&&(C+=W*(1+J)),T+=1}return p})(l,o)),l}function t(o,l){return e(new Uint8Array(o.buffer,2,o.length-6),l)}var e=(function(){const o={H:{}};return o.H.N=function(l,i){const f=Uint8Array;let g,j,E=0,S=0,I=0,D=0,L=0,U=0,v=0,M=0,h=0;if(l[0]==3&&l[1]==0)return i||new f(0);const p=o.H,C=p.b,N=p.e,y=p.R,A=p.n,_=p.A,T=p.Z,w=p.m,m=i==null;for(m&&(i=new f(l.length>>>2<<5));E==0;)if(E=C(l,h,1),S=C(l,h+1,2),h+=3,S!=0){if(m&&(i=o.H.W(i,M+(1<<17))),S==1&&(g=w.J,j=w.h,U=511,v=31),S==2){I=N(l,h,5)+257,D=N(l,h+5,5)+1,L=N(l,h+10,4)+4,h+=14;let R=1;for(var H=0;H<38;H+=2)w.Q[H]=0,w.Q[H+1]=0;for(H=0;H<L;H++){const K=N(l,h+3*H,3);w.Q[1+(w.X[H]<<1)]=K,K>R&&(R=K)}h+=3*L,A(w.Q,R),_(w.Q,R,w.u),g=w.w,j=w.d,h=y(w.u,(1<<R)-1,I+D,l,h,w.v);const W=p.V(w.v,0,I,w.C);U=(1<<W)-1;const X=p.V(w.v,I,D,w.D);v=(1<<X)-1,A(w.C,W),_(w.C,W,g),A(w.D,X),_(w.D,X,j)}for(;;){const R=g[T(l,h)&U];h+=15&R;const W=R>>>4;if(!(W>>>8))i[M++]=W;else{if(W==256)break;{let X=M+W-254;if(W>264){const ne=w.q[W-257];X=M+(ne>>>3)+N(l,h,7&ne),h+=7&ne}const K=j[T(l,h)&v];h+=15&K;const J=K>>>4,B=w.c[J],z=(B>>>4)+C(l,h,15&B);for(h+=15&B;M<X;)i[M]=i[M++-z],i[M]=i[M++-z],i[M]=i[M++-z],i[M]=i[M++-z];M=X}}}}else{(7&h)!=0&&(h+=8-(7&h));const R=4+(h>>>3),W=l[R-4]|l[R-3]<<8;m&&(i=o.H.W(i,M+W)),i.set(new f(l.buffer,l.byteOffset+R,W),M),h=R+W<<3,M+=W}return i.length==M?i:i.slice(0,M)},o.H.W=function(l,i){const f=l.length;if(i<=f)return l;const g=new Uint8Array(f<<1);return g.set(l,0),g},o.H.R=function(l,i,f,g,j,E){const S=o.H.e,I=o.H.Z;let D=0;for(;D<f;){const L=l[I(g,j)&i];j+=15&L;const U=L>>>4;if(U<=15)E[D]=U,D++;else{let v=0,M=0;U==16?(M=3+S(g,j,2),j+=2,v=E[D-1]):U==17?(M=3+S(g,j,3),j+=3):U==18&&(M=11+S(g,j,7),j+=7);const h=D+M;for(;D<h;)E[D]=v,D++}}return j},o.H.V=function(l,i,f,g){let j=0,E=0;const S=g.length>>>1;for(;E<f;){const I=l[E+i];g[E<<1]=0,g[1+(E<<1)]=I,I>j&&(j=I),E++}for(;E<S;)g[E<<1]=0,g[1+(E<<1)]=0,E++;return j},o.H.n=function(l,i){const f=o.H.m,g=l.length;let j,E,S,I;const D=f.j;for(var L=0;L<=i;L++)D[L]=0;for(L=1;L<g;L+=2)D[l[L]]++;const U=f.K;for(j=0,D[0]=0,E=1;E<=i;E++)j=j+D[E-1]<<1,U[E]=j;for(S=0;S<g;S+=2)I=l[S+1],I!=0&&(l[S]=U[I],U[I]++)},o.H.A=function(l,i,f){const g=l.length,j=o.H.m.r;for(let E=0;E<g;E+=2)if(l[E+1]!=0){const S=E>>1,I=l[E+1],D=S<<4|I,L=i-I;let U=l[E]<<L;const v=U+(1<<L);for(;U!=v;)f[j[U]>>>15-i]=D,U++}},o.H.l=function(l,i){const f=o.H.m.r,g=15-i;for(let j=0;j<l.length;j+=2){const E=l[j]<<i-l[j+1];l[j]=f[E]>>>g}},o.H.M=function(l,i,f){f<<=7&i;const g=i>>>3;l[g]|=f,l[g+1]|=f>>>8},o.H.I=function(l,i,f){f<<=7&i;const g=i>>>3;l[g]|=f,l[g+1]|=f>>>8,l[g+2]|=f>>>16},o.H.e=function(l,i,f){return(l[i>>>3]|l[1+(i>>>3)]<<8)>>>(7&i)&(1<<f)-1},o.H.b=function(l,i,f){return(l[i>>>3]|l[1+(i>>>3)]<<8|l[2+(i>>>3)]<<16)>>>(7&i)&(1<<f)-1},o.H.Z=function(l,i){return(l[i>>>3]|l[1+(i>>>3)]<<8|l[2+(i>>>3)]<<16)>>>(7&i)},o.H.i=function(l,i){return(l[i>>>3]|l[1+(i>>>3)]<<8|l[2+(i>>>3)]<<16|l[3+(i>>>3)]<<24)>>>(7&i)},o.H.m=(function(){const l=Uint16Array,i=Uint32Array;return{K:new l(16),j:new l(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new l(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new i(32),J:new l(512),_:[],h:new l(32),$:[],w:new l(32768),C:[],v:[],d:new l(32768),D:[],u:new l(512),Q:[],r:new l(32768),s:new i(286),Y:new i(30),a:new i(19),t:new i(15e3),k:new l(65536),g:new l(32768)}})(),(function(){const l=o.H.m;for(var i=0;i<32768;i++){let g=i;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,l.r[i]=(g>>>16|g<<16)>>>17}function f(g,j,E){for(;j--!=0;)g.push(0,E)}for(i=0;i<32;i++)l.q[i]=l.S[i]<<3|l.T[i],l.c[i]=l.p[i]<<4|l.z[i];f(l._,144,8),f(l._,112,9),f(l._,24,7),f(l._,8,8),o.H.n(l._,9),o.H.A(l._,9,l.J),o.H.l(l._,9),f(l.$,32,5),o.H.n(l.$,5),o.H.A(l.$,5,l.h),o.H.l(l.$,5),f(l.Q,19,0),f(l.C,286,0),f(l.D,30,0),f(l.v,320,0)})(),o.H.N})();function n(o){return[1,null,3,1,2,null,4][o.ctype]*o.depth}function a(o,l,i,f,g){let j=n(l);const E=Math.ceil(f*j/8);let S,I;j=Math.ceil(j/8);let D=o[i],L=0;if(D>1&&(o[i]=[0,0,1][D-2]),D==3)for(L=j;L<E;L++)o[L+1]=o[L+1]+(o[L+1-j]>>>1)&255;for(let U=0;U<g;U++)if(S=i+U*E,I=S+U+1,D=o[I-1],L=0,D==0)for(;L<E;L++)o[S+L]=o[I+L];else if(D==1){for(;L<j;L++)o[S+L]=o[I+L];for(;L<E;L++)o[S+L]=o[I+L]+o[S+L-j]}else if(D==2)for(;L<E;L++)o[S+L]=o[I+L]+o[S+L-E];else if(D==3){for(;L<j;L++)o[S+L]=o[I+L]+(o[S+L-E]>>>1);for(;L<E;L++)o[S+L]=o[I+L]+(o[S+L-E]+o[S+L-j]>>>1)}else{for(;L<j;L++)o[S+L]=o[I+L]+c(0,o[S+L-E],0);for(;L<E;L++)o[S+L]=o[I+L]+c(o[S+L-j],o[S+L-E],o[S+L-j-E])}return o}function c(o,l,i){const f=o+l-i,g=f-o,j=f-l,E=f-i;return g*g<=j*j&&g*g<=E*E?o:j*j<=E*E?l:i}function b(o,l,i){i.width=d.readUint(o,l),l+=4,i.height=d.readUint(o,l),l+=4,i.depth=o[l],l++,i.ctype=o[l],l++,i.compress=o[l],l++,i.filter=o[l],l++,i.interlace=o[l],l++}function x(o,l,i,f,g,j,E,S,I){const D=Math.min(l,g),L=Math.min(i,j);let U=0,v=0;for(let T=0;T<L;T++)for(let w=0;w<D;w++)if(E>=0&&S>=0?(U=T*l+w<<2,v=(S+T)*g+E+w<<2):(U=(-S+T)*l-E+w<<2,v=T*g+w<<2),I==0)f[v]=o[U],f[v+1]=o[U+1],f[v+2]=o[U+2],f[v+3]=o[U+3];else if(I==1){var M=o[U+3]*.00392156862745098,h=o[U]*M,p=o[U+1]*M,C=o[U+2]*M,N=f[v+3]*(1/255),y=f[v]*N,A=f[v+1]*N,_=f[v+2]*N;const m=1-M,H=M+N*m,R=H==0?0:1/H;f[v+3]=255*H,f[v+0]=(h+y*m)*R,f[v+1]=(p+A*m)*R,f[v+2]=(C+_*m)*R}else if(I==2)M=o[U+3],h=o[U],p=o[U+1],C=o[U+2],N=f[v+3],y=f[v],A=f[v+1],_=f[v+2],M==N&&h==y&&p==A&&C==_?(f[v]=0,f[v+1]=0,f[v+2]=0,f[v+3]=0):(f[v]=h,f[v+1]=p,f[v+2]=C,f[v+3]=M);else if(I==3){if(M=o[U+3],h=o[U],p=o[U+1],C=o[U+2],N=f[v+3],y=f[v],A=f[v+1],_=f[v+2],M==N&&h==y&&p==A&&C==_)continue;if(M<220&&N>20)return!1}return!0}return{decode:function(l){const i=new Uint8Array(l);let f=8;const g=d,j=g.readUshort,E=g.readUint,S={tabs:{},frames:[]},I=new Uint8Array(i.length);let D,L=0,U=0;const v=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(i[M]!=v[M])throw"The input is not a PNG file!";for(;f<i.length;){const T=g.readUint(i,f);f+=4;const w=g.readASCII(i,f,4);if(f+=4,w=="IHDR")b(i,f,S);else if(w=="iCCP"){for(var h=f;i[h]!=0;)h++;g.readASCII(i,f,h-f),i[h+1];const m=i.slice(h+2,f+T);let H=null;try{H=t(m)}catch{H=e(m)}S.tabs[w]=H}else if(w=="CgBI")S.tabs[w]=i.slice(f,f+4);else if(w=="IDAT"){for(M=0;M<T;M++)I[L+M]=i[f+M];L+=T}else if(w=="acTL")S.tabs[w]={num_frames:E(i,f),num_plays:E(i,f+4)},D=new Uint8Array(i.length);else if(w=="fcTL"){U!=0&&((_=S.frames[S.frames.length-1]).data=r(S,D.slice(0,U),_.rect.width,_.rect.height),U=0);const m={x:E(i,f+12),y:E(i,f+16),width:E(i,f+4),height:E(i,f+8)};let H=j(i,f+22);H=j(i,f+20)/(H==0?100:H);const R={rect:m,delay:Math.round(1e3*H),dispose:i[f+24],blend:i[f+25]};S.frames.push(R)}else if(w=="fdAT"){for(M=0;M<T-4;M++)D[U+M]=i[f+M+4];U+=T-4}else if(w=="pHYs")S.tabs[w]=[g.readUint(i,f),g.readUint(i,f+4),i[f+8]];else if(w=="cHRM")for(S.tabs[w]=[],M=0;M<8;M++)S.tabs[w].push(g.readUint(i,f+4*M));else if(w=="tEXt"||w=="zTXt"){S.tabs[w]==null&&(S.tabs[w]={});var p=g.nextZero(i,f),C=g.readASCII(i,f,p-f),N=f+T-p-1;if(w=="tEXt")A=g.readASCII(i,p+1,N);else{var y=t(i.slice(p+2,p+2+N));A=g.readUTF8(y,0,y.length)}S.tabs[w][C]=A}else if(w=="iTXt"){S.tabs[w]==null&&(S.tabs[w]={}),p=0,h=f,p=g.nextZero(i,h),C=g.readASCII(i,h,p-h);const m=i[h=p+1];var A;i[h+1],h+=2,p=g.nextZero(i,h),g.readASCII(i,h,p-h),h=p+1,p=g.nextZero(i,h),g.readUTF8(i,h,p-h),N=T-((h=p+1)-f),m==0?A=g.readUTF8(i,h,N):(y=t(i.slice(h,h+N)),A=g.readUTF8(y,0,y.length)),S.tabs[w][C]=A}else if(w=="PLTE")S.tabs[w]=g.readBytes(i,f,T);else if(w=="hIST"){const m=S.tabs.PLTE.length/3;for(S.tabs[w]=[],M=0;M<m;M++)S.tabs[w].push(j(i,f+2*M))}else if(w=="tRNS")S.ctype==3?S.tabs[w]=g.readBytes(i,f,T):S.ctype==0?S.tabs[w]=j(i,f):S.ctype==2&&(S.tabs[w]=[j(i,f),j(i,f+2),j(i,f+4)]);else if(w=="gAMA")S.tabs[w]=g.readUint(i,f)/1e5;else if(w=="sRGB")S.tabs[w]=i[f];else if(w=="bKGD")S.ctype==0||S.ctype==4?S.tabs[w]=[j(i,f)]:S.ctype==2||S.ctype==6?S.tabs[w]=[j(i,f),j(i,f+2),j(i,f+4)]:S.ctype==3&&(S.tabs[w]=i[f]);else if(w=="IEND")break;f+=T,g.readUint(i,f),f+=4}var _;return U!=0&&((_=S.frames[S.frames.length-1]).data=r(S,D.slice(0,U),_.rect.width,_.rect.height)),S.data=r(S,I,S.width,S.height),delete S.compress,delete S.interlace,delete S.filter,S},toRGBA8:function(l){const i=l.width,f=l.height;if(l.tabs.acTL==null)return[u(l.data,i,f,l).buffer];const g=[];l.frames[0].data==null&&(l.frames[0].data=l.data);const j=i*f*4,E=new Uint8Array(j),S=new Uint8Array(j),I=new Uint8Array(j);for(let L=0;L<l.frames.length;L++){const U=l.frames[L],v=U.rect.x,M=U.rect.y,h=U.rect.width,p=U.rect.height,C=u(U.data,h,p,l);if(L!=0)for(var D=0;D<j;D++)I[D]=E[D];if(U.blend==0?x(C,h,p,E,i,f,v,M,0):U.blend==1&&x(C,h,p,E,i,f,v,M,1),g.push(E.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)x(S,h,p,E,i,f,v,M,0);else if(U.dispose==2)for(D=0;D<j;D++)E[D]=I[D]}}return g},_paeth:c,_copyTile:x,_bin:d}})();(function(){const{_copyTile:d}=rt,{_bin:u}=rt,r=rt._paeth;var t={table:(function(){const h=new Uint32Array(256);for(let p=0;p<256;p++){let C=p;for(let N=0;N<8;N++)1&C?C=3988292384^C>>>1:C>>>=1;h[p]=C}return h})(),update(h,p,C,N){for(let y=0;y<N;y++)h=t.table[255&(h^p[C+y])]^h>>>8;return h},crc:(h,p,C)=>4294967295^t.update(4294967295,h,p,C)};function e(h,p,C,N){p[C]+=h[0]*N>>4,p[C+1]+=h[1]*N>>4,p[C+2]+=h[2]*N>>4,p[C+3]+=h[3]*N>>4}function n(h){return Math.max(0,Math.min(255,h))}function a(h,p){const C=h[0]-p[0],N=h[1]-p[1],y=h[2]-p[2],A=h[3]-p[3];return C*C+N*N+y*y+A*A}function c(h,p,C,N,y,A,_){_==null&&(_=1);const T=N.length,w=[];for(var m=0;m<T;m++){const z=N[m];w.push([z>>>0&255,z>>>8&255,z>>>16&255,z>>>24&255])}for(m=0;m<T;m++){let z=4294967295;for(var H=0,R=0;R<T;R++){var W=a(w[m],w[R]);R!=m&&W<z&&(z=W,H=R)}}const X=new Uint32Array(y.buffer),K=new Int16Array(p*C*4),J=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(m=0;m<J.length;m++)J[m]=255*((J[m]+.5)/16-.5);for(let z=0;z<C;z++)for(let ne=0;ne<p;ne++){var B;m=4*(z*p+ne),_!=2?B=[n(h[m]+K[m]),n(h[m+1]+K[m+1]),n(h[m+2]+K[m+2]),n(h[m+3]+K[m+3])]:(W=J[4*(3&z)+(3&ne)],B=[n(h[m]+W),n(h[m+1]+W),n(h[m+2]+W),n(h[m+3]+W)]),H=0;let pe=16777215;for(R=0;R<T;R++){const he=a(B,w[R]);he<pe&&(pe=he,H=R)}const de=w[H],le=[B[0]-de[0],B[1]-de[1],B[2]-de[2],B[3]-de[3]];_==1&&(ne!=p-1&&e(le,K,m+4,7),z!=C-1&&(ne!=0&&e(le,K,m+4*p-4,3),e(le,K,m+4*p,5),ne!=p-1&&e(le,K,m+4*p+4,1))),A[m>>2]=H,X[m>>2]=N[H]}}function b(h,p,C,N,y){y==null&&(y={});const{crc:A}=t,_=u.writeUint,T=u.writeUshort,w=u.writeASCII;let m=8;const H=h.frames.length>1;let R,W=!1,X=33+(H?20:0);if(y.sRGB!=null&&(X+=13),y.pHYs!=null&&(X+=21),y.iCCP!=null&&(R=pako.deflate(y.iCCP),X+=21+R.length+4),h.ctype==3){for(var K=h.plte.length,J=0;J<K;J++)h.plte[J]>>>24!=255&&(W=!0);X+=8+3*K+4+(W?8+1*K+4:0)}for(var B=0;B<h.frames.length;B++)H&&(X+=38),X+=(de=h.frames[B]).cimg.length+12,B!=0&&(X+=4);X+=12;const z=new Uint8Array(X),ne=[137,80,78,71,13,10,26,10];for(J=0;J<8;J++)z[J]=ne[J];if(_(z,m,13),m+=4,w(z,m,"IHDR"),m+=4,_(z,m,p),m+=4,_(z,m,C),m+=4,z[m]=h.depth,m++,z[m]=h.ctype,m++,z[m]=0,m++,z[m]=0,m++,z[m]=0,m++,_(z,m,A(z,m-17,17)),m+=4,y.sRGB!=null&&(_(z,m,1),m+=4,w(z,m,"sRGB"),m+=4,z[m]=y.sRGB,m++,_(z,m,A(z,m-5,5)),m+=4),y.iCCP!=null){const le=13+R.length;_(z,m,le),m+=4,w(z,m,"iCCP"),m+=4,w(z,m,"ICC profile"),m+=11,m+=2,z.set(R,m),m+=R.length,_(z,m,A(z,m-(le+4),le+4)),m+=4}if(y.pHYs!=null&&(_(z,m,9),m+=4,w(z,m,"pHYs"),m+=4,_(z,m,y.pHYs[0]),m+=4,_(z,m,y.pHYs[1]),m+=4,z[m]=y.pHYs[2],m++,_(z,m,A(z,m-13,13)),m+=4),H&&(_(z,m,8),m+=4,w(z,m,"acTL"),m+=4,_(z,m,h.frames.length),m+=4,_(z,m,y.loop!=null?y.loop:0),m+=4,_(z,m,A(z,m-12,12)),m+=4),h.ctype==3){for(_(z,m,3*(K=h.plte.length)),m+=4,w(z,m,"PLTE"),m+=4,J=0;J<K;J++){const le=3*J,he=h.plte[J],fe=255&he,Le=he>>>8&255,Ge=he>>>16&255;z[m+le+0]=fe,z[m+le+1]=Le,z[m+le+2]=Ge}if(m+=3*K,_(z,m,A(z,m-3*K-4,3*K+4)),m+=4,W){for(_(z,m,K),m+=4,w(z,m,"tRNS"),m+=4,J=0;J<K;J++)z[m+J]=h.plte[J]>>>24&255;m+=K,_(z,m,A(z,m-K-4,K+4)),m+=4}}let pe=0;for(B=0;B<h.frames.length;B++){var de=h.frames[B];H&&(_(z,m,26),m+=4,w(z,m,"fcTL"),m+=4,_(z,m,pe++),m+=4,_(z,m,de.rect.width),m+=4,_(z,m,de.rect.height),m+=4,_(z,m,de.rect.x),m+=4,_(z,m,de.rect.y),m+=4,T(z,m,N[B]),m+=2,T(z,m,1e3),m+=2,z[m]=de.dispose,m++,z[m]=de.blend,m++,_(z,m,A(z,m-30,30)),m+=4);const le=de.cimg;_(z,m,(K=le.length)+(B==0?0:4)),m+=4;const he=m;w(z,m,B==0?"IDAT":"fdAT"),m+=4,B!=0&&(_(z,m,pe++),m+=4),z.set(le,m),m+=K,_(z,m,A(z,he,m-he)),m+=4}return _(z,m,0),m+=4,w(z,m,"IEND"),m+=4,_(z,m,A(z,m-4,4)),m+=4,z.buffer}function x(h,p,C){for(let N=0;N<h.frames.length;N++){const y=h.frames[N];y.rect.width;const A=y.rect.height,_=new Uint8Array(A*y.bpl+A);y.cimg=f(y.img,A,y.bpp,y.bpl,_,p,C)}}function o(h,p,C,N,y){const A=y[0],_=y[1],T=y[2],w=y[3],m=y[4],H=y[5];let R=6,W=8,X=255;for(var K=0;K<h.length;K++){const Fe=new Uint8Array(h[K]);for(var J=Fe.length,B=0;B<J;B+=4)X&=Fe[B+3]}const z=X!=255,ne=(function(ye,ge,Te,Me,ke,Ne){const Ce=[];for(var _e=0;_e<ye.length;_e++){const De=new Uint8Array(ye[_e]),Ue=new Uint32Array(De.buffer);var He;let qe=0,Ze=0,Je=ge,Xe=Te,mt=Me?1:0;if(_e!=0){const Nt=Ne||Me||_e==1||Ce[_e-2].dispose!=0?1:2;let gt=0,yt=1e9;for(let lt=0;lt<Nt;lt++){var nt=new Uint8Array(ye[_e-1-lt]);const kt=new Uint32Array(ye[_e-1-lt]);let Ve=ge,ot=Te,pt=-1,it=-1;for(let et=0;et<Te;et++)for(let ct=0;ct<ge;ct++)Ue[Re=et*ge+ct]!=kt[Re]&&(ct<Ve&&(Ve=ct),ct>pt&&(pt=ct),et<ot&&(ot=et),et>it&&(it=et));pt==-1&&(Ve=ot=pt=it=0),ke&&((1&Ve)==1&&Ve--,(1&ot)==1&&ot--);const bt=(pt-Ve+1)*(it-ot+1);bt<yt&&(yt=bt,gt=lt,qe=Ve,Ze=ot,Je=pt-Ve+1,Xe=it-ot+1)}nt=new Uint8Array(ye[_e-1-gt]),gt==1&&(Ce[_e-1].dispose=2),He=new Uint8Array(Je*Xe*4),d(nt,ge,Te,He,Je,Xe,-qe,-Ze,0),mt=d(De,ge,Te,He,Je,Xe,-qe,-Ze,3)?1:0,mt==1?i(De,ge,Te,He,{x:qe,y:Ze,width:Je,height:Xe}):d(De,ge,Te,He,Je,Xe,-qe,-Ze,0)}else He=De.slice(0);Ce.push({rect:{x:qe,y:Ze,width:Je,height:Xe},img:He,blend:mt,dispose:0})}if(Me)for(_e=0;_e<Ce.length;_e++){if((st=Ce[_e]).blend==1)continue;const De=st.rect,Ue=Ce[_e-1].rect,qe=Math.min(De.x,Ue.x),Ze=Math.min(De.y,Ue.y),Je={x:qe,y:Ze,width:Math.max(De.x+De.width,Ue.x+Ue.width)-qe,height:Math.max(De.y+De.height,Ue.y+Ue.height)-Ze};Ce[_e-1].dispose=1,_e-1!=0&&l(ye,ge,Te,Ce,_e-1,Je,ke),l(ye,ge,Te,Ce,_e,Je,ke)}let ht=0;if(ye.length!=1)for(var Re=0;Re<Ce.length;Re++){var st;ht+=(st=Ce[Re]).rect.width*st.rect.height}return Ce})(h,p,C,A,_,T),pe={},de=[],le=[];if(N!=0){const Fe=[];for(B=0;B<ne.length;B++)Fe.push(ne[B].img.buffer);const ye=(function(ke){let Ne=0;for(var Ce=0;Ce<ke.length;Ce++)Ne+=ke[Ce].byteLength;const _e=new Uint8Array(Ne);let He=0;for(Ce=0;Ce<ke.length;Ce++){const nt=new Uint8Array(ke[Ce]),ht=nt.length;for(let Re=0;Re<ht;Re+=4){let st=nt[Re],De=nt[Re+1],Ue=nt[Re+2];const qe=nt[Re+3];qe==0&&(st=De=Ue=0),_e[He+Re]=st,_e[He+Re+1]=De,_e[He+Re+2]=Ue,_e[He+Re+3]=qe}He+=ht}return _e.buffer})(Fe),ge=j(ye,N);for(B=0;B<ge.plte.length;B++)de.push(ge.plte[B].est.rgba);let Te=0;for(B=0;B<ne.length;B++){const Me=(fe=ne[B]).img.length;var he=new Uint8Array(ge.inds.buffer,Te>>2,Me>>2);le.push(he);const ke=new Uint8Array(ge.abuf,Te,Me);H&&c(fe.img,fe.rect.width,fe.rect.height,de,ke,he),fe.img.set(ke),Te+=Me}}else for(K=0;K<ne.length;K++){var fe=ne[K];const Fe=new Uint32Array(fe.img.buffer);var Le=fe.rect.width;for(J=Fe.length,he=new Uint8Array(J),le.push(he),B=0;B<J;B++){const ye=Fe[B];if(B!=0&&ye==Fe[B-1])he[B]=he[B-1];else if(B>Le&&ye==Fe[B-Le])he[B]=he[B-Le];else{let ge=pe[ye];if(ge==null&&(pe[ye]=ge=de.length,de.push(ye),de.length>=300))break;he[B]=ge}}}const Ge=de.length;for(Ge<=256&&m==0&&(W=Ge<=2?1:Ge<=4?2:Ge<=16?4:8,W=Math.max(W,w)),K=0;K<ne.length;K++){(fe=ne[K]).rect.x,fe.rect.y,Le=fe.rect.width;const Fe=fe.rect.height;let ye=fe.img;new Uint32Array(ye.buffer);let ge=4*Le,Te=4;if(Ge<=256&&m==0){ge=Math.ceil(W*Le/8);var Ie=new Uint8Array(ge*Fe);const Me=le[K];for(let ke=0;ke<Fe;ke++){B=ke*ge;const Ne=ke*Le;if(W==8)for(var be=0;be<Le;be++)Ie[B+be]=Me[Ne+be];else if(W==4)for(be=0;be<Le;be++)Ie[B+(be>>1)]|=Me[Ne+be]<<4-4*(1&be);else if(W==2)for(be=0;be<Le;be++)Ie[B+(be>>2)]|=Me[Ne+be]<<6-2*(3&be);else if(W==1)for(be=0;be<Le;be++)Ie[B+(be>>3)]|=Me[Ne+be]<<7-1*(7&be)}ye=Ie,R=3,Te=1}else if(z==0&&ne.length==1){Ie=new Uint8Array(Le*Fe*3);const Me=Le*Fe;for(B=0;B<Me;B++){const ke=3*B,Ne=4*B;Ie[ke]=ye[Ne],Ie[ke+1]=ye[Ne+1],Ie[ke+2]=ye[Ne+2]}ye=Ie,R=2,Te=3,ge=3*Le}fe.img=ye,fe.bpl=ge,fe.bpp=Te}return{ctype:R,depth:W,plte:de,frames:ne}}function l(h,p,C,N,y,A,_){const T=Uint8Array,w=Uint32Array,m=new T(h[y-1]),H=new w(h[y-1]),R=y+1<h.length?new T(h[y+1]):null,W=new T(h[y]),X=new w(W.buffer);let K=p,J=C,B=-1,z=-1;for(let pe=0;pe<A.height;pe++)for(let de=0;de<A.width;de++){const le=A.x+de,he=A.y+pe,fe=he*p+le,Le=X[fe];Le==0||N[y-1].dispose==0&&H[fe]==Le&&(R==null||R[4*fe+3]!=0)||(le<K&&(K=le),le>B&&(B=le),he<J&&(J=he),he>z&&(z=he))}B==-1&&(K=J=B=z=0),_&&((1&K)==1&&K--,(1&J)==1&&J--),A={x:K,y:J,width:B-K+1,height:z-J+1};const ne=N[y];ne.rect=A,ne.blend=1,ne.img=new Uint8Array(A.width*A.height*4),N[y-1].dispose==0?(d(m,p,C,ne.img,A.width,A.height,-A.x,-A.y,0),i(W,p,C,ne.img,A)):d(W,p,C,ne.img,A.width,A.height,-A.x,-A.y,0)}function i(h,p,C,N,y){d(h,p,C,N,y.width,y.height,-y.x,-y.y,2)}function f(h,p,C,N,y,A,_){const T=[];let w,m=[0,1,2,3,4];A!=-1?m=[A]:(p*N>5e5||C==1)&&(m=[0]),_&&(w={level:0});const H=_n;for(var R=0;R<m.length;R++){for(let K=0;K<p;K++)g(y,h,K,N,C,m[R]);T.push(H.deflate(y,w))}let W,X=1e9;for(R=0;R<T.length;R++)T[R].length<X&&(W=R,X=T[R].length);return T[W]}function g(h,p,C,N,y,A){const _=C*N;let T=_+C;if(h[T]=A,T++,A==0)if(N<500)for(var w=0;w<N;w++)h[T+w]=p[_+w];else h.set(new Uint8Array(p.buffer,_,N),T);else if(A==1){for(w=0;w<y;w++)h[T+w]=p[_+w];for(w=y;w<N;w++)h[T+w]=p[_+w]-p[_+w-y]+256&255}else if(C==0){for(w=0;w<y;w++)h[T+w]=p[_+w];if(A==2)for(w=y;w<N;w++)h[T+w]=p[_+w];if(A==3)for(w=y;w<N;w++)h[T+w]=p[_+w]-(p[_+w-y]>>1)+256&255;if(A==4)for(w=y;w<N;w++)h[T+w]=p[_+w]-r(p[_+w-y],0,0)+256&255}else{if(A==2)for(w=0;w<N;w++)h[T+w]=p[_+w]+256-p[_+w-N]&255;if(A==3){for(w=0;w<y;w++)h[T+w]=p[_+w]+256-(p[_+w-N]>>1)&255;for(w=y;w<N;w++)h[T+w]=p[_+w]+256-(p[_+w-N]+p[_+w-y]>>1)&255}if(A==4){for(w=0;w<y;w++)h[T+w]=p[_+w]+256-r(0,p[_+w-N],0)&255;for(w=y;w<N;w++)h[T+w]=p[_+w]+256-r(p[_+w-y],p[_+w-N],p[_+w-y-N])&255}}}function j(h,p){const C=new Uint8Array(h),N=C.slice(0),y=new Uint32Array(N.buffer),A=E(N,p),_=A[0],T=A[1],w=C.length,m=new Uint8Array(w>>2);let H;if(C.length<2e7)for(var R=0;R<w;R+=4)H=S(_,W=C[R]*(1/255),X=C[R+1]*(1/255),K=C[R+2]*(1/255),J=C[R+3]*(1/255)),m[R>>2]=H.ind,y[R>>2]=H.est.rgba;else for(R=0;R<w;R+=4){var W=C[R]*.00392156862745098,X=C[R+1]*(1/255),K=C[R+2]*(1/255),J=C[R+3]*(1/255);for(H=_;H.left;)H=I(H.est,W,X,K,J)<=0?H.left:H.right;m[R>>2]=H.ind,y[R>>2]=H.est.rgba}return{abuf:N.buffer,inds:m,plte:T}}function E(h,p,C){C==null&&(C=1e-4);const N=new Uint32Array(h.buffer),y={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=U(h,y.i0,y.i1),y.est=v(y.bst);const A=[y];for(;A.length<p;){let T=0,w=0;for(var _=0;_<A.length;_++)A[_].est.L>T&&(T=A[_].est.L,w=_);if(T<C)break;const m=A[w],H=D(h,N,m.i0,m.i1,m.est.e,m.est.eMq255);if(m.i0>=H||m.i1<=H){m.est.L=0;continue}const R={i0:m.i0,i1:H,bst:null,est:null,tdst:0,left:null,right:null};R.bst=U(h,R.i0,R.i1),R.est=v(R.bst);const W={i0:H,i1:m.i1,bst:null,est:null,tdst:0,left:null,right:null};for(W.bst={R:[],m:[],N:m.bst.N-R.bst.N},_=0;_<16;_++)W.bst.R[_]=m.bst.R[_]-R.bst.R[_];for(_=0;_<4;_++)W.bst.m[_]=m.bst.m[_]-R.bst.m[_];W.est=v(W.bst),m.left=R,m.right=W,A[w]=R,A.push(W)}for(A.sort(((T,w)=>w.bst.N-T.bst.N)),_=0;_<A.length;_++)A[_].ind=_;return[y,A]}function S(h,p,C,N,y){if(h.left==null)return h.tdst=(function(R,W,X,K,J){const B=W-R[0],z=X-R[1],ne=K-R[2],pe=J-R[3];return B*B+z*z+ne*ne+pe*pe})(h.est.q,p,C,N,y),h;const A=I(h.est,p,C,N,y);let _=h.left,T=h.right;A>0&&(_=h.right,T=h.left);const w=S(_,p,C,N,y);if(w.tdst<=A*A)return w;const m=S(T,p,C,N,y);return m.tdst<w.tdst?m:w}function I(h,p,C,N,y){const{e:A}=h;return A[0]*p+A[1]*C+A[2]*N+A[3]*y-h.eMq}function D(h,p,C,N,y,A){for(N-=4;C<N;){for(;L(h,C,y)<=A;)C+=4;for(;L(h,N,y)>A;)N-=4;if(C>=N)break;const _=p[C>>2];p[C>>2]=p[N>>2],p[N>>2]=_,C+=4,N-=4}for(;L(h,C,y)>A;)C-=4;return C+4}function L(h,p,C){return h[p]*C[0]+h[p+1]*C[1]+h[p+2]*C[2]+h[p+3]*C[3]}function U(h,p,C){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],A=C-p>>2;for(let _=p;_<C;_+=4){const T=h[_]*.00392156862745098,w=h[_+1]*(1/255),m=h[_+2]*(1/255),H=h[_+3]*(1/255);y[0]+=T,y[1]+=w,y[2]+=m,y[3]+=H,N[0]+=T*T,N[1]+=T*w,N[2]+=T*m,N[3]+=T*H,N[5]+=w*w,N[6]+=w*m,N[7]+=w*H,N[10]+=m*m,N[11]+=m*H,N[15]+=H*H}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:y,N:A}}function v(h){const{R:p}=h,{m:C}=h,{N}=h,y=C[0],A=C[1],_=C[2],T=C[3],w=N==0?0:1/N,m=[p[0]-y*y*w,p[1]-y*A*w,p[2]-y*_*w,p[3]-y*T*w,p[4]-A*y*w,p[5]-A*A*w,p[6]-A*_*w,p[7]-A*T*w,p[8]-_*y*w,p[9]-_*A*w,p[10]-_*_*w,p[11]-_*T*w,p[12]-T*y*w,p[13]-T*A*w,p[14]-T*_*w,p[15]-T*T*w],H=m,R=M;let W=[Math.random(),Math.random(),Math.random(),Math.random()],X=0,K=0;if(N!=0)for(let B=0;B<16&&(W=R.multVec(H,W),K=Math.sqrt(R.dot(W,W)),W=R.sml(1/K,W),!(B!=0&&Math.abs(K-X)<1e-9));B++)X=K;const J=[y*w,A*w,_*w,T*w];return{Cov:m,q:J,e:W,L:X,eMq255:R.dot(R.sml(255,J),W),eMq:R.dot(W,J),rgba:(Math.round(255*J[3])<<24|Math.round(255*J[2])<<16|Math.round(255*J[1])<<8|Math.round(255*J[0])<<0)>>>0}}var M={multVec:(h,p)=>[h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],h[4]*p[0]+h[5]*p[1]+h[6]*p[2]+h[7]*p[3],h[8]*p[0]+h[9]*p[1]+h[10]*p[2]+h[11]*p[3],h[12]*p[0]+h[13]*p[1]+h[14]*p[2]+h[15]*p[3]],dot:(h,p)=>h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],sml:(h,p)=>[h*p[0],h*p[1],h*p[2],h*p[3]]};rt.encode=function(p,C,N,y,A,_,T){y==null&&(y=0),T==null&&(T=!1);const w=o(p,C,N,y,[!1,!1,!1,0,T,!1]);return x(w,-1),b(w,C,N,A,_)},rt.encodeLL=function(p,C,N,y,A,_,T,w){const m={ctype:0+(y==1?0:2)+(A==0?0:4),depth:_,frames:[]},H=(y+A)*_,R=H*C;for(let W=0;W<p.length;W++)m.frames.push({rect:{x:0,y:0,width:C,height:N},img:new Uint8Array(p[W]),blend:0,dispose:1,bpp:Math.ceil(H/8),bpl:Math.ceil(R/8)});return x(m,0,!0),b(m,C,N,T,w)},rt.encode.compress=o,rt.encode.dither=c,rt.quantize=j,rt.quantize.getKDtree=E,rt.quantize.getNearest=S})();const Pr={toArrayBuffer(d,u){const r=d.width,t=d.height,e=r<<2,n=d.getContext("2d").getImageData(0,0,r,t),a=new Uint32Array(n.data.buffer),c=(32*r+31)/32<<2,b=c*t,x=122+b,o=new ArrayBuffer(x),l=new DataView(o),i=1<<20;let f,g,j,E,S=i,I=0,D=0,L=0;function U(h){l.setUint16(D,h,!0),D+=2}function v(h){l.setUint32(D,h,!0),D+=4}function M(h){D+=h}U(19778),v(x),M(4),v(122),v(108),v(r),v(-t>>>0),U(1),U(32),v(3),v(b),v(2835),v(2835),M(8),v(16711680),v(65280),v(255),v(4278190080),v(1466527264),(function h(){for(;I<t&&S>0;){for(E=122+I*c,f=0;f<e;)S--,g=a[L++],j=g>>>24,l.setUint32(E+f,g<<8|j),f+=4;I++}L<a.length?(S=i,setTimeout(h,Pr._dly)):u(o)})()},toBlob(d,u){this.toArrayBuffer(d,(r=>{u(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var Ke={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},jn={[Ke.CHROME]:16384,[Ke.FIREFOX]:11180,[Ke.DESKTOP_SAFARI]:16384,[Ke.IE]:8192,[Ke.IOS]:4096,[Ke.ETC]:8192};const rr=typeof window<"u",Ir=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,It=rr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Cn=(rr||Ir)&&(It&&It.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Fr=(rr||Ir)&&(It&&It.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function nr(d,u,r=Date.now()){return new Promise((t=>{const e=d.split(","),n=e[0].match(/:(.*?);/)[1],a=globalThis.atob(e[1]);let c=a.length;const b=new Uint8Array(c);for(;c--;)b[c]=a.charCodeAt(c);const x=new Blob([b],{type:n});x.name=u,x.lastModified=r,t(x)}))}function Ur(d){return new Promise(((u,r)=>{const t=new Fr;t.onload=()=>u(t.result),t.onerror=e=>r(e),t.readAsDataURL(d)}))}function zr(d){return new Promise(((u,r)=>{const t=new Image;t.onload=()=>u(t),t.onerror=e=>r(e),t.src=d}))}function xt(){if(xt.cachedResult!==void 0)return xt.cachedResult;let d=Ke.ETC;const{userAgent:u}=navigator;return/Chrom(e|ium)/i.test(u)?d=Ke.CHROME:/iP(ad|od|hone)/i.test(u)&&/WebKit/i.test(u)?d=Ke.IOS:/Safari/i.test(u)?d=Ke.DESKTOP_SAFARI:/Firefox/i.test(u)?d=Ke.FIREFOX:(/MSIE/i.test(u)||document.documentMode)&&(d=Ke.IE),xt.cachedResult=d,xt.cachedResult}function Hr(d,u){const r=xt(),t=jn[r];let e=d,n=u,a=e*n;const c=e>n?n/e:e/n;for(;a>t*t;){const b=(t+e)/2,x=(t+n)/2;b<x?(n=x,e=x*c):(n=b*c,e=b),a=e*n}return{width:e,height:n}}function zt(d,u){let r,t;try{if(r=new OffscreenCanvas(d,u),t=r.getContext("2d"),t===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),t=r.getContext("2d")}return r.width=d,r.height=u,[r,t]}function Wr(d,u){const{width:r,height:t}=Hr(d.width,d.height),[e,n]=zt(r,t);return u&&/jpe?g/.test(u)&&(n.fillStyle="white",n.fillRect(0,0,e.width,e.height)),n.drawImage(d,0,0,e.width,e.height),e}function Dt(){return Dt.cachedResult!==void 0||(Dt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Dt.cachedResult}function Ft(d,u={}){return new Promise((function(r,t){let e,n;var a=function(){try{return n=Wr(e,u.fileType||d.type),r([e,n])}catch(b){return t(b)}},c=function(b){try{var x=function(o){try{throw o}catch(l){return t(l)}};try{let o;return Ur(d).then((function(l){try{return o=l,zr(o).then((function(i){try{return e=i,(function(){try{return a()}catch(f){return t(f)}})()}catch(f){return x(f)}}),x)}catch(i){return x(i)}}),x)}catch(o){x(o)}}catch(o){return t(o)}};try{if(Dt()||[Ke.DESKTOP_SAFARI,Ke.MOBILE_SAFARI].includes(xt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(d).then((function(b){try{return e=b,a()}catch{return c()}}),c)}catch{c()}}))}function Ut(d,u,r,t,e=1){return new Promise((function(n,a){let c;if(u==="image/png"){let x,o,l;return x=d.getContext("2d"),{data:o}=x.getImageData(0,0,d.width,d.height),l=rt.encode([o.buffer],d.width,d.height,4096*e),c=new Blob([l],{type:u}),c.name=r,c.lastModified=t,b.call(this)}{let x=function(){return b.call(this)};if(u==="image/bmp")return new Promise((o=>Pr.toBlob(d,o))).then((function(o){try{return c=o,c.name=r,c.lastModified=t,x.call(this)}catch(l){return a(l)}}).bind(this),a);{let o=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&d instanceof OffscreenCanvas)return d.convertToBlob({type:u,quality:e}).then((function(l){try{return c=l,c.name=r,c.lastModified=t,o.call(this)}catch(i){return a(i)}}).bind(this),a);{let l;return l=d.toDataURL(u,e),nr(l,r,t).then((function(i){try{return c=i,o.call(this)}catch(f){return a(f)}}).bind(this),a)}}}function b(){return n(c)}}))}function at(d){d.width=0,d.height=0}function wt(){return new Promise((function(d,u){let r,t,e,n;return wt.cachedResult!==void 0?d(wt.cachedResult):nr("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return r=a,Ft(r).then((function(c){try{return t=c[1],Ut(t,r.type,r.name,r.lastModified).then((function(b){try{return e=b,at(t),Ft(e).then((function(x){try{return n=x[0],wt.cachedResult=n.width===1&&n.height===2,d(wt.cachedResult)}catch(o){return u(o)}}),u)}catch(x){return u(x)}}),u)}catch(b){return u(b)}}),u)}catch(c){return u(c)}}),u)}))}function Or(d){return new Promise(((u,r)=>{const t=new Fr;t.onload=e=>{const n=new DataView(e.target.result);if(n.getUint16(0,!1)!=65496)return u(-2);const a=n.byteLength;let c=2;for(;c<a;){if(n.getUint16(c+2,!1)<=8)return u(-1);const b=n.getUint16(c,!1);if(c+=2,b==65505){if(n.getUint32(c+=2,!1)!=1165519206)return u(-1);const x=n.getUint16(c+=6,!1)==18761;c+=n.getUint32(c+4,x);const o=n.getUint16(c,x);c+=2;for(let l=0;l<o;l++)if(n.getUint16(c+12*l,x)==274)return u(n.getUint16(c+12*l+8,x))}else{if((65280&b)!=65280)break;c+=n.getUint16(c,!1)}}return u(-1)},t.onerror=e=>r(e),t.readAsArrayBuffer(d)}))}function $r(d,u){const{width:r}=d,{height:t}=d,{maxWidthOrHeight:e}=u;let n,a=d;return isFinite(e)&&(r>e||t>e)&&([a,n]=zt(r,t),r>t?(a.width=e,a.height=t/r*e):(a.width=r/t*e,a.height=e),n.drawImage(d,0,0,a.width,a.height),at(d)),a}function Br(d,u){const{width:r}=d,{height:t}=d,[e,n]=zt(r,t);switch(u>4&&u<9?(e.width=t,e.height=r):(e.width=r,e.height=t),u){case 2:n.transform(-1,0,0,1,r,0);break;case 3:n.transform(-1,0,0,-1,r,t);break;case 4:n.transform(1,0,0,-1,0,t);break;case 5:n.transform(0,1,1,0,0,0);break;case 6:n.transform(0,1,-1,0,t,0);break;case 7:n.transform(0,-1,-1,0,t,r);break;case 8:n.transform(0,-1,1,0,0,r)}return n.drawImage(d,0,0,r,t),at(d),e}function br(d,u,r=0){return new Promise((function(t,e){let n,a,c,b,x,o,l,i,f,g,j,E,S,I,D,L,U,v,M,h;function p(N=5){if(u.signal&&u.signal.aborted)throw u.signal.reason;n+=N,u.onProgress(Math.min(n,100))}function C(N){if(u.signal&&u.signal.aborted)throw u.signal.reason;n=Math.min(Math.max(N,n),100),u.onProgress(n)}return n=r,a=u.maxIteration||10,c=1024*u.maxSizeMB*1024,p(),Ft(d,u).then((function(N){try{return[,b]=N,p(),x=$r(b,u),p(),new Promise((function(y,A){var _;if(!(_=u.exifOrientation))return Or(d).then((function(w){try{return _=w,T.call(this)}catch(m){return A(m)}}).bind(this),A);function T(){return y(_)}return T.call(this)})).then((function(y){try{return o=y,p(),wt().then((function(A){try{return l=A?x:Br(x,o),p(),i=u.initialQuality||1,f=u.fileType||d.type,Ut(l,f,d.name,d.lastModified,i).then((function(_){try{{let w=function(){if(a--&&(D>c||D>S)){let H,R;return H=h?.95*M.width:M.width,R=h?.95*M.height:M.height,[U,v]=zt(H,R),v.drawImage(M,0,0,H,R),i*=f==="image/png"?.85:.95,Ut(U,f,d.name,d.lastModified,i).then((function(W){try{return L=W,at(M),M=U,D=L.size,C(Math.min(99,Math.floor((I-D)/(I-c)*100))),w}catch(X){return e(X)}}),e)}return[1]},m=function(){return at(M),at(U),at(x),at(l),at(b),C(100),t(L)};if(g=_,p(),j=g.size>c,E=g.size>d.size,!j&&!E)return C(100),t(g);var T;return S=d.size,I=g.size,D=I,M=l,h=!u.alwaysKeepResolution&&j,(T=(function(H){for(;H;){if(H.then)return void H.then(T,e);try{if(H.pop){if(H.length)return H.pop()?m.call(this):H;H=w}else H=H.call(this)}catch(R){return e(R)}}}).bind(this))(w)}}catch(w){return e(w)}}).bind(this),e)}catch(_){return e(_)}}).bind(this),e)}catch(A){return e(A)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)}))}const Sn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let qt;function Nn(d,u){return new Promise(((r,t)=>{qt||(qt=(function(a){const c=[];return c.push(a),URL.createObjectURL(new Blob(c))})(Sn));const e=new Worker(qt);e.addEventListener("message",(function(a){if(u.signal&&u.signal.aborted)e.terminate();else if(a.data.progress===void 0){if(a.data.error)return t(new Error(a.data.error)),void e.terminate();r(a.data.file),e.terminate()}else u.onProgress(a.data.progress)})),e.addEventListener("error",t),u.signal&&u.signal.addEventListener("abort",(()=>{t(u.signal.reason),e.terminate()})),e.postMessage({file:d,imageCompressionLibUrl:u.libURL,options:{...u,onProgress:void 0,signal:void 0}})}))}function Be(d,u){return new Promise((function(r,t){let e,n,a,c,b,x;if(e={...u},a=0,{onProgress:c}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,b=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=f=>{a=f,typeof c=="function"&&c(a)},!(d instanceof Blob||d instanceof Cn))return t(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(d.type))return t(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!b||typeof Worker!="function"||x)return br(d,e).then((function(f){try{return n=f,i.call(this)}catch(g){return t(g)}}).bind(this),t);var o=(function(){try{return i.call(this)}catch(f){return t(f)}}).bind(this),l=function(f){try{return br(d,e).then((function(g){try{return n=g,o()}catch(j){return t(j)}}),t)}catch(g){return t(g)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Nn(d,e).then((function(f){try{return n=f,o()}catch{return l()}}),l)}catch{l()}function i(){try{n.name=d.name,n.lastModified=d.lastModified}catch{}try{e.preserveExif&&d.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===d.type)&&(n=Dr(d,n))}catch{}return r(n)}}))}Be.getDataUrlFromFile=Ur,Be.getFilefromDataUrl=nr,Be.loadImage=zr,Be.drawImageInCanvas=Wr,Be.drawFileInCanvas=Ft,Be.canvasToFile=Ut,Be.getExifOrientation=Or,Be.handleMaxWidthOrHeight=$r,Be.followExifOrientation=Br,Be.cleanupCanvasMemory=at,Be.isAutoOrientationInBrowser=wt,Be.approximateBelowMaximumCanvasSizeOfBrowser=Hr,Be.copyExifWithoutOrientation=Dr,Be.getBrowserName=xt,Be.version="2.0.2";var tr=function(d,u){return tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])},tr(d,u)};function kn(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");tr(d,u);function r(){this.constructor=d}d.prototype=u===null?Object.create(u):(r.prototype=u.prototype,new r)}var ze=function(){return ze=Object.assign||function(u){for(var r,t=1,e=arguments.length;t<e;t++){r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(u[n]=r[n])}return u},ze.apply(this,arguments)};var Vt,wr;function An(){if(wr)return Vt;wr=1;var d=!1,u,r,t,e,n,a,c,b,x,o,l,i,f,g,j;function E(){if(!d){d=!0;var I=navigator.userAgent,D=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(I),L=/(Mac OS X)|(Windows)|(Linux)/.exec(I);if(i=/\b(iPhone|iP[ao]d)/.exec(I),f=/\b(iP[ao]d)/.exec(I),o=/Android/i.exec(I),g=/FBAN\/\w+;/i.exec(I),j=/Mobile/i.exec(I),l=!!/Win64/.exec(I),D){u=D[1]?parseFloat(D[1]):D[5]?parseFloat(D[5]):NaN,u&&document&&document.documentMode&&(u=document.documentMode);var U=/(?:Trident\/(\d+.\d+))/.exec(I);a=U?parseFloat(U[1])+4:u,r=D[2]?parseFloat(D[2]):NaN,t=D[3]?parseFloat(D[3]):NaN,e=D[4]?parseFloat(D[4]):NaN,e?(D=/(?:Chrome\/(\d+\.\d+))/.exec(I),n=D&&D[1]?parseFloat(D[1]):NaN):n=NaN}else u=r=t=n=e=NaN;if(L){if(L[1]){var v=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(I);c=v?parseFloat(v[1].replace("_",".")):!0}else c=!1;b=!!L[2],x=!!L[3]}else c=b=x=!1}}var S={ie:function(){return E()||u},ieCompatibilityMode:function(){return E()||a>u},ie64:function(){return S.ie()&&l},firefox:function(){return E()||r},opera:function(){return E()||t},webkit:function(){return E()||e},safari:function(){return S.webkit()},chrome:function(){return E()||n},windows:function(){return E()||b},osx:function(){return E()||c},linux:function(){return E()||x},iphone:function(){return E()||i},mobile:function(){return E()||i||f||o||j},nativeApp:function(){return E()||g},android:function(){return E()||o},ipad:function(){return E()||f}};return Vt=S,Vt}var Kt,vr;function En(){if(vr)return Kt;vr=1;var d=!!(typeof window<"u"&&window.document&&window.document.createElement),u={canUseDOM:d,canUseWorkers:typeof Worker<"u",canUseEventListeners:d&&!!(window.addEventListener||window.attachEvent),canUseViewport:d&&!!window.screen,isInWorker:!d};return Kt=u,Kt}var Zt,yr;function Ln(){if(yr)return Zt;yr=1;var d=En(),u;d.canUseDOM&&(u=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function r(t,e){if(!d.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,a=n in document;if(!a){var c=document.createElement("div");c.setAttribute(n,"return;"),a=typeof c[n]=="function"}return!a&&u&&t==="wheel"&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}return Zt=r,Zt}var Yt,_r;function Tn(){if(_r)return Yt;_r=1;var d=An(),u=Ln(),r=10,t=40,e=800;function n(a){var c=0,b=0,x=0,o=0;return"detail"in a&&(b=a.detail),"wheelDelta"in a&&(b=-a.wheelDelta/120),"wheelDeltaY"in a&&(b=-a.wheelDeltaY/120),"wheelDeltaX"in a&&(c=-a.wheelDeltaX/120),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(c=b,b=0),x=c*r,o=b*r,"deltaY"in a&&(o=a.deltaY),"deltaX"in a&&(x=a.deltaX),(x||o)&&a.deltaMode&&(a.deltaMode==1?(x*=t,o*=t):(x*=e,o*=e)),x&&!c&&(c=x<1?-1:1),o&&!b&&(b=o<1?-1:1),{spinX:c,spinY:b,pixelX:x,pixelY:o}}return n.getEventType=function(){return d.firefox()?"DOMMouseScroll":u("wheel")?"wheel":"mousewheel"},Yt=n,Yt}var Jt,jr;function Mn(){return jr||(jr=1,Jt=Tn()),Jt}var Rn=Mn();const Dn=fn(Rn);function Pn(d,u,r,t,e,n){n===void 0&&(n=0);var a=vt(d,u,n),c=a.width,b=a.height,x=Math.min(c,r),o=Math.min(b,t);return x>o*e?{width:o*e,height:o}:{width:x,height:x/e}}function In(d){return d.width>d.height?d.width/d.naturalWidth:d.height/d.naturalHeight}function St(d,u,r,t,e){e===void 0&&(e=0);var n=vt(u.width,u.height,e),a=n.width,c=n.height;return{x:Cr(d.x,a,r.width,t),y:Cr(d.y,c,r.height,t)}}function Cr(d,u,r,t){var e=u*t/2-r/2;return Ht(d,-e,e)}function Sr(d,u){return Math.sqrt(Math.pow(d.y-u.y,2)+Math.pow(d.x-u.x,2))}function Nr(d,u){return Math.atan2(u.y-d.y,u.x-d.x)*180/Math.PI}function Fn(d,u,r,t,e,n,a){n===void 0&&(n=0),a===void 0&&(a=!0);var c=a?Un:zn,b=vt(u.width,u.height,n),x=vt(u.naturalWidth,u.naturalHeight,n),o={x:c(100,((b.width-r.width/e)/2-d.x/e)/b.width*100),y:c(100,((b.height-r.height/e)/2-d.y/e)/b.height*100),width:c(100,r.width/b.width*100/e),height:c(100,r.height/b.height*100/e)},l=Math.round(c(x.width,o.width*x.width/100)),i=Math.round(c(x.height,o.height*x.height/100)),f=x.width>=x.height*t,g=f?{width:Math.round(i*t),height:i}:{width:l,height:Math.round(l/t)},j=ze(ze({},g),{x:Math.round(c(x.width-g.width,o.x*x.width/100)),y:Math.round(c(x.height-g.height,o.y*x.height/100))});return{croppedAreaPercentages:o,croppedAreaPixels:j}}function Un(d,u){return Math.min(d,Math.max(0,u))}function zn(d,u){return u}function Hn(d,u,r,t,e,n){var a=vt(u.width,u.height,r),c=Ht(t.width/a.width*(100/d.width),e,n),b={x:c*a.width/2-t.width/2-a.width*c*(d.x/100),y:c*a.height/2-t.height/2-a.height*c*(d.y/100)};return{crop:b,zoom:c}}function Wn(d,u,r){var t=In(u);return r.height>r.width?r.height/(d.height*t):r.width/(d.width*t)}function On(d,u,r,t,e,n){r===void 0&&(r=0);var a=vt(u.naturalWidth,u.naturalHeight,r),c=Ht(Wn(d,u,t),e,n),b=t.height>t.width?t.height/d.height:t.width/d.width,x={x:((a.width-d.width)/2-d.x)*b,y:((a.height-d.height)/2-d.y)*b};return{crop:x,zoom:c}}function kr(d,u){return{x:(u.x+d.x)/2,y:(u.y+d.y)/2}}function $n(d){return d*Math.PI/180}function vt(d,u,r){var t=$n(r);return{width:Math.abs(Math.cos(t)*d)+Math.abs(Math.sin(t)*u),height:Math.abs(Math.sin(t)*d)+Math.abs(Math.cos(t)*u)}}function Ht(d,u,r){return Math.min(Math.max(d,u),r)}function Tt(){for(var d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];return d.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var Bn=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Gn=1,qn=3,Vn=1,Kn=(function(d){kn(u,d);function u(){var r=d!==null&&d.apply(this,arguments)||this;return r.cropperRef=P.createRef(),r.imageRef=P.createRef(),r.videoRef=P.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.previousCropSize=null,r.isInitialized=!1,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var t=!0;r.resizeObserver=new window.ResizeObserver(function(e){if(t){t=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(t){return t.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var t=r.computeSizes();t&&(r.previousCropSize=t,r.emitCropData(),r.setInitialCrop(t),r.isInitialized=!0),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(t){if(r.props.initialCroppedAreaPercentages){var e=Hn(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,t,r.props.minZoom,r.props.maxZoom),n=e.crop,a=e.zoom;r.props.onCropChange(n),r.props.onZoomChange&&r.props.onZoomChange(a)}else if(r.props.initialCroppedAreaPixels){var c=On(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,t,r.props.minZoom,r.props.maxZoom),n=c.crop,a=c.zoom;r.props.onCropChange(n),r.props.onZoomChange&&r.props.onZoomChange(a)}},r.computeSizes=function(){var t,e,n,a,c,b,x=r.imageRef.current||r.videoRef.current;if(x&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var o=r.containerRect.width/r.containerRect.height,l=((t=r.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((e=r.videoRef.current)===null||e===void 0?void 0:e.videoWidth)||0,i=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalHeight)||((a=r.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,f=x.offsetWidth<l||x.offsetHeight<i,g=l/i,j=void 0;if(f)switch(r.state.mediaObjectFit){default:case"contain":j=o>g?{width:r.containerRect.height*g,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/g};break;case"horizontal-cover":j={width:r.containerRect.width,height:r.containerRect.width/g};break;case"vertical-cover":j={width:r.containerRect.height*g,height:r.containerRect.height};break}else j={width:x.offsetWidth,height:x.offsetHeight};r.mediaSize=ze(ze({},j),{naturalWidth:l,naturalHeight:i}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var E=r.props.cropSize?r.props.cropSize:Pn(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((c=r.state.cropSize)===null||c===void 0?void 0:c.height)!==E.height||((b=r.state.cropSize)===null||b===void 0?void 0:b.width)!==E.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(E),r.setState({cropSize:E},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(E),E}},r.saveContainerPosition=function(){if(r.containerRef){var t=r.containerRef.getBoundingClientRect();r.containerPosition={x:t.left,y:t.top}}},r.onMouseDown=function(t){r.currentDoc&&(t.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(u.getMousePoint(t)))},r.onMouseMove=function(t){return r.onDrag(u.getMousePoint(t))},r.onScroll=function(t){r.currentDoc&&(t.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(t){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(t))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),t.touches.length===2?r.onPinchStart(t):t.touches.length===1&&r.onDragStart(u.getTouchPoint(t.touches[0]))))},r.onTouchMove=function(t){t.preventDefault(),t.touches.length===2?r.onPinchMove(t):t.touches.length===1&&r.onDrag(u.getTouchPoint(t.touches[0]))},r.onGestureStart=function(t){r.currentDoc&&(t.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(t){if(t.preventDefault(),!r.isTouching){var e=u.getMousePoint(t),n=r.gestureZoomStart-1+t.scale;if(r.setNewZoom(n,e,{shouldUpdatePosition:!0}),r.props.onRotationChange){var a=r.gestureRotationStart+t.rotation;r.props.onRotationChange(a)}}},r.onGestureEnd=function(t){r.cleanEvents()},r.onDragStart=function(t){var e,n,a=t.x,c=t.y;r.dragStartPosition={x:a,y:c},r.dragStartCrop=ze({},r.props.crop),(n=(e=r.props).onInteractionStart)===null||n===void 0||n.call(e)},r.onDrag=function(t){var e=t.x,n=t.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(e===void 0||n===void 0)){var a=e-r.dragStartPosition.x,c=n-r.dragStartPosition.y,b={x:r.dragStartCrop.x+a,y:r.dragStartCrop.y+c},x=r.props.restrictPosition?St(b,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):b;r.props.onCropChange(x)}}))},r.onDragStopped=function(){var t,e;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(e=(t=r.props).onInteractionEnd)===null||e===void 0||e.call(t)},r.onWheel=function(t){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(t))){t.preventDefault();var e=u.getMousePoint(t),n=Dn(t).pixelY,a=r.props.zoom-n*r.props.zoomSpeed/200;r.setNewZoom(a,e,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var c,b;return(b=(c=r.props).onInteractionStart)===null||b===void 0?void 0:b.call(c)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var c,b;return(b=(c=r.props).onInteractionEnd)===null||b===void 0?void 0:b.call(c)})},250)}},r.getPointOnContainer=function(t,e){var n=t.x,a=t.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(n-e.x),y:r.containerRect.height/2-(a-e.y)}},r.getPointOnMedia=function(t){var e=t.x,n=t.y,a=r.props,c=a.crop,b=a.zoom;return{x:(e+c.x)/b,y:(n+c.y)/b}},r.setNewZoom=function(t,e,n){var a=n===void 0?{}:n,c=a.shouldUpdatePosition,b=c===void 0?!0:c;if(!(!r.state.cropSize||!r.props.onZoomChange)){var x=Ht(t,r.props.minZoom,r.props.maxZoom);if(b){var o=r.getPointOnContainer(e,r.containerPosition),l=r.getPointOnMedia(o),i={x:l.x*x-o.x,y:l.y*x-o.y},f=r.props.restrictPosition?St(i,r.mediaSize,r.state.cropSize,x,r.props.rotation):i;r.props.onCropChange(f)}r.props.onZoomChange(x)}},r.getCropData=function(){if(!r.state.cropSize)return null;var t=r.props.restrictPosition?St(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return Fn(t,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var t=r.getCropData();if(t){var e=t.croppedAreaPercentages,n=t.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(e,n),r.props.onCropAreaChange&&r.props.onCropAreaChange(e,n)}},r.emitCropAreaChange=function(){var t=r.getCropData();if(t){var e=t.croppedAreaPercentages,n=t.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(e,n)}},r.recomputeCropPosition=function(){var t,e;if(r.state.cropSize){var n=r.props.crop;if(r.isInitialized&&(!((t=r.previousCropSize)===null||t===void 0)&&t.width)&&(!((e=r.previousCropSize)===null||e===void 0)&&e.height)){var a=Math.abs(r.previousCropSize.width-r.state.cropSize.width)>1e-6||Math.abs(r.previousCropSize.height-r.state.cropSize.height)>1e-6;if(a){var c=r.state.cropSize.width/r.previousCropSize.width,b=r.state.cropSize.height/r.previousCropSize.height;n={x:r.props.crop.x*c,y:r.props.crop.y*b}}}var x=r.props.restrictPosition?St(n,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):n;r.previousCropSize=r.state.cropSize,r.props.onCropChange(x),r.emitCropData()}},r.onKeyDown=function(t){var e,n,a=r.props,c=a.crop,b=a.onCropChange,x=a.keyboardStep,o=a.zoom,l=a.rotation,i=x;if(r.state.cropSize){t.shiftKey&&(i*=.2);var f=ze({},c);switch(t.key){case"ArrowUp":f.y-=i,t.preventDefault();break;case"ArrowDown":f.y+=i,t.preventDefault();break;case"ArrowLeft":f.x-=i,t.preventDefault();break;case"ArrowRight":f.x+=i,t.preventDefault();break;default:return}r.props.restrictPosition&&(f=St(f,r.mediaSize,r.state.cropSize,o,l)),t.repeat||(n=(e=r.props).onInteractionStart)===null||n===void 0||n.call(e),b(f)}},r.onKeyUp=function(t){var e,n;switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t.preventDefault();break;default:return}r.emitCropData(),(n=(e=r.props).onInteractionEnd)===null||n===void 0||n.call(e)},r}return u.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Bn,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},u.prototype.componentWillUnmount=function(){var r,t;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((t=this.styleRef.parentNode)===null||t===void 0||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},u.prototype.componentDidUpdate=function(r){var t,e,n,a,c,b,x,o,l;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((t=r.cropSize)===null||t===void 0?void 0:t.height)!==((e=this.props.cropSize)===null||e===void 0?void 0:e.height)||((n=r.cropSize)===null||n===void 0?void 0:n.width)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.width)?this.computeSizes():(((c=r.crop)===null||c===void 0?void 0:c.x)!==((b=this.props.crop)===null||b===void 0?void 0:b.x)||((x=r.crop)===null||x===void 0?void 0:x.y)!==((o=this.props.crop)===null||o===void 0?void 0:o.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((l=this.videoRef.current)===null||l===void 0||l.load());var i=this.getObjectFit();i!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:i},this.computeSizes)},u.prototype.getAspect=function(){var r=this.props,t=r.cropSize,e=r.aspect;return t?t.width/t.height:e},u.prototype.getObjectFit=function(){var r,t,e,n;if(this.props.objectFit==="cover"){var a=this.imageRef.current||this.videoRef.current;if(a&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var c=this.containerRect.width/this.containerRect.height,b=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((t=this.videoRef.current)===null||t===void 0?void 0:t.videoWidth)||0,x=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalHeight)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoHeight)||0,o=b/x;return o<c?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},u.prototype.onPinchStart=function(r){var t=u.getTouchPoint(r.touches[0]),e=u.getTouchPoint(r.touches[1]);this.lastPinchDistance=Sr(t,e),this.lastPinchRotation=Nr(t,e),this.onDragStart(kr(t,e))},u.prototype.onPinchMove=function(r){var t=this;if(!(!this.currentDoc||!this.currentWindow)){var e=u.getTouchPoint(r.touches[0]),n=u.getTouchPoint(r.touches[1]),a=kr(e,n);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var c=Sr(e,n),b=t.props.zoom*(c/t.lastPinchDistance);t.setNewZoom(b,a,{shouldUpdatePosition:!1}),t.lastPinchDistance=c;var x=Nr(e,n),o=t.props.rotation+(x-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(o),t.lastPinchRotation=x})}},u.prototype.render=function(){var r=this,t,e=this.props,n=e.image,a=e.video,c=e.mediaProps,b=e.cropperProps,x=e.transform,o=e.crop,l=o.x,i=o.y,f=e.rotation,g=e.zoom,j=e.cropShape,E=e.showGrid,S=e.roundCropAreaPixels,I=e.style,D=I.containerStyle,L=I.cropAreaStyle,U=I.mediaStyle,v=e.classes,M=v.containerClassName,h=v.cropAreaClassName,p=v.mediaClassName,C=(t=this.state.mediaObjectFit)!==null&&t!==void 0?t:this.getObjectFit();return P.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(y){return r.containerRef=y},"data-testid":"container",style:D,className:Tt("reactEasyCrop_Container",M)},n?P.createElement("img",ze({alt:"",className:Tt("reactEasyCrop_Image",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",p)},c,{src:n,ref:this.imageRef,style:ze(ze({},U),{transform:x||"translate(".concat(l,"px, ").concat(i,"px) rotate(").concat(f,"deg) scale(").concat(g,")")}),onLoad:this.onMediaLoad})):a&&P.createElement("video",ze({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Tt("reactEasyCrop_Video",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",p)},c,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:ze(ze({},U),{transform:x||"translate(".concat(l,"px, ").concat(i,"px) rotate(").concat(f,"deg) scale(").concat(g,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(N){return P.createElement("source",ze({key:N.src},N))})),this.state.cropSize&&P.createElement("div",ze({ref:this.cropperRef,style:ze(ze({},L),{width:S?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:S?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Tt("reactEasyCrop_CropArea",j==="round"&&"reactEasyCrop_CropAreaRound",E&&"reactEasyCrop_CropAreaGrid",h)},b)))},u.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:qn,minZoom:Gn,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Vn},u.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},u.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},u})(P.Component);const Oe=[];for(let d=0;d<256;++d)Oe.push((d+256).toString(16).slice(1));function Zn(d,u=0){return(Oe[d[u+0]]+Oe[d[u+1]]+Oe[d[u+2]]+Oe[d[u+3]]+"-"+Oe[d[u+4]]+Oe[d[u+5]]+"-"+Oe[d[u+6]]+Oe[d[u+7]]+"-"+Oe[d[u+8]]+Oe[d[u+9]]+"-"+Oe[d[u+10]]+Oe[d[u+11]]+Oe[d[u+12]]+Oe[d[u+13]]+Oe[d[u+14]]+Oe[d[u+15]]).toLowerCase()}let Qt;const Yn=new Uint8Array(16);function Jn(){if(!Qt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Qt=crypto.getRandomValues.bind(crypto)}return Qt(Yn)}const Qn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ar={randomUUID:Qn};function Xn(d,u,r){d=d||{};const t=d.random??d.rng?.()??Jn();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=t[6]&15|64,t[8]=t[8]&63|128,Zn(t)}function es(d,u,r){return Ar.randomUUID&&!d?Ar.randomUUID():Xn(d)}const Er=50,Xt=d=>({id:d.id,league_id:d.league_id,user_id:d.user_id,content:d.content,created_at:d.created_at??new Date().toISOString(),status:"sent"}),Mt=d=>{const u=new Map;for(const r of d)u.set(r.id,r);return Array.from(u.values()).sort((r,t)=>new Date(r.created_at).getTime()-new Date(t.created_at).getTime())};function ts(d,u={}){const{userId:r,enabled:t=!0,autoSubscribe:e=!0}=u,[n,a]=P.useState([]),[c,b]=P.useState(!1),[x,o]=P.useState(!1),[l,i]=P.useState(!0),[f,g]=P.useState(null),j=P.useRef(null),E=P.useCallback(v=>{a(M=>{const h=v(M);return j.current=h.length?h[0].created_at:null,h})},[]),S=P.useCallback(async({before:v,append:M})=>{if(!d||!t)return;const h=se.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",d).order("created_at",{ascending:!1}).limit(Er);v&&h.lt("created_at",v);const{data:p,error:C}=await h;if(C)throw C;const N=(p??[]).map(Xt).reverse();E(y=>Mt(M?[...N,...y]:N)),(p??[]).length<Er?i(!1):M||i(!0)},[d,t,E]),I=P.useCallback(async()=>{if(!d||!t){a([]),i(!0);return}b(!0),g(null),j.current=null;try{await S({append:!1})}catch(v){g(v?.message??"Failed to load chat")}finally{b(!1)}},[d,t,S]);P.useEffect(()=>{if(!d||!t){a([]),i(!0);return}let v=!0;if(I(),!e)return()=>{v=!1};const M=se.channel(`league-messages:${d}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${d}`},h=>{if(!v)return;const p=Xt(h.new);E(C=>C.some(N=>N.id===p.id)?C:Mt([...C,p]))}).subscribe();return()=>{v=!1,se.removeChannel(M)}},[d,t,e,I,E]);const D=P.useCallback(async()=>{if(!d||!t||!l||x)return;const v=j.current??n[0]?.created_at;if(v){o(!0);try{await S({before:v,append:!0})}catch(M){g(M?.message??"Failed to load more messages")}finally{o(!1)}}},[d,t,l,x,S,n]),L=P.useCallback(async v=>{if(!d||!r)throw new Error("Missing league or user");const M=v.trim();if(!M)return;const h=es(),p=`optimistic-${h}`,C={id:p,client_msg_id:h,league_id:d,user_id:r,content:M,created_at:new Date().toISOString(),status:"sending"};E(A=>Mt([...A,C]));const{data:N,error:y}=await se.from("league_messages").insert({league_id:d,user_id:r,content:M}).select("id, league_id, user_id, content, created_at").single();if(y)throw E(A=>A.map(_=>_.id===p?{..._,status:"error"}:_)),y;if(N){const A=Xt(N);A.client_msg_id=h,E(_=>_.map(T=>T.id===p?{...A,status:"sent",client_msg_id:h}:T))}},[d,r,E]),U=P.useMemo(()=>n.slice(-5),[n]);return{messages:n,previewMessages:U,loading:c,loadingMore:x,hasMore:l,error:f,refresh:I,loadMore:D,sendMessage:L}}const rs={single:"rounded-tl-[12px] rounded-tr-[12px] rounded-br-[12px] rounded-bl-[12px]",top:"rounded-tl-[12px] rounded-tr-[12px] rounded-br-[12px] rounded-bl-[4px]",middle:"rounded-tl-[4px] rounded-tr-[12px] rounded-br-[12px] rounded-bl-[4px]",bottom:"rounded-tl-[4px] rounded-tr-[12px] rounded-br-[12px] rounded-bl-[12px]"},ns={single:"rounded-tl-[12px] rounded-tr-[12px] rounded-br-[12px] rounded-bl-[12px]",top:"rounded-tl-[12px] rounded-tr-[12px] rounded-br-[4px] rounded-bl-[12px]",middle:"rounded-tl-[12px] rounded-tr-[4px] rounded-br-[4px] rounded-bl-[12px]",bottom:"rounded-tl-[12px] rounded-tr-[4px] rounded-br-[12px] rounded-bl-[12px]"};function Gr({author:d,text:u,time:r,isOwnMessage:t,shape:e="single"}){const n=t?"text-right":"text-left",a=t?"bg-[#1C8376] text-white":"bg-white text-slate-900",c=t?ns:rs;return s.jsxs("div",{className:`inline-block w-fit px-3 py-2 text-sm leading-snug shadow-sm max-w-[70%] whitespace-normal break-words ${n} ${a} ${c[e]}`,children:[d&&!t&&s.jsx("div",{className:"text-[11px] font-semibold text-slate-600 mb-1",children:d}),s.jsx("div",{children:u}),s.jsx("div",{className:"text-[11px] text-[#DCDCDD] mt-1",children:r})]})}function ss({author:d,messages:u,isOwnMessage:r,avatarInitials:t}){const e=r?"justify-end":"justify-start";return s.jsxs("div",{className:`flex items-end gap-3 w-full ${e}`,children:[r?s.jsx("div",{className:"w-8 flex-shrink-0"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-[13px] font-semibold text-slate-500 flex-shrink-0",children:(t||d.charAt(0)).toUpperCase()}),s.jsx("div",{className:"flex flex-col gap-1 flex-1",children:u.map((n,a)=>{const c=u.length===1?"single":a===0?"top":a===u.length-1?"bottom":"middle";return s.jsxs("div",{className:`flex w-full ${r?"justify-end":"justify-start"}`,children:[s.jsx(Gr,{author:!r&&a===0?d:void 0,text:n.text,time:n.time,isOwnMessage:r,shape:c}),n.status&&s.jsx("div",{className:`text-[11px] ml-2 ${n.status==="error"?"text-red-500":"text-slate-400"}`,children:n.status==="error"?"Failed":"Sending"})]},n.id)})})]})}function os({groups:d}){return s.jsx("div",{className:"flex flex-col gap-5",children:d.map(u=>s.jsxs("div",{className:"flex flex-col gap-3",children:[u.dayLabel&&s.jsx("div",{className:"text-center text-xs uppercase tracking-wide text-slate-400",children:u.dayLabel}),s.jsx(ss,{author:u.author,avatarInitials:u.avatarInitials,isOwnMessage:u.isOwnMessage,messages:u.messages})]},u.id))})}const is=d=>new Date(d).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),as=d=>new Date(d).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"}),ls=d=>{const u=d.trim().split(/\s+/);return u.length===1?u[0][0]?.toUpperCase()??"?":`${u[0][0]?.toUpperCase()??""}${u[u.length-1][0]?.toUpperCase()??""}`},cs=(d,u)=>u?u instanceof Map?u.get(d)??"":u[d]??"":"";function ds({miniLeagueId:d,memberNames:u}){const{user:r}=Rr(),{messages:t,loading:e,loadingMore:n,hasMore:a,error:c,loadMore:b,sendMessage:x}=ts(d,{userId:r?.id,enabled:!!d}),[o,l]=P.useState(""),[i,f]=P.useState(!1),g=P.useRef(null),j=P.useRef(null),E=P.useRef(null),[S,I]=P.useState(0),D=P.useCallback(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[]),L=P.useCallback((y=[0,100,300,500,700])=>{requestAnimationFrame(()=>{y.forEach(A=>{setTimeout(()=>D(),A)})})},[D]);P.useEffect(()=>{t.length>0&&L([0,150,300])},[t.length,L]),P.useEffect(()=>{!o&&j.current&&(j.current.style.height="auto",j.current.style.height="42px")},[o]);const U=P.useCallback((y,A=[0,100,300,500,700])=>{const _=E.current?.offsetHeight||72;if(y>0){const T=y+_;I(y),g.current&&(g.current.style.paddingBottom=`${T+8}px`)}else I(0),g.current&&(g.current.style.paddingBottom=`${_+8}px`);L(A)},[L]);P.useEffect(()=>{const y=window.visualViewport;let A=null,_=0,T=!1;const w=()=>{if(y){const X=window.innerHeight,K=y.height,J=y.offsetTop+K;return Math.max(0,X-J)}else return 0},m=()=>{A&&(clearTimeout(A),A=null),A=setTimeout(()=>{const X=w();Math.abs(X-_)<10&&X>0&&!T||(_=X,U(X))},50)};y&&(y.addEventListener("resize",m),y.addEventListener("scroll",m)),window.addEventListener("resize",m);const H=()=>{T=!0,setTimeout(m,50),setTimeout(m,150),setTimeout(m,300),setTimeout(m,500)},R=()=>{T=!1,setTimeout(m,100)},W=setTimeout(()=>{j.current&&(j.current.addEventListener("focus",H),j.current.addEventListener("blur",R))},100);return m(),()=>{A&&clearTimeout(A),clearTimeout(W),y&&(y.removeEventListener("resize",m),y.removeEventListener("scroll",m)),window.removeEventListener("resize",m),j.current&&(j.current.removeEventListener("focus",H),j.current.removeEventListener("blur",R))}},[U]),P.useEffect(()=>{if(typeof window>"u")return;const y=()=>{const A=window.visualViewport;let _=0;if(A){const T=window.innerHeight,w=A.height,m=A.offsetTop+w;_=Math.max(0,T-m)}U(_)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[U]),P.useEffect(()=>{if(g.current&&E.current){const y=E.current.offsetHeight||72;g.current.style.paddingBottom=`${y+8}px`}},[]);const v=()=>{j.current&&j.current.removeAttribute("readonly");const y=()=>{const A=window.visualViewport;let _=0;if(A){const T=window.innerHeight,w=A.height,m=A.offsetTop+w;_=Math.max(0,T-m)}U(_,[0,100,200,400,600,800])};setTimeout(y,50),setTimeout(y,150),setTimeout(y,300),setTimeout(y,500),L([100,200,400,600])},M=y=>{const A=y.target;!(A.tagName==="A"||A.tagName==="BUTTON"||A.closest("a, button"))&&j.current&&document.activeElement===j.current&&j.current.blur()},h=P.useMemo(()=>{if(!r)return"";const y=r.user_metadata??{};return y.display_name||y.full_name||r.email||""},[r]),p=P.useMemo(()=>{if(!t.length)return[];const y=[];let A=null;return t.forEach(_=>{const T=_.user_id===r?.id,H=cs(_.user_id,u)||(T?h:"")||(T?"You":"Unknown"),R=T?void 0:ls(H),X=new Date(_.created_at).toDateString(),K=X!==A;K&&(A=X);const J={id:_.id,text:_.content,time:is(_.created_at),status:_.status&&_.status!=="sent"?_.status:void 0},B=y[y.length-1];B&&!K&&B.isOwnMessage===T&&B.author===H?B.messages.push(J):y.push({id:_.id,author:H,avatarInitials:R,isOwnMessage:T,dayLabel:K?as(_.created_at):void 0,messages:[J]})}),y},[h,u,t,r?.id]),C=P.useCallback(async y=>{if(!d||!r?.id||typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"))return;const _=r.user_metadata?.display_name||r.user_metadata?.full_name||r.email||"User";try{await fetch("/.netlify/functions/notifyLeagueMessageV2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:d,senderId:r.id,senderName:_,content:y})})}catch(T){console.error("[MiniLeagueChatBeta] notifyLeagueMessageV2 failed:",T)}},[d,r?.id]),N=P.useCallback(async()=>{const y=o.trim();if(!(!d||!y||i))try{f(!0),await x(y),await C(y),l(""),L([0,150,300])}catch(A){console.error("[MiniLeagueChatBeta] Failed to send message",A)}finally{f(!1)}},[o,d,C,L,x,i]);return s.jsxs("div",{className:"flex flex-col h-full bg-[#f5f6fb] w-full",style:{position:"relative"},children:[s.jsxs("div",{ref:g,className:"flex-1 overflow-y-auto px-4 py-5",onClick:M,style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",cursor:"pointer"},children:[a&&d&&s.jsx("button",{className:"mx-auto mb-2 text-xs font-semibold text-[#1C8376] bg-white px-3 py-1 rounded-full shadow disabled:opacity-40",onClick:b,disabled:n,children:n?"Loading earlier":"Load earlier messages"}),p.length===0&&!e?s.jsx("div",{className:"text-center text-sm text-slate-500 mt-8",children:"Say hi to kick off this chat!"}):s.jsx(os,{groups:p})]}),s.jsxs("div",{ref:E,className:"flex-shrink-0 border-t border-slate-200 bg-white px-4 py-3",style:{paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))",position:S>0?"fixed":"relative",bottom:S>0?`${S}px`:"0",left:S>0?0:"auto",right:S>0?0:"auto",width:"100%",maxWidth:S>0?"440px":"none",marginLeft:S>0?"auto":void 0,marginRight:S>0?"auto":void 0,zIndex:S>0?100:"auto",boxShadow:S>0?"0 -2px 8px rgba(0, 0, 0, 0.1)":"none",pointerEvents:"auto"},children:[s.jsxs("div",{className:"flex items-end gap-3 bg-slate-100 rounded-2xl px-3 py-2",children:[s.jsx("textarea",{ref:j,className:"flex-1 bg-transparent resize-none focus:outline-none text-sm text-slate-800 placeholder:text-slate-400",rows:1,value:o,disabled:!d||i,placeholder:d?"Start typing a message":"Join this league to chat",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,inputMode:"text","data-1p-ignore":"true",readOnly:!1,onMouseDown:()=>{j.current&&j.current.removeAttribute("readonly")},onTouchStart:()=>{j.current&&j.current.removeAttribute("readonly")},onChange:y=>{l(y.target.value),j.current&&(j.current.style.height="auto",j.current.style.height=`${Math.min(j.current.scrollHeight,120)}px`),requestAnimationFrame(()=>{const A=window.visualViewport;if(A){const _=window.innerHeight,T=A.height,w=A.offsetTop+T,m=_-w;U(m,[0,100])}})},onFocus:v,onKeyDown:y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),N())},style:{minHeight:"42px",maxHeight:"120px",lineHeight:"1.5"}}),s.jsx("button",{type:"button",onClick:N,disabled:!d||i||!o.trim(),className:"w-10 h-10 rounded-full bg-[#1C8376] text-white flex items-center justify-center disabled:opacity-40",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M12 5l7 7-7 7"})})})]}),c&&s.jsxs("div",{className:"text-xs text-red-500 mt-2 text-center",children:[c,"  try again or switch to the classic chat tab."]})]})]})}function us({winnerName:d,isDraw:u}){return s.jsx("div",{className:"mt-4 mb-4 py-6 px-6 rounded-xl bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 shadow-2xl shadow-slate-600/50 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/30 after:to-transparent after:animate-[shimmer_2.5s_ease-in-out_infinite_0.6s]",children:s.jsx("div",{className:"text-center relative z-10",children:u?s.jsx("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:"It's a Draw!"}):s.jsxs("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:[d," Wins!"]})})})}function fs({availableGws:d,selectedGw:u,onChange:r,className:t=""}){return d.length<=1?null:s.jsx("div",{className:`flex-1 ${t}`,children:s.jsx("select",{value:u||void 0,onChange:e=>{const n=parseInt(e.target.value,10);r(n)},className:"gw-selector w-full bg-white rounded-full border-2 border-slate-300 px-3 py-2 text-xs font-normal text-slate-600 text-center focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-[#1C8376] active:bg-slate-50 transition-colors",style:{fontSize:"12px",minHeight:"40px",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2.5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1em 1em",paddingRight:"2.5rem"},children:d.map(e=>s.jsxs("option",{value:e,style:{fontSize:"12px",padding:"0.5rem",fontWeight:"normal",color:"#64748b"},children:["Gameweek ",e]},e))})})}function hs({showForm:d,onToggle:u}){return s.jsxs("div",{className:"inline-flex rounded-full bg-slate-100 p-0.5 shadow-sm border border-slate-200",children:[s.jsx("button",{onClick:()=>u(!1),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${d?"text-slate-600 hover:text-slate-900 hover:bg-white/50":"bg-[#1C8376] text-white shadow-sm"}`,children:"Points"}),s.jsx("button",{onClick:()=>u(!0),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${d?"bg-[#1C8376] text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"Form"})]})}function ms({form:d}){const u=d.slice(-5),r=5-u.length;return s.jsxs("div",{className:"flex items-center justify-between w-full",children:[Array.from({length:r}).map((t,e)=>s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-200"},`dot-${e}`)),u.map((t,e)=>s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${t==="W"?"bg-green-100 text-green-700":t==="D"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:t},e))]})}function ps({rows:d,members:u,showForm:r,currentUserId:t,loading:e,isLateStartingLeague:n}){return s.jsxs("div",{className:"pt-4",children:[s.jsx("style",{children:`
        .mlt-table tbody tr:last-child {
          border-bottom: none !important;
          border: none !important;
        }
        .mlt-table tbody tr:last-child td {
          border-bottom: none !important;
          border: none !important;
        }
        .mlt-table tbody tr:last-child th {
          border-bottom: none !important;
          border: none !important;
        }
        .mlt-table {
          border-bottom: none !important;
        }
        .mlt-table tbody {
          border-bottom: none !important;
        }
        .mlt-table-container {
          border-bottom: none !important;
        }
        .mlt-table-container table {
          border-bottom: none !important;
        }
        .mlt-table-container tbody {
          border-bottom: none !important;
        }
        .mlt-table-container tbody tr:last-child {
          border-bottom: none !important;
          border: none !important;
        }
        .mlt-table-container tbody tr:last-child td {
          border-bottom: none !important;
          border: none !important;
        }
      `}),s.jsx("div",{className:"mlt-table-container overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x bg-slate-50",style:{backgroundColor:"#f8fafc",borderBottom:"none",boxShadow:"none"},children:s.jsxs("table",{className:"mlt-table w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc",border:"none",borderBottom:"none"},children:[s.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:s.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[s.jsx("th",{className:"py-3 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),s.jsx("th",{className:"py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:"Player"}),r?s.jsx("th",{className:"px-4 py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8"},children:"Form"}):s.jsxs(s.Fragment,{children:[s.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"W"}),s.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"D"}),s.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:n?"CP":"OCP"}),u.length>=3&&s.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""}),s.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"PTS"})]})]})}),s.jsxs("tbody",{children:[d.map((a,c)=>{const b=a.user_id===t,x=c===d.length-1;return s.jsxs("tr",{className:b?"flash-user-row":"",style:{position:"relative",backgroundColor:"#f8fafc",...x?{}:{borderBottom:"1px solid #e2e8f0"}},children:[s.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:c+1}),s.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:a.name}),r?s.jsx("td",{className:"px-4 py-4",style:{backgroundColor:"#f8fafc"},children:s.jsx(ms,{form:a.form})}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:a.wins}),s.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:a.draws}),s.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:a.ocp}),u.length>=3&&s.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:a.unicorns}),s.jsx("td",{className:"py-4 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:a.mltPts})]})]},a.user_id)}),e&&s.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:s.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:r?3:u.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"Calculating"})}),!e&&!d.length&&s.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:s.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:r?3:u.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"No gameweeks completed yet  this will populate after the first results are saved."})})]})]})})]})}function gs({rows:d,members:u,currentUserId:r,positionChangeKeys:t,isApiTestLeague:e,hasLiveFixtures:n,hasStartingSoonFixtures:a,hasStartedFixtures:c,allFixturesFinished:b,resGw:x}){return s.jsxs("div",{children:[s.jsx("style",{children:`
        @keyframes flash {
          0%, 100% {
            background-color: rgb(209, 250, 229);
          }
          25% {
            background-color: rgb(167, 243, 208);
          }
          50% {
            background-color: rgb(209, 250, 229);
          }
          75% {
            background-color: rgb(167, 243, 208);
          }
        }
        @keyframes pulse-score {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.7;
          }
        }
        @keyframes position-change {
          0% {
            background-color: rgb(254, 243, 199);
          }
          50% {
            background-color: rgb(253, 230, 138);
          }
          100% {
            background-color: transparent;
          }
        }
        .flash-user-row {
          animation: flash 1.5s ease-in-out 3;
        }
        .pulse-live-score {
          animation: pulse-score 2s ease-in-out infinite;
        }
        .position-changed {
          animation: position-change 1.5s ease-out;
        }
        .full-width-header-border::after {
          content: '';
          position: absolute;
          left: -1rem;
          right: -1rem;
          bottom: 0;
          height: 1px;
          background-color: #cbd5e1;
          z-index: 1;
        }
      `}),s.jsx("div",{className:"overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x border-b border-slate-200 bg-slate-50 shadow-sm",style:{backgroundColor:"#f8fafc"},children:s.jsxs("table",{className:"w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc"},children:[s.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:s.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[s.jsx("th",{className:"py-4 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),s.jsx("th",{className:"py-4 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:s.jsxs("div",{className:"flex items-center gap-2",children:["Player",e&&n&&s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-600 text-white shadow-md shadow-red-500/30",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),s.jsx("span",{className:"text-[10px] font-medium",children:"LIVE"})]}),e&&!b&&a&&!n&&s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500 text-white shadow-md shadow-amber-500/30",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-[10px] font-medium",children:c?"Next Game Starting Soon":"Starting soon"})]})]})}),s.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8"},children:"Score"}),u.length>=3&&s.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""})]})}),s.jsxs("tbody",{children:[d.map((o,l)=>{const i=o.user_id===r,f=l===d.length-1,g=t.has(o.user_id);return s.jsxs("tr",{className:`${i?"flash-user-row":""} ${g?"position-changed":""}`,style:{position:"relative",backgroundColor:"#f8fafc",...f?{}:{borderBottom:"1px solid #e2e8f0"}},children:[s.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:l+1}),s.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:s.jsxs("div",{className:"flex items-center gap-2",children:[e&&n&&s.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse flex-shrink-0",style:{minWidth:"8px",minHeight:"8px"}}),e&&!n&&a&&s.jsx("svg",{className:"w-3 h-3 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:o.name})]})}),s.jsx("td",{className:`py-4 text-center tabular-nums font-bold ${e&&n?"pulse-live-score":""}`,style:{width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:o.score}),u.length>=3&&s.jsx("td",{className:`py-4 text-center tabular-nums ${e&&n?"pulse-live-score":""}`,style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:o.unicorns})]},o.user_id)}),!d.length&&s.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:s.jsxs("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:u.length>=3?4:3,style:{backgroundColor:"#f8fafc"},children:["No results recorded for GW ",x," yet."]})})]})]})})]})}function xs(d){const u=hn(),r=encodeURIComponent(d);if(u){const t=`whatsapp://send?text=${r}`;let e=!1,n=!1;try{const a=document.createElement("a");a.href=t,a.style.display="none",document.body.appendChild(a),a.click(),e=!0,setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},100)}catch{}if(!e)try{window.open(t),n=!0}catch{}if(!e&&!n)try{window.location.href=t}catch{window.open(`https://wa.me/?text=${r}`,"_blank")}}else{const t=`https://wa.me/?text=${r}`;try{window.open(t,"_blank")}catch{navigator.clipboard.writeText(d).then(()=>{alert("Message copied to clipboard! You can now paste it in WhatsApp or Messages.")}).catch(()=>{alert(`Unable to open WhatsApp. Please copy this message manually:

`+d)})}}}function bs(d,u){const r=new Date(u.find(l=>l.gw===d)?.kickoff_time||""),t=new Date(r.getTime()-4500*1e3),e=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],n=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=e[t.getUTCDay()],c=t.getUTCDate(),b=n[t.getUTCMonth()],x=t.getUTCHours().toString().padStart(2,"0"),o=t.getUTCMinutes().toString().padStart(2,"0");return`Gameweek ${d} Predictions Reminder!

DEADLINE: THIS ${a} ${c} ${b}, ${x}:${o} BST

Don't forget!
playtotl.com`}function ws(d,u){console.log("[SubmissionStatusTable] handleShareReminder called, picksGw:",d);try{const r=bs(d,u);console.log("[SubmissionStatusTable] Generated message:",r),xs(r)}catch(r){console.error("[SubmissionStatusTable] Error in handleShareReminder:",r),alert("Error sharing reminder. Please try again.")}}function Lr({members:d,submittedMap:u,picksGw:r,allSubmitted:t,remaining:e,fixtures:n,onShareReminder:a,variant:c="full"}){const b=a||(()=>ws(r,n)),x=n.map(g=>g.kickoff_time).filter(g=>!!g).map(g=>new Date(g)).filter(g=>!isNaN(g.getTime())),o=x.length>0?new Date(Math.min(...x.map(g=>g.getTime()))):null,l=o?new Date(o.getTime()-4500*1e3):null,i=l?new Date>=l:!1;let f="";if(l){const g=c==="compact"?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],E=g[l.getUTCDay()],S=l.getUTCDate(),I=j[l.getUTCMonth()],D=l.getUTCHours().toString().padStart(2,"0"),L=l.getUTCMinutes().toString().padStart(2,"0");f=`${E} ${S} ${I}, ${D}:${L} BST`}return c==="compact"?s.jsxs("div",{className:"mt-2 pt-2",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:s.jsxs(s.Fragment,{children:["Waiting for ",s.jsx("span",{className:"font-semibold",children:e})," of ",d.length," to submit."]})}),!t&&s.jsxs("button",{type:"button",onClick:g=>{g.preventDefault(),g.stopPropagation(),console.log("[SubmissionStatusTable] Button clicked (compact variant)"),b()},className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium hover:bg-emerald-700 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share Reminder"]})]}),f&&s.jsxs("div",{className:`mb-3 text-xs font-medium ${i?"text-orange-600":"text-slate-600"} flex items-center gap-1.5`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i?"Deadline Passed: ":"Deadline: ",f]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 bg-white",children:s.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),s.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),s.jsx("tbody",{children:d.slice().sort((g,j)=>g.name.localeCompare(j.name)).map(g=>{const j=`${g.id}:${r}`,E=!!u.get(j);return s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 truncate whitespace-nowrap",style:{overflow:"hidden",textOverflow:"ellipsis"},children:g.name}),s.jsx("td",{className:"px-4 py-3",children:E?s.jsxs("span",{className:"inline-flex items-center gap-1.5 justify-center rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-xs px-2.5 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Submitted"]}):s.jsxs("span",{className:"inline-flex items-center gap-1.5 justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2.5 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Not yet"]})})]},g.id)})})]})})]}):s.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-700",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("div",{children:t?s.jsxs(s.Fragment,{children:["All ",d.length," members have submitted."]}):s.jsxs(s.Fragment,{children:["Waiting for ",s.jsx("span",{className:"font-semibold",children:e})," of ",d.length," to submit."]})}),!t&&s.jsxs("button",{type:"button",onClick:g=>{g.preventDefault(),g.stopPropagation(),console.log("[SubmissionStatusTable] Button clicked (full variant)"),b()},className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share Reminder"]})]}),f&&s.jsxs("div",{className:`mb-3 text-sm ${i?"text-orange-600 font-semibold":"text-slate-600"}`,children:[i?" Deadline Passed: ":" Deadline: ",f]}),s.jsx("div",{className:"overflow-hidden rounded-lg border",children:s.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),s.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),s.jsx("tbody",{children:d.slice().sort((g,j)=>g.name.localeCompare(j.name)).map(g=>{const j=`${g.id}:${r}`,E=!!u.get(j);return s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 truncate whitespace-nowrap",style:{overflow:"hidden",textOverflow:"ellipsis"},children:g.name}),s.jsx("td",{className:"px-4 py-3",children:E?s.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-xs px-2 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:" Submitted"}):s.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:" Not yet"})})]},g.id)})})]})})]})}function Tr({letter:d,correct:u,unicorn:r,hasSubmitted:t,isLive:e,isOngoing:n,isFinished:a}){let c;return u===!0?e||n?c="bg-emerald-600 text-white border-emerald-600 animate-pulse shadow-lg shadow-emerald-500/50":a?c="bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 relative overflow-hidden animate-pulse before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":c="bg-emerald-600 text-white border-emerald-600":t?c="bg-emerald-600 text-white border-emerald-600":c="bg-slate-100 text-slate-600 border-slate-200",s.jsx("span",{className:["inline-flex items-center justify-center h-5 min-w-[18px] px-1.5","rounded-full border text-[11px] font-semibold mb-0.5","align-middle",c].join(" "),title:r?"Correct!":void 0,children:d})}function vs(d,u){return d==="FINISHED"?"FT":d==="PAUSED"?"HT":d==="IN_PLAY"?u==null?"LIVE":`${u}'`:"LIVE"}function ys(d){const u=(d||"?").trim().split(/\s+/);return u.length?u.length===1?u[0].slice(0,1).toUpperCase():(u[0][0]+u[u.length-1][0]).toUpperCase():"?"}function _s({fixture:d,picks:u,members:r,outcome:t,liveScore:e,submittedMap:n,picksGw:a,isApiTestLeague:c=!1}){const b=d.home_code||d.home_team||d.home_name||"",x=d.away_code||d.away_team||d.away_name||"",o=fr(b)||d.home_name||d.home_team||"Home",l=fr(x)||d.away_name||d.away_team||"Away",f=(L=>{if(!L)return"";const U=new Date(L);if(isNaN(U.getTime()))return"";const v=String(U.getUTCHours()).padStart(2,"0"),M=String(U.getUTCMinutes()).padStart(2,"0");return`${v}:${M}`})(d.kickoff_time),g=!!(e&&e.status==="IN_PLAY"),j=!!(e&&(e.status==="PAUSED"||e.status==="HALF_TIME"||e.status==="HT")),E=!!(e&&e.status==="FINISHED"),S=g||j;let I=null;c&&e?e.homeScore>e.awayScore?I="H":e.awayScore>e.homeScore?I="A":e.homeScore===e.awayScore&&(I="D"):I=t;const D=L=>{const U=u.filter(p=>p.pick===L),v=u.length===r.length&&U.length===r.length,M=4,h=[];for(let p=0;p<U.length;p+=M){const C=U.slice(p,p+M);h.push(C)}return s.jsx("div",{className:"flex flex-col gap-1",children:h.map((p,C)=>s.jsx("div",{className:"flex items-center justify-center",children:p.map((N,y)=>{const A=r.find(m=>m.id===N.user_id),_=ys(A?.name??"?"),T=n.has(`${N.user_id}:${a}`),w=I&&I===L?!0:null;return v?s.jsx("span",{className:"inline-block",style:{marginLeft:y>0?"-8px":"0",position:"relative",zIndex:y},children:s.jsx(Tr,{letter:_,correct:w,unicorn:w===!0,hasSubmitted:T,isLive:g,isOngoing:S,isFinished:E})},N.user_id):s.jsx(Tr,{letter:_,correct:w,unicorn:w===!0,hasSubmitted:T,isLive:g,isOngoing:S,isFinished:E},N.user_id)})},C))})};return s.jsx("li",{className:"border-t first:border-t-0",children:s.jsxs("div",{className:"p-4 bg-white relative",children:[(g||j)&&s.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs font-bold text-red-600",children:"LIVE"})]}),E&&!g&&!j&&s.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:s.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"FT"})}),s.jsxs("div",{className:`grid grid-cols-3 items-center ${S?"pt-4":""}`,children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:o})}),s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(hr,{code:d.home_code||void 0,crest:d.home_crest||void 0,size:24,className:"h-6 w-6"}),s.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:e&&(g||j||E)?s.jsxs("span",{className:"font-bold text-base text-slate-900",children:[e.homeScore," - ",e.awayScore]}):s.jsx("span",{children:f})}),s.jsx(hr,{code:d.away_code||void 0,crest:d.away_crest||void 0,size:24,className:"h-6 w-6"})]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:l})})]}),e&&(S||E)&&s.jsx("div",{className:"flex justify-center mt-1",children:s.jsx("span",{className:`text-[10px] font-semibold ${S?"text-red-600":"text-slate-500"}`,children:vs(e.status,e.minute)})}),s.jsxs("div",{className:"mt-2 grid grid-cols-3",children:[s.jsx("div",{className:"relative min-h-6",children:s.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:D("H")})}),s.jsx("div",{className:"relative min-h-6",children:s.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:D("D")})}),s.jsx("div",{className:"relative min-h-6",children:s.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:D("A")})})]})]})})}function Mr({label:d,fixtures:u,picksByFixture:r,members:t,outcomes:e,liveScores:n,submittedMap:a,picksGw:c,isApiTestLeague:b=!1,isFirstSection:x=!1,hasLiveGames:o=!1,allGamesFinished:l=!1,allSubmitted:i=!1,resultsPublished:f=!1,deadlinePassed:g=!1,whoDidntSubmit:j=[],liveFixturesCount:E,hasStarted:S=!1}){return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(mn,{date:d,className:"text-lg font-normal"}),x&&s.jsxs(s.Fragment,{children:[b&&o&&E!==void 0&&s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-600 text-white text-sm font-bold border border-red-700 shadow-sm",style:{marginTop:"-2px"},children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"Live"}),s.jsxs("span",{className:"flex items-baseline gap-0.5",children:[s.jsx("span",{className:"text-base sm:text-lg font-extrabold",children:E}),s.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"/"}),s.jsx("span",{className:"text-sm sm:text-base font-semibold opacity-80",children:u.length})]})]}),b&&l&&s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),b&&!S&&s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"}),!b&&i&&f&&s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),!b&&i&&!f&&s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"}),!b&&g&&!i&&s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-orange-100 text-orange-800 text-sm font-bold border border-orange-300 shadow-sm",style:{marginTop:"-2px"},children:["Deadline Passed ",j.length>0&&`(${j.join(", ")} didn't submit)`]})]})]}),s.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:s.jsxs("ul",{children:[u.map(I=>{try{const D=r.get(I.fixture_index)??[],L=e.get(I.fixture_index)||null,U=n[I.fixture_index]||null;return s.jsx(_s,{fixture:I,picks:D,members:t,outcome:L,liveScore:U,submittedMap:a,picksGw:c,isApiTestLeague:b},`${I.gw}-${I.fixture_index}`)}catch(D){return console.error("Error rendering fixture:",D,I),s.jsxs("li",{className:"p-4 text-red-500",children:["Error loading fixture: ",I.fixture_index]},`${I.gw}-${I.fixture_index}`)}}),!u.length&&s.jsx("li",{className:"p-4 text-slate-500",children:"No fixtures."})]})})]})}const Rt=8;function er(d){return d.result==="H"||d.result==="D"||d.result==="A"?d.result:typeof d.home_goals=="number"&&typeof d.away_goals=="number"?d.home_goals>d.away_goals?"H":d.home_goals<d.away_goals?"A":"D":null}function js({chat:d,userId:u,nameById:r,isMember:t,newMsg:e,setNewMsg:n,onSend:a,leagueCode:c,memberCount:b,maxMembers:x,notificationStatus:o}){const l=P.useRef(null),i=P.useRef(null),f=P.useRef(null),g=P.useRef(null),[j,E]=P.useState(0),S=()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},I=P.useCallback((v=[0,100,300,500,700])=>{requestAnimationFrame(()=>{v.forEach(M=>{setTimeout(()=>S(),M)})})},[]),D=P.useCallback((v,M=[0,100,300,500,700])=>{const h=g.current?.offsetHeight||72;if(v>0){const p=v+h;E(v),l.current&&(l.current.style.paddingBottom=`${p+8}px`)}else E(0),l.current&&(l.current.style.paddingBottom=`${h+8}px`);I(M)},[I]);P.useEffect(()=>{d.length>0&&setTimeout(()=>S(),100)},[d.length]),P.useEffect(()=>{!e&&f.current&&(f.current.style.height="auto",f.current.style.height="42px")},[e]),P.useEffect(()=>{if(l.current&&g.current){const v=g.current.offsetHeight||72;l.current.style.paddingBottom=`${v+8}px`}},[]),P.useEffect(()=>{const v=window.visualViewport;let M=null,h=0,p=!1;const C=()=>{if(v){const T=window.innerHeight,w=v.height,m=v.offsetTop+w;return Math.max(0,T-m)}else return 0},N=()=>{M&&(clearTimeout(M),M=null),M=setTimeout(()=>{const T=C();Math.abs(T-h)<10&&T>0&&!p||(h=T,D(T))},50)};v&&(v.addEventListener("resize",N),v.addEventListener("scroll",N)),window.addEventListener("resize",N);const y=()=>{p=!0,setTimeout(N,50),setTimeout(N,150),setTimeout(N,300),setTimeout(N,500)},A=()=>{p=!1,setTimeout(N,100)},_=setTimeout(()=>{f.current&&(f.current.addEventListener("focus",y),f.current.addEventListener("blur",A))},100);return N(),()=>{M&&clearTimeout(M),clearTimeout(_),v&&(v.removeEventListener("resize",N),v.removeEventListener("scroll",N)),window.removeEventListener("resize",N),f.current&&(f.current.removeEventListener("focus",y),f.current.removeEventListener("blur",A))}},[D]);const L=()=>{f.current&&f.current.removeAttribute("readonly");const v=()=>{const M=window.visualViewport;let h=0;if(M){const p=window.innerHeight,C=M.height,N=M.offsetTop+C;h=Math.max(0,p-N)}D(h,[0,100,200,400,600,800])};setTimeout(v,50),setTimeout(v,150),setTimeout(v,300),setTimeout(v,500),I([100,200,400,600])};P.useEffect(()=>{if(typeof window>"u")return;const v=()=>{const M=window.visualViewport;let h=0;if(M){const p=window.innerHeight,C=M.height,N=M.offsetTop+C;h=Math.max(0,p-N)}D(h)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[D]);const U=v=>{const M=v.target;!(M.tagName==="A"||M.tagName==="BUTTON"||M.closest("a, button"))&&f.current&&document.activeElement===f.current&&f.current.blur()};return s.jsxs("div",{className:"flex flex-col chat-container",style:{height:"100%",position:"relative"},children:[s.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto px-3 pt-3 min-h-0 messages-container",onClick:U,style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",cursor:"pointer"},children:[d.map((v,M)=>{const h=v.user_id===u,p=r.get(v.user_id)??"Unknown",C=new Date(v.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=d[M-1],y=d[M+1],A=N?.user_id===v.user_id,_=y?.user_id===v.user_id,T=!A,w=!_,m=!A&&!_,H=T&&_,R=A&&w,W=!h&&(m||R),X=p.split(/\s+/).map(B=>B[0]).join("").toUpperCase(),K=h?"flex justify-end":"flex items-end gap-2",J=m?"single":H?"top":R?"bottom":"middle";return s.jsxs("div",{className:K,style:{marginTop:T?24:4},children:[!h&&s.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex justify-center self-end",children:W?s.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-xs font-semibold text-slate-500",children:X}):s.jsx("div",{className:"w-8 h-8"})}),s.jsx("div",{className:`flex flex-col gap-1 ${h?"items-end":"items-start"}`,children:s.jsx(Gr,{author:!h&&T?p:void 0,text:v.content,time:C,isOwnMessage:h,shape:J})})]},v.id)}),s.jsx("div",{ref:i,style:{height:"1px",width:"100%"}})]}),s.jsxs("div",{ref:g,className:"flex-shrink-0 bg-white border-t border-slate-200 px-4 py-3",style:{paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))",position:j>0?"fixed":"relative",bottom:j>0?`${j}px`:"0",left:j>0?"0":"auto",right:j>0?"0":"auto",width:"100%",zIndex:j>0?100:"auto",boxShadow:j>0?"0 -2px 8px rgba(0, 0, 0, 0.1)":"none",pointerEvents:"auto"},children:[t?s.jsxs("form",{onSubmit:v=>{v.preventDefault(),a()},className:"flex items-center gap-2",children:[s.jsx("textarea",{ref:f,value:e,onChange:v=>{n(v.target.value),f.current&&(f.current.style.height="auto",f.current.style.height=`${Math.min(f.current.scrollHeight,120)}px`),requestAnimationFrame(()=>{const M=window.visualViewport;if(M){const h=window.innerHeight,p=M.height,C=M.offsetTop+p,N=h-C;D(N,[0,100])}})},onFocus:L,onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),e.trim()&&a())},placeholder:"Start typing...",maxLength:2e3,rows:1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,inputMode:"text","data-1p-ignore":"true",readOnly:!1,onMouseDown:()=>{f.current&&f.current.removeAttribute("readonly")},onTouchStart:()=>{f.current&&f.current.removeAttribute("readonly")},className:"flex-1 rounded-xl border border-slate-300 px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-transparent resize-none overflow-hidden",style:{minHeight:"42px",maxHeight:"120px",lineHeight:"1.5"}}),s.jsx("button",{type:"submit",className:"flex-shrink-0 w-10 h-10 rounded-full bg-[#1C8376] text-white flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:!e.trim(),style:{backgroundColor:e.trim()?"#1C8376":"#94a3b8"},children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]}):s.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 text-amber-800 p-3 text-sm",children:"Join this league to chat with other members."}),o&&s.jsx("div",{className:`w-full rounded px-2 py-1 text-xs mt-2 ${o.type==="success"?"bg-green-50 text-green-700 border border-green-200":o.type==="warning"?"bg-amber-50 text-amber-700 border border-amber-200":"bg-red-50 text-red-700 border border-red-200"}`,children:o.message})]})]})}function Ss(){const{code:d=""}=pn(),{user:u}=Rr(),[r]=P.useState(()=>{const k=localStorage.getItem("oldSchoolMode");return k?JSON.parse(k):!1});P.useEffect(()=>{localStorage.setItem("oldSchoolMode",JSON.stringify(r))},[r]),P.useEffect(()=>{document.body.classList.add("league-page-active"),document.documentElement.classList.add("league-page-active");const k=()=>{const $=document.querySelector(".league-header-fixed");if($){const Y=$.style.top||window.getComputedStyle($).top;Y!=="0px"&&Y!=="0"&&($.style.top="0",$.style.transform="translate3d(0, 0, 0)")}},F=()=>{k(),(window.scrollY!==0||window.pageYOffset!==0)&&window.scrollTo(0,0)},O=$=>{const Y=$.target;Y.closest(".league-content-wrapper")||Y.closest(".league-header-fixed")||Y.closest(".chat-tab-wrapper")||$.preventDefault()};window.addEventListener("scroll",F,{passive:!0}),document.addEventListener("touchmove",O,{passive:!1});const G=setInterval(k,100);return k(),()=>{document.body.classList.remove("league-page-active"),document.documentElement.classList.remove("league-page-active"),window.removeEventListener("scroll",F),document.removeEventListener("touchmove",O),clearInterval(G)}},[]),P.useEffect(()=>{const k=O=>{const G=O.target;(G.tagName==="INPUT"||G.tagName==="TEXTAREA")&&setTimeout(()=>{window.scrollTo(0,0);const $=document.querySelector(".league-header-fixed");$&&($.style.top="0")},100)},F=()=>{const O=document.querySelector(".league-header-fixed");O&&(O.style.top="0")};return document.addEventListener("focusin",k),window.addEventListener("resize",F),window.addEventListener("orientationchange",F),()=>{document.removeEventListener("focusin",k),window.removeEventListener("resize",F),window.removeEventListener("orientationchange",F)}},[]),P.useEffect(()=>{if(typeof window>"u")return;const k=window.visualViewport;if(!k)return;let F=null;const O=()=>{const $=f.current;if(!$)return;const Y=k.offsetTop??0;$.style.setProperty("transform",`translate3d(0, ${Y}px, 0)`,"important")},G=()=>{F&&cancelAnimationFrame(F),F=window.requestAnimationFrame(O)};return G(),k.addEventListener("resize",G),k.addEventListener("scroll",G),()=>{F&&cancelAnimationFrame(F),k.removeEventListener("resize",G),k.removeEventListener("scroll",G),f.current&&f.current.style.removeProperty("transform")}},[]);const[t,e]=P.useState(null),[n,a]=P.useState([]),[c,b]=P.useState(!0),[x,o]=P.useState("chat-beta"),l=P.useRef(!1),i=P.useRef(!1),f=P.useRef(null),[g,j]=P.useState(!1),[E,S]=P.useState(!1),[I,D]=P.useState(!1),[L,U]=P.useState(null),[v,M]=P.useState(null),[h,p]=P.useState(null),[C,N]=P.useState([]),y=P.useRef({}),A=P.useRef(new Map),[_,T]=P.useState(new Set),[w,m]=P.useState(!1),[H,R]=P.useState(!1),[W,X]=P.useState(0),[K,J]=P.useState(!1),[B,z]=P.useState(!1),[ne,pe]=P.useState(!1),[de,le]=P.useState(!1),[he,fe]=P.useState(null),[Le,Ge]=P.useState(!1),[Ie,be]=P.useState(null),[Fe,ye]=P.useState({x:0,y:0}),[ge,Te]=P.useState(1),[Me,ke]=P.useState(null),[Ne,Ce]=P.useState(null),[_e,He]=P.useState(!1),[nt,ht]=P.useState(!1),[Re,st]=P.useState(!1),[De,Ue]=P.useState(!1),[qe,Ze]=P.useState(!1),[Je,Xe]=P.useState(!1),[mt,Nt]=P.useState(null),[gt,yt]=P.useState(!1),[lt,kt]=P.useState(!1),[Ve,ot]=P.useState(null),[pt,it]=P.useState([]),[bt,et]=P.useState(""),[ct,tt]=P.useState(null),qr=P.useMemo(()=>!!u?.id&&n.some(k=>k.id===u.id),[u?.id,n]),dt=P.useMemo(()=>!!u?.id&&!!Ve&&Ve.id===u.id,[u?.id,Ve]),Vr=P.useMemo(()=>Ve?.name??"League admin",[Ve]),sr=P.useMemo(()=>{const k=new Map;return n.forEach(F=>k.set(F.id,F.name)),k},[n]),or=P.useCallback(()=>{if(!t?.code||typeof window>"u"||typeof navigator>"u")return;const k=`Join my mini league "${t.name}" on TotL!`,F=`${window.location.origin}/league/${t.code}`,O=navigator;if(typeof O.share=="function"){O.share({title:`Join ${t.name}`,text:k,url:F}).catch($=>{console.warn("[League] Share cancelled",$)});return}const G=`${k}
${F}`;navigator.clipboard?.writeText?navigator.clipboard.writeText(G).then(()=>window.alert?.("League link copied to clipboard!")).catch(()=>{window.prompt?.("Share this league code:",t.code)}):window.prompt?.("Share this league code:",t.code)},[t]),Kr=P.useCallback(async()=>{if(!(!t?.id||!u?.id)){D(!0);try{const{error:k}=await se.from("league_members").delete().eq("league_id",t.id).eq("user_id",u.id);if(k)throw k;typeof window<"u"&&(window.location.href="/leagues")}catch(k){console.error("[League] Error leaving league:",k),typeof window<"u"&&window.alert?.(k?.message??"Failed to leave league. Please try again.")}finally{D(!1),S(!1)}}},[t?.id,u?.id]),Zr=P.useCallback(async()=>{if(!(!t?.id||!u?.id)){st(!0);try{if(n.length>=Rt){typeof window<"u"&&window.alert?.("League is full (max 8 members)."),ht(!1);return}const{error:k}=await se.from("league_members").insert({league_id:t.id,user_id:u.id});if(k)throw k;const F=u.user_metadata?.display_name||u.email||"Someone";try{const O=await fetch("/.netlify/functions/notifyLeagueMemberJoin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:t.id,userId:u.id,userName:F})}),G=await O.text();let $;try{$=G?JSON.parse(G):{error:"Empty response body"}}catch(Y){console.error("[League] Failed to parse notification response. Status:",O.status,"Text:",G,"Error:",Y),$={error:"Invalid JSON response",status:O.status,raw:G.substring(0,200)}}O.ok?console.log("[League] Join notification sent:",JSON.stringify({sent:$.sent,recipients:$.recipients,ok:$.ok,breakdown:$.breakdown},null,2)):console.error("[League] Notification function returned error:",O.status,$)}catch(O){console.error("[League] Error sending join notification:",O)}typeof window<"u"&&window.location.reload()}catch(k){console.error("[League] Error joining league:",k),typeof window<"u"&&window.alert?.(k?.message??"Failed to join league.")}finally{st(!1)}}},[t?.id,u?.id,n.length]),Yr=P.useCallback(async()=>{if(!(!mt||!t?.id||!u?.id)){yt(!0);try{const{error:k}=await se.from("league_members").delete().eq("league_id",t.id).eq("user_id",mt.id);if(k)throw k;typeof window<"u"&&window.location.reload()}catch(k){console.error("[League] Error removing member:",k),typeof window<"u"&&window.alert?.(k?.message??"Failed to remove member.")}finally{yt(!1),Ze(!1),Nt(null)}}},[t?.id,mt,u?.id]),Jr=P.useCallback(async()=>{if(!(!t?.id||!u?.id)){kt(!0);try{const{error:k}=await se.from("league_members").delete().eq("league_id",t.id);if(k)throw k;const{error:F}=await se.from("leagues").delete().eq("id",t.id);if(F)throw F;typeof window<"u"&&(window.location.href="/leagues")}catch(k){console.error("[League] Error ending league:",k),typeof window<"u"&&window.alert?.(k?.message??"Failed to end league.")}finally{kt(!1),Xe(!1)}}},[t?.id,u?.id]),Qr=k=>new Promise((F,O)=>{const G=new Image;G.addEventListener("load",()=>F(G)),G.addEventListener("error",$=>O($)),G.src=k}),ir=async(k,F)=>{const O=await Qr(k),G=document.createElement("canvas"),$=G.getContext("2d");if(!$)throw new Error("No 2d context");return G.width=F.width,G.height=F.height,$.drawImage(O,F.x,F.y,F.width,F.height,0,0,F.width,F.height),new Promise((Y,ee)=>{G.toBlob(ae=>{if(!ae){ee(new Error("Canvas is empty"));return}Y(ae)},"image/jpeg",.9)})},Xr=P.useCallback(k=>{if(!t?.id||!dt){fe("Only league admins can upload badges.");return}if(!new Set(["image/png","image/jpeg","image/jpg","image/webp"]).has(k.type)){fe("Please upload a PNG, JPG, or WebP image.");return}if(k.size>2*1024*1024){fe("Please choose an image smaller than 2MB.");return}fe(null),Ge(!1);const O=new FileReader;O.onload=()=>{be(O.result)},O.readAsDataURL(k)},[dt,t?.id]),en=P.useCallback(async(k,F)=>{if(ke(F),Ie)try{const O=await ir(Ie,F),G=URL.createObjectURL(O);Ce(G)}catch(O){console.error("[League] Error creating preview:",O)}},[Ie]),tn=P.useCallback(async()=>{if(!(!Ie||!Me||!t?.id||!dt)){fe(null),Ge(!1),le(!0);try{const k=await ir(Ie,Me),F=new File([k],"badge.jpg",{type:"image/jpeg"}),O=await Be(F,{maxSizeMB:.02,maxWidthOrHeight:256,useWebWorker:!0,initialQuality:.8});if(O.size>20*1024)throw new Error("Compressed image is still larger than 20KB. Try a smaller image.");const G=`${t.id}-${Date.now()}.jpg`,{error:$}=await se.storage.from("league-avatars").upload(G,O,{cacheControl:"3600",upsert:!0,contentType:O.type});if($)throw $;const{data:Y}=se.storage.from("league-avatars").getPublicUrl(G),ee=Y?.publicUrl;if(!ee)throw new Error("Unable to get public URL for badge.");const{error:ae}=await se.from("leagues").update({avatar:ee}).eq("id",t.id);if(ae)throw ae;e(Se=>Se&&{...Se,avatar:ee}),Ge(!0),Ne&&URL.revokeObjectURL(Ne),be(null),Ce(null),pe(!1)}catch(k){console.error("[League] Error uploading badge:",k),fe(k?.message??"Failed to upload badge. Please try again.")}finally{le(!1)}}},[Ie,Me,dt,t?.id]),rn=P.useCallback(async()=>{if(!(!t?.id||!dt)){fe(null),Ge(!1),le(!0);try{const{error:k}=await se.from("leagues").update({avatar:null}).eq("id",t.id);if(k)throw k;e(F=>F&&{...F,avatar:null}),Ge(!0)}catch(k){console.error("[League] Error removing badge:",k),fe(k?.message??"Failed to remove badge. Please try again.")}finally{le(!1)}}},[dt,t?.id]),[Wt,nn]=P.useState(new Map);P.useEffect(()=>{(async()=>{const k=new Map,{data:F}=await se.from("app_fixtures").select("gw, kickoff_time").order("gw",{ascending:!0}),{data:O}=await se.from("app_fixtures").select("gw, kickoff_time").eq("gw",1).order("fixture_index",{ascending:!0}),G=new Map;if(F&&F.forEach($=>{(!G.has($.gw)||$.kickoff_time&&new Date($.kickoff_time)<new Date(G.get($.gw)))&&$.kickoff_time&&G.set($.gw,$.kickoff_time)}),O&&O.length>0){const $=O.find(Y=>Y.kickoff_time)?.kickoff_time;if($){const Y=G.get(1);(!Y||new Date($)<new Date(Y))&&G.set(1,$)}}G.forEach(($,Y)=>{const ee=new Date($),ae=new Date(ee.getTime()-4500*1e3);k.set(Y,ae)}),nn(k)})()},[]),P.useEffect(()=>{const k=F=>{const O=F.target;w&&!O.closest(".gw-dropdown-container")&&m(!1)};return w&&document.addEventListener("click",k),()=>document.removeEventListener("click",k)},[w]),P.useEffect(()=>{let k=!0;return(async()=>{const{data:F}=await se.from("app_meta").select("current_gw").eq("id",1).maybeSingle();if(!k)return;U(F?.current_gw??null);const{data:O}=await se.from("app_gw_results").select("gw").order("gw",{ascending:!1}).limit(1);if(!k)return;M(O&&O.length?O[0].gw:null);const{data:G}=await se.from("app_gw_results").select("gw").order("gw",{ascending:!1});if(!k)return;const $=G?[...new Set(G.map(ee=>ee.gw))].sort((ee,ae)=>ae-ee):[],Y=F?.current_gw;Y&&!$.includes(Y)&&$.unshift(Y),N($),$.length>0&&!h&&p($[0])})(),()=>{k=!1}},[W]);const ut=P.useMemo(()=>n.map(k=>k.id),[n]),[Ae,ar]=P.useState([]),[_t,Ot]=P.useState([]),[$t,Bt]=P.useState([]),[At,Gt]=P.useState([]),lr=P.useMemo(()=>!Ae||Ae.length===0?[]:Ae.map(k=>k.api_match_id).filter(k=>k!=null),[Ae]),Et=P.useMemo(()=>t?.name==="API Test",[t?.name]),[Qe,cr]=P.useState(null);P.useEffect(()=>{if(!Et){cr(null);return}let k=!0;return(async()=>{const{data:F}=await se.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle();let O=F?.current_test_gw??1;if(O&&O!==1){const{data:G}=await se.from("app_fixtures").select("gw").eq("gw",O).limit(1).maybeSingle();if(!G){const{data:$}=await se.from("app_fixtures").select("gw").eq("gw",1).limit(1).maybeSingle();$&&(O=1)}}k&&cr(O)})(),()=>{k=!1}},[Et]);const sn=P.useMemo(()=>Et&&Qe!==null?Qe:L||h||void 0,[Et,Qe,L,h]),{liveScores:dr}=gn(sn,lr.length>0?lr:void 0),$e=P.useMemo(()=>{const k={};return!Ae||Ae.length===0||Ae.forEach(F=>{const O=F.api_match_id;if(O){const G=dr.get(O);G&&(k[F.fixture_index]={homeScore:G.home_score??0,awayScore:G.away_score??0,status:G.status||"SCHEDULED",minute:G.minute??null})}}),k},[dr,Ae]),[ur,jt]=P.useState([]),[on,Ct]=P.useState(!1);P.useEffect(()=>{let k=!0;return(async()=>{b(!0);const{data:F}=await se.from("leagues").select("id,name,code,created_at,avatar").eq("code",d).maybeSingle();if(!k)return;if(!F){e(null),a([]),b(!1);return}e(F);const{data:O}=await se.from("league_members").select("users(id,name),created_at").eq("league_id",F.id).order("created_at",{ascending:!0}),G=O?.map(ee=>({id:ee.users.id,name:ee.users.name??"(no name)"}))??[],$=[...G].sort((ee,ae)=>ee.name.localeCompare(ae.name));a($);const Y=G[0];ot(Y),u?.id&&!G.some(ee=>ee.id===u.id)&&ht(!0),b(!1)})(),()=>{k=!1}},[d]),P.useEffect(()=>{},[t,x]),P.useEffect(()=>{if(x!=="chat"&&x!=="chat-beta"||!t?.id||!u?.id)return;(async()=>{await se.from("league_message_reads").upsert({league_id:t.id,user_id:u.id,last_read_at:new Date().toISOString()},{onConflict:"league_id,user_id"})})()},[x,t?.id,u?.id]);const an=P.useCallback(async(k,F=!1)=>{const{data:O,error:G}=await se.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",k).order("created_at",{ascending:!1}).limit(500);if(!G&&O){const Y=(O??[]).reverse();F&&console.log("[Chat] Loaded messages:",Y.length,"from database (most recent)"),it(ee=>{const ae=new Set(ee.map(Q=>Q.id)),Se=Y.filter(Q=>!ae.has(Q.id));if(ee.length===0)return F&&console.log("[Chat] Initial load, setting",Y.length,"messages"),Y;const me=[...ee,...Se].sort((Q,xe)=>new Date(Q.created_at).getTime()-new Date(xe.created_at).getTime()),V=me.length>500?me.slice(-500):me;return F&&console.log("[Chat] Merged messages. Previous:",ee.length,"New from DB:",Se.length,"Total:",me.length,"After limit:",V.length),V})}else G&&console.error("[Chat] Error loading messages:",G)},[]);P.useEffect(()=>{if(!t?.id)return;let k=!0;const F=async()=>{k&&await an(t.id,!0)};F();const O=se.channel(`league-messages:${t.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${t.id}`},Y=>{const ee=Y.new;console.log("[Chat] Realtime message received:",ee.id,ee.content.substring(0,50)),it(ae=>{if(ae.some(we=>we.id===ee.id))return console.log("[Chat] Message already exists, skipping"),ae;const Se=[...ae,ee];return console.log("[Chat] Added realtime message. Total messages:",Se.length),Se})}).subscribe(),G=()=>{!document.hidden&&t?.id&&k&&(console.log("[Chat] App became visible, refetching messages..."),F())},$=()=>{t?.id&&k&&(console.log("[Chat] Window gained focus, refetching messages..."),F())};return document.addEventListener("visibilitychange",G),window.addEventListener("focus",$),()=>{k=!1,se.removeChannel(O),document.removeEventListener("visibilitychange",G),window.removeEventListener("focus",$)}},[t?.id]);const ln=P.useCallback(async()=>{if(!t||!u?.id)return;const k=bt.trim();if(!k)return;et("");const{data:F,error:O}=await se.from("league_messages").insert({league_id:t.id,user_id:u.id,content:k}).select("id, league_id, user_id, content, created_at").single();O?(console.error(O),alert("Failed to send message.")):F&&it($=>[...$,F]),window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||setTimeout(async()=>{try{const $=u.user_metadata?.display_name||u.email||"User",Y=await fetch("/.netlify/functions/notifyLeagueMessageV2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:t.id,senderId:u.id,senderName:$,content:k})}),ee=await Y.json().catch(()=>({}));ee.ok===!0?ee.sent&&ee.sent>0?tt({message:` Message sent to ${ee.sent} device${ee.sent===1?"":"s"}`,type:"success"}):ee.message==="No subscribed devices"?tt({message:` No subscribed devices (${ee.eligibleRecipients||0} eligible recipient${ee.eligibleRecipients===1?"":"s"})`,type:"warning"}):ee.message==="No devices"?tt({message:` No devices registered (${ee.eligibleRecipients||0} eligible recipient${ee.eligibleRecipients===1?"":"s"})`,type:"warning"}):ee.message==="No eligible recipients"?tt({message:" All members are currently active",type:"success"}):tt({message:` ${ee.message||"Notification sent"}`,type:"success"}):ee.ok===!1||ee.error?tt({message:` Failed to send notification: ${ee.error||"Unknown error"}`,type:"error"}):Y.ok||tt({message:` Notification error (HTTP ${Y.status})`,type:"error"}),setTimeout(()=>tt(null),5e3)}catch($){console.error("[Chat] Notification exception:",$),tt({message:" Failed to send notification",type:"error"}),setTimeout(()=>tt(null),5e3)}},100)},[t,u,bt,et,it,tt]);P.useEffect(()=>{let k=!0;return(async()=>{const F=t?.name==="API Test";let O=Qe??1;if(F){const{data:we}=await se.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle();if(O=we?.current_test_gw??1,O&&O!==1){const{data:me}=await se.from("app_fixtures").select("gw").eq("gw",O).limit(1).maybeSingle();if(me)console.log("[League] Using current_test_gw from meta:",O);else{const{data:V}=await se.from("app_fixtures").select("gw").eq("gw",1).limit(1).maybeSingle();V&&(O=1,console.log("[League] No fixtures for current_test_gw, falling back to GW T1"))}}else console.log("[League] Using GW T1 or current_test_gw:",O)}const G=F&&(x==="gw"||x==="gwr");console.log("[League] Data fetch:",{isApiTestLeague:F,tab:x,useTestFixtures:G,leagueName:t?.name,testGwForData:O,willUseTestTables:G,willUseMainTables:!G});let $=x==="gwr"?i.current?h:L||h:L;if(F&&(x==="gw"||x==="gwr")&&($=O),console.log("[League] gwForData calculation:",{tab:x,manualGwSelected:i.current,selectedGw:h,currentGw:L,gwForData:$,isApiTestLeague:F}),x==="gw"&&!F&&ut.length>0){const{data:we}=await se.from("app_gw_submissions").select("gw").in("user_id",ut).not("submitted_at","is",null).order("gw",{ascending:!1}).limit(10);if(we&&we.length>0){const me=[...new Set(we.map(V=>V.gw))].sort((V,Q)=>(Q||0)-(V||0));for(const V of me)if(V){const{data:Q}=await se.from("app_fixtures").select("gw").eq("gw",V).limit(1);if(Q&&Q.length>0){console.log("[League] Found fixtures for GW",V,"from submissions - using this GW (currentGw was",$,")"),$=V;break}}}!$&&L&&($=L,console.log("[League] Using currentGw as fallback:",L))}if(console.log("[League] gwForData:",$,"memberIds:",ut),!$&&!G){ar([]),Ot([]),Bt([]),Gt([]);return}let Y;if(G){const{data:we}=await se.from("app_fixtures").select("id,test_gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,home_crest,away_crest,kickoff_time,api_match_id").eq("test_gw",O).order("fixture_index",{ascending:!0});Y=we?.map(me=>({...me,gw:me.test_gw}))||null}else{console.log("[League] Fetching from MAIN database table (app_fixtures) for regular league, GW:",$);const{data:we}=await se.from("app_fixtures").select("id,gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,kickoff_time,api_match_id").eq("gw",$).order("fixture_index",{ascending:!0});Y=we||null,console.log("[League] Fetched fixtures from main database:",we?.length||0,"fixtures")}if(!k)return;if(ar(Y??[]),!ut.length){Ot([]),Bt([]),Gt([]);return}let ee=null,ae;if(G){const{data:we}=await se.from("app_picks").select("user_id,matchday,fixture_index,pick").eq("matchday",O).in("user_id",ut);ee=we?.map(Z=>({...Z,gw:Z.matchday}))||null;const{data:me,error:V}=await se.from("app_gw_submissions").select("user_id,matchday,submitted_at").eq("matchday",O).not("submitted_at","is",null).in("user_id",ut);V&&console.error("Error fetching test_api_submissions:",V);const{data:Q}=await se.from("app_fixtures").select("fixture_index,home_team,away_team,home_code,away_code,kickoff_time").eq("test_gw",O).order("fixture_index",{ascending:!0}),xe=new Set((Q||[]).map(Z=>Z.fixture_index));console.log("[League] Current fixture indices from test_api_fixtures:",Array.from(xe)),console.log("[League] Current fixtures:",Q?.map(Z=>({index:Z.fixture_index,home:Z.home_team,away:Z.away_team})));const q=[];if(me&&ee&&Q){const Z=xe.size;console.log("[League] Required fixture count for valid submission:",Z);const ce=(Q||[]).map(te=>te.kickoff_time?new Date(te.kickoff_time):null).filter(te=>te!==null&&!isNaN(te.getTime())),re=ce.length>0?new Date(Math.min(...ce.map(te=>te.getTime()))):null,je=new Date("2025-11-18T00:00:00Z");console.log("[League] Submission cutoff date (submissions before this are old):",je.toISOString()),console.log("[League] Earliest kickoff:",re?.toISOString()),me.forEach(te=>{const ve=(ee||[]).filter(Ee=>Ee.user_id===te.user_id&&Ee.matchday===O),oe=ve.filter(Ee=>xe.has(Ee.fixture_index)),ie=oe.length===Z&&Z>0,ue=new Set(oe.map(Ee=>Ee.fixture_index)),Ye=ue.size===Z,ft=te.submitted_at?new Date(te.submitted_at):null,Pe=ft&&ft>=je;if(ie&&Ye&&Pe)q.push(te),console.log("[League]  VALID submission (has picks for ALL current fixtures AND recent submission):",{user_id:te.user_id,submitted_at:te.submitted_at,submissionDate:ft?.toISOString(),cutoffDate:je.toISOString(),picksCount:ve.length,picksForCurrentFixtures:oe.length,uniqueIndices:ue.size,requiredCount:Z});else{const Ee=[];ie||Ee.push("missing picks"),Ye||Ee.push("duplicate/extra picks"),Pe||Ee.push(`old submission (${ft?.toISOString()} < ${je.toISOString()})`),console.log("[League]  INVALID submission:",{user_id:te.user_id,submitted_at:te.submitted_at,submissionDate:ft?.toISOString(),cutoffDate:je.toISOString(),picksCount:ve.length,picksForCurrentFixtures:oe.length,uniqueIndices:ue.size,requiredCount:Z,hasAllRequired:ie,hasExactMatch:Ye,isRecent:Pe,reason:Ee.join(", ")})}})}ae=q.map(Z=>({...Z,gw:Z.matchday}))||null,console.log("[League] Test API submissions fetched (filtered to only current fixtures):",ae),console.log("[League] Valid submissions count:",q.length,"out of",me?.length||0,"total")}else{console.log("[League] Fetching from MAIN database tables (picks, gw_submissions) for regular league");const{data:we}=await se.from("app_picks").select("user_id,gw,fixture_index,pick").eq("gw",$).in("user_id",ut);ee=we,console.log("[League] Fetched picks from main database:",we?.length||0,"picks");const{data:me}=await se.from("app_gw_submissions").select("user_id,gw,submitted_at").eq("gw",$).in("user_id",ut);ae=me,console.log("[League] Fetched submissions from main database:",me?.length||0,"submissions")}if(!k)return;Ot(ee??[]),Bt(ae??[]);const{data:Se}=await se.from("app_gw_results").select("gw,fixture_index,result").eq("gw",G?1:$||0);k&&Gt(Se??[])})(),()=>{k=!1}},[x,L,v,h,ut]),P.useEffect(()=>{y.current=$e},[$e]);const We=P.useMemo(()=>{const k=new Map;return console.log("[League] Building submittedMap from subs:",$t),$t.forEach(F=>{if(F.submitted_at){const O=`${F.user_id}:${F.gw}`;console.log(`[League] Adding submission key: ${O}`,F),k.set(O,!0)}else console.log("[League] Skipping submission with null submitted_at:",F)}),console.log("[League] Final submittedMap:",Array.from(k.entries())),k},[$t]),Lt=P.useCallback(k=>k.map(F=>({user_id:F.id,name:F.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]})),[]);P.useEffect(()=>{const k=se.channel("app-gw-results-changes").on("postgres_changes",{event:"*",schema:"public",table:"app_gw_results"},()=>{X(F=>F+1)}).subscribe();return()=>{se.removeChannel(k)}},[]),P.useEffect(()=>{let k=!0;return(async()=>{if(!n.length){jt([]);return}if(t?.name==="API Test"){jt(Lt(n)),Ct(!1);return}if(L===null)return;Ct(!0);const{data:F}=await se.from("app_gw_results").select("gw,fixture_index,result"),O=F??[],G=new Map;if(O.forEach(te=>{const ve=er(te);ve&&G.set(`${te.gw}:${te.fixture_index}`,ve)}),G.size===0){jt(Lt(n)),Ct(!1);return}const $=[...new Set(Array.from(G.keys()).map(te=>parseInt(te.split(":")[0],10)))].sort((te,ve)=>te-ve),Y=["Prem Predictions","FC Football","Easy League"],ee=["The Bird league"],ae=await xn(t,L),Se=$.filter(te=>te>=ae);if(!Y.includes(t?.name||"")&&!ee.includes(t?.name||"")&&Se.length===0){jt(Lt(n)),Ct(!1);return}const{data:we}=await se.from("app_picks").select("user_id,gw,fixture_index,pick").in("user_id",n.map(te=>te.id)).in("gw",Se),me=we??[],V=new Map;Se.forEach(te=>{const ve=new Map;n.forEach(oe=>ve.set(oe.id,{user_id:oe.id,score:0,unicorns:0})),V.set(te,ve)}),Se.forEach(te=>{Array.from(G.entries()).filter(([oe])=>parseInt(oe.split(":")[0],10)===te).map(([oe,ie])=>({idx:parseInt(oe.split(":")[1],10),out:ie})).forEach(({idx:oe,out:ie})=>{const ue=me.filter(Pe=>Pe.gw===te&&Pe.fixture_index===oe),Ye=ue.filter(Pe=>Pe.pick===ie).map(Pe=>Pe.user_id),ft=V.get(te);if(ue.forEach(Pe=>{if(Pe.pick===ie){const Ee=ft.get(Pe.user_id);Ee.score+=1}}),Ye.length===1&&n.length>=3){const Pe=Ye[0],Ee=ft.get(Pe);Ee.unicorns+=1}})});const Q=new Map,xe=new Map,q=new Map,Z=new Map,ce=new Map,re=new Map;n.forEach(te=>{Q.set(te.id,0),xe.set(te.id,0),q.set(te.id,0),Z.set(te.id,0),ce.set(te.id,0),re.set(te.id,[])}),Se.forEach(te=>{const ve=Array.from(V.get(te).values());if(ve.forEach(ue=>{xe.set(ue.user_id,(xe.get(ue.user_id)??0)+ue.score),q.set(ue.user_id,(q.get(ue.user_id)??0)+ue.unicorns)}),ve.sort((ue,Ye)=>Ye.score-ue.score||Ye.unicorns-ue.unicorns),!ve.length)return;const oe=ve[0],ie=ve.filter(ue=>ue.score===oe.score&&ue.unicorns===oe.unicorns);ie.length===1?(Q.set(oe.user_id,(Q.get(oe.user_id)??0)+3),Z.set(oe.user_id,(Z.get(oe.user_id)??0)+1),re.get(oe.user_id).push("W"),ve.slice(1).forEach(ue=>re.get(ue.user_id).push("L"))):(ie.forEach(ue=>{Q.set(ue.user_id,(Q.get(ue.user_id)??0)+1),ce.set(ue.user_id,(ce.get(ue.user_id)??0)+1),re.get(ue.user_id).push("D")}),ve.filter(ue=>!ie.find(Ye=>Ye.user_id===ue.user_id)).forEach(ue=>re.get(ue.user_id).push("L")))});const je=n.map(te=>({user_id:te.id,name:te.name,mltPts:Q.get(te.id)??0,ocp:xe.get(te.id)??0,unicorns:q.get(te.id)??0,wins:Z.get(te.id)??0,draws:ce.get(te.id)??0,form:re.get(te.id)??[]}));je.sort((te,ve)=>ve.mltPts-te.mltPts||ve.unicorns-te.unicorns||ve.ocp-te.ocp||te.name.localeCompare(ve.name)),k&&(jt(je),Ct(!1))})(),()=>{k=!1}},[n,t,L,Lt,W]);function cn(){const k=["Prem Predictions","FC Football","Easy League"],F=["The Bird league"],O=["gregVjofVcarl","Let Down"],G=!!(t&&!k.includes(t.name)&&!F.includes(t.name)&&!O.includes(t.name)),$=ur.length?ur:n.map(Y=>({user_id:Y.id,name:Y.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}));return n.length===1?s.jsxs("div",{className:"text-center p-8 bg-white rounded-xl border border-slate-200 shadow-sm",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Invite at least one more user to make the ML start"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Share your league code with friends to get the competition going!"}),s.jsx("button",{onClick:()=>He(!0),className:"px-4 py-2 bg-[#1C8376] text-white font-semibold rounded-lg hover:bg-emerald-700 transition-colors",children:"Share League Code"})]}):s.jsxs("div",{className:"pt-4",children:[s.jsx(ps,{rows:$,members:n,showForm:g,currentUserId:u?.id,loading:on,isLateStartingLeague:G}),s.jsx("div",{className:"mt-6 flex justify-between items-center",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx(hs,{showForm:g,onToggle:j}),s.jsxs("button",{onClick:()=>J(!0),className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[s.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),s.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})}),t?.name==="API Test"&&s.jsx("div",{className:"mt-4",style:{marginLeft:"-1rem",marginRight:"-1rem",width:"calc(100% + 2rem)",paddingLeft:0,paddingRight:0},children:s.jsx("video",{src:"/assets/Animation/Unicorn_Small.mov",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"auto",display:"block",padding:0,margin:0}})})]})}function dn(){const k=t?.name==="API Test"?Qe??1:L;if(!k)return s.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No current gameweek available."});if(!xr(t,k,Wt))return s.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Predictions Available"}),s.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),s.jsxs("div",{className:"text-sm",children:["GW",k," predictions are not included in this league."]})]})});const F=new Map;At.forEach(q=>{if(q.gw!==k)return;const Z=er(q);Z&&F.set(q.fixture_index,Z)}),Ae.forEach(q=>{if(q.gw!==k)return;const Z=$e[q.fixture_index];Z&&(Z.status==="IN_PLAY"||Z.status==="PAUSED"||Z.status==="FINISHED")&&(Z.homeScore>Z.awayScore?F.set(q.fixture_index,"H"):Z.awayScore>Z.homeScore?F.set(q.fixture_index,"A"):F.set(q.fixture_index,"D"))});const O=P.useMemo(()=>{const q=re=>{if(!re)return"Fixtures";const je=new Date(re);return isNaN(je.getTime())?"Fixtures":je.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})},Z=new Map;Ae.filter(re=>re.gw===k).forEach(re=>{const je=q(re.kickoff_time),te=re.kickoff_time?new Date(re.kickoff_time).getTime():Number.MAX_SAFE_INTEGER;Z.has(je)||Z.set(je,{label:je,key:te,items:[]}),Z.get(je).items.push(re)});const ce=Array.from(Z.values());return ce.forEach(re=>re.items.sort((je,te)=>je.fixture_index-te.fixture_index)),ce.sort((re,je)=>re.key-je.key),ce},[Ae,k]),G=new Set(Ae.filter(q=>q.gw===k).map(q=>q.fixture_index)),$=t?.name==="API Test",Y=n.length>0&&n.every(q=>We.get(`${q.id}:${k}`));if($&&k===(Qe??1)){console.log("[League] API Test filtering:",{currentFixtureIndices:Array.from(G),totalPicks:_t.length,picksForGw:_t.filter(Z=>Z.gw===k).length,submittedMapSize:We.size,allSubmitted:Y,members:n.map(Z=>({id:Z.id,name:Z.name,submitted:We.get(`${Z.id}:${k}`)})),fixturesCount:Ae.filter(Z=>Z.gw===k).length});const q=_t.filter(Z=>Z.gw===k);console.log(`[League] All picks for GW${k}:`,q.map(Z=>({user_id:Z.user_id,userName:n.find(ce=>ce.id===Z.user_id)?.name,fixture_index:Z.fixture_index,pick:Z.pick,hasSubmitted:!!We.get(`${Z.user_id}:${k}`),inCurrentFixtures:G.has(Z.fixture_index)})))}const ee=new Map;!$||Y?_t.forEach(q=>{if(q.gw!==k)return;if(!We.get(`${q.user_id}:${k}`)){$&&k===1&&console.log("[League] API Test: Filtering out unsubmitted pick:",{user_id:q.user_id,fixture_index:q.fixture_index,userName:n.find(re=>re.id===q.user_id)?.name});return}if(!G.has(q.fixture_index)){$&&k===1&&console.log("[League] Filtering out old pick (not in current fixtures):",{fixture_index:q.fixture_index,currentIndices:Array.from(G),userName:n.find(re=>re.id===q.user_id)?.name});return}const ce=ee.get(q.fixture_index)??[];ce.push(q),ee.set(q.fixture_index,ce)}):console.log("[League] API Test: Not all submitted - skipping ALL picks processing. allSubmitted=",Y);const ae=v!==null&&v>=k,Se=n.filter(q=>!We.get(`${q.id}:${k}`)).length,we=n.filter(q=>!We.get(`${q.id}:${k}`)).map(q=>q.name),me=Wt.get(k),V=me?new Date>=me:!1;if($&&k===1){const q=n.map(re=>{const je=`${re.id}:${k}`,te=We.get(je);return{id:re.id,name:re.name,submitted:!!te,key:je}});console.log(`[League] ===== API Test GW${k} SUBMISSION CHECK =====`),console.log("[League] All submitted:",Y),console.log("[League] Remaining:",Se),console.log("[League] Who didn't submit:",we),console.log("[League] Member submission status:",q),console.log("[League] Submitted map entries:",Array.from(We.entries())),console.log("[League] ================================================");const Z=n.find(re=>re.name.toLowerCase().includes("steve")||re.name.toLowerCase().includes("s")),ce=n.find(re=>re.name.toLowerCase().includes("jof")||re.name.toLowerCase().includes("j"));if(Z){const re=`${Z.id}:${k}`;console.log(`[League] STEVE (${Z.name}):`,{id:Z.id,submitted:!!We.get(re),key:re})}if(ce){const re=`${ce.id}:${k}`;console.log(`[League] JOF (${ce.name}):`,{id:ce.id,submitted:!!We.get(re),key:re})}}console.log(`GW${k} deadline check:`,{gwDeadline:me,now:new Date,deadlinePassed:V,allSubmitted:Y,willShowPredictions:Y||V});const Q=$?!Y:!Y&&!V;return($?!Y:!Y&&!V)?(console.log(`[League] Not all submitted, showing ONLY "Who's submitted" view. Blocking all predictions/fixtures.`,{isApiTestLeague:$,allSubmitted:Y,deadlinePassed:V,remaining:Se}),s.jsx(Lr,{members:n,submittedMap:We,picksGw:k,allSubmitted:Y,remaining:Se,fixtures:Ae.filter(q=>q.gw===k),variant:"compact"})):s.jsxs("div",{className:"mt-2 pt-2",children:[Q?s.jsx(Lr,{members:n,submittedMap:We,picksGw:k,allSubmitted:Y,remaining:Se,fixtures:Ae.filter(q=>q.gw===k),variant:"full"}):null,t?.name==="API Test"&&Y&&O.length>0&&!Q&&(()=>{const q=O.flatMap(oe=>oe.items),Z=new Set(q.map(oe=>oe.fixture_index)),ce={};Object.keys($e).forEach(oe=>{const ie=parseInt(oe,10);Z.has(ie)&&(ce[ie]=$e[ie])});const re=q.some(oe=>{const ie=ce[oe.fixture_index];return ie&&(ie.status==="IN_PLAY"||ie.status==="PAUSED")}),je=q.length>0&&q.every(oe=>{const ie=ce[oe.fixture_index];return ie&&ie.status==="FINISHED"}),te=re||je||q.some(oe=>ce[oe.fixture_index]);let ve=0;return u?.id&&q.forEach(oe=>{const ie=ce[oe.fixture_index],ue=ie&&(ie.status==="IN_PLAY"||ie.status==="PAUSED"),Ye=ie&&ie.status==="FINISHED";if(ie&&(ue||Ye)){const Pe=(ee.get(oe.fixture_index)??[]).find(Ee=>Ee.user_id===u.id);if(Pe){let Ee=!1;(Pe.pick==="H"&&ie.homeScore>ie.awayScore||Pe.pick==="A"&&ie.awayScore>ie.homeScore||Pe.pick==="D"&&ie.homeScore===ie.awayScore)&&(Ee=!0),Ee&&ve++}}}),s.jsx("div",{className:"mt-3 space-y-6",children:O.map((oe,ie)=>s.jsx(Mr,{label:oe.label,fixtures:oe.items,picksByFixture:ee,members:n,outcomes:F,liveScores:ce,submittedMap:We,picksGw:k,isApiTestLeague:!0,isFirstSection:ie===0,hasLiveGames:re,allGamesFinished:je,hasStarted:te,liveFixturesCount:ve},ie))})})(),O.length>0&&t?.name!=="API Test"&&s.jsx("div",{className:"mt-3 space-y-6",children:O.map((q,Z)=>s.jsx(Mr,{label:q.label,fixtures:q.items,picksByFixture:ee,members:n,outcomes:F,liveScores:$e,submittedMap:We,picksGw:k,isApiTestLeague:!1,isFirstSection:Z===0,allSubmitted:Y,resultsPublished:ae,deadlinePassed:V,whoDidntSubmit:we},Z))}),!O.length&&!Q&&s.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-500",children:["No fixtures for GW ",k,"."]})]})}function un(){const k=t?.name==="API Test"?Qe??1:x==="gwr"?i.current?h:L||h:h;if(!k||C.length===0&&t?.name!=="API Test")return s.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No gameweek selected."});if(!xr(t,k,Wt))return s.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Results Available"}),s.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),s.jsxs("div",{className:"text-sm",children:["GW",k," results are not included in this league."]})]})});const F=new Map,O=t?.name==="API Test",G=Ae.filter(V=>V.gw===k),$=G.some(V=>{const Q=$e[V.fixture_index];return Q&&(Q.status==="IN_PLAY"||Q.status==="PAUSED"||Q.status==="FINISHED")});console.log("[League] Live Table calculation:",{resGw:k,currentGw:L,selectedGw:h,hasLiveScores:$,liveScoresCount:Object.keys($e).length,isApiTestLeague:O,fixturesCount:Ae.length,fixturesForGwCount:G.length,manualGwSelected:i.current}),O&&k===(Qe??1)?G.forEach(V=>{const Q=$e[V.fixture_index];Q&&(Q.status==="IN_PLAY"||Q.status==="PAUSED"||Q.status==="FINISHED")&&(Q.homeScore>Q.awayScore?F.set(V.fixture_index,"H"):Q.awayScore>Q.homeScore?F.set(V.fixture_index,"A"):F.set(V.fixture_index,"D"))}):$&&k===L?(console.log("[League] Using live scores for regular league GW",k),G.forEach(V=>{const Q=$e[V.fixture_index];Q&&(Q.status==="IN_PLAY"||Q.status==="PAUSED"||Q.status==="FINISHED")&&(Q.homeScore>Q.awayScore?F.set(V.fixture_index,"H"):Q.awayScore>Q.homeScore?F.set(V.fixture_index,"A"):F.set(V.fixture_index,"D"))}),console.log("[League] Outcomes from live scores:",Array.from(F.entries()))):(console.log("[League] Using results table for GW",k,{hasLiveScores:$,resGwEqualsCurrentGw:k===L,resultsCount:At.length,resultsForThisGw:At.filter(V=>V.gw===k).length,manualGwSelected:i.current,selectedGw:h}),At.forEach(V=>{if(V.gw!==k)return;const Q=er(V);Q&&F.set(V.fixture_index,Q)}),console.log("[League] Outcomes from results:",Array.from(F.entries())));const Y=n.filter(V=>We.get(`${V.id}:${k}`)).map(V=>({user_id:V.id,name:V.name,score:0,unicorns:0})),ee=new Map;_t.forEach(V=>{if(V.gw!==k||!We.get(`${V.user_id}:${k}`))return;const Q=ee.get(V.fixture_index)??[];Q.push(V),ee.set(V.fixture_index,Q)}),Array.from(F.entries()).forEach(([V,Q])=>{const q=(ee.get(V)??[]).filter(Z=>Z.pick===Q).map(Z=>Z.user_id);if(q.forEach(Z=>{const ce=Y.find(re=>re.user_id===Z);ce.score+=1}),q.length===1&&n.length>=3){const Z=Y.find(ce=>ce.user_id===q[0]);Z.unicorns+=1}}),Y.sort((V,Q)=>Q.score-V.score||Q.unicorns-V.unicorns||V.name.localeCompare(Q.name)),P.useEffect(()=>{if(Y.length===0)return;const V=new Map;Y.forEach((xe,q)=>{V.set(xe.user_id,q)});const Q=new Set;if(V.forEach((xe,q)=>{const Z=A.current.get(q);Z!==void 0&&Z!==xe&&Q.add(q)}),A.current=V,Q.size>0){T(Q);const xe=setTimeout(()=>{T(new Set)},2e3);return()=>clearTimeout(xe)}},[Y.map(V=>`${V.user_id}-${V.score}-${V.unicorns}`).join(",")]);let ae=!1,Se=!1,we=!1,me=!1;if(O&&k===(Qe??1)){const V=Ae;if(V.length>0&&(ae=V.every(xe=>{const q=$e[xe.fixture_index];return q&&q.status==="FINISHED"}),Se=!!V.find(xe=>{const q=$e[xe.fixture_index];return q&&(q.status==="IN_PLAY"||q.status==="PAUSED")}),me=V.some(xe=>{const q=$e[xe.fixture_index];return q&&(q.status==="IN_PLAY"||q.status==="PAUSED"||q.status==="FINISHED")}),!ae)){const xe=new Date;we=V.some(q=>{if(!q.kickoff_time)return!1;const ce=new Date(q.kickoff_time).getTime()-xe.getTime(),re=$e[q.fixture_index];return(!re||re.status!=="IN_PLAY"&&re.status!=="PAUSED"&&re.status!=="FINISHED")&&ce>0&&ce<=1440*60*1e3})}}else{const V=Ae.filter(Q=>Q.gw===k);if(V.length>0){const Q=V.every(q=>F.has(q.fixture_index)),xe=V.some(q=>{const Z=$e[q.fixture_index];return Z&&(Z.status==="IN_PLAY"||Z.status==="PAUSED")});ae=Q&&!xe,console.log(`[League] GW ${k} finished check:`,{allHaveResults:Q,hasActiveGames:xe,fixturesCount:V.length,outcomesCount:V.filter(q=>F.has(q.fixture_index)).length,allFixturesFinished:ae})}}return s.jsxs("div",{children:[s.jsx("style",{children:`
          @keyframes flash {
            0%, 100% {
              background-color: rgb(209, 250, 229);
            }
            25% {
              background-color: rgb(167, 243, 208);
            }
            50% {
              background-color: rgb(209, 250, 229);
            }
            75% {
              background-color: rgb(167, 243, 208);
            }
          }
          @keyframes pulse-score {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.7;
            }
          }
          @keyframes position-change {
            0% {
              background-color: rgb(254, 243, 199);
            }
            50% {
              background-color: rgb(253, 230, 138);
            }
            100% {
              background-color: transparent;
            }
          }
          .flash-user-row {
            animation: flash 1.5s ease-in-out 3;
          }
          .pulse-live-score {
            animation: pulse-score 2s ease-in-out infinite;
          }
          .position-changed {
            animation: position-change 1.5s ease-out;
          }
          .full-width-header-border::after {
            content: '';
            position: absolute;
            left: -1rem;
            right: -1rem;
            bottom: 0;
            height: 1px;
            background-color: #cbd5e1;
            z-index: 1;
          }
        `}),Y.length>0&&ae&&s.jsx(us,{winnerName:Y[0].name,isDraw:Y[0].score===Y[1]?.score&&Y[0].unicorns===Y[1]?.unicorns}),s.jsx(gs,{rows:Y,members:n,currentUserId:u?.id,positionChangeKeys:_,isApiTestLeague:O,hasLiveFixtures:Se,hasStartingSoonFixtures:we,hasStartedFixtures:me,allFixturesFinished:ae,resGw:k}),C.length>1&&s.jsx("div",{className:"mt-6 mb-4 flex flex-col items-center gap-3 px-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-3 w-full max-w-sm",children:[s.jsx(fs,{availableGws:C,selectedGw:k,onChange:V=>{i.current=!0,p(V)}}),s.jsxs("button",{onClick:()=>z(!0),className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[s.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),s.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})}),s.jsx(gr,{isOpen:B,onClose:()=>z(!1),title:"Weekly Winner",description:` How to Win the Week

The player with the most correct predictions wins.

 Unicorns

In Mini-Leagues with 3 or more players, if you're the only person to correctly predict a fixture, that's a Unicorn. In ties, the player with most Unicorns wins!`})]})}return P.useEffect(()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"auto"})},[x]),c?s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-10",children:s.jsx("div",{className:"text-slate-500",children:"Loading"})}):!t&&!c?s.jsx("div",{className:"max-w-3xl mx-auto px-4 py-10",children:s.jsxs("div",{className:"rounded border bg-white p-6",children:[s.jsx("div",{className:"font-semibold mb-2",children:"League not found"}),s.jsx(mr,{to:"/leagues",className:"text-slate-600 underline",children:"Back to Mini Leagues"})]})}):t?s.jsxs("div",{className:`${r?"oldschool-theme":"bg-slate-50"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",maxHeight:"100vh",overflow:"hidden",touchAction:"none"},children:[s.jsx("style",{children:`
        /* Prevent body/html scrolling that could affect fixed header */
        body.league-page-active {
          overflow: hidden !important;
          position: fixed !important;
          width: 100% !important;
          height: 100% !important;
        }
        html.league-page-active {
          overflow: hidden !important;
        }
        .league-header-fixed {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          z-index: 50 !important;
          transform: translate3d(0, 0, 0) !important;
          -webkit-transform: translate3d(0, 0, 0) !important;
          will-change: transform !important;
          contain: layout style paint !important;
          touch-action: none !important;
          user-select: none !important;
          -webkit-user-select: none !important;
          pointer-events: auto !important;
          -webkit-overflow-scrolling: auto !important;
          overflow: visible !important;
        }
        .league-header-fixed a,
        .league-header-fixed button {
          touch-action: manipulation !important;
          user-select: none !important;
          -webkit-user-select: none !important;
        }
        .league-header-fixed .relative {
          position: relative !important;
          z-index: 100 !important;
        }
        @supports (height: 100dvh) {
          .league-header-fixed {
            top: env(safe-area-inset-top, 0px) !important;
          }
        }
        .league-content-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
          left: 0;
          right: 0;
          bottom: 0;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: none;
          overscroll-behavior-y: none;
          overscroll-behavior-x: none;
          touch-action: pan-y;
          padding-bottom: 2rem;
          padding-left: 1rem;
          padding-right: 1rem;
          transition: top 0.3s ease-in-out;
        }
        .league-content-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
        }
        .league-content-wrapper.menu-open {
          top: calc(3.5rem + 3rem + 12rem + env(safe-area-inset-top, 0px) + 0.5rem);
        }
        .league-content-wrapper.menu-open.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + 12rem + env(safe-area-inset-top, 0px) + 0.5rem);
        }
        @media (max-width: 768px) {
          .league-content-wrapper {
            top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
            padding-bottom: 2rem;
            padding-left: 1rem;
            padding-right: 1rem;
          }
          .league-content-wrapper.has-banner {
            top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
          }
          .league-content-wrapper.menu-open {
            top: calc(3.5rem + 3rem + 12rem + env(safe-area-inset-top, 0px) + 0.5rem);
          }
          .league-content-wrapper.menu-open.has-banner {
            top: calc(3.5rem + 3rem + 3.5rem + 12rem + env(safe-area-inset-top, 0px) + 0.5rem);
          }
        }
        /* Chat tab - full height layout */
        .chat-tab-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px));
          left: 0;
          right: 0;
          bottom: 0;
          height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          z-index: 10;
          overflow: visible;
          pointer-events: none;
        }
        .chat-tab-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px));
          height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
        }
        .chat-tab-wrapper > * {
          pointer-events: auto;
        }
        @supports (height: 100dvh) {
          .chat-tab-wrapper {
            height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          }
          .chat-tab-wrapper.has-banner {
            height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          }
        }
      `}),s.jsx("div",{ref:f,className:"league-header-fixed bg-white border-b border-slate-200 shadow-sm",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx(mr,{to:"/leagues",className:"flex items-center text-slate-600 hover:text-slate-900 transition-colors -ml-2 px-2 py-1",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 px-2",children:[s.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-slate-100 border border-slate-200 flex-shrink-0 relative",children:t?s.jsx("img",{src:pr(t),alt:"League badge",className:"absolute inset-0 w-full h-full object-cover",loading:"eager",decoding:"async",onError:k=>{const F=k.target;console.error("[League] Badge image failed to load:",F.src,"League:",t);const G=`/assets/league-avatars/${bn(t.id)}`;F.src!==G&&(F.src=G)}}):s.jsx("div",{className:"w-full h-full bg-slate-200"})}),s.jsx("h1",{className:"text-lg font-normal text-slate-900 truncate",children:t.name})]}),s.jsx("div",{className:"relative",style:{zIndex:100},children:s.jsx("button",{onClick:()=>Ue(!De),className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-slate-100 transition-colors -mr-2","aria-label":"Menu",children:s.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]}),s.jsx("div",{className:`bg-white border-b border-slate-200 transition-all duration-300 ease-in-out overflow-hidden ${De?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:s.jsxs("div",{className:"px-4 py-3",children:[dt&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-3 pb-3 border-b border-slate-200 px-0",children:[s.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Admin"}),s.jsx("div",{className:"text-sm font-semibold text-slate-800",children:Vr})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>{R(!0),Ue(!1)},className:"w-full text-left px-0 py-2.5 text-base font-bold text-slate-700 hover:bg-slate-50 active:bg-slate-100 rounded-lg transition-colors flex items-center gap-2 touch-manipulation",children:[s.jsxs("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{children:"Manage"})]}),s.jsxs("button",{onClick:()=>{pe(!0),Ue(!1)},className:"w-full text-left px-0 py-2.5 text-base font-bold text-slate-700 hover:bg-slate-50 active:bg-slate-100 rounded-lg transition-colors flex items-center gap-2 touch-manipulation",children:[s.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:"Upload League Badge"})]})]}),s.jsx("div",{className:"my-3 border-b border-slate-200"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>{He(!0),Ue(!1)},className:"w-full text-left px-0 py-2.5 text-base font-bold text-slate-700 hover:bg-slate-50 active:bg-slate-100 rounded-lg transition-colors flex items-center gap-2 touch-manipulation",children:[s.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Invite players"})]}),s.jsxs("button",{onClick:()=>{or(),Ue(!1)},className:"w-full text-left px-0 py-2.5 text-base font-bold text-slate-700 hover:bg-slate-50 active:bg-slate-100 rounded-lg transition-colors flex items-center gap-2 touch-manipulation",children:[s.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),s.jsx("span",{children:"Share league code"})]}),s.jsxs("button",{onClick:()=>{S(!0),Ue(!1)},className:"w-full text-left px-0 py-2.5 text-base font-bold text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-colors flex items-center gap-2 touch-manipulation",children:[s.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),s.jsx("span",{children:"Leave"})]})]})]})}),s.jsxs("div",{className:`flex border-b border-slate-200 bg-white gap-2 transition-all duration-300 ease-in-out ${De?"max-h-0 opacity-0 overflow-hidden":"max-h-20 opacity-100"}`,children:[s.jsxs("button",{onClick:()=>{l.current=!0,o("chat-beta")},className:"flex-1 min-w-0 px-2 sm:px-4 py-3 text-[12px] font-semibold transition-colors relative leading-tight whitespace-normal "+(x==="chat-beta"?"text-[#1C8376]":"text-slate-400"),children:[s.jsx("span",{className:"hidden sm:inline",children:"Chat (beta)"}),s.jsx("span",{className:"sm:hidden whitespace-pre-line text-center",children:`Chat
(beta)`}),x==="chat-beta"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(C.length>0||t?.name==="API Test")&&s.jsxs("button",{onClick:()=>{l.current=!0,o("gwr")},className:"flex-1 min-w-0 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight flex items-center justify-center gap-1.5 "+(x==="gwr"?"text-[#1C8376]":"text-slate-400"),children:[(()=>{const k=t?.name==="API Test"?Qe??1:L||h,F=t?.name==="API Test"?`T${k}`:k,O=new Date,G=Ae[0],$=G?.kickoff_time?new Date(G.kickoff_time):null,Y=$&&$<=O,ae=Ae[Ae.length-1]?.fixture_index,we=(ae!==void 0?$e[ae]:null)?.status==="FINISHED",me=Y&&!we,V=me?"Live Table":"Results";return s.jsxs(s.Fragment,{children:[me&&s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:F?`GW ${F} ${V}`:`GW ${V}`}),s.jsx("span",{className:"sm:hidden whitespace-pre-line text-center",children:F?`GW${F}
${V.replace(" ","")}`:`GW
${V.replace(" ","")}`})]})})(),x==="gwr"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(L||t?.name==="API Test")&&s.jsxs("button",{onClick:()=>{l.current=!0,o("gw")},className:"flex-1 min-w-0 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight "+(x==="gw"?"text-[#1C8376]":"text-slate-400"),children:[s.jsx("span",{className:"hidden sm:inline",children:t?.name==="API Test"?`GW T${Qe??1} Predictions`:L?`GW ${L} Predictions`:"GW Predictions"}),s.jsx("span",{className:"sm:hidden whitespace-pre-line",children:t?.name==="API Test"?`GWT${Qe??1}
Predictions`:L?`GW${L}
Predictions`:`GW
Predictions`}),x==="gw"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),s.jsxs("button",{onClick:()=>{l.current=!0,o("mlt")},className:"flex-1 min-w-0 px-2 sm:px-4 py-3 text-sm font-semibold transition-colors relative "+(x==="mlt"?"text-[#1C8376]":"text-slate-400"),children:["Table",x==="mlt"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]})]})]})}),x==="chat"?s.jsx("div",{className:"chat-tab-wrapper",children:s.jsx(js,{chat:pt,userId:u?.id,nameById:sr,isMember:qr,newMsg:bt,setNewMsg:et,onSend:ln,leagueCode:t?.code,memberCount:n.length,maxMembers:Rt,notificationStatus:ct})}):x==="chat-beta"?s.jsx("div",{className:"chat-tab-wrapper",children:s.jsx(ds,{miniLeagueId:t?.id??null,memberNames:sr})}):s.jsx("div",{className:`league-content-wrapper ${De?"menu-open":""}`,children:s.jsxs("div",{className:"px-1 sm:px-2",children:[x==="mlt"&&s.jsx(cn,{}),x==="gw"&&s.jsx(dn,{}),x==="gwr"&&s.jsx(un,{})]})}),dt&&H&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>R(!1),children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:k=>k.stopPropagation(),children:[s.jsx("button",{onClick:()=>R(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"p-6 pt-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"League Management"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-slate-600 mb-3 font-semibold",children:"Remove Members:"}),s.jsxs("div",{className:"space-y-2",children:[n.filter(k=>k.id!==u?.id).map(k=>s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-slate-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-slate-800",children:k.name}),s.jsx("button",{onClick:()=>{Nt(k),Ze(!0),R(!1)},className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded-md transition-colors font-medium",children:"Remove"})]},k.id)),n.filter(k=>k.id!==u?.id).length===0&&s.jsx("div",{className:"text-sm text-slate-500 italic py-4 text-center",children:"No other members to remove"})]})]}),s.jsx("div",{className:"pt-4 border-t border-slate-200",children:s.jsx("button",{onClick:()=>{Xe(!0),R(!1)},className:"w-full px-4 py-3 text-sm bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:" End League"})})]})]})]})}),dt&&ne&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{pe(!1),Ne&&URL.revokeObjectURL(Ne),be(null),fe(null),Ge(!1),Ce(null)},children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full mx-4 relative",onClick:k=>k.stopPropagation(),children:[s.jsx("button",{onClick:()=>{pe(!1),Ne&&URL.revokeObjectURL(Ne),be(null),fe(null),Ge(!1),Ce(null)},className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors z-10",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"p-4 pt-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"League Badge"}),s.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Upload and customize your mini-league badge"}),Ie?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-xs text-slate-600",children:[s.jsx("p",{className:"font-medium",children:"Position your image"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Drag to position, use slider to zoom"})]}),s.jsx("div",{className:"relative w-full",style:{height:"280px"},children:s.jsx(Kn,{image:Ie,crop:Fe,zoom:ge,aspect:1,cropShape:"round",showGrid:!1,onCropChange:ye,onZoomChange:Te,onCropComplete:en,style:{containerStyle:{width:"100%",height:"100%",position:"relative"}}})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-700",children:["Zoom: ",Math.round(ge*100),"%"]}),s.jsx("input",{type:"range",min:1,max:3,step:.1,value:ge,onChange:k=>Te(Number(k.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#1C8376] touch-manipulation",style:{WebkitTapHighlightColor:"transparent"}})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-xs font-medium text-slate-700",children:"Preview:"}),s.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-slate-100 border-2 border-slate-300 flex items-center justify-center flex-shrink-0",children:Ne?s.jsx("img",{src:Ne,alt:"Preview",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-slate-200"})})]})]}),he&&s.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded-lg text-xs text-red-800",children:he}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{onClick:()=>{Ne&&URL.revokeObjectURL(Ne),be(null),ye({x:0,y:0}),Te(1),ke(null),Ce(null)},disabled:de,className:"flex-1 px-4 py-3 bg-slate-100 text-slate-700 rounded-lg active:bg-slate-200 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation min-h-[44px]",children:"Cancel"}),s.jsx("button",{onClick:tn,disabled:de||!Me,className:"flex-1 px-4 py-3 bg-[#1C8376] text-white rounded-lg active:bg-emerald-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation min-h-[44px]",children:de?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Uploading..."]}):"Upload Badge"})]})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-xs text-slate-600 mb-2 font-medium",children:"Current Badge:"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-slate-100 flex items-center justify-center border-2 border-slate-200",children:s.jsx("img",{src:t?pr(t):"/assets/league-avatars/ML-avatar-1.png",alt:"League badge",className:"w-full h-full object-cover",onError:k=>{const F=k.target;F.src="/assets/league-avatars/ML-avatar-1.png"}})}),t?.avatar&&s.jsx("button",{onClick:rn,disabled:de,className:"px-4 py-2 text-xs bg-red-100 text-red-700 active:bg-red-200 rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation min-h-[36px]",children:"Remove"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Choose Image"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:k=>{const F=k.target.files?.[0];F&&Xr(F)},disabled:de,className:"hidden",id:"badge-upload-input"}),s.jsx("label",{htmlFor:"badge-upload-input",className:"block w-full border-2 border-dashed border-slate-300 rounded-lg p-6 text-center active:bg-slate-50 active:border-[#1C8376] transition-colors touch-manipulation",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("svg",{className:"w-10 h-10 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("div",{className:"text-sm",children:s.jsx("span",{className:"text-[#1C8376] font-semibold",children:"Tap to choose image"})}),s.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG, or WebP (max 2MB)"})]})})]}),de&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-[#1C8376]"}),s.jsx("span",{children:"Processing and uploading..."})]}),Le&&s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-lg text-xs text-green-800",children:" Badge uploaded successfully!"}),he&&s.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded-lg text-xs text-red-800",children:he})]})]})]})]})}),s.jsx(gr,{isOpen:K,onClose:()=>J(!1),title:"League Points",description:`Win the week  3 points
Draw  1 point
Lose  0 points

 Ties

If two or more players are tied on Points in the table, the player with the most overall Unicorns in the mini league is ranked higher.${t&&(["The Bird league"].includes(t.name)||["gregVjofVcarl","Let Down"].includes(t.name))?`

Note: This mini league started after GW1, so the "CP" column shows correct predictions since this mini league began.`:""}`}),_e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Invite players"}),s.jsxs("p",{className:"text-slate-600 text-sm",children:["Share this code (up to ",Rt," members):"]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.code}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.code)},className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Copy"}),s.jsx("button",{onClick:or,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Share"})]}),s.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:[n.length,"/",Rt," members"]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:()=>He(!1),className:"px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50",children:"Close"})})]})}),E&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Leave League"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:['Are you sure you want to leave "',t?.name,`"? You'll need the league code to rejoin later.`]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:I,children:"Cancel"}),s.jsx("button",{onClick:Kr,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:I,children:I?"Leaving...":"Leave League"})]})]})}),nt&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Join Mini League"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:["You are about to join ",s.jsxs("strong",{children:['"',t?.name,'"']}),". Are you sure?"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>ht(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:Re,children:"Cancel"}),s.jsx("button",{onClick:Zr,className:"flex-1 px-4 py-2 bg-[#1C8376] text-white rounded-md hover:bg-emerald-700 transition-colors disabled:opacity-50",disabled:Re,children:Re?"Joining...":"Join League"})]})]})}),qe&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Remove Member"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:["Are you sure you want to remove ",s.jsxs("strong",{children:['"',mt?.name,'"']})," from the league? They will need the league code to rejoin."]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>Ze(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:gt,children:"Cancel"}),s.jsx("button",{onClick:Yr,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:gt,children:gt?"Removing...":"Remove Member"})]})]})}),Je&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:" End League"}),s.jsxs("p",{className:"text-slate-600 mb-4",children:["Are you absolutely sure you want to ",s.jsx("strong",{children:"permanently end"})," the league ",s.jsxs("strong",{children:['"',t?.name,'"']}),"?"]}),s.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This will remove all members and delete the league forever. This action cannot be undone!"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>Xe(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:lt,children:"Cancel"}),s.jsx("button",{onClick:Jr,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:lt,children:lt?"Ending...":"Yes, End League"})]})]})}),t?.name==="API Test"&&s.jsx("div",{className:"mt-6 mb-4 px-4 py-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:" Test League:"})," This league uses test API data and starts from Test GW 1 with zero points. It does not affect your main game scores."]})})]}):null}export{Ss as default};
