import{u as h,r,s as o,j as t,B as g}from"./index-CCDaE4_f.js";function b(){const{user:i}=h(),[e,d]=r.useState(null),[f,u]=r.useState(null),[p,x]=r.useState(null),[w,_]=r.useState(!0);return r.useEffect(()=>{i&&(async()=>{try{const{data:s}=await o.from("app_meta").select("current_gw").eq("id",1).maybeSingle(),n=s?.current_gw||17,{data:a}=await o.from("app_fixtures").select("*").eq("gw",n).order("fixture_index",{ascending:!0}).limit(1).maybeSingle();if(a){d(a);const{data:m}=await o.from("app_team_forms").select("team_code, form").eq("gw",n).in("team_code",[a.home_code?.toUpperCase(),a.away_code?.toUpperCase()].filter(Boolean));if(m){const c=new Map(m.map(l=>[l.team_code.toUpperCase(),l.form]));u(c.get(a.home_code?.toUpperCase()||"")||null),x(c.get(a.away_code?.toUpperCase()||"")||null)}}}catch(s){console.error("Error loading preview:",s)}finally{_(!1)}})()},[i]),w?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1C8376]"})}):e?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-8",children:t.jsx("div",{className:"w-full max-w-md",style:{height:"600px"},children:t.jsx(g,{fixture:{id:e.id,fixture_index:e.fixture_index,home_team:e.home_team||e.home_name||"",away_team:e.away_team||e.away_name||"",home_code:e.home_code,away_code:e.away_code,home_name:e.home_name,away_name:e.away_name,kickoff_time:e.kickoff_time},homeColor:"#EF0107",awayColor:"#034694",showSwipeHint:!0,homeForm:f,awayForm:p})})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-8",children:t.jsxs("div",{className:"text-center text-slate-600",children:[t.jsx("p",{className:"text-lg font-semibold mb-2",children:"No fixtures found"}),t.jsx("p",{className:"text-sm",children:"Publish a gameweek to see the swipe card preview"})]})})}export{b as default};
