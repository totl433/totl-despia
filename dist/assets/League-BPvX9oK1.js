import{b as Js,r as I,s as de,u as Ls,j as e,c as Qs,L as _s}from"./index-Biua6bUl.js";import{r as Zs,a as Xs,s as ks}from"./leagueStart-Cqug3ruV.js";import{u as er}from"./useLiveScores-RNlAPvF0.js";import{g as _t}from"./teamNames-lueGeFt9.js";var tr=Js();function sr(p,w){return w.forEach((function(R){R&&typeof R!="string"&&!Array.isArray(R)&&Object.keys(R).forEach((function(a){if(a!=="default"&&!(a in p)){var s=Object.getOwnPropertyDescriptor(R,a);Object.defineProperty(p,a,s.get?s:{enumerable:!0,get:function(){return R[a]}})}}))})),Object.freeze(p)}function Es(p,w){return new Promise((function(R,a){let s;return rr(p).then((function(t){try{return s=t,R(new Blob([w.slice(0,2),s,w.slice(2)],{type:"image/jpeg"}))}catch(m){return a(m)}}),a)}))}const rr=p=>new Promise(((w,R)=>{const a=new FileReader;a.addEventListener("load",(({target:{result:s}})=>{const t=new DataView(s);let m=0;if(t.getUint16(m)!==65496)return R("not a valid JPEG");for(m+=2;;){const u=t.getUint16(m);if(u===65498)break;const N=t.getUint16(m+2);if(u===65505&&t.getUint32(m+4)===1165519206){const v=m+10;let n;switch(t.getUint16(v)){case 18761:n=!0;break;case 19789:n=!1;break;default:return R("TIFF header contains invalid endian")}if(t.getUint16(v+2,n)!==42)return R("TIFF header contains invalid version");const i=t.getUint32(v+4,n),r=v+i+2+12*t.getUint16(v+i,n);for(let o=v+i+2;o<r;o+=12)if(t.getUint16(o,n)==274){if(t.getUint16(o+2,n)!==3)return R("Orientation data type is invalid");if(t.getUint32(o+4,n)!==1)return R("Orientation data count is invalid");t.setUint16(o+8,1,n);break}return w(s.slice(m,m+2+N))}m+=2+N}return w(new Blob)})),a.readAsArrayBuffer(p)}));var Jt={},nr={get exports(){return Jt},set exports(p){Jt=p}};(function(p){var w,R,a={};nr.exports=a,a.parse=function(s,t){for(var m=a.bin.readUshort,u=a.bin.readUint,N=0,v={},n=new Uint8Array(s),i=n.length-4;u(n,i)!=101010256;)i--;N=i,N+=4;var r=m(n,N+=4);m(n,N+=2);var o=u(n,N+=2),x=u(n,N+=4);N+=4,N=x;for(var A=0;A<r;A++){u(n,N),N+=4,N+=4,N+=4,u(n,N+=4),o=u(n,N+=4);var T=u(n,N+=4),_=m(n,N+=4),$=m(n,N+2),U=m(n,N+4);N+=6;var M=u(n,N+=8);N+=4,N+=_+$+U,a._readLocal(n,M,v,o,T,t)}return v},a._readLocal=function(s,t,m,u,N,v){var n=a.bin.readUshort,i=a.bin.readUint;i(s,t),n(s,t+=4),n(s,t+=2);var r=n(s,t+=2);i(s,t+=2),i(s,t+=4),t+=4;var o=n(s,t+=8),x=n(s,t+=2);t+=2;var A=a.bin.readUTF8(s,t,o);if(t+=o,t+=x,v)m[A]={size:N,csize:u};else{var T=new Uint8Array(s.buffer,t);if(r==0)m[A]=new Uint8Array(T.buffer.slice(t,t+u));else{if(r!=8)throw"unknown compression method: "+r;var _=new Uint8Array(N);a.inflateRaw(T,_),m[A]=_}}},a.inflateRaw=function(s,t){return a.F.inflate(s,t)},a.inflate=function(s,t){return s[0],s[1],a.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),t)},a.deflate=function(s,t){t==null&&(t={level:6});var m=0,u=new Uint8Array(50+Math.floor(1.1*s.length));u[m]=120,u[m+1]=156,m+=2,m=a.F.deflateRaw(s,u,m,t.level);var N=a.adler(s,0,s.length);return u[m+0]=N>>>24&255,u[m+1]=N>>>16&255,u[m+2]=N>>>8&255,u[m+3]=N>>>0&255,new Uint8Array(u.buffer,0,m+4)},a.deflateRaw=function(s,t){t==null&&(t={level:6});var m=new Uint8Array(50+Math.floor(1.1*s.length)),u=a.F.deflateRaw(s,m,u,t.level);return new Uint8Array(m.buffer,0,u)},a.encode=function(s,t){t==null&&(t=!1);var m=0,u=a.bin.writeUint,N=a.bin.writeUshort,v={};for(var n in s){var i=!a._noNeed(n)&&!t,r=s[n],o=a.crc.crc(r,0,r.length);v[n]={cpr:i,usize:r.length,crc:o,file:i?a.deflateRaw(r):r}}for(var n in v)m+=v[n].file.length+30+46+2*a.bin.sizeUTF8(n);m+=22;var x=new Uint8Array(m),A=0,T=[];for(var n in v){var _=v[n];T.push(A),A=a._writeHeader(x,A,n,_,0)}var $=0,U=A;for(var n in v)_=v[n],T.push(A),A=a._writeHeader(x,A,n,_,1,T[$++]);var M=A-U;return u(x,A,101010256),A+=4,N(x,A+=4,$),N(x,A+=2,$),u(x,A+=2,M),u(x,A+=4,U),A+=4,A+=2,x.buffer},a._noNeed=function(s){var t=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},a._writeHeader=function(s,t,m,u,N,v){var n=a.bin.writeUint,i=a.bin.writeUshort,r=u.file;return n(s,t,N==0?67324752:33639248),t+=4,N==1&&(t+=2),i(s,t,20),i(s,t+=2,0),i(s,t+=2,u.cpr?8:0),n(s,t+=2,0),n(s,t+=4,u.crc),n(s,t+=4,r.length),n(s,t+=4,u.usize),i(s,t+=4,a.bin.sizeUTF8(m)),i(s,t+=2,0),t+=2,N==1&&(t+=2,t+=2,n(s,t+=6,v),t+=4),t+=a.bin.writeUTF8(s,t,m),N==0&&(s.set(r,t),t+=r.length),t},a.crc={table:(function(){for(var s=new Uint32Array(256),t=0;t<256;t++){for(var m=t,u=0;u<8;u++)1&m?m=3988292384^m>>>1:m>>>=1;s[t]=m}return s})(),update:function(s,t,m,u){for(var N=0;N<u;N++)s=a.crc.table[255&(s^t[m+N])]^s>>>8;return s},crc:function(s,t,m){return 4294967295^a.crc.update(4294967295,s,t,m)}},a.adler=function(s,t,m){for(var u=1,N=0,v=t,n=t+m;v<n;){for(var i=Math.min(v+5552,n);v<i;)N+=u+=s[v++];u%=65521,N%=65521}return N<<16|u},a.bin={readUshort:function(s,t){return s[t]|s[t+1]<<8},writeUshort:function(s,t,m){s[t]=255&m,s[t+1]=m>>8&255},readUint:function(s,t){return 16777216*s[t+3]+(s[t+2]<<16|s[t+1]<<8|s[t])},writeUint:function(s,t,m){s[t]=255&m,s[t+1]=m>>8&255,s[t+2]=m>>16&255,s[t+3]=m>>24&255},readASCII:function(s,t,m){for(var u="",N=0;N<m;N++)u+=String.fromCharCode(s[t+N]);return u},writeASCII:function(s,t,m){for(var u=0;u<m.length;u++)s[t+u]=m.charCodeAt(u)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,t,m){for(var u,N="",v=0;v<m;v++)N+="%"+a.bin.pad(s[t+v].toString(16));try{u=decodeURIComponent(N)}catch{return a.bin.readASCII(s,t,m)}return u},writeUTF8:function(s,t,m){for(var u=m.length,N=0,v=0;v<u;v++){var n=m.charCodeAt(v);if((4294967168&n)==0)s[t+N]=n,N++;else if((4294965248&n)==0)s[t+N]=192|n>>6,s[t+N+1]=128|n>>0&63,N+=2;else if((4294901760&n)==0)s[t+N]=224|n>>12,s[t+N+1]=128|n>>6&63,s[t+N+2]=128|n>>0&63,N+=3;else{if((4292870144&n)!=0)throw"e";s[t+N]=240|n>>18,s[t+N+1]=128|n>>12&63,s[t+N+2]=128|n>>6&63,s[t+N+3]=128|n>>0&63,N+=4}}return N},sizeUTF8:function(s){for(var t=s.length,m=0,u=0;u<t;u++){var N=s.charCodeAt(u);if((4294967168&N)==0)m++;else if((4294965248&N)==0)m+=2;else if((4294901760&N)==0)m+=3;else{if((4292870144&N)!=0)throw"e";m+=4}}return m}},a.F={},a.F.deflateRaw=function(s,t,m,u){var N=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],v=a.F.U,n=a.F._goodIndex;a.F._hash;var i=a.F._putsE,r=0,o=m<<3,x=0,A=s.length;if(u==0){for(;r<A;)i(t,o,r+(k=Math.min(65535,A-r))==A?1:0),o=a.F._copyExact(s,r,k,t,o+8),r+=k;return o>>>3}var T=v.lits,_=v.strt,$=v.prev,U=0,M=0,P=0,h=0,L=0,l=0;for(A>2&&(_[l=a.F._hash(s,0)]=0),r=0;r<A;r++){if(L=l,r+1<A-2){l=a.F._hash(s,r+1);var d=r+1&32767;$[d]=_[l],_[l]=d}if(x<=r){(U>14e3||M>26697)&&A-r>100&&(x<r&&(T[U]=r-x,U+=2,x=r),o=a.F._writeBlock(r==A-1||x==A?1:0,T,U,h,s,P,r-P,t,o),U=M=h=0,P=r);var y=0;r<A-2&&(y=a.F._bestMatch(s,r,$,L,Math.min(N[2],A-r),N[3]));var k=y>>>16,g=65535&y;if(y!=0){g=65535&y;var j=n(k=y>>>16,v.of0);v.lhst[257+j]++;var b=n(g,v.df0);v.dhst[b]++,h+=v.exb[j]+v.dxb[b],T[U]=k<<23|r-x,T[U+1]=g<<16|j<<8|b,U+=2,x=r+k}else v.lhst[s[r]]++;M++}}for(P==r&&s.length!=0||(x<r&&(T[U]=r-x,U+=2,x=r),o=a.F._writeBlock(1,T,U,h,s,P,r-P,t,o),U=0,M=0,U=M=h=0,P=r);(7&o)!=0;)o++;return o>>>3},a.F._bestMatch=function(s,t,m,u,N,v){var n=32767&t,i=m[n],r=n-i+32768&32767;if(i==n||u!=a.F._hash(s,t-r))return 0;for(var o=0,x=0,A=Math.min(32767,t);r<=A&&--v!=0&&i!=n;){if(o==0||s[t+o]==s[t+o-r]){var T=a.F._howLong(s,t,r);if(T>o){if(x=r,(o=T)>=N)break;r+2<T&&(T=r+2);for(var _=0,$=0;$<T-2;$++){var U=t-r+$+32768&32767,M=U-m[U]+32768&32767;M>_&&(_=M,i=U)}}}r+=(n=i)-(i=m[n])+32768&32767}return o<<16|x},a.F._howLong=function(s,t,m){if(s[t]!=s[t-m]||s[t+1]!=s[t+1-m]||s[t+2]!=s[t+2-m])return 0;var u=t,N=Math.min(s.length,t+258);for(t+=3;t<N&&s[t]==s[t-m];)t++;return t-u},a.F._hash=function(s,t){return(s[t]<<8|s[t+1])+(s[t+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(s,t,m,u,N,v,n,i,r){var o,x,A,T,_,$,U,M,P,h=a.F.U,L=a.F._putsF,l=a.F._putsE;h.lhst[256]++,x=(o=a.F.getTrees())[0],A=o[1],T=o[2],_=o[3],$=o[4],U=o[5],M=o[6],P=o[7];var d=32+((r+3&7)==0?0:8-(r+3&7))+(n<<3),y=u+a.F.contSize(h.fltree,h.lhst)+a.F.contSize(h.fdtree,h.dhst),k=u+a.F.contSize(h.ltree,h.lhst)+a.F.contSize(h.dtree,h.dhst);k+=14+3*U+a.F.contSize(h.itree,h.ihst)+(2*h.ihst[16]+3*h.ihst[17]+7*h.ihst[18]);for(var g=0;g<286;g++)h.lhst[g]=0;for(g=0;g<30;g++)h.dhst[g]=0;for(g=0;g<19;g++)h.ihst[g]=0;var j=d<y&&d<k?0:y<k?1:2;if(L(i,r,s),L(i,r+1,j),r+=3,j==0){for(;(7&r)!=0;)r++;r=a.F._copyExact(N,v,n,i,r)}else{var b,S;if(j==1&&(b=h.fltree,S=h.fdtree),j==2){a.F.makeCodes(h.ltree,x),a.F.revCodes(h.ltree,x),a.F.makeCodes(h.dtree,A),a.F.revCodes(h.dtree,A),a.F.makeCodes(h.itree,T),a.F.revCodes(h.itree,T),b=h.ltree,S=h.dtree,l(i,r,_-257),l(i,r+=5,$-1),l(i,r+=5,U-4),r+=4;for(var f=0;f<U;f++)l(i,r+3*f,h.itree[1+(h.ordr[f]<<1)]);r+=3*U,r=a.F._codeTiny(M,h.itree,i,r),r=a.F._codeTiny(P,h.itree,i,r)}for(var c=v,D=0;D<m;D+=2){for(var E=t[D],H=E>>>23,re=c+(8388607&E);c<re;)r=a.F._writeLit(N[c++],b,i,r);if(H!=0){var K=t[D+1],ee=K>>16,B=K>>8&255,F=255&K;l(i,r=a.F._writeLit(257+B,b,i,r),H-h.of0[B]),r+=h.exb[B],L(i,r=a.F._writeLit(F,S,i,r),ee-h.df0[F]),r+=h.dxb[F],c+=H}}r=a.F._writeLit(256,b,i,r)}return r},a.F._copyExact=function(s,t,m,u,N){var v=N>>>3;return u[v]=m,u[v+1]=m>>>8,u[v+2]=255-u[v],u[v+3]=255-u[v+1],v+=4,u.set(new Uint8Array(s.buffer,t,m),v),N+(m+4<<3)},a.F.getTrees=function(){for(var s=a.F.U,t=a.F._hufTree(s.lhst,s.ltree,15),m=a.F._hufTree(s.dhst,s.dtree,15),u=[],N=a.F._lenCodes(s.ltree,u),v=[],n=a.F._lenCodes(s.dtree,v),i=0;i<u.length;i+=2)s.ihst[u[i]]++;for(i=0;i<v.length;i+=2)s.ihst[v[i]]++;for(var r=a.F._hufTree(s.ihst,s.itree,7),o=19;o>4&&s.itree[1+(s.ordr[o-1]<<1)]==0;)o--;return[t,m,r,N,n,o,u,v]},a.F.getSecond=function(s){for(var t=[],m=0;m<s.length;m+=2)t.push(s[m+1]);return t},a.F.nonZero=function(s){for(var t="",m=0;m<s.length;m+=2)s[m+1]!=0&&(t+=(m>>1)+",");return t},a.F.contSize=function(s,t){for(var m=0,u=0;u<t.length;u++)m+=t[u]*s[1+(u<<1)];return m},a.F._codeTiny=function(s,t,m,u){for(var N=0;N<s.length;N+=2){var v=s[N],n=s[N+1];u=a.F._writeLit(v,t,m,u);var i=v==16?2:v==17?3:7;v>15&&(a.F._putsE(m,u,n,i),u+=i)}return u},a.F._lenCodes=function(s,t){for(var m=s.length;m!=2&&s[m-1]==0;)m-=2;for(var u=0;u<m;u+=2){var N=s[u+1],v=u+3<m?s[u+3]:-1,n=u+5<m?s[u+5]:-1,i=u==0?-1:s[u-1];if(N==0&&v==N&&n==N){for(var r=u+5;r+2<m&&s[r+2]==N;)r+=2;(o=Math.min(r+1-u>>>1,138))<11?t.push(17,o-3):t.push(18,o-11),u+=2*o-2}else if(N==i&&v==N&&n==N){for(r=u+5;r+2<m&&s[r+2]==N;)r+=2;var o=Math.min(r+1-u>>>1,6);t.push(16,o-3),u+=2*o-2}else t.push(N,0)}return m>>>1},a.F._hufTree=function(s,t,m){var u=[],N=s.length,v=t.length,n=0;for(n=0;n<v;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<N;n++)s[n]!=0&&u.push({lit:n,f:s[n]});var i=u.length,r=u.slice(0);if(i==0)return 0;if(i==1){var o=u[0].lit;return r=o==0?1:0,t[1+(o<<1)]=1,t[1+(r<<1)]=1,1}u.sort((function(M,P){return M.f-P.f}));var x=u[0],A=u[1],T=0,_=1,$=2;for(u[0]={lit:-1,f:x.f+A.f,l:x,r:A,d:0};_!=i-1;)x=T!=_&&($==i||u[T].f<u[$].f)?u[T++]:u[$++],A=T!=_&&($==i||u[T].f<u[$].f)?u[T++]:u[$++],u[_++]={lit:-1,f:x.f+A.f,l:x,r:A};var U=a.F.setDepth(u[_-1],0);for(U>m&&(a.F.restrictDepth(r,m,U),U=m),n=0;n<i;n++)t[1+(r[n].lit<<1)]=r[n].d;return U},a.F.setDepth=function(s,t){return s.lit!=-1?(s.d=t,t):Math.max(a.F.setDepth(s.l,t+1),a.F.setDepth(s.r,t+1))},a.F.restrictDepth=function(s,t,m){var u=0,N=1<<m-t,v=0;for(s.sort((function(i,r){return r.d==i.d?i.f-r.f:r.d-i.d})),u=0;u<s.length&&s[u].d>t;u++){var n=s[u].d;s[u].d=t,v+=N-(1<<m-n)}for(v>>>=m-t;v>0;)(n=s[u].d)<t?(s[u].d++,v-=1<<t-n-1):u++;for(;u>=0;u--)s[u].d==t&&v<0&&(s[u].d--,v++);v!=0&&console.log("debt left")},a.F._goodIndex=function(s,t){var m=0;return t[16|m]<=s&&(m|=16),t[8|m]<=s&&(m|=8),t[4|m]<=s&&(m|=4),t[2|m]<=s&&(m|=2),t[1|m]<=s&&(m|=1),m},a.F._writeLit=function(s,t,m,u){return a.F._putsF(m,u,t[s<<1]),u+t[1+(s<<1)]},a.F.inflate=function(s,t){var m=Uint8Array;if(s[0]==3&&s[1]==0)return t||new m(0);var u=a.F,N=u._bitsF,v=u._bitsE,n=u._decodeTiny,i=u.makeCodes,r=u.codes2map,o=u._get17,x=u.U,A=t==null;A&&(t=new m(s.length>>>2<<3));for(var T,_,$=0,U=0,M=0,P=0,h=0,L=0,l=0,d=0,y=0;$==0;)if($=N(s,y,1),U=N(s,y+1,2),y+=3,U!=0){if(A&&(t=a.F._check(t,d+(1<<17))),U==1&&(T=x.flmap,_=x.fdmap,L=511,l=31),U==2){M=v(s,y,5)+257,P=v(s,y+5,5)+1,h=v(s,y+10,4)+4,y+=14;for(var k=0;k<38;k+=2)x.itree[k]=0,x.itree[k+1]=0;var g=1;for(k=0;k<h;k++){var j=v(s,y+3*k,3);x.itree[1+(x.ordr[k]<<1)]=j,j>g&&(g=j)}y+=3*h,i(x.itree,g),r(x.itree,g,x.imap),T=x.lmap,_=x.dmap,y=n(x.imap,(1<<g)-1,M+P,s,y,x.ttree);var b=u._copyOut(x.ttree,0,M,x.ltree);L=(1<<b)-1;var S=u._copyOut(x.ttree,M,P,x.dtree);l=(1<<S)-1,i(x.ltree,b),r(x.ltree,b,T),i(x.dtree,S),r(x.dtree,S,_)}for(;;){var f=T[o(s,y)&L];y+=15&f;var c=f>>>4;if(!(c>>>8))t[d++]=c;else{if(c==256)break;var D=d+c-254;if(c>264){var E=x.ldef[c-257];D=d+(E>>>3)+v(s,y,7&E),y+=7&E}var H=_[o(s,y)&l];y+=15&H;var re=H>>>4,K=x.ddef[re],ee=(K>>>4)+N(s,y,15&K);for(y+=15&K,A&&(t=a.F._check(t,d+(1<<17)));d<D;)t[d]=t[d++-ee],t[d]=t[d++-ee],t[d]=t[d++-ee],t[d]=t[d++-ee];d=D}}}else{(7&y)!=0&&(y+=8-(7&y));var B=4+(y>>>3),F=s[B-4]|s[B-3]<<8;A&&(t=a.F._check(t,d+F)),t.set(new m(s.buffer,s.byteOffset+B,F),d),y=B+F<<3,d+=F}return t.length==d?t:t.slice(0,d)},a.F._check=function(s,t){var m=s.length;if(t<=m)return s;var u=new Uint8Array(Math.max(m<<1,t));return u.set(s,0),u},a.F._decodeTiny=function(s,t,m,u,N,v){for(var n=a.F._bitsE,i=a.F._get17,r=0;r<m;){var o=s[i(u,N)&t];N+=15&o;var x=o>>>4;if(x<=15)v[r]=x,r++;else{var A=0,T=0;x==16?(T=3+n(u,N,2),N+=2,A=v[r-1]):x==17?(T=3+n(u,N,3),N+=3):x==18&&(T=11+n(u,N,7),N+=7);for(var _=r+T;r<_;)v[r]=A,r++}}return N},a.F._copyOut=function(s,t,m,u){for(var N=0,v=0,n=u.length>>>1;v<m;){var i=s[v+t];u[v<<1]=0,u[1+(v<<1)]=i,i>N&&(N=i),v++}for(;v<n;)u[v<<1]=0,u[1+(v<<1)]=0,v++;return N},a.F.makeCodes=function(s,t){for(var m,u,N,v,n=a.F.U,i=s.length,r=n.bl_count,o=0;o<=t;o++)r[o]=0;for(o=1;o<i;o+=2)r[s[o]]++;var x=n.next_code;for(m=0,r[0]=0,u=1;u<=t;u++)m=m+r[u-1]<<1,x[u]=m;for(N=0;N<i;N+=2)(v=s[N+1])!=0&&(s[N]=x[v],x[v]++)},a.F.codes2map=function(s,t,m){for(var u=s.length,N=a.F.U.rev15,v=0;v<u;v+=2)if(s[v+1]!=0)for(var n=v>>1,i=s[v+1],r=n<<4|i,o=t-i,x=s[v]<<o,A=x+(1<<o);x!=A;)m[N[x]>>>15-t]=r,x++},a.F.revCodes=function(s,t){for(var m=a.F.U.rev15,u=15-t,N=0;N<s.length;N+=2){var v=s[N]<<t-s[N+1];s[N]=m[v]>>>u}},a.F._putsE=function(s,t,m){m<<=7&t;var u=t>>>3;s[u]|=m,s[u+1]|=m>>>8},a.F._putsF=function(s,t,m){m<<=7&t;var u=t>>>3;s[u]|=m,s[u+1]|=m>>>8,s[u+2]|=m>>>16},a.F._bitsE=function(s,t,m){return(s[t>>>3]|s[1+(t>>>3)]<<8)>>>(7&t)&(1<<m)-1},a.F._bitsF=function(s,t,m){return(s[t>>>3]|s[1+(t>>>3)]<<8|s[2+(t>>>3)]<<16)>>>(7&t)&(1<<m)-1},a.F._get17=function(s,t){return(s[t>>>3]|s[1+(t>>>3)]<<8|s[2+(t>>>3)]<<16)>>>(7&t)},a.F._get25=function(s,t){return(s[t>>>3]|s[1+(t>>>3)]<<8|s[2+(t>>>3)]<<16|s[3+(t>>>3)]<<24)>>>(7&t)},a.F.U=(w=Uint16Array,R=Uint32Array,{next_code:new w(16),bl_count:new w(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new w(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new R(32),flmap:new w(512),fltree:[],fdmap:new w(32),fdtree:[],lmap:new w(32768),ltree:[],ttree:[],dmap:new w(32768),dtree:[],imap:new w(512),itree:[],rev15:new w(32768),lhst:new R(286),dhst:new R(30),ihst:new R(19),lits:new R(15e3),strt:new w(65536),prev:new w(32768)}),(function(){for(var s=a.F.U,t=0;t<32768;t++){var m=t;m=(4278255360&(m=(4042322160&(m=(3435973836&(m=(2863311530&m)>>>1|(1431655765&m)<<1))>>>2|(858993459&m)<<2))>>>4|(252645135&m)<<4))>>>8|(16711935&m)<<8,s.rev15[t]=(m>>>16|m<<16)>>>17}function u(N,v,n){for(;v--!=0;)N.push(0,n)}for(t=0;t<32;t++)s.ldef[t]=s.of0[t]<<3|s.exb[t],s.ddef[t]=s.df0[t]<<4|s.dxb[t];u(s.fltree,144,8),u(s.fltree,112,9),u(s.fltree,24,7),u(s.fltree,8,8),a.F.makeCodes(s.fltree,9),a.F.codes2map(s.fltree,9,s.flmap),a.F.revCodes(s.fltree,9),u(s.fdtree,32,5),a.F.makeCodes(s.fdtree,5),a.F.codes2map(s.fdtree,5,s.fdmap),a.F.revCodes(s.fdtree,5),u(s.itree,19,0),u(s.ltree,286,0),u(s.dtree,30,0),u(s.ttree,320,0)})()})();var ar=sr({__proto__:null,default:Jt},[Jt]);const dt=(function(){var p={nextZero(n,i){for(;n[i]!=0;)i++;return i},readUshort:(n,i)=>n[i]<<8|n[i+1],writeUshort(n,i,r){n[i]=r>>8&255,n[i+1]=255&r},readUint:(n,i)=>16777216*n[i]+(n[i+1]<<16|n[i+2]<<8|n[i+3]),writeUint(n,i,r){n[i]=r>>24&255,n[i+1]=r>>16&255,n[i+2]=r>>8&255,n[i+3]=255&r},readASCII(n,i,r){let o="";for(let x=0;x<r;x++)o+=String.fromCharCode(n[i+x]);return o},writeASCII(n,i,r){for(let o=0;o<r.length;o++)n[i+o]=r.charCodeAt(o)},readBytes(n,i,r){const o=[];for(let x=0;x<r;x++)o.push(n[i+x]);return o},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,i,r){let o,x="";for(let A=0;A<r;A++)x+=`%${p.pad(n[i+A].toString(16))}`;try{o=decodeURIComponent(x)}catch{return p.readASCII(n,i,r)}return o}};function w(n,i,r,o){const x=i*r,A=t(o),T=Math.ceil(i*A/8),_=new Uint8Array(4*x),$=new Uint32Array(_.buffer),{ctype:U}=o,{depth:M}=o,P=p.readUshort;if(U==6){const E=x<<2;if(M==8)for(var h=0;h<E;h+=4)_[h]=n[h],_[h+1]=n[h+1],_[h+2]=n[h+2],_[h+3]=n[h+3];if(M==16)for(h=0;h<E;h++)_[h]=n[h<<1]}else if(U==2){const E=o.tabs.tRNS;if(E==null){if(M==8)for(h=0;h<x;h++){var L=3*h;$[h]=255<<24|n[L+2]<<16|n[L+1]<<8|n[L]}if(M==16)for(h=0;h<x;h++)L=6*h,$[h]=255<<24|n[L+4]<<16|n[L+2]<<8|n[L]}else{var l=E[0];const H=E[1],re=E[2];if(M==8)for(h=0;h<x;h++){var d=h<<2;L=3*h,$[h]=255<<24|n[L+2]<<16|n[L+1]<<8|n[L],n[L]==l&&n[L+1]==H&&n[L+2]==re&&(_[d+3]=0)}if(M==16)for(h=0;h<x;h++)d=h<<2,L=6*h,$[h]=255<<24|n[L+4]<<16|n[L+2]<<8|n[L],P(n,L)==l&&P(n,L+2)==H&&P(n,L+4)==re&&(_[d+3]=0)}}else if(U==3){const E=o.tabs.PLTE,H=o.tabs.tRNS,re=H?H.length:0;if(M==1)for(var y=0;y<r;y++){var k=y*T,g=y*i;for(h=0;h<i;h++){d=g+h<<2;var j=3*(b=n[k+(h>>3)]>>7-((7&h)<<0)&1);_[d]=E[j],_[d+1]=E[j+1],_[d+2]=E[j+2],_[d+3]=b<re?H[b]:255}}if(M==2)for(y=0;y<r;y++)for(k=y*T,g=y*i,h=0;h<i;h++)d=g+h<<2,j=3*(b=n[k+(h>>2)]>>6-((3&h)<<1)&3),_[d]=E[j],_[d+1]=E[j+1],_[d+2]=E[j+2],_[d+3]=b<re?H[b]:255;if(M==4)for(y=0;y<r;y++)for(k=y*T,g=y*i,h=0;h<i;h++)d=g+h<<2,j=3*(b=n[k+(h>>1)]>>4-((1&h)<<2)&15),_[d]=E[j],_[d+1]=E[j+1],_[d+2]=E[j+2],_[d+3]=b<re?H[b]:255;if(M==8)for(h=0;h<x;h++){var b;d=h<<2,j=3*(b=n[h]),_[d]=E[j],_[d+1]=E[j+1],_[d+2]=E[j+2],_[d+3]=b<re?H[b]:255}}else if(U==4){if(M==8)for(h=0;h<x;h++){d=h<<2;var S=n[f=h<<1];_[d]=S,_[d+1]=S,_[d+2]=S,_[d+3]=n[f+1]}if(M==16)for(h=0;h<x;h++){var f;d=h<<2,S=n[f=h<<2],_[d]=S,_[d+1]=S,_[d+2]=S,_[d+3]=n[f+2]}}else if(U==0)for(l=o.tabs.tRNS?o.tabs.tRNS:-1,y=0;y<r;y++){const E=y*T,H=y*i;if(M==1)for(var c=0;c<i;c++){var D=(S=255*(n[E+(c>>>3)]>>>7-(7&c)&1))==255*l?0:255;$[H+c]=D<<24|S<<16|S<<8|S}else if(M==2)for(c=0;c<i;c++)D=(S=85*(n[E+(c>>>2)]>>>6-((3&c)<<1)&3))==85*l?0:255,$[H+c]=D<<24|S<<16|S<<8|S;else if(M==4)for(c=0;c<i;c++)D=(S=17*(n[E+(c>>>1)]>>>4-((1&c)<<2)&15))==17*l?0:255,$[H+c]=D<<24|S<<16|S<<8|S;else if(M==8)for(c=0;c<i;c++)D=(S=n[E+c])==l?0:255,$[H+c]=D<<24|S<<16|S<<8|S;else if(M==16)for(c=0;c<i;c++)S=n[E+(c<<1)],D=P(n,E+(c<<1))==l?0:255,$[H+c]=D<<24|S<<16|S<<8|S}return _}function R(n,i,r,o){const x=t(n),A=Math.ceil(r*x/8),T=new Uint8Array((A+1+n.interlace)*o);return i=n.tabs.CgBI?s(i,T):a(i,T),n.interlace==0?i=m(i,n,0,r,o):n.interlace==1&&(i=(function($,U){const M=U.width,P=U.height,h=t(U),L=h>>3,l=Math.ceil(M*h/8),d=new Uint8Array(P*l);let y=0;const k=[0,0,4,0,2,0,1],g=[0,4,0,2,0,1,0],j=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let S=0;for(;S<7;){const c=j[S],D=b[S];let E=0,H=0,re=k[S];for(;re<P;)re+=c,H++;let K=g[S];for(;K<M;)K+=D,E++;const ee=Math.ceil(E*h/8);m($,U,y,E,H);let B=0,F=k[S];for(;F<P;){let ce=g[S],Ne=y+B*ee<<3;for(;ce<M;){var f;if(h==1&&(f=(f=$[Ne>>3])>>7-(7&Ne)&1,d[F*l+(ce>>3)]|=f<<7-((7&ce)<<0)),h==2&&(f=(f=$[Ne>>3])>>6-(7&Ne)&3,d[F*l+(ce>>2)]|=f<<6-((3&ce)<<1)),h==4&&(f=(f=$[Ne>>3])>>4-(7&Ne)&15,d[F*l+(ce>>1)]|=f<<4-((1&ce)<<2)),h>=8){const he=F*l+ce*L;for(let be=0;be<L;be++)d[he+be]=$[(Ne>>3)+be]}Ne+=h,ce+=D}B++,F+=c}E*H!=0&&(y+=H*(1+ee)),S+=1}return d})(i,n)),i}function a(n,i){return s(new Uint8Array(n.buffer,2,n.length-6),i)}var s=(function(){const n={H:{}};return n.H.N=function(i,r){const o=Uint8Array;let x,A,T=0,_=0,$=0,U=0,M=0,P=0,h=0,L=0,l=0;if(i[0]==3&&i[1]==0)return r||new o(0);const d=n.H,y=d.b,k=d.e,g=d.R,j=d.n,b=d.A,S=d.Z,f=d.m,c=r==null;for(c&&(r=new o(i.length>>>2<<5));T==0;)if(T=y(i,l,1),_=y(i,l+1,2),l+=3,_!=0){if(c&&(r=n.H.W(r,L+(1<<17))),_==1&&(x=f.J,A=f.h,P=511,h=31),_==2){$=k(i,l,5)+257,U=k(i,l+5,5)+1,M=k(i,l+10,4)+4,l+=14;let E=1;for(var D=0;D<38;D+=2)f.Q[D]=0,f.Q[D+1]=0;for(D=0;D<M;D++){const K=k(i,l+3*D,3);f.Q[1+(f.X[D]<<1)]=K,K>E&&(E=K)}l+=3*M,j(f.Q,E),b(f.Q,E,f.u),x=f.w,A=f.d,l=g(f.u,(1<<E)-1,$+U,i,l,f.v);const H=d.V(f.v,0,$,f.C);P=(1<<H)-1;const re=d.V(f.v,$,U,f.D);h=(1<<re)-1,j(f.C,H),b(f.C,H,x),j(f.D,re),b(f.D,re,A)}for(;;){const E=x[S(i,l)&P];l+=15&E;const H=E>>>4;if(!(H>>>8))r[L++]=H;else{if(H==256)break;{let re=L+H-254;if(H>264){const ce=f.q[H-257];re=L+(ce>>>3)+k(i,l,7&ce),l+=7&ce}const K=A[S(i,l)&h];l+=15&K;const ee=K>>>4,B=f.c[ee],F=(B>>>4)+y(i,l,15&B);for(l+=15&B;L<re;)r[L]=r[L++-F],r[L]=r[L++-F],r[L]=r[L++-F],r[L]=r[L++-F];L=re}}}}else{(7&l)!=0&&(l+=8-(7&l));const E=4+(l>>>3),H=i[E-4]|i[E-3]<<8;c&&(r=n.H.W(r,L+H)),r.set(new o(i.buffer,i.byteOffset+E,H),L),l=E+H<<3,L+=H}return r.length==L?r:r.slice(0,L)},n.H.W=function(i,r){const o=i.length;if(r<=o)return i;const x=new Uint8Array(o<<1);return x.set(i,0),x},n.H.R=function(i,r,o,x,A,T){const _=n.H.e,$=n.H.Z;let U=0;for(;U<o;){const M=i[$(x,A)&r];A+=15&M;const P=M>>>4;if(P<=15)T[U]=P,U++;else{let h=0,L=0;P==16?(L=3+_(x,A,2),A+=2,h=T[U-1]):P==17?(L=3+_(x,A,3),A+=3):P==18&&(L=11+_(x,A,7),A+=7);const l=U+L;for(;U<l;)T[U]=h,U++}}return A},n.H.V=function(i,r,o,x){let A=0,T=0;const _=x.length>>>1;for(;T<o;){const $=i[T+r];x[T<<1]=0,x[1+(T<<1)]=$,$>A&&(A=$),T++}for(;T<_;)x[T<<1]=0,x[1+(T<<1)]=0,T++;return A},n.H.n=function(i,r){const o=n.H.m,x=i.length;let A,T,_,$;const U=o.j;for(var M=0;M<=r;M++)U[M]=0;for(M=1;M<x;M+=2)U[i[M]]++;const P=o.K;for(A=0,U[0]=0,T=1;T<=r;T++)A=A+U[T-1]<<1,P[T]=A;for(_=0;_<x;_+=2)$=i[_+1],$!=0&&(i[_]=P[$],P[$]++)},n.H.A=function(i,r,o){const x=i.length,A=n.H.m.r;for(let T=0;T<x;T+=2)if(i[T+1]!=0){const _=T>>1,$=i[T+1],U=_<<4|$,M=r-$;let P=i[T]<<M;const h=P+(1<<M);for(;P!=h;)o[A[P]>>>15-r]=U,P++}},n.H.l=function(i,r){const o=n.H.m.r,x=15-r;for(let A=0;A<i.length;A+=2){const T=i[A]<<r-i[A+1];i[A]=o[T]>>>x}},n.H.M=function(i,r,o){o<<=7&r;const x=r>>>3;i[x]|=o,i[x+1]|=o>>>8},n.H.I=function(i,r,o){o<<=7&r;const x=r>>>3;i[x]|=o,i[x+1]|=o>>>8,i[x+2]|=o>>>16},n.H.e=function(i,r,o){return(i[r>>>3]|i[1+(r>>>3)]<<8)>>>(7&r)&(1<<o)-1},n.H.b=function(i,r,o){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)&(1<<o)-1},n.H.Z=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16|i[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=(function(){const i=Uint16Array,r=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new i(65536),g:new i(32768)}})(),(function(){const i=n.H.m;for(var r=0;r<32768;r++){let x=r;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,i.r[r]=(x>>>16|x<<16)>>>17}function o(x,A,T){for(;A--!=0;)x.push(0,T)}for(r=0;r<32;r++)i.q[r]=i.S[r]<<3|i.T[r],i.c[r]=i.p[r]<<4|i.z[r];o(i._,144,8),o(i._,112,9),o(i._,24,7),o(i._,8,8),n.H.n(i._,9),n.H.A(i._,9,i.J),n.H.l(i._,9),o(i.$,32,5),n.H.n(i.$,5),n.H.A(i.$,5,i.h),n.H.l(i.$,5),o(i.Q,19,0),o(i.C,286,0),o(i.D,30,0),o(i.v,320,0)})(),n.H.N})();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function m(n,i,r,o,x){let A=t(i);const T=Math.ceil(o*A/8);let _,$;A=Math.ceil(A/8);let U=n[r],M=0;if(U>1&&(n[r]=[0,0,1][U-2]),U==3)for(M=A;M<T;M++)n[M+1]=n[M+1]+(n[M+1-A]>>>1)&255;for(let P=0;P<x;P++)if(_=r+P*T,$=_+P+1,U=n[$-1],M=0,U==0)for(;M<T;M++)n[_+M]=n[$+M];else if(U==1){for(;M<A;M++)n[_+M]=n[$+M];for(;M<T;M++)n[_+M]=n[$+M]+n[_+M-A]}else if(U==2)for(;M<T;M++)n[_+M]=n[$+M]+n[_+M-T];else if(U==3){for(;M<A;M++)n[_+M]=n[$+M]+(n[_+M-T]>>>1);for(;M<T;M++)n[_+M]=n[$+M]+(n[_+M-T]+n[_+M-A]>>>1)}else{for(;M<A;M++)n[_+M]=n[$+M]+u(0,n[_+M-T],0);for(;M<T;M++)n[_+M]=n[$+M]+u(n[_+M-A],n[_+M-T],n[_+M-A-T])}return n}function u(n,i,r){const o=n+i-r,x=o-n,A=o-i,T=o-r;return x*x<=A*A&&x*x<=T*T?n:A*A<=T*T?i:r}function N(n,i,r){r.width=p.readUint(n,i),i+=4,r.height=p.readUint(n,i),i+=4,r.depth=n[i],i++,r.ctype=n[i],i++,r.compress=n[i],i++,r.filter=n[i],i++,r.interlace=n[i],i++}function v(n,i,r,o,x,A,T,_,$){const U=Math.min(i,x),M=Math.min(r,A);let P=0,h=0;for(let S=0;S<M;S++)for(let f=0;f<U;f++)if(T>=0&&_>=0?(P=S*i+f<<2,h=(_+S)*x+T+f<<2):(P=(-_+S)*i-T+f<<2,h=S*x+f<<2),$==0)o[h]=n[P],o[h+1]=n[P+1],o[h+2]=n[P+2],o[h+3]=n[P+3];else if($==1){var L=n[P+3]*.00392156862745098,l=n[P]*L,d=n[P+1]*L,y=n[P+2]*L,k=o[h+3]*(1/255),g=o[h]*k,j=o[h+1]*k,b=o[h+2]*k;const c=1-L,D=L+k*c,E=D==0?0:1/D;o[h+3]=255*D,o[h+0]=(l+g*c)*E,o[h+1]=(d+j*c)*E,o[h+2]=(y+b*c)*E}else if($==2)L=n[P+3],l=n[P],d=n[P+1],y=n[P+2],k=o[h+3],g=o[h],j=o[h+1],b=o[h+2],L==k&&l==g&&d==j&&y==b?(o[h]=0,o[h+1]=0,o[h+2]=0,o[h+3]=0):(o[h]=l,o[h+1]=d,o[h+2]=y,o[h+3]=L);else if($==3){if(L=n[P+3],l=n[P],d=n[P+1],y=n[P+2],k=o[h+3],g=o[h],j=o[h+1],b=o[h+2],L==k&&l==g&&d==j&&y==b)continue;if(L<220&&k>20)return!1}return!0}return{decode:function(i){const r=new Uint8Array(i);let o=8;const x=p,A=x.readUshort,T=x.readUint,_={tabs:{},frames:[]},$=new Uint8Array(r.length);let U,M=0,P=0;const h=[137,80,78,71,13,10,26,10];for(var L=0;L<8;L++)if(r[L]!=h[L])throw"The input is not a PNG file!";for(;o<r.length;){const S=x.readUint(r,o);o+=4;const f=x.readASCII(r,o,4);if(o+=4,f=="IHDR")N(r,o,_);else if(f=="iCCP"){for(var l=o;r[l]!=0;)l++;x.readASCII(r,o,l-o),r[l+1];const c=r.slice(l+2,o+S);let D=null;try{D=a(c)}catch{D=s(c)}_.tabs[f]=D}else if(f=="CgBI")_.tabs[f]=r.slice(o,o+4);else if(f=="IDAT"){for(L=0;L<S;L++)$[M+L]=r[o+L];M+=S}else if(f=="acTL")_.tabs[f]={num_frames:T(r,o),num_plays:T(r,o+4)},U=new Uint8Array(r.length);else if(f=="fcTL"){P!=0&&((b=_.frames[_.frames.length-1]).data=R(_,U.slice(0,P),b.rect.width,b.rect.height),P=0);const c={x:T(r,o+12),y:T(r,o+16),width:T(r,o+4),height:T(r,o+8)};let D=A(r,o+22);D=A(r,o+20)/(D==0?100:D);const E={rect:c,delay:Math.round(1e3*D),dispose:r[o+24],blend:r[o+25]};_.frames.push(E)}else if(f=="fdAT"){for(L=0;L<S-4;L++)U[P+L]=r[o+L+4];P+=S-4}else if(f=="pHYs")_.tabs[f]=[x.readUint(r,o),x.readUint(r,o+4),r[o+8]];else if(f=="cHRM")for(_.tabs[f]=[],L=0;L<8;L++)_.tabs[f].push(x.readUint(r,o+4*L));else if(f=="tEXt"||f=="zTXt"){_.tabs[f]==null&&(_.tabs[f]={});var d=x.nextZero(r,o),y=x.readASCII(r,o,d-o),k=o+S-d-1;if(f=="tEXt")j=x.readASCII(r,d+1,k);else{var g=a(r.slice(d+2,d+2+k));j=x.readUTF8(g,0,g.length)}_.tabs[f][y]=j}else if(f=="iTXt"){_.tabs[f]==null&&(_.tabs[f]={}),d=0,l=o,d=x.nextZero(r,l),y=x.readASCII(r,l,d-l);const c=r[l=d+1];var j;r[l+1],l+=2,d=x.nextZero(r,l),x.readASCII(r,l,d-l),l=d+1,d=x.nextZero(r,l),x.readUTF8(r,l,d-l),k=S-((l=d+1)-o),c==0?j=x.readUTF8(r,l,k):(g=a(r.slice(l,l+k)),j=x.readUTF8(g,0,g.length)),_.tabs[f][y]=j}else if(f=="PLTE")_.tabs[f]=x.readBytes(r,o,S);else if(f=="hIST"){const c=_.tabs.PLTE.length/3;for(_.tabs[f]=[],L=0;L<c;L++)_.tabs[f].push(A(r,o+2*L))}else if(f=="tRNS")_.ctype==3?_.tabs[f]=x.readBytes(r,o,S):_.ctype==0?_.tabs[f]=A(r,o):_.ctype==2&&(_.tabs[f]=[A(r,o),A(r,o+2),A(r,o+4)]);else if(f=="gAMA")_.tabs[f]=x.readUint(r,o)/1e5;else if(f=="sRGB")_.tabs[f]=r[o];else if(f=="bKGD")_.ctype==0||_.ctype==4?_.tabs[f]=[A(r,o)]:_.ctype==2||_.ctype==6?_.tabs[f]=[A(r,o),A(r,o+2),A(r,o+4)]:_.ctype==3&&(_.tabs[f]=r[o]);else if(f=="IEND")break;o+=S,x.readUint(r,o),o+=4}var b;return P!=0&&((b=_.frames[_.frames.length-1]).data=R(_,U.slice(0,P),b.rect.width,b.rect.height)),_.data=R(_,$,_.width,_.height),delete _.compress,delete _.interlace,delete _.filter,_},toRGBA8:function(i){const r=i.width,o=i.height;if(i.tabs.acTL==null)return[w(i.data,r,o,i).buffer];const x=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const A=r*o*4,T=new Uint8Array(A),_=new Uint8Array(A),$=new Uint8Array(A);for(let M=0;M<i.frames.length;M++){const P=i.frames[M],h=P.rect.x,L=P.rect.y,l=P.rect.width,d=P.rect.height,y=w(P.data,l,d,i);if(M!=0)for(var U=0;U<A;U++)$[U]=T[U];if(P.blend==0?v(y,l,d,T,r,o,h,L,0):P.blend==1&&v(y,l,d,T,r,o,h,L,1),x.push(T.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)v(_,l,d,T,r,o,h,L,0);else if(P.dispose==2)for(U=0;U<A;U++)T[U]=$[U]}}return x},_paeth:u,_copyTile:v,_bin:p}})();(function(){const{_copyTile:p}=dt,{_bin:w}=dt,R=dt._paeth;var a={table:(function(){const l=new Uint32Array(256);for(let d=0;d<256;d++){let y=d;for(let k=0;k<8;k++)1&y?y=3988292384^y>>>1:y>>>=1;l[d]=y}return l})(),update(l,d,y,k){for(let g=0;g<k;g++)l=a.table[255&(l^d[y+g])]^l>>>8;return l},crc:(l,d,y)=>4294967295^a.update(4294967295,l,d,y)};function s(l,d,y,k){d[y]+=l[0]*k>>4,d[y+1]+=l[1]*k>>4,d[y+2]+=l[2]*k>>4,d[y+3]+=l[3]*k>>4}function t(l){return Math.max(0,Math.min(255,l))}function m(l,d){const y=l[0]-d[0],k=l[1]-d[1],g=l[2]-d[2],j=l[3]-d[3];return y*y+k*k+g*g+j*j}function u(l,d,y,k,g,j,b){b==null&&(b=1);const S=k.length,f=[];for(var c=0;c<S;c++){const F=k[c];f.push([F>>>0&255,F>>>8&255,F>>>16&255,F>>>24&255])}for(c=0;c<S;c++){let F=4294967295;for(var D=0,E=0;E<S;E++){var H=m(f[c],f[E]);E!=c&&H<F&&(F=H,D=E)}}const re=new Uint32Array(g.buffer),K=new Int16Array(d*y*4),ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(c=0;c<ee.length;c++)ee[c]=255*((ee[c]+.5)/16-.5);for(let F=0;F<y;F++)for(let ce=0;ce<d;ce++){var B;c=4*(F*d+ce),b!=2?B=[t(l[c]+K[c]),t(l[c+1]+K[c+1]),t(l[c+2]+K[c+2]),t(l[c+3]+K[c+3])]:(H=ee[4*(3&F)+(3&ce)],B=[t(l[c]+H),t(l[c+1]+H),t(l[c+2]+H),t(l[c+3]+H)]),D=0;let Ne=16777215;for(E=0;E<S;E++){const we=m(B,f[E]);we<Ne&&(Ne=we,D=E)}const he=f[D],be=[B[0]-he[0],B[1]-he[1],B[2]-he[2],B[3]-he[3]];b==1&&(ce!=d-1&&s(be,K,c+4,7),F!=y-1&&(ce!=0&&s(be,K,c+4*d-4,3),s(be,K,c+4*d,5),ce!=d-1&&s(be,K,c+4*d+4,1))),j[c>>2]=D,re[c>>2]=k[D]}}function N(l,d,y,k,g){g==null&&(g={});const{crc:j}=a,b=w.writeUint,S=w.writeUshort,f=w.writeASCII;let c=8;const D=l.frames.length>1;let E,H=!1,re=33+(D?20:0);if(g.sRGB!=null&&(re+=13),g.pHYs!=null&&(re+=21),g.iCCP!=null&&(E=pako.deflate(g.iCCP),re+=21+E.length+4),l.ctype==3){for(var K=l.plte.length,ee=0;ee<K;ee++)l.plte[ee]>>>24!=255&&(H=!0);re+=8+3*K+4+(H?8+1*K+4:0)}for(var B=0;B<l.frames.length;B++)D&&(re+=38),re+=(he=l.frames[B]).cimg.length+12,B!=0&&(re+=4);re+=12;const F=new Uint8Array(re),ce=[137,80,78,71,13,10,26,10];for(ee=0;ee<8;ee++)F[ee]=ce[ee];if(b(F,c,13),c+=4,f(F,c,"IHDR"),c+=4,b(F,c,d),c+=4,b(F,c,y),c+=4,F[c]=l.depth,c++,F[c]=l.ctype,c++,F[c]=0,c++,F[c]=0,c++,F[c]=0,c++,b(F,c,j(F,c-17,17)),c+=4,g.sRGB!=null&&(b(F,c,1),c+=4,f(F,c,"sRGB"),c+=4,F[c]=g.sRGB,c++,b(F,c,j(F,c-5,5)),c+=4),g.iCCP!=null){const be=13+E.length;b(F,c,be),c+=4,f(F,c,"iCCP"),c+=4,f(F,c,"ICC profile"),c+=11,c+=2,F.set(E,c),c+=E.length,b(F,c,j(F,c-(be+4),be+4)),c+=4}if(g.pHYs!=null&&(b(F,c,9),c+=4,f(F,c,"pHYs"),c+=4,b(F,c,g.pHYs[0]),c+=4,b(F,c,g.pHYs[1]),c+=4,F[c]=g.pHYs[2],c++,b(F,c,j(F,c-13,13)),c+=4),D&&(b(F,c,8),c+=4,f(F,c,"acTL"),c+=4,b(F,c,l.frames.length),c+=4,b(F,c,g.loop!=null?g.loop:0),c+=4,b(F,c,j(F,c-12,12)),c+=4),l.ctype==3){for(b(F,c,3*(K=l.plte.length)),c+=4,f(F,c,"PLTE"),c+=4,ee=0;ee<K;ee++){const be=3*ee,we=l.plte[ee],Te=255&we,Le=we>>>8&255,ht=we>>>16&255;F[c+be+0]=Te,F[c+be+1]=Le,F[c+be+2]=ht}if(c+=3*K,b(F,c,j(F,c-3*K-4,3*K+4)),c+=4,H){for(b(F,c,K),c+=4,f(F,c,"tRNS"),c+=4,ee=0;ee<K;ee++)F[c+ee]=l.plte[ee]>>>24&255;c+=K,b(F,c,j(F,c-K-4,K+4)),c+=4}}let Ne=0;for(B=0;B<l.frames.length;B++){var he=l.frames[B];D&&(b(F,c,26),c+=4,f(F,c,"fcTL"),c+=4,b(F,c,Ne++),c+=4,b(F,c,he.rect.width),c+=4,b(F,c,he.rect.height),c+=4,b(F,c,he.rect.x),c+=4,b(F,c,he.rect.y),c+=4,S(F,c,k[B]),c+=2,S(F,c,1e3),c+=2,F[c]=he.dispose,c++,F[c]=he.blend,c++,b(F,c,j(F,c-30,30)),c+=4);const be=he.cimg;b(F,c,(K=be.length)+(B==0?0:4)),c+=4;const we=c;f(F,c,B==0?"IDAT":"fdAT"),c+=4,B!=0&&(b(F,c,Ne++),c+=4),F.set(be,c),c+=K,b(F,c,j(F,we,c-we)),c+=4}return b(F,c,0),c+=4,f(F,c,"IEND"),c+=4,b(F,c,j(F,c-4,4)),c+=4,F.buffer}function v(l,d,y){for(let k=0;k<l.frames.length;k++){const g=l.frames[k];g.rect.width;const j=g.rect.height,b=new Uint8Array(j*g.bpl+j);g.cimg=o(g.img,j,g.bpp,g.bpl,b,d,y)}}function n(l,d,y,k,g){const j=g[0],b=g[1],S=g[2],f=g[3],c=g[4],D=g[5];let E=6,H=8,re=255;for(var K=0;K<l.length;K++){const Fe=new Uint8Array(l[K]);for(var ee=Fe.length,B=0;B<ee;B+=4)re&=Fe[B+3]}const F=re!=255,ce=(function(_e,pe,Re,De,Me,ze){const Se=[];for(var je=0;je<_e.length;je++){const Oe=new Uint8Array(_e[je]),tt=new Uint32Array(Oe.buffer);var We;let Ge=0,st=0,Ze=pe,gt=Re,Ve=De?1:0;if(je!=0){const ts=ze||De||je==1||Se[je-2].dispose!=0?1:2;let it=0,Pt=1e9;for(let vt=0;vt<ts;vt++){var at=new Uint8Array(_e[je-1-vt]);const $t=new Uint32Array(_e[je-1-vt]);let ut=pe,ft=Re,yt=-1,kt=-1;for(let xt=0;xt<Re;xt++)for(let ot=0;ot<pe;ot++)tt[Pe=xt*pe+ot]!=$t[Pe]&&(ot<ut&&(ut=ot),ot>yt&&(yt=ot),xt<ft&&(ft=xt),xt>kt&&(kt=xt));yt==-1&&(ut=ft=yt=kt=0),Me&&((1&ut)==1&&ut--,(1&ft)==1&&ft--);const Ht=(yt-ut+1)*(kt-ft+1);Ht<Pt&&(Pt=Ht,it=vt,Ge=ut,st=ft,Ze=yt-ut+1,gt=kt-ft+1)}at=new Uint8Array(_e[je-1-it]),it==1&&(Se[je-1].dispose=2),We=new Uint8Array(Ze*gt*4),p(at,pe,Re,We,Ze,gt,-Ge,-st,0),Ve=p(Oe,pe,Re,We,Ze,gt,-Ge,-st,3)?1:0,Ve==1?r(Oe,pe,Re,We,{x:Ge,y:st,width:Ze,height:gt}):p(Oe,pe,Re,We,Ze,gt,-Ge,-st,0)}else We=Oe.slice(0);Se.push({rect:{x:Ge,y:st,width:Ze,height:gt},img:We,blend:Ve,dispose:0})}if(De)for(je=0;je<Se.length;je++){if((et=Se[je]).blend==1)continue;const Oe=et.rect,tt=Se[je-1].rect,Ge=Math.min(Oe.x,tt.x),st=Math.min(Oe.y,tt.y),Ze={x:Ge,y:st,width:Math.max(Oe.x+Oe.width,tt.x+tt.width)-Ge,height:Math.max(Oe.y+Oe.height,tt.y+tt.height)-st};Se[je-1].dispose=1,je-1!=0&&i(_e,pe,Re,Se,je-1,Ze,Me),i(_e,pe,Re,Se,je,Ze,Me)}let wt=0;if(_e.length!=1)for(var Pe=0;Pe<Se.length;Pe++){var et;wt+=(et=Se[Pe]).rect.width*et.rect.height}return Se})(l,d,y,j,b,S),Ne={},he=[],be=[];if(k!=0){const Fe=[];for(B=0;B<ce.length;B++)Fe.push(ce[B].img.buffer);const _e=(function(Me){let ze=0;for(var Se=0;Se<Me.length;Se++)ze+=Me[Se].byteLength;const je=new Uint8Array(ze);let We=0;for(Se=0;Se<Me.length;Se++){const at=new Uint8Array(Me[Se]),wt=at.length;for(let Pe=0;Pe<wt;Pe+=4){let et=at[Pe],Oe=at[Pe+1],tt=at[Pe+2];const Ge=at[Pe+3];Ge==0&&(et=Oe=tt=0),je[We+Pe]=et,je[We+Pe+1]=Oe,je[We+Pe+2]=tt,je[We+Pe+3]=Ge}We+=wt}return je.buffer})(Fe),pe=A(_e,k);for(B=0;B<pe.plte.length;B++)he.push(pe.plte[B].est.rgba);let Re=0;for(B=0;B<ce.length;B++){const De=(Te=ce[B]).img.length;var we=new Uint8Array(pe.inds.buffer,Re>>2,De>>2);be.push(we);const Me=new Uint8Array(pe.abuf,Re,De);D&&u(Te.img,Te.rect.width,Te.rect.height,he,Me,we),Te.img.set(Me),Re+=De}}else for(K=0;K<ce.length;K++){var Te=ce[K];const Fe=new Uint32Array(Te.img.buffer);var Le=Te.rect.width;for(ee=Fe.length,we=new Uint8Array(ee),be.push(we),B=0;B<ee;B++){const _e=Fe[B];if(B!=0&&_e==Fe[B-1])we[B]=we[B-1];else if(B>Le&&_e==Fe[B-Le])we[B]=we[B-Le];else{let pe=Ne[_e];if(pe==null&&(Ne[_e]=pe=he.length,he.push(_e),he.length>=300))break;we[B]=pe}}}const ht=he.length;for(ht<=256&&c==0&&(H=ht<=2?1:ht<=4?2:ht<=16?4:8,H=Math.max(H,f)),K=0;K<ce.length;K++){(Te=ce[K]).rect.x,Te.rect.y,Le=Te.rect.width;const Fe=Te.rect.height;let _e=Te.img;new Uint32Array(_e.buffer);let pe=4*Le,Re=4;if(ht<=256&&c==0){pe=Math.ceil(H*Le/8);var Qe=new Uint8Array(pe*Fe);const De=be[K];for(let Me=0;Me<Fe;Me++){B=Me*pe;const ze=Me*Le;if(H==8)for(var Ce=0;Ce<Le;Ce++)Qe[B+Ce]=De[ze+Ce];else if(H==4)for(Ce=0;Ce<Le;Ce++)Qe[B+(Ce>>1)]|=De[ze+Ce]<<4-4*(1&Ce);else if(H==2)for(Ce=0;Ce<Le;Ce++)Qe[B+(Ce>>2)]|=De[ze+Ce]<<6-2*(3&Ce);else if(H==1)for(Ce=0;Ce<Le;Ce++)Qe[B+(Ce>>3)]|=De[ze+Ce]<<7-1*(7&Ce)}_e=Qe,E=3,Re=1}else if(F==0&&ce.length==1){Qe=new Uint8Array(Le*Fe*3);const De=Le*Fe;for(B=0;B<De;B++){const Me=3*B,ze=4*B;Qe[Me]=_e[ze],Qe[Me+1]=_e[ze+1],Qe[Me+2]=_e[ze+2]}_e=Qe,E=2,Re=3,pe=3*Le}Te.img=_e,Te.bpl=pe,Te.bpp=Re}return{ctype:E,depth:H,plte:he,frames:ce}}function i(l,d,y,k,g,j,b){const S=Uint8Array,f=Uint32Array,c=new S(l[g-1]),D=new f(l[g-1]),E=g+1<l.length?new S(l[g+1]):null,H=new S(l[g]),re=new f(H.buffer);let K=d,ee=y,B=-1,F=-1;for(let Ne=0;Ne<j.height;Ne++)for(let he=0;he<j.width;he++){const be=j.x+he,we=j.y+Ne,Te=we*d+be,Le=re[Te];Le==0||k[g-1].dispose==0&&D[Te]==Le&&(E==null||E[4*Te+3]!=0)||(be<K&&(K=be),be>B&&(B=be),we<ee&&(ee=we),we>F&&(F=we))}B==-1&&(K=ee=B=F=0),b&&((1&K)==1&&K--,(1&ee)==1&&ee--),j={x:K,y:ee,width:B-K+1,height:F-ee+1};const ce=k[g];ce.rect=j,ce.blend=1,ce.img=new Uint8Array(j.width*j.height*4),k[g-1].dispose==0?(p(c,d,y,ce.img,j.width,j.height,-j.x,-j.y,0),r(H,d,y,ce.img,j)):p(H,d,y,ce.img,j.width,j.height,-j.x,-j.y,0)}function r(l,d,y,k,g){p(l,d,y,k,g.width,g.height,-g.x,-g.y,2)}function o(l,d,y,k,g,j,b){const S=[];let f,c=[0,1,2,3,4];j!=-1?c=[j]:(d*k>5e5||y==1)&&(c=[0]),b&&(f={level:0});const D=ar;for(var E=0;E<c.length;E++){for(let K=0;K<d;K++)x(g,l,K,k,y,c[E]);S.push(D.deflate(g,f))}let H,re=1e9;for(E=0;E<S.length;E++)S[E].length<re&&(H=E,re=S[E].length);return S[H]}function x(l,d,y,k,g,j){const b=y*k;let S=b+y;if(l[S]=j,S++,j==0)if(k<500)for(var f=0;f<k;f++)l[S+f]=d[b+f];else l.set(new Uint8Array(d.buffer,b,k),S);else if(j==1){for(f=0;f<g;f++)l[S+f]=d[b+f];for(f=g;f<k;f++)l[S+f]=d[b+f]-d[b+f-g]+256&255}else if(y==0){for(f=0;f<g;f++)l[S+f]=d[b+f];if(j==2)for(f=g;f<k;f++)l[S+f]=d[b+f];if(j==3)for(f=g;f<k;f++)l[S+f]=d[b+f]-(d[b+f-g]>>1)+256&255;if(j==4)for(f=g;f<k;f++)l[S+f]=d[b+f]-R(d[b+f-g],0,0)+256&255}else{if(j==2)for(f=0;f<k;f++)l[S+f]=d[b+f]+256-d[b+f-k]&255;if(j==3){for(f=0;f<g;f++)l[S+f]=d[b+f]+256-(d[b+f-k]>>1)&255;for(f=g;f<k;f++)l[S+f]=d[b+f]+256-(d[b+f-k]+d[b+f-g]>>1)&255}if(j==4){for(f=0;f<g;f++)l[S+f]=d[b+f]+256-R(0,d[b+f-k],0)&255;for(f=g;f<k;f++)l[S+f]=d[b+f]+256-R(d[b+f-g],d[b+f-k],d[b+f-g-k])&255}}}function A(l,d){const y=new Uint8Array(l),k=y.slice(0),g=new Uint32Array(k.buffer),j=T(k,d),b=j[0],S=j[1],f=y.length,c=new Uint8Array(f>>2);let D;if(y.length<2e7)for(var E=0;E<f;E+=4)D=_(b,H=y[E]*(1/255),re=y[E+1]*(1/255),K=y[E+2]*(1/255),ee=y[E+3]*(1/255)),c[E>>2]=D.ind,g[E>>2]=D.est.rgba;else for(E=0;E<f;E+=4){var H=y[E]*.00392156862745098,re=y[E+1]*(1/255),K=y[E+2]*(1/255),ee=y[E+3]*(1/255);for(D=b;D.left;)D=$(D.est,H,re,K,ee)<=0?D.left:D.right;c[E>>2]=D.ind,g[E>>2]=D.est.rgba}return{abuf:k.buffer,inds:c,plte:S}}function T(l,d,y){y==null&&(y=1e-4);const k=new Uint32Array(l.buffer),g={i0:0,i1:l.length,bst:null,est:null,tdst:0,left:null,right:null};g.bst=P(l,g.i0,g.i1),g.est=h(g.bst);const j=[g];for(;j.length<d;){let S=0,f=0;for(var b=0;b<j.length;b++)j[b].est.L>S&&(S=j[b].est.L,f=b);if(S<y)break;const c=j[f],D=U(l,k,c.i0,c.i1,c.est.e,c.est.eMq255);if(c.i0>=D||c.i1<=D){c.est.L=0;continue}const E={i0:c.i0,i1:D,bst:null,est:null,tdst:0,left:null,right:null};E.bst=P(l,E.i0,E.i1),E.est=h(E.bst);const H={i0:D,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:c.bst.N-E.bst.N},b=0;b<16;b++)H.bst.R[b]=c.bst.R[b]-E.bst.R[b];for(b=0;b<4;b++)H.bst.m[b]=c.bst.m[b]-E.bst.m[b];H.est=h(H.bst),c.left=E,c.right=H,j[f]=E,j.push(H)}for(j.sort(((S,f)=>f.bst.N-S.bst.N)),b=0;b<j.length;b++)j[b].ind=b;return[g,j]}function _(l,d,y,k,g){if(l.left==null)return l.tdst=(function(E,H,re,K,ee){const B=H-E[0],F=re-E[1],ce=K-E[2],Ne=ee-E[3];return B*B+F*F+ce*ce+Ne*Ne})(l.est.q,d,y,k,g),l;const j=$(l.est,d,y,k,g);let b=l.left,S=l.right;j>0&&(b=l.right,S=l.left);const f=_(b,d,y,k,g);if(f.tdst<=j*j)return f;const c=_(S,d,y,k,g);return c.tdst<f.tdst?c:f}function $(l,d,y,k,g){const{e:j}=l;return j[0]*d+j[1]*y+j[2]*k+j[3]*g-l.eMq}function U(l,d,y,k,g,j){for(k-=4;y<k;){for(;M(l,y,g)<=j;)y+=4;for(;M(l,k,g)>j;)k-=4;if(y>=k)break;const b=d[y>>2];d[y>>2]=d[k>>2],d[k>>2]=b,y+=4,k-=4}for(;M(l,y,g)>j;)y-=4;return y+4}function M(l,d,y){return l[d]*y[0]+l[d+1]*y[1]+l[d+2]*y[2]+l[d+3]*y[3]}function P(l,d,y){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=[0,0,0,0],j=y-d>>2;for(let b=d;b<y;b+=4){const S=l[b]*.00392156862745098,f=l[b+1]*(1/255),c=l[b+2]*(1/255),D=l[b+3]*(1/255);g[0]+=S,g[1]+=f,g[2]+=c,g[3]+=D,k[0]+=S*S,k[1]+=S*f,k[2]+=S*c,k[3]+=S*D,k[5]+=f*f,k[6]+=f*c,k[7]+=f*D,k[10]+=c*c,k[11]+=c*D,k[15]+=D*D}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:g,N:j}}function h(l){const{R:d}=l,{m:y}=l,{N:k}=l,g=y[0],j=y[1],b=y[2],S=y[3],f=k==0?0:1/k,c=[d[0]-g*g*f,d[1]-g*j*f,d[2]-g*b*f,d[3]-g*S*f,d[4]-j*g*f,d[5]-j*j*f,d[6]-j*b*f,d[7]-j*S*f,d[8]-b*g*f,d[9]-b*j*f,d[10]-b*b*f,d[11]-b*S*f,d[12]-S*g*f,d[13]-S*j*f,d[14]-S*b*f,d[15]-S*S*f],D=c,E=L;let H=[Math.random(),Math.random(),Math.random(),Math.random()],re=0,K=0;if(k!=0)for(let B=0;B<16&&(H=E.multVec(D,H),K=Math.sqrt(E.dot(H,H)),H=E.sml(1/K,H),!(B!=0&&Math.abs(K-re)<1e-9));B++)re=K;const ee=[g*f,j*f,b*f,S*f];return{Cov:c,q:ee,e:H,L:re,eMq255:E.dot(E.sml(255,ee),H),eMq:E.dot(H,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}}var L={multVec:(l,d)=>[l[0]*d[0]+l[1]*d[1]+l[2]*d[2]+l[3]*d[3],l[4]*d[0]+l[5]*d[1]+l[6]*d[2]+l[7]*d[3],l[8]*d[0]+l[9]*d[1]+l[10]*d[2]+l[11]*d[3],l[12]*d[0]+l[13]*d[1]+l[14]*d[2]+l[15]*d[3]],dot:(l,d)=>l[0]*d[0]+l[1]*d[1]+l[2]*d[2]+l[3]*d[3],sml:(l,d)=>[l*d[0],l*d[1],l*d[2],l*d[3]]};dt.encode=function(d,y,k,g,j,b,S){g==null&&(g=0),S==null&&(S=!1);const f=n(d,y,k,g,[!1,!1,!1,0,S,!1]);return v(f,-1),N(f,y,k,j,b)},dt.encodeLL=function(d,y,k,g,j,b,S,f){const c={ctype:0+(g==1?0:2)+(j==0?0:4),depth:b,frames:[]},D=(g+j)*b,E=D*y;for(let H=0;H<d.length;H++)c.frames.push({rect:{x:0,y:0,width:y,height:k},img:new Uint8Array(d[H]),blend:0,dispose:1,bpp:Math.ceil(D/8),bpl:Math.ceil(E/8)});return v(c,0,!0),N(c,y,k,S,f)},dt.encode.compress=n,dt.encode.dither=u,dt.quantize=A,dt.quantize.getKDtree=T,dt.quantize.getNearest=_})();const Ms={toArrayBuffer(p,w){const R=p.width,a=p.height,s=R<<2,t=p.getContext("2d").getImageData(0,0,R,a),m=new Uint32Array(t.data.buffer),u=(32*R+31)/32<<2,N=u*a,v=122+N,n=new ArrayBuffer(v),i=new DataView(n),r=1<<20;let o,x,A,T,_=r,$=0,U=0,M=0;function P(l){i.setUint16(U,l,!0),U+=2}function h(l){i.setUint32(U,l,!0),U+=4}function L(l){U+=l}P(19778),h(v),L(4),h(122),h(108),h(R),h(-a>>>0),P(1),P(32),h(3),h(N),h(2835),h(2835),L(8),h(16711680),h(65280),h(255),h(4278190080),h(1466527264),(function l(){for(;$<a&&_>0;){for(T=122+$*u,o=0;o<s;)_--,x=m[M++],A=x>>>24,i.setUint32(T+o,x<<8|A),o+=4;$++}M<m.length?(_=r,setTimeout(l,Ms._dly)):w(n)})()},toBlob(p,w){this.toArrayBuffer(p,(R=>{w(new Blob([R],{type:"image/bmp"}))}))},_dly:9};var Xe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ir={[Xe.CHROME]:16384,[Xe.FIREFOX]:11180,[Xe.DESKTOP_SAFARI]:16384,[Xe.IE]:8192,[Xe.IOS]:4096,[Xe.ETC]:8192};const fs=typeof window<"u",Us=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Qt=fs&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),or=(fs||Us)&&(Qt&&Qt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Is=(fs||Us)&&(Qt&&Qt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ms(p,w,R=Date.now()){return new Promise((a=>{const s=p.split(","),t=s[0].match(/:(.*?);/)[1],m=globalThis.atob(s[1]);let u=m.length;const N=new Uint8Array(u);for(;u--;)N[u]=m.charCodeAt(u);const v=new Blob([N],{type:t});v.name=w,v.lastModified=R,a(v)}))}function Fs(p){return new Promise(((w,R)=>{const a=new Is;a.onload=()=>w(a.result),a.onerror=s=>R(s),a.readAsDataURL(p)}))}function Rs(p){return new Promise(((w,R)=>{const a=new Image;a.onload=()=>w(a),a.onerror=s=>R(s),a.src=p}))}function St(){if(St.cachedResult!==void 0)return St.cachedResult;let p=Xe.ETC;const{userAgent:w}=navigator;return/Chrom(e|ium)/i.test(w)?p=Xe.CHROME:/iP(ad|od|hone)/i.test(w)&&/WebKit/i.test(w)?p=Xe.IOS:/Safari/i.test(w)?p=Xe.DESKTOP_SAFARI:/Firefox/i.test(w)?p=Xe.FIREFOX:(/MSIE/i.test(w)||document.documentMode)&&(p=Xe.IE),St.cachedResult=p,St.cachedResult}function Ds(p,w){const R=St(),a=ir[R];let s=p,t=w,m=s*t;const u=s>t?t/s:s/t;for(;m>a*a;){const N=(a+s)/2,v=(a+t)/2;N<v?(t=v,s=v*u):(t=N*u,s=N),m=s*t}return{width:s,height:t}}function es(p,w){let R,a;try{if(R=new OffscreenCanvas(p,w),a=R.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{R=document.createElement("canvas"),a=R.getContext("2d")}return R.width=p,R.height=w,[R,a]}function Ps(p,w){const{width:R,height:a}=Ds(p.width,p.height),[s,t]=es(R,a);return w&&/jpe?g/.test(w)&&(t.fillStyle="white",t.fillRect(0,0,s.width,s.height)),t.drawImage(p,0,0,s.width,s.height),s}function Vt(){return Vt.cachedResult!==void 0||(Vt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Vt.cachedResult}function Zt(p,w={}){return new Promise((function(R,a){let s,t;var m=function(){try{return t=Ps(s,w.fileType||p.type),R([s,t])}catch(N){return a(N)}},u=function(N){try{var v=function(n){try{throw n}catch(i){return a(i)}};try{let n;return Fs(p).then((function(i){try{return n=i,Rs(n).then((function(r){try{return s=r,(function(){try{return m()}catch(o){return a(o)}})()}catch(o){return v(o)}}),v)}catch(r){return v(r)}}),v)}catch(n){v(n)}}catch(n){return a(n)}};try{if(Vt()||[Xe.DESKTOP_SAFARI,Xe.MOBILE_SAFARI].includes(St()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(p).then((function(N){try{return s=N,m()}catch{return u()}}),u)}catch{u()}}))}function Xt(p,w,R,a,s=1){return new Promise((function(t,m){let u;if(w==="image/png"){let v,n,i;return v=p.getContext("2d"),{data:n}=v.getImageData(0,0,p.width,p.height),i=dt.encode([n.buffer],p.width,p.height,4096*s),u=new Blob([i],{type:w}),u.name=R,u.lastModified=a,N.call(this)}{let v=function(){return N.call(this)};if(w==="image/bmp")return new Promise((n=>Ms.toBlob(p,n))).then((function(n){try{return u=n,u.name=R,u.lastModified=a,v.call(this)}catch(i){return m(i)}}).bind(this),m);{let n=function(){return v.call(this)};if(typeof OffscreenCanvas=="function"&&p instanceof OffscreenCanvas)return p.convertToBlob({type:w,quality:s}).then((function(i){try{return u=i,u.name=R,u.lastModified=a,n.call(this)}catch(r){return m(r)}}).bind(this),m);{let i;return i=p.toDataURL(w,s),ms(i,R,a).then((function(r){try{return u=r,n.call(this)}catch(o){return m(o)}}).bind(this),m)}}}function N(){return t(u)}}))}function mt(p){p.width=0,p.height=0}function Et(){return new Promise((function(p,w){let R,a,s,t;return Et.cachedResult!==void 0?p(Et.cachedResult):ms("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(m){try{return R=m,Zt(R).then((function(u){try{return a=u[1],Xt(a,R.type,R.name,R.lastModified).then((function(N){try{return s=N,mt(a),Zt(s).then((function(v){try{return t=v[0],Et.cachedResult=t.width===1&&t.height===2,p(Et.cachedResult)}catch(n){return w(n)}}),w)}catch(v){return w(v)}}),w)}catch(N){return w(N)}}),w)}catch(u){return w(u)}}),w)}))}function $s(p){return new Promise(((w,R)=>{const a=new Is;a.onload=s=>{const t=new DataView(s.target.result);if(t.getUint16(0,!1)!=65496)return w(-2);const m=t.byteLength;let u=2;for(;u<m;){if(t.getUint16(u+2,!1)<=8)return w(-1);const N=t.getUint16(u,!1);if(u+=2,N==65505){if(t.getUint32(u+=2,!1)!=1165519206)return w(-1);const v=t.getUint16(u+=6,!1)==18761;u+=t.getUint32(u+4,v);const n=t.getUint16(u,v);u+=2;for(let i=0;i<n;i++)if(t.getUint16(u+12*i,v)==274)return w(t.getUint16(u+12*i+8,v))}else{if((65280&N)!=65280)break;u+=t.getUint16(u,!1)}}return w(-1)},a.onerror=s=>R(s),a.readAsArrayBuffer(p)}))}function Hs(p,w){const{width:R}=p,{height:a}=p,{maxWidthOrHeight:s}=w;let t,m=p;return isFinite(s)&&(R>s||a>s)&&([m,t]=es(R,a),R>a?(m.width=s,m.height=a/R*s):(m.width=R/a*s,m.height=s),t.drawImage(p,0,0,m.width,m.height),mt(p)),m}function Bs(p,w){const{width:R}=p,{height:a}=p,[s,t]=es(R,a);switch(w>4&&w<9?(s.width=a,s.height=R):(s.width=R,s.height=a),w){case 2:t.transform(-1,0,0,1,R,0);break;case 3:t.transform(-1,0,0,-1,R,a);break;case 4:t.transform(1,0,0,-1,0,a);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,a,0);break;case 7:t.transform(0,-1,-1,0,a,R);break;case 8:t.transform(0,-1,1,0,0,R)}return t.drawImage(p,0,0,R,a),mt(p),s}function Cs(p,w,R=0){return new Promise((function(a,s){let t,m,u,N,v,n,i,r,o,x,A,T,_,$,U,M,P,h,L,l;function d(k=5){if(w.signal&&w.signal.aborted)throw w.signal.reason;t+=k,w.onProgress(Math.min(t,100))}function y(k){if(w.signal&&w.signal.aborted)throw w.signal.reason;t=Math.min(Math.max(k,t),100),w.onProgress(t)}return t=R,m=w.maxIteration||10,u=1024*w.maxSizeMB*1024,d(),Zt(p,w).then((function(k){try{return[,N]=k,d(),v=Hs(N,w),d(),new Promise((function(g,j){var b;if(!(b=w.exifOrientation))return $s(p).then((function(f){try{return b=f,S.call(this)}catch(c){return j(c)}}).bind(this),j);function S(){return g(b)}return S.call(this)})).then((function(g){try{return n=g,d(),Et().then((function(j){try{return i=j?v:Bs(v,n),d(),r=w.initialQuality||1,o=w.fileType||p.type,Xt(i,o,p.name,p.lastModified,r).then((function(b){try{{let f=function(){if(m--&&(U>u||U>_)){let D,E;return D=l?.95*L.width:L.width,E=l?.95*L.height:L.height,[P,h]=es(D,E),h.drawImage(L,0,0,D,E),r*=o==="image/png"?.85:.95,Xt(P,o,p.name,p.lastModified,r).then((function(H){try{return M=H,mt(L),L=P,U=M.size,y(Math.min(99,Math.floor(($-U)/($-u)*100))),f}catch(re){return s(re)}}),s)}return[1]},c=function(){return mt(L),mt(P),mt(v),mt(i),mt(N),y(100),a(M)};if(x=b,d(),A=x.size>u,T=x.size>p.size,!A&&!T)return y(100),a(x);var S;return _=p.size,$=x.size,U=$,L=i,l=!w.alwaysKeepResolution&&A,(S=(function(D){for(;D;){if(D.then)return void D.then(S,s);try{if(D.pop){if(D.length)return D.pop()?c.call(this):D;D=f}else D=D.call(this)}catch(E){return s(E)}}}).bind(this))(f)}}catch(f){return s(f)}}).bind(this),s)}catch(b){return s(b)}}).bind(this),s)}catch(j){return s(j)}}).bind(this),s)}catch(g){return s(g)}}).bind(this),s)}))}const lr=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ls;function cr(p,w){return new Promise(((R,a)=>{ls||(ls=(function(m){const u=[];return u.push(m),URL.createObjectURL(new Blob(u))})(lr));const s=new Worker(ls);s.addEventListener("message",(function(m){if(w.signal&&w.signal.aborted)s.terminate();else if(m.data.progress===void 0){if(m.data.error)return a(new Error(m.data.error)),void s.terminate();R(m.data.file),s.terminate()}else w.onProgress(m.data.progress)})),s.addEventListener("error",a),w.signal&&w.signal.addEventListener("abort",(()=>{a(w.signal.reason),s.terminate()})),s.postMessage({file:p,imageCompressionLibUrl:w.libURL,options:{...w,onProgress:void 0,signal:void 0}})}))}function Ye(p,w){return new Promise((function(R,a){let s,t,m,u,N,v;if(s={...w},m=0,{onProgress:u}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,N=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=o=>{m=o,typeof u=="function"&&u(m)},!(p instanceof Blob||p instanceof or))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(p.type))return a(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!N||typeof Worker!="function"||v)return Cs(p,s).then((function(o){try{return t=o,r.call(this)}catch(x){return a(x)}}).bind(this),a);var n=(function(){try{return r.call(this)}catch(o){return a(o)}}).bind(this),i=function(o){try{return Cs(p,s).then((function(x){try{return t=x,n()}catch(A){return a(A)}}),a)}catch(x){return a(x)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",cr(p,s).then((function(o){try{return t=o,n()}catch{return i()}}),i)}catch{i()}function r(){try{t.name=p.name,t.lastModified=p.lastModified}catch{}try{s.preserveExif&&p.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===p.type)&&(t=Es(p,t))}catch{}return R(t)}}))}Ye.getDataUrlFromFile=Fs,Ye.getFilefromDataUrl=ms,Ye.loadImage=Rs,Ye.drawImageInCanvas=Ps,Ye.drawFileInCanvas=Zt,Ye.canvasToFile=Xt,Ye.getExifOrientation=$s,Ye.handleMaxWidthOrHeight=Hs,Ye.followExifOrientation=Bs,Ye.cleanupCanvasMemory=mt,Ye.isAutoOrientationInBrowser=Et,Ye.approximateBelowMaximumCanvasSizeOfBrowser=Ds,Ye.copyExifWithoutOrientation=Es,Ye.getBrowserName=St,Ye.version="2.0.2";const qe=[];for(let p=0;p<256;++p)qe.push((p+256).toString(16).slice(1));function dr(p,w=0){return(qe[p[w+0]]+qe[p[w+1]]+qe[p[w+2]]+qe[p[w+3]]+"-"+qe[p[w+4]]+qe[p[w+5]]+"-"+qe[p[w+6]]+qe[p[w+7]]+"-"+qe[p[w+8]]+qe[p[w+9]]+"-"+qe[p[w+10]]+qe[p[w+11]]+qe[p[w+12]]+qe[p[w+13]]+qe[p[w+14]]+qe[p[w+15]]).toLowerCase()}let cs;const ur=new Uint8Array(16);function fr(){if(!cs){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");cs=crypto.getRandomValues.bind(crypto)}return cs(ur)}const mr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ss={randomUUID:mr};function hr(p,w,R){p=p||{};const a=p.random??p.rng?.()??fr();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,dr(a)}function gr(p,w,R){return Ss.randomUUID&&!p?Ss.randomUUID():hr(p)}const As=50,ds=p=>({id:p.id,league_id:p.league_id,user_id:p.user_id,content:p.content,created_at:p.created_at??new Date().toISOString(),status:"sent"}),qt=p=>{const w=new Map;for(const R of p)w.set(R.id,R);return Array.from(w.values()).sort((R,a)=>new Date(R.created_at).getTime()-new Date(a.created_at).getTime())};function xr(p,w={}){const{userId:R,enabled:a=!0,autoSubscribe:s=!0}=w,[t,m]=I.useState([]),[u,N]=I.useState(!1),[v,n]=I.useState(!1),[i,r]=I.useState(!0),[o,x]=I.useState(null),A=I.useRef(null),T=I.useCallback(h=>{m(L=>{const l=h(L);return A.current=l.length?l[0].created_at:null,l})},[]),_=I.useCallback(async({before:h,append:L})=>{if(!p||!a)return;const l=de.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",p).order("created_at",{ascending:!1}).limit(As);h&&l.lt("created_at",h);const{data:d,error:y}=await l;if(y)throw y;const k=(d??[]).map(ds).reverse();T(g=>qt(L?[...k,...g]:k)),(d??[]).length<As?r(!1):L||r(!0)},[p,a,T]),$=I.useCallback(async()=>{if(!p||!a){m([]),r(!0);return}N(!0),x(null),A.current=null;try{await _({append:!1})}catch(h){x(h?.message??"Failed to load chat")}finally{N(!1)}},[p,a,_]);I.useEffect(()=>{if(!p||!a){m([]),r(!0);return}let h=!0;if($(),!s)return()=>{h=!1};const L=de.channel(`league-messages:${p}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${p}`},l=>{if(!h)return;const d=ds(l.new);T(y=>y.some(k=>k.id===d.id)?y:qt([...y,d]))}).subscribe();return()=>{h=!1,de.removeChannel(L)}},[p,a,s,$,T]);const U=I.useCallback(async()=>{if(!p||!a||!i||v)return;const h=A.current??t[0]?.created_at;if(h){n(!0);try{await _({before:h,append:!0})}catch(L){x(L?.message??"Failed to load more messages")}finally{n(!1)}}},[p,a,i,v,_,t]),M=I.useCallback(async h=>{if(!p||!R)throw new Error("Missing league or user");const L=h.trim();if(!L)return;const l=gr(),d=`optimistic-${l}`,y={id:d,client_msg_id:l,league_id:p,user_id:R,content:L,created_at:new Date().toISOString(),status:"sending"};T(j=>qt([...j,y]));const{data:k,error:g}=await de.from("league_messages").insert({league_id:p,user_id:R,content:L}).select("id, league_id, user_id, content, created_at").single();if(g)throw T(j=>j.map(b=>b.id===d?{...b,status:"error"}:b)),g;if(k){const j=ds(k);j.client_msg_id=l,T(b=>b.map(S=>S.id===d?{...j,status:"sent",client_msg_id:l}:S))}},[p,R,T]),P=I.useMemo(()=>t.slice(-5),[t]);return{messages:t,previewMessages:P,loading:u,loadingMore:v,hasMore:i,error:o,refresh:$,loadMore:U,sendMessage:M}}const pr=p=>new Date(p).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),br=p=>{const w=p.trim().split(/\s+/);return w.length===1?w[0][0]?.toUpperCase()??"?":`${w[0][0]?.toUpperCase()??""}${w[w.length-1][0]?.toUpperCase()??""}`},wr=(p,w)=>w?w instanceof Map?w.get(p)??"":w[p]??"":"",vr=(p,w)=>w.isSingle?"12px":w.isTop?p?"12px 12px 4px 12px":"12px 12px 12px 4px":w.isMiddle?p?"12px 4px 4px 12px":"4px 12px 12px 4px":w.isBottom?p?"12px 4px 12px 12px":"4px 12px 12px 12px":"12px";function yr({miniLeagueId:p,memberNames:w}){const{user:R}=Ls(),{messages:a,loading:s,loadingMore:t,hasMore:m,error:u,loadMore:N,sendMessage:v}=xr(p,{userId:R?.id,enabled:!!p}),[n,i]=I.useState(""),[r,o]=I.useState(!1),x=I.useRef(null),A=I.useRef(null),T=I.useRef(null),_=I.useRef(null),[$,U]=I.useState(0),M=I.useCallback(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[]),P=I.useCallback((g=[0,100,300,500,700])=>{requestAnimationFrame(()=>{g.forEach(j=>{setTimeout(()=>M(),j)})})},[M]);I.useEffect(()=>{a.length>0&&P([0,150,300])},[a.length,P]),I.useEffect(()=>{!n&&T.current&&(T.current.style.height="auto",T.current.style.height="42px")},[n]);const h=I.useCallback((g,j=[0,100,300,500,700])=>{if(g>0){if(U(g),x.current){const b=Math.max(g+(T.current?.offsetHeight||0)+16,80);x.current.style.paddingBottom=`${b}px`}}else U(0),x.current&&(x.current.style.paddingBottom="");P(j)},[P]);I.useEffect(()=>{const g=window.visualViewport;if(!g)return;let j=null,b=0;const S=()=>{j&&(clearTimeout(j),j=null),j=setTimeout(()=>{const D=window.innerHeight,E=g.height,H=g.offsetTop+E,re=D-H;Math.abs(re-b)<10&&re>0||(b=re,h(re))},50)};g.addEventListener("resize",S),g.addEventListener("scroll",S);const f=()=>{setTimeout(S,100),setTimeout(S,300)},c=setTimeout(()=>{T.current&&T.current.addEventListener("focus",f)},100);return S(),()=>{j&&clearTimeout(j),clearTimeout(c),g.removeEventListener("resize",S),g.removeEventListener("scroll",S),T.current&&T.current.removeEventListener("focus",f)}},[h]),I.useEffect(()=>{if(typeof window>"u")return;const g=window.innerHeight,j=()=>{const b=g-window.innerHeight;h(b>0?b:0)};return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[h]),I.useEffect(()=>{if(!x.current||!_.current)return;const g=_.current.offsetHeight??72;x.current.style.paddingBottom=`${g+24}px`},[]);const L=()=>{const g=window.visualViewport;g&&setTimeout(()=>{const j=window.innerHeight,b=g.height,S=g.offsetTop+b,f=j-S;h(f,[0,200,400,600,800])},100),P([200,400,600])},l=g=>{const j=g.target;!(j.tagName==="A"||j.tagName==="BUTTON"||j.closest("a, button"))&&T.current&&document.activeElement===T.current&&T.current.blur()},d=I.useMemo(()=>a.map((g,j)=>{const b=a[j-1],S=a[j+1],f=b?.user_id===g.user_id,c=S?.user_id===g.user_id,D=!f,E=!c,H=!f&&!c,re=D&&c,K=f&&c,ee=f&&E;return{...g,isSelf:g.user_id===R?.id,startsRun:D,endsRun:E,isSingle:H,isTop:re,isMiddle:K,isBottom:ee}}),[a,R?.id]),y=I.useCallback(async g=>{if(!p||!R?.id||typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"))return;const b=R.user_metadata?.display_name||R.user_metadata?.full_name||R.email||"User";try{await fetch("/.netlify/functions/notifyLeagueMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:p,senderId:R.id,senderName:b,content:g})})}catch(S){console.error("[MiniLeagueChatBeta] notifyLeagueMessage failed:",S)}},[p,R?.id]),k=I.useCallback(async()=>{const g=n.trim();if(!(!p||!g||r))try{o(!0),await v(g),await y(g),i(""),P([0,150,300])}catch(j){console.error("[MiniLeagueChatBeta] Failed to send message",j)}finally{o(!1)}},[n,p,y,P,v,r]);return e.jsxs("div",{className:"flex flex-col h-full bg-[#f5f6fb]",children:[e.jsxs("div",{ref:x,className:"flex-1 overflow-y-auto px-4 py-5",onClick:l,style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",marginBottom:$>0?"0":"auto",cursor:"pointer"},children:[m&&p&&e.jsx("button",{className:"mx-auto mb-2 text-xs font-semibold text-[#1C8376] bg-white px-3 py-1 rounded-full shadow disabled:opacity-40",onClick:N,disabled:t,children:t?"Loading earlier":"Load earlier messages"}),d.length===0&&!s?e.jsx("div",{className:"text-center text-sm text-slate-500 mt-8",children:"Say hi to kick off this chat!"}):d.map(g=>{const j=wr(g.user_id,w)||"Unknown",b=!g.isSelf&&(g.isSingle||g.isBottom),S=g.isSelf?"flex justify-end":"flex items-end gap-2",f=["flex flex-col",g.isSelf?"items-end ml-auto":"items-start"].filter(Boolean).join(" ");return e.jsxs("div",{className:S,style:{marginTop:g.startsRun?24:4},children:[!g.isSelf&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex justify-center self-end",children:b?e.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-xs font-semibold text-slate-500",children:br(j)}):e.jsx("div",{className:"w-8 h-8"})}),e.jsxs("div",{className:f,style:{maxWidth:"72%"},children:[e.jsx("div",{className:`w-full px-3 py-2 text-sm leading-snug ${g.isSelf?"bg-[#1C8376] text-white":"bg-white text-slate-800"}`,style:{borderRadius:vr(g.isSelf,g)},children:e.jsxs("div",{className:`flex flex-col gap-1 ${g.isSelf?"items-end text-right":"items-start text-left"}`,children:[g.startsRun&&!g.isSelf&&e.jsx("div",{className:`text-[11px] font-semibold ${g.isSelf?"text-white/80":"text-slate-600"}`,children:j}),e.jsx("div",{className:"whitespace-pre-wrap break-words",children:g.content}),e.jsx("div",{className:"text-[11px] text-[#DCDCDD]",children:pr(g.created_at)})]})}),(g.status==="sending"||g.status==="error")&&e.jsxs("div",{className:"text-[11px] text-slate-400 flex items-center gap-2 mt-1",children:[g.status==="sending"&&e.jsx("span",{children:"Sending"}),g.status==="error"&&e.jsx("span",{className:"text-red-500",children:"Failed"})]})]})]},g.id)}),e.jsx("div",{ref:A,style:{height:"1px",width:"100%"}})]}),e.jsxs("div",{ref:_,className:"flex-shrink-0 border-t border-slate-200 bg-white px-4 py-3",style:{paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))",position:$>0?"fixed":"relative",bottom:$>0?`${$}px`:"auto",left:$>0?0:"auto",right:$>0?0:"auto",width:$>0?"100%":"auto",zIndex:$>0?1e3:"auto"},children:[e.jsxs("div",{className:"flex items-end gap-3 bg-slate-100 rounded-2xl px-3 py-2",children:[e.jsx("textarea",{ref:T,className:"flex-1 bg-transparent resize-none focus:outline-none text-sm text-slate-800 placeholder:text-slate-400",rows:1,value:n,disabled:!p||r,placeholder:p?"Start typing a message":"Join this league to chat",onChange:g=>{i(g.target.value),T.current&&(T.current.style.height="auto",T.current.style.height=`${Math.min(T.current.scrollHeight,120)}px`)},onFocus:L,onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),k())},style:{minHeight:"42px",maxHeight:"120px",lineHeight:"1.5"}}),e.jsx("button",{type:"button",onClick:k,disabled:!p||r||!n.trim(),className:"w-10 h-10 rounded-full bg-[#1C8376] text-white flex items-center justify-center disabled:opacity-40",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14M12 5l7 7-7 7"})})})]}),u&&e.jsxs("div",{className:"text-xs text-red-500 mt-2 text-center",children:[u,"  try again or switch to the classic chat tab."]})]})]})}const Kt=8;function jr(p,w){if(p==="FINISHED")return"FT";if(p==="PAUSED")return"HT";if(p==="IN_PLAY"){if(w==null)return"LIVE";if(w>=1&&w<=45)return"First Half";if(w>45&&w<=50)return"45+";if(w>50)return"Second Half"}return"LIVE"}function Ts(p){const w=(p||"?").trim().split(/\s+/);return w.length?w.length===1?w[0].slice(0,1).toUpperCase():(w[0][0]+w[w.length-1][0]).toUpperCase():"?"}function us(p){return p.result==="H"||p.result==="D"||p.result==="A"?p.result:typeof p.home_goals=="number"&&typeof p.away_goals=="number"?p.home_goals>p.away_goals?"H":p.home_goals<p.away_goals?"A":"D":null}function Yt({letter:p,correct:w,unicorn:R,hasSubmitted:a,isLive:s,isOngoing:t,isFinished:m}){let u;return w===!0?s||t?u="bg-emerald-600 text-white border-emerald-600 animate-pulse shadow-lg shadow-emerald-500/50":m?u="bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":u="bg-emerald-600 text-white border-emerald-600":a?u="bg-emerald-600 text-white border-emerald-600":u="bg-slate-100 text-slate-600 border-slate-200",e.jsx("span",{className:["inline-flex items-center justify-center h-5 min-w-[18px] px-1.5","rounded-full border text-[11px] font-semibold mb-0.5","align-middle",u].join(" "),title:R?"Correct!":void 0,children:p})}const Nr=(p,w)=>w.isSingle?"12px":w.isTop?p?"12px 12px 4px 12px":"12px 12px 12px 4px":w.isMiddle?p?"12px 4px 4px 12px":"4px 12px 12px 4px":w.isBottom?p?"12px 4px 12px 12px":"4px 12px 12px 12px":"12px";function _r({chat:p,userId:w,nameById:R,isMember:a,newMsg:s,setNewMsg:t,onSend:m,leagueCode:u,memberCount:N,maxMembers:v,notificationStatus:n}){const i=I.useRef(null),r=I.useRef(null),o=I.useRef(null),x=I.useRef(null),[A,T]=I.useState(0),_=()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},$=I.useCallback((h=[0,100,300,500,700])=>{requestAnimationFrame(()=>{h.forEach(L=>{setTimeout(()=>_(),L)})})},[]),U=I.useCallback((h,L=[0,100,300,500,700])=>{if(h>0){if(T(h),i.current){const l=Math.max(h+(o.current?.offsetHeight||0)+16,80);i.current.style.paddingBottom=`${l}px`}}else T(0),i.current&&(i.current.style.paddingBottom="");$(L)},[$]);I.useEffect(()=>{p.length>0&&setTimeout(()=>_(),100)},[p.length]),I.useEffect(()=>{!s&&o.current&&(o.current.style.height="auto",o.current.style.height="42px")},[s]),I.useEffect(()=>{const h=window.visualViewport;if(!h)return;let L=null,l=0;const d=()=>{L&&(clearTimeout(L),L=null),L=setTimeout(()=>{const g=window.innerHeight,j=h.height,b=h.offsetTop+j,S=g-b;Math.abs(S-l)<10&&S>0||(l=S,U(S))},50)};h.addEventListener("resize",d),h.addEventListener("scroll",d);const y=()=>{setTimeout(d,100),setTimeout(d,300)},k=setTimeout(()=>{o.current&&o.current.addEventListener("focus",y)},100);return d(),()=>{L&&clearTimeout(L),clearTimeout(k),h.removeEventListener("resize",d),h.removeEventListener("scroll",d),o.current&&o.current.removeEventListener("focus",y)}},[U]);const M=()=>{const h=window.visualViewport;h&&setTimeout(()=>{const L=window.innerHeight,l=h.height,d=h.offsetTop+l,y=L-d;U(y,[0,200,400,600,800])},100),$([200,400,600])};I.useEffect(()=>{if(typeof window>"u")return;const h=window.innerHeight,L=()=>{const l=h-window.innerHeight;U(l>0?l:0)};return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[U]);const P=h=>{const L=h.target;!(L.tagName==="A"||L.tagName==="BUTTON"||L.closest("a, button"))&&o.current&&document.activeElement===o.current&&o.current.blur()};return e.jsxs("div",{className:"flex flex-col chat-container",style:{height:"100%"},children:[e.jsxs("div",{ref:i,className:"flex-1 overflow-y-auto px-3 pt-3 pb-4 min-h-0 messages-container",onClick:P,style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",marginBottom:A>0?"0":"auto",cursor:"pointer"},children:[p.map((h,L)=>{const l=h.user_id===w,d=R.get(h.user_id)??"Unknown",y=new Date(h.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),k=p[L-1],g=p[L+1],j=k?.user_id===h.user_id,b=g?.user_id===h.user_id,S=!j,f=!b,c=!j&&!b,D=S&&b,E=j&&b,H=j&&f,re=!l&&(c||H),K=d.split(/\s+/).map(F=>F[0]).join("").toUpperCase(),ee=l?"flex justify-end":"flex items-end gap-2",B=["flex flex-col",l?"items-end ml-auto":"items-start"].filter(Boolean).join(" ");return e.jsxs("div",{className:ee,style:{marginTop:S?24:4},children:[!l&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex justify-center self-end",children:re?e.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-xs font-semibold text-slate-500",children:K}):e.jsx("div",{className:"w-8 h-8"})}),e.jsx("div",{className:B,style:{maxWidth:"72%"},children:e.jsx("div",{className:`w-full px-3 py-2 text-sm leading-snug ${l?"bg-[#1C8376] text-white":"bg-slate-100 text-slate-900"}`,style:{borderRadius:Nr(l,{isSingle:c,isTop:D,isMiddle:E,isBottom:H})},children:e.jsxs("div",{className:`flex flex-col gap-1 ${l?"items-end text-right":"items-start text-left"}`,children:[S&&!l&&e.jsx("div",{className:`text-[11px] font-semibold ${l?"text-white/80":"text-slate-600"}`,children:d}),e.jsx("div",{className:"whitespace-pre-wrap break-words",children:h.content}),e.jsx("div",{className:"text-[11px] text-[#DCDCDD]",children:y})]})})})]},h.id)}),e.jsx("div",{ref:r,style:{height:"1px",width:"100%"}})]}),e.jsxs("div",{ref:x,className:"flex-shrink-0 bg-white border-t border-slate-200 px-4 py-3",style:{paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))",position:A>0?"fixed":"relative",bottom:A>0?`${A}px`:"auto",left:A>0?"0":"auto",right:A>0?"0":"auto",width:A>0?"100%":"auto",zIndex:A>0?1e3:"auto"},children:[a?e.jsxs("form",{onSubmit:h=>{h.preventDefault(),m()},className:"flex items-center gap-2",children:[e.jsx("textarea",{ref:o,value:s,onChange:h=>{t(h.target.value),o.current&&(o.current.style.height="auto",o.current.style.height=`${Math.min(o.current.scrollHeight,120)}px`)},onFocus:M,onKeyDown:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),s.trim()&&m())},placeholder:"Start typing...",maxLength:2e3,rows:1,className:"flex-1 rounded-xl border border-slate-300 px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-transparent resize-none overflow-hidden",style:{minHeight:"42px",maxHeight:"120px",lineHeight:"1.5"}}),e.jsx("button",{type:"submit",className:"flex-shrink-0 w-10 h-10 rounded-full bg-[#1C8376] text-white flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:!s.trim(),style:{backgroundColor:s.trim()?"#1C8376":"#94a3b8"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]}):e.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 text-amber-800 p-3 text-sm",children:"Join this league to chat with other members."}),n&&e.jsx("div",{className:`w-full rounded px-2 py-1 text-xs mt-2 ${n.type==="success"?"bg-green-50 text-green-700 border border-green-200":n.type==="warning"?"bg-amber-50 text-amber-700 border border-amber-200":"bg-red-50 text-red-700 border border-red-200"}`,children:n.message})]})]})}function Tr(){const{code:p=""}=Qs(),{user:w}=Ls(),[R]=I.useState(()=>{const C=localStorage.getItem("oldSchoolMode");return C?JSON.parse(C):!1});I.useEffect(()=>{localStorage.setItem("oldSchoolMode",JSON.stringify(R))},[R]),I.useEffect(()=>{const C=q=>{const Y=q.target;(Y.tagName==="INPUT"||Y.tagName==="TEXTAREA")&&setTimeout(()=>{window.scrollTo(0,0);const Z=document.querySelector(".league-header-fixed");Z&&(Z.style.top="0")},100)},z=()=>{const q=document.querySelector(".league-header-fixed");q&&(q.style.top="0")};return document.addEventListener("focusin",C),window.addEventListener("resize",z),window.addEventListener("orientationchange",z),()=>{document.removeEventListener("focusin",C),window.removeEventListener("resize",z),window.removeEventListener("orientationchange",z)}},[]),I.useEffect(()=>{if(typeof window>"u")return;const C=window.visualViewport;if(!C)return;let z=null;const q=()=>{const Z=r.current;if(!Z)return;const ne=C.offsetTop??0;Z.style.setProperty("transform",`translate3d(0, ${ne}px, 0)`,"important")},Y=()=>{z&&cancelAnimationFrame(z),z=window.requestAnimationFrame(q)};return Y(),C.addEventListener("resize",Y),C.addEventListener("scroll",Y),()=>{z&&cancelAnimationFrame(z),C.removeEventListener("resize",Y),C.removeEventListener("scroll",Y),r.current&&r.current.style.removeProperty("transform")}},[]);const[a,s]=I.useState(null),[t,m]=I.useState([]),[u,N]=I.useState(!0),[v,n]=I.useState("chat-beta"),i=I.useRef(!1),r=I.useRef(null),[o,x]=I.useState(!1),[A,T]=I.useState(!1),[_,$]=I.useState(!1),[U,M]=I.useState(null),[P,h]=I.useState(null),[L,l]=I.useState(null),[d,y]=I.useState([]),k=I.useRef({}),g=I.useRef(new Map),[j,b]=I.useState(new Set),[S,f]=I.useState(!1),[c,D]=I.useState(!1),[E,H]=I.useState(!1),[re,K]=I.useState(!1),[ee,B]=I.useState(!1),[F,ce]=I.useState(!1),[Ne,he]=I.useState(null),[be,we]=I.useState(!1),[Te,Le]=I.useState(!1),[ht,Qe]=I.useState(!1),[Ce,Fe]=I.useState(!1),[_e,pe]=I.useState(!1),[Re,De]=I.useState(!1),[Me,ze]=I.useState(!1),[Se,je]=I.useState(null),[We,at]=I.useState(!1),[wt,Pe]=I.useState(!1),[et,Oe]=I.useState(null),[tt,Ge]=I.useState([]),[st,Ze]=I.useState(""),[gt,Ve]=I.useState(null),ts=I.useMemo(()=>!!w?.id&&t.some(C=>C.id===w.id),[w?.id,t]),it=I.useMemo(()=>!!w?.id&&!!et&&et.id===w.id,[w?.id,et]),Pt=I.useMemo(()=>et?.name??"League admin",[et]),vt=I.useMemo(()=>{const C=new Map;return t.forEach(z=>C.set(z.id,z.name)),C},[t]),$t=I.useCallback(()=>{if(!a?.code||typeof window>"u"||typeof navigator>"u")return;const C=`Join my mini league "${a.name}" on TotL!`,z=`${window.location.origin}/league/${a.code}`,q=navigator;if(typeof q.share=="function"){q.share({title:`Join ${a.name}`,text:C,url:z}).catch(Z=>{console.warn("[League] Share cancelled",Z)});return}const Y=`${C}
${z}`;navigator.clipboard?.writeText?navigator.clipboard.writeText(Y).then(()=>window.alert?.("League link copied to clipboard!")).catch(()=>{window.prompt?.("Share this league code:",a.code)}):window.prompt?.("Share this league code:",a.code)},[a]),ut=I.useCallback(async()=>{if(!(!a?.id||!w?.id)){$(!0);try{const{error:C}=await de.from("league_members").delete().eq("league_id",a.id).eq("user_id",w.id);if(C)throw C;typeof window<"u"&&(window.location.href="/leagues")}catch(C){console.error("[League] Error leaving league:",C),typeof window<"u"&&window.alert?.(C?.message??"Failed to leave league. Please try again.")}finally{$(!1),T(!1)}}},[a?.id,w?.id]),ft=I.useCallback(async()=>{if(!(!a?.id||!w?.id)){Fe(!0);try{if(t.length>=Kt){typeof window<"u"&&window.alert?.("League is full (max 8 members)."),Qe(!1);return}const{error:C}=await de.from("league_members").insert({league_id:a.id,user_id:w.id});if(C)throw C;typeof window<"u"&&window.location.reload()}catch(C){console.error("[League] Error joining league:",C),typeof window<"u"&&window.alert?.(C?.message??"Failed to join league.")}finally{Fe(!1)}}},[a?.id,w?.id,t.length]),yt=I.useCallback(async()=>{if(!(!Se||!a?.id||!w?.id)){at(!0);try{const{error:C}=await de.from("league_members").delete().eq("league_id",a.id).eq("user_id",Se.id);if(C)throw C;typeof window<"u"&&window.location.reload()}catch(C){console.error("[League] Error removing member:",C),typeof window<"u"&&window.alert?.(C?.message??"Failed to remove member.")}finally{at(!1),De(!1),je(null)}}},[a?.id,Se,w?.id]),kt=I.useCallback(async()=>{if(!(!a?.id||!w?.id)){Pe(!0);try{const{error:C}=await de.from("league_members").delete().eq("league_id",a.id);if(C)throw C;const{error:z}=await de.from("leagues").delete().eq("id",a.id);if(z)throw z;typeof window<"u"&&(window.location.href="/leagues")}catch(C){console.error("[League] Error ending league:",C),typeof window<"u"&&window.alert?.(C?.message??"Failed to end league.")}finally{Pe(!1),ze(!1)}}},[a?.id,w?.id]),Ht=I.useCallback(async C=>{if(!a?.id||!it){he("Only league admins can upload avatars.");return}if(!new Set(["image/png","image/jpeg","image/jpg","image/webp"]).has(C.type)){he("Please upload a PNG, JPG, or WebP image.");return}if(C.size>2*1024*1024){he("Please choose an image smaller than 2MB.");return}he(null),we(!1),ce(!0);try{const q=await Ye(C,{maxSizeMB:.02,maxWidthOrHeight:256,useWebWorker:!0,initialQuality:.8});if(q.size>20*1024)throw new Error("Compressed image is still larger than 20KB. Try a smaller image.");const Z={"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/webp":"webp"}[q.type]??"jpg",ne=`${a.id}-${Date.now()}.${Z}`,{error:V}=await de.storage.from("league-avatars").upload(ne,q,{cacheControl:"3600",upsert:!0,contentType:q.type});if(V)throw V;const{data:xe}=de.storage.from("league-avatars").getPublicUrl(ne),ye=xe?.publicUrl;if(!ye)throw new Error("Unable to get public URL for avatar.");const{error:G}=await de.from("leagues").update({avatar:ye}).eq("id",a.id);if(G)throw G;s(te=>te&&{...te,avatar:ye}),we(!0)}catch(q){console.error("[League] Error uploading avatar:",q),he(q?.message??"Failed to upload avatar. Please try again.")}finally{ce(!1)}},[it,a?.id]),xt=I.useCallback(async()=>{if(!(!a?.id||!it)){he(null),we(!1),ce(!0);try{const{error:C}=await de.from("leagues").update({avatar:null}).eq("id",a.id);if(C)throw C;s(z=>z&&{...z,avatar:null}),we(!0)}catch(C){console.error("[League] Error removing avatar:",C),he(C?.message??"Failed to remove avatar. Please try again.")}finally{ce(!1)}}},[it,a?.id]),[ot,zs]=I.useState(new Map);I.useEffect(()=>{(async()=>{const C=new Map,{data:z}=await de.from("app_fixtures").select("gw, kickoff_time").order("gw",{ascending:!0}),{data:q}=await de.from("app_fixtures").select("gw, kickoff_time").eq("gw",1).order("fixture_index",{ascending:!0}),Y=new Map;if(z&&z.forEach(Z=>{(!Y.has(Z.gw)||Z.kickoff_time&&new Date(Z.kickoff_time)<new Date(Y.get(Z.gw)))&&Z.kickoff_time&&Y.set(Z.gw,Z.kickoff_time)}),q&&q.length>0){const Z=q.find(ne=>ne.kickoff_time)?.kickoff_time;if(Z){const ne=Y.get(1);(!ne||new Date(Z)<new Date(ne))&&Y.set(1,Z)}}Y.forEach((Z,ne)=>{const V=new Date(Z),xe=new Date(V.getTime()-4500*1e3);C.set(ne,xe)}),zs(C)})()},[]),I.useEffect(()=>{const C=z=>{const q=z.target;S&&!q.closest(".gw-dropdown-container")&&f(!1)};return S&&document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[S]),I.useEffect(()=>{let C=!0;return(async()=>{const{data:z}=await de.from("app_meta").select("current_gw").eq("id",1).maybeSingle();if(!C)return;M(z?.current_gw??null);const{data:q}=await de.from("app_gw_results").select("gw").order("gw",{ascending:!1}).limit(1);if(!C)return;h(q&&q.length?q[0].gw:null);const{data:Y}=await de.from("app_gw_results").select("gw").order("gw",{ascending:!1});if(!C)return;const Z=Y?[...new Set(Y.map(ne=>ne.gw))].sort((ne,V)=>V-ne):[];y(Z),Z.length>0&&l(Z[0])})(),()=>{C=!1}},[]);const pt=I.useMemo(()=>t.map(C=>C.id),[t]),[Ue,hs]=I.useState([]),[Mt,ss]=I.useState([]),[rs,ns]=I.useState([]),[gs,as]=I.useState([]),xs=I.useMemo(()=>!Ue||Ue.length===0?[]:Ue.map(C=>C.api_match_id).filter(C=>C!=null),[Ue]),Bt=I.useMemo(()=>a?.name==="API Test",[a?.name]),[rt,ps]=I.useState(null);I.useEffect(()=>{if(!Bt){ps(null);return}let C=!0;return(async()=>{const{data:z}=await de.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle();let q=z?.current_test_gw??1;if(q&&q!==1){const{data:Y}=await de.from("app_fixtures").select("gw").eq("gw",q).limit(1).maybeSingle();if(!Y){const{data:Z}=await de.from("app_fixtures").select("gw").eq("gw",1).limit(1).maybeSingle();Z&&(q=1)}}C&&ps(q)})(),()=>{C=!1}},[Bt]);const Ws=I.useMemo(()=>Bt&&rt!==null?rt:L||U||void 0,[Bt,rt,L,U]),{liveScores:bs}=er(Ws,xs.length>0?xs:void 0),lt=I.useMemo(()=>{const C={};return!Ue||Ue.length===0||Ue.forEach(z=>{const q=z.api_match_id;if(q){const Y=bs.get(q);Y&&(C[z.fixture_index]={homeScore:Y.home_score??0,awayScore:Y.away_score??0,status:Y.status||"SCHEDULED",minute:Y.minute??null})}}),C},[bs,Ue]),[is,Ut]=I.useState([]),[ws,It]=I.useState(!1);I.useEffect(()=>{let C=!0;return(async()=>{N(!0);const{data:z}=await de.from("leagues").select("id,name,code,created_at").eq("code",p).maybeSingle();if(!C)return;if(!z){s(null),m([]),N(!1);return}s(z);const{data:q}=await de.from("league_members").select("users(id,name),created_at").eq("league_id",z.id).order("created_at",{ascending:!0}),Y=q?.map(V=>({id:V.users.id,name:V.users.name??"(no name)"}))??[],Z=[...Y].sort((V,xe)=>V.name.localeCompare(xe.name));m(Z);const ne=Y[0];Oe(ne),w?.id&&!Y.some(V=>V.id===w.id)&&Qe(!0),N(!1)})(),()=>{C=!1}},[p]),I.useEffect(()=>{},[a,v]);const Os=I.useCallback(async(C,z=!1)=>{const{data:q,error:Y}=await de.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",C).order("created_at",{ascending:!1}).limit(500);if(!Y&&q){const ne=(q??[]).reverse();z&&console.log("[Chat] Loaded messages:",ne.length,"from database (most recent)"),Ge(V=>{const xe=new Set(V.map(oe=>oe.id)),ye=ne.filter(oe=>!xe.has(oe.id));if(V.length===0)return z&&console.log("[Chat] Initial load, setting",ne.length,"messages"),ne;const te=[...V,...ye].sort((oe,Ae)=>new Date(oe.created_at).getTime()-new Date(Ae.created_at).getTime()),ie=te.length>500?te.slice(-500):te;return z&&console.log("[Chat] Merged messages. Previous:",V.length,"New from DB:",ye.length,"Total:",te.length,"After limit:",ie.length),ie})}else Y&&console.error("[Chat] Error loading messages:",Y)},[]);I.useEffect(()=>{if(!a?.id)return;let C=!0;const z=async()=>{C&&await Os(a.id,!0)};z();const q=de.channel(`league-messages:${a.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${a.id}`},ne=>{const V=ne.new;console.log("[Chat] Realtime message received:",V.id,V.content.substring(0,50)),Ge(xe=>{if(xe.some(G=>G.id===V.id))return console.log("[Chat] Message already exists, skipping"),xe;const ye=[...xe,V];return console.log("[Chat] Added realtime message. Total messages:",ye.length),ye})}).subscribe(),Y=()=>{!document.hidden&&a?.id&&C&&(console.log("[Chat] App became visible, refetching messages..."),z())},Z=()=>{a?.id&&C&&(console.log("[Chat] Window gained focus, refetching messages..."),z())};return document.addEventListener("visibilitychange",Y),window.addEventListener("focus",Z),()=>{C=!1,de.removeChannel(q),document.removeEventListener("visibilitychange",Y),window.removeEventListener("focus",Z)}},[a?.id]);const Gs=I.useCallback(async()=>{if(!a||!w?.id)return;const C=st.trim();if(!C)return;Ze("");const{data:z,error:q}=await de.from("league_messages").insert({league_id:a.id,user_id:w.id,content:C}).select("id, league_id, user_id, content, created_at").single();q?(console.error(q),alert("Failed to send message.")):z&&Ge(Z=>[...Z,z]),window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||setTimeout(async()=>{try{const Z=w.user_metadata?.display_name||w.email||"User",ne=await fetch("/.netlify/functions/notifyLeagueMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:a.id,senderId:w.id,senderName:Z,content:C})}),V=await ne.json().catch(()=>({}));V.ok===!0?V.sent&&V.sent>0?Ve({message:` Message sent to ${V.sent} device${V.sent===1?"":"s"}`,type:"success"}):V.message==="No subscribed devices"?Ve({message:` No subscribed devices (${V.eligibleRecipients||0} eligible recipient${V.eligibleRecipients===1?"":"s"})`,type:"warning"}):V.message==="No devices"?Ve({message:` No devices registered (${V.eligibleRecipients||0} eligible recipient${V.eligibleRecipients===1?"":"s"})`,type:"warning"}):V.message==="No eligible recipients"?Ve({message:" All members are currently active",type:"success"}):Ve({message:` ${V.message||"Notification sent"}`,type:"success"}):V.ok===!1||V.error?Ve({message:` Failed to send notification: ${V.error||"Unknown error"}`,type:"error"}):ne.ok||Ve({message:` Notification error (HTTP ${ne.status})`,type:"error"}),setTimeout(()=>Ve(null),5e3)}catch(Z){console.error("[Chat] Notification exception:",Z),Ve({message:" Failed to send notification",type:"error"}),setTimeout(()=>Ve(null),5e3)}},100)},[a,w,st,Ze,Ge,Ve]);I.useEffect(()=>{let C=!0;return(async()=>{const z=a?.name==="API Test";let q=rt??1;if(z){const{data:G}=await de.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle();if(q=G?.current_test_gw??1,q&&q!==1){const{data:te}=await de.from("app_fixtures").select("gw").eq("gw",q).limit(1).maybeSingle();if(te)console.log("[League] Using current_test_gw from meta:",q);else{const{data:ie}=await de.from("app_fixtures").select("gw").eq("gw",1).limit(1).maybeSingle();ie&&(q=1,console.log("[League] No fixtures for current_test_gw, falling back to GW T1"))}}else console.log("[League] Using GW T1 or current_test_gw:",q)}const Y=z&&(v==="gw"||v==="gwr");console.log("[League] Data fetch:",{isApiTestLeague:z,tab:v,useTestFixtures:Y,leagueName:a?.name,testGwForData:q,willUseTestTables:Y,willUseMainTables:!Y});let Z=v==="gwr"?L:U;if(z&&(v==="gw"||v==="gwr")&&(Z=q),v==="gw"&&!z&&pt.length>0){const{data:G}=await de.from("app_gw_submissions").select("gw").in("user_id",pt).not("submitted_at","is",null).order("gw",{ascending:!1}).limit(10);if(G&&G.length>0){const te=[...new Set(G.map(ie=>ie.gw))].sort((ie,oe)=>(oe||0)-(ie||0));for(const ie of te)if(ie){const{data:oe}=await de.from("app_fixtures").select("gw").eq("gw",ie).limit(1);if(oe&&oe.length>0){console.log("[League] Found fixtures for GW",ie,"from submissions - using this GW (currentGw was",Z,")"),Z=ie;break}}}!Z&&U&&(Z=U,console.log("[League] Using currentGw as fallback:",U))}if(console.log("[League] gwForData:",Z,"memberIds:",pt),!Z&&!Y){hs([]),ss([]),ns([]),as([]);return}let ne;if(Y){const{data:G}=await de.from("app_fixtures").select("id,test_gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,home_crest,away_crest,kickoff_time,api_match_id").eq("test_gw",q).order("fixture_index",{ascending:!0});ne=G?.map(te=>({...te,gw:te.test_gw}))||null}else{console.log("[League] Fetching from MAIN database table (fixtures) for regular league, GW:",Z);const{data:G}=await de.from("app_fixtures").select("id,gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,kickoff_time").eq("gw",Z).order("fixture_index",{ascending:!0});ne=G?.map(te=>({...te,api_match_id:null}))||null,console.log("[League] Fetched fixtures from main database:",G?.length||0,"fixtures")}if(!C)return;if(hs(ne??[]),!pt.length){ss([]),ns([]),as([]);return}let V=null,xe;if(Y){const{data:G}=await de.from("app_picks").select("user_id,matchday,fixture_index,pick").eq("matchday",q).in("user_id",pt);V=G?.map(O=>({...O,gw:O.matchday}))||null;const{data:te,error:ie}=await de.from("app_gw_submissions").select("user_id,matchday,submitted_at").eq("matchday",q).not("submitted_at","is",null).in("user_id",pt);ie&&console.error("Error fetching test_api_submissions:",ie);const{data:oe}=await de.from("app_fixtures").select("fixture_index,home_team,away_team,home_code,away_code,kickoff_time").eq("test_gw",q).order("fixture_index",{ascending:!0}),Ae=new Set((oe||[]).map(O=>O.fixture_index));console.log("[League] Current fixture indices from test_api_fixtures:",Array.from(Ae)),console.log("[League] Current fixtures:",oe?.map(O=>({index:O.fixture_index,home:O.home_team,away:O.away_team})));const W=[];if(te&&V&&oe){const O=Ae.size;console.log("[League] Required fixture count for valid submission:",O);const J=(oe||[]).map(Q=>Q.kickoff_time?new Date(Q.kickoff_time):null).filter(Q=>Q!==null&&!isNaN(Q.getTime())),se=J.length>0?new Date(Math.min(...J.map(Q=>Q.getTime()))):null,fe=new Date("2025-11-18T00:00:00Z");console.log("[League] Submission cutoff date (submissions before this are old):",fe.toISOString()),console.log("[League] Earliest kickoff:",se?.toISOString()),te.forEach(Q=>{const me=(V||[]).filter(ke=>ke.user_id===Q.user_id&&ke.matchday===q),ge=me.filter(ke=>Ae.has(ke.fixture_index)),ue=ge.length===O&&O>0,X=new Set(ge.map(ke=>ke.fixture_index)),ae=X.size===O,Ee=Q.submitted_at?new Date(Q.submitted_at):null,le=Ee&&Ee>=fe;if(ue&&ae&&le)W.push(Q),console.log("[League]  VALID submission (has picks for ALL current fixtures AND recent submission):",{user_id:Q.user_id,submitted_at:Q.submitted_at,submissionDate:Ee?.toISOString(),cutoffDate:fe.toISOString(),picksCount:me.length,picksForCurrentFixtures:ge.length,uniqueIndices:X.size,requiredCount:O});else{const ke=[];ue||ke.push("missing picks"),ae||ke.push("duplicate/extra picks"),le||ke.push(`old submission (${Ee?.toISOString()} < ${fe.toISOString()})`),console.log("[League]  INVALID submission:",{user_id:Q.user_id,submitted_at:Q.submitted_at,submissionDate:Ee?.toISOString(),cutoffDate:fe.toISOString(),picksCount:me.length,picksForCurrentFixtures:ge.length,uniqueIndices:X.size,requiredCount:O,hasAllRequired:ue,hasExactMatch:ae,isRecent:le,reason:ke.join(", ")})}})}xe=W.map(O=>({...O,gw:O.matchday}))||null,console.log("[League] Test API submissions fetched (filtered to only current fixtures):",xe),console.log("[League] Valid submissions count:",W.length,"out of",te?.length||0,"total")}else{console.log("[League] Fetching from MAIN database tables (picks, gw_submissions) for regular league");const{data:G}=await de.from("app_picks").select("user_id,gw,fixture_index,pick").eq("gw",Z).in("user_id",pt);V=G,console.log("[League] Fetched picks from main database:",G?.length||0,"picks");const{data:te}=await de.from("app_gw_submissions").select("user_id,gw,submitted_at").eq("gw",Z).in("user_id",pt);xe=te,console.log("[League] Fetched submissions from main database:",te?.length||0,"submissions")}if(!C)return;ss(V??[]),ns(xe??[]);const{data:ye}=await de.from("app_gw_results").select("gw,fixture_index,result").eq("gw",Y?1:Z||0);C&&as(ye??[])})(),()=>{C=!1}},[v,U,P,L,pt]),I.useEffect(()=>{k.current=lt},[lt]);const Ke=I.useMemo(()=>{const C=new Map;return console.log("[League] Building submittedMap from subs:",rs),rs.forEach(z=>{if(z.submitted_at){const q=`${z.user_id}:${z.gw}`;console.log(`[League] Adding submission key: ${q}`,z),C.set(q,!0)}else console.log("[League] Skipping submission with null submitted_at:",z)}),console.log("[League] Final submittedMap:",Array.from(C.entries())),C},[rs]),zt=I.useCallback(C=>C.map(z=>({user_id:z.id,name:z.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]})),[]);I.useEffect(()=>{let C=!0;return(async()=>{if(!t.length){Ut([]);return}if(a?.name==="API Test"){Ut(zt(t)),It(!1);return}if(U===null)return;It(!0);const{data:z}=await de.from("gw_results").select("gw,fixture_index,result"),q=z??[],Y=new Map;if(q.forEach(Q=>{const me=us(Q);me&&Y.set(`${Q.gw}:${Q.fixture_index}`,me)}),Y.size===0){Ut(zt(t)),It(!1);return}const Z=[...new Set(Array.from(Y.keys()).map(Q=>parseInt(Q.split(":")[0],10)))].sort((Q,me)=>Q-me),ne=["Prem Predictions","FC Football","Easy League"],V=["The Bird league"],xe=await Zs(a,U),ye=Z.filter(Q=>Q>=xe);if(!ne.includes(a?.name||"")&&!V.includes(a?.name||"")&&ye.length===0){Ut(zt(t)),It(!1);return}const{data:G}=await de.from("picks").select("user_id,gw,fixture_index,pick").in("user_id",t.map(Q=>Q.id)).in("gw",ye),te=G??[],ie=new Map;ye.forEach(Q=>{const me=new Map;t.forEach(ge=>me.set(ge.id,{user_id:ge.id,score:0,unicorns:0})),ie.set(Q,me)}),ye.forEach(Q=>{Array.from(Y.entries()).filter(([ge])=>parseInt(ge.split(":")[0],10)===Q).map(([ge,ue])=>({idx:parseInt(ge.split(":")[1],10),out:ue})).forEach(({idx:ge,out:ue})=>{const X=te.filter(le=>le.gw===Q&&le.fixture_index===ge),ae=X.filter(le=>le.pick===ue).map(le=>le.user_id),Ee=ie.get(Q);if(X.forEach(le=>{if(le.pick===ue){const ke=Ee.get(le.user_id);ke.score+=1}}),ae.length===1&&t.length>=3){const le=ae[0],ke=Ee.get(le);ke.unicorns+=1}})});const oe=new Map,Ae=new Map,W=new Map,O=new Map,J=new Map,se=new Map;t.forEach(Q=>{oe.set(Q.id,0),Ae.set(Q.id,0),W.set(Q.id,0),O.set(Q.id,0),J.set(Q.id,0),se.set(Q.id,[])}),ye.forEach(Q=>{const me=Array.from(ie.get(Q).values());if(me.forEach(X=>{Ae.set(X.user_id,(Ae.get(X.user_id)??0)+X.score),W.set(X.user_id,(W.get(X.user_id)??0)+X.unicorns)}),me.sort((X,ae)=>ae.score-X.score||ae.unicorns-X.unicorns),!me.length)return;const ge=me[0],ue=me.filter(X=>X.score===ge.score&&X.unicorns===ge.unicorns);ue.length===1?(oe.set(ge.user_id,(oe.get(ge.user_id)??0)+3),O.set(ge.user_id,(O.get(ge.user_id)??0)+1),se.get(ge.user_id).push("W"),me.slice(1).forEach(X=>se.get(X.user_id).push("L"))):(ue.forEach(X=>{oe.set(X.user_id,(oe.get(X.user_id)??0)+1),J.set(X.user_id,(J.get(X.user_id)??0)+1),se.get(X.user_id).push("D")}),me.filter(X=>!ue.find(ae=>ae.user_id===X.user_id)).forEach(X=>se.get(X.user_id).push("L")))});const fe=t.map(Q=>({user_id:Q.id,name:Q.name,mltPts:oe.get(Q.id)??0,ocp:Ae.get(Q.id)??0,unicorns:W.get(Q.id)??0,wins:O.get(Q.id)??0,draws:J.get(Q.id)??0,form:se.get(Q.id)??[]}));fe.sort((Q,me)=>me.mltPts-Q.mltPts||me.unicorns-Q.unicorns||me.ocp-Q.ocp||Q.name.localeCompare(me.name)),C&&(Ut(fe),It(!1))})(),()=>{C=!1}},[t,a,U,zt]);function qs(){const C=V=>{const xe=V.slice(-5),ye=5-xe.length;return e.jsxs("div",{className:"flex items-center justify-between w-full",children:[Array.from({length:ye}).map((G,te)=>e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-200"},`dot-${te}`)),xe.map((G,te)=>e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${G==="W"?"bg-green-100 text-green-700":G==="D"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:G},te))]})},z=["Prem Predictions","FC Football","Easy League"],q=["The Bird league"],Y=["gregVjofVcarl","Let Down"],Z=a&&!z.includes(a.name)&&!q.includes(a.name)&&!Y.includes(a.name),ne=is.length?is:t.map(V=>({user_id:V.id,name:V.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}));return t.length===1?e.jsxs("div",{className:"text-center p-8 bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Invite at least one more user to make the ML start"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Share your league code with friends to get the competition going!"}),e.jsx("button",{onClick:()=>Le(!0),className:"px-4 py-2 bg-[#1C8376] text-white font-semibold rounded-lg hover:bg-emerald-700 transition-colors",children:"Share League Code"})]}):e.jsxs("div",{className:"pt-4",children:[e.jsx("style",{children:`
          .mlt-table tbody tr:last-child {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table tbody tr:last-child td {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table tbody tr:last-child th {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table {
            border-bottom: none !important;
          }
          .mlt-table tbody {
            border-bottom: none !important;
          }
          .mlt-table-container {
            border-bottom: none !important;
          }
          .mlt-table-container table {
            border-bottom: none !important;
          }
          .mlt-table-container tbody {
            border-bottom: none !important;
          }
          .mlt-table-container tbody tr:last-child {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table-container tbody tr:last-child td {
            border-bottom: none !important;
            border: none !important;
          }
        `}),e.jsx("div",{className:"mlt-table-container overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x bg-slate-50",style:{backgroundColor:"#f8fafc",borderBottom:"none",boxShadow:"none"},children:e.jsxs("table",{className:"mlt-table w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc",border:"none",borderBottom:"none"},children:[e.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:e.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[e.jsx("th",{className:"py-3 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),e.jsx("th",{className:"py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:"Player"}),o?e.jsx("th",{className:"px-4 py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8"},children:"Form"}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"W"}),e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"D"}),e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:Z?"CP":"OCP"}),t.length>=3&&e.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""}),e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"PTS"})]})]})}),e.jsxs("tbody",{children:[ne.map((V,xe)=>{const ye=V.user_id===w?.id,G=xe===ne.length-1;return e.jsxs("tr",{className:ye?"flash-user-row":"",style:{position:"relative",backgroundColor:"#f8fafc",...G?{}:{borderBottom:"1px solid #e2e8f0"}},children:[e.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:xe+1}),e.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:V.name}),o?e.jsx("td",{className:"px-4 py-4",style:{backgroundColor:"#f8fafc"},children:C(V.form)}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:V.wins}),e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:V.draws}),e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:V.ocp}),t.length>=3&&e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:V.unicorns}),e.jsx("td",{className:"py-4 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:V.mltPts})]})]},V.user_id)}),ws&&e.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:e.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:o?3:t.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"Calculating"})}),!ws&&!is.length&&e.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:e.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:o?3:t.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"No gameweeks completed yet  this will populate after the first results are saved."})})]})]})}),e.jsx("div",{className:"mt-6 flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"inline-flex rounded-full bg-slate-100 p-0.5 shadow-sm border border-slate-200",children:[e.jsx("button",{onClick:()=>x(!1),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${o?"text-slate-600 hover:text-slate-900 hover:bg-white/50":"bg-[#1C8376] text-white shadow-sm"}`,children:"Points"}),e.jsx("button",{onClick:()=>x(!0),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${o?"bg-[#1C8376] text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"Form"})]}),e.jsxs("button",{onClick:()=>{console.log("Button clicked, setting modal to true"),H(!0)},className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[e.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),e.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})}),a?.name==="API Test"&&e.jsx("div",{className:"mt-4",style:{marginLeft:"-1rem",marginRight:"-1rem",width:"calc(100% + 2rem)",paddingLeft:0,paddingRight:0},children:e.jsx("video",{src:"/assets/Animation/Unicorn_Small.mov",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"auto",display:"block",padding:0,margin:0}})})]})}function Ks(){const C=a?.name==="API Test"?rt??1:U;if(!C)return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No current game week available."});if(!ks(a,C,ot))return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Predictions Available"}),e.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),e.jsxs("div",{className:"text-sm",children:["GW",C," predictions are not included in this league."]})]})});const z=new Map;gs.forEach(W=>{if(W.gw!==C)return;const O=us(W);O&&z.set(W.fixture_index,O)});const q=I.useMemo(()=>{const W=se=>{if(!se)return"Fixtures";const fe=new Date(se);return isNaN(fe.getTime())?"Fixtures":fe.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})},O=new Map;Ue.filter(se=>se.gw===C).forEach(se=>{const fe=W(se.kickoff_time),Q=se.kickoff_time?new Date(se.kickoff_time).getTime():Number.MAX_SAFE_INTEGER;O.has(fe)||O.set(fe,{label:fe,key:Q,items:[]}),O.get(fe).items.push(se)});const J=Array.from(O.values());return J.forEach(se=>se.items.sort((fe,Q)=>fe.fixture_index-Q.fixture_index)),J.sort((se,fe)=>se.key-fe.key),J},[Ue,C]),Y=new Set(Ue.filter(W=>W.gw===C).map(W=>W.fixture_index)),Z=a?.name==="API Test",ne=t.length>0&&t.every(W=>Ke.get(`${W.id}:${C}`));if(Z&&C===(rt??1)){console.log("[League] API Test filtering:",{currentFixtureIndices:Array.from(Y),totalPicks:Mt.length,picksForGw:Mt.filter(O=>O.gw===C).length,submittedMapSize:Ke.size,allSubmitted:ne,members:t.map(O=>({id:O.id,name:O.name,submitted:Ke.get(`${O.id}:${C}`)})),fixturesCount:Ue.filter(O=>O.gw===C).length});const W=Mt.filter(O=>O.gw===C);console.log(`[League] All picks for GW${C}:`,W.map(O=>({user_id:O.user_id,userName:t.find(J=>J.id===O.user_id)?.name,fixture_index:O.fixture_index,pick:O.pick,hasSubmitted:!!Ke.get(`${O.user_id}:${C}`),inCurrentFixtures:Y.has(O.fixture_index)})))}const V=new Map;!Z||ne?Mt.forEach(W=>{if(W.gw!==C)return;if(Z&&!Ke.get(`${W.user_id}:${C}`)){C===1&&console.log("[League] API Test: Filtering out unsubmitted pick:",{user_id:W.user_id,fixture_index:W.fixture_index,userName:t.find(se=>se.id===W.user_id)?.name});return}if(!Y.has(W.fixture_index)){Z&&C===1&&console.log("[League] Filtering out old pick (not in current fixtures):",{fixture_index:W.fixture_index,currentIndices:Array.from(Y),userName:t.find(J=>J.id===W.user_id)?.name});return}const O=V.get(W.fixture_index)??[];O.push(W),V.set(W.fixture_index,O)}):console.log("[League] API Test: Not all submitted - skipping ALL picks processing. allSubmitted=",ne);const xe=P!==null&&P>=C,ye=t.filter(W=>!Ke.get(`${W.id}:${C}`)).length,G=t.filter(W=>!Ke.get(`${W.id}:${C}`)).map(W=>W.name),te=ot.get(C),ie=te?new Date>=te:!1;if(Z&&C===1){const W=t.map(se=>{const fe=`${se.id}:${C}`,Q=Ke.get(fe);return{id:se.id,name:se.name,submitted:!!Q,key:fe}});console.log(`[League] ===== API Test GW${C} SUBMISSION CHECK =====`),console.log("[League] All submitted:",ne),console.log("[League] Remaining:",ye),console.log("[League] Who didn't submit:",G),console.log("[League] Member submission status:",W),console.log("[League] Submitted map entries:",Array.from(Ke.entries())),console.log("[League] ================================================");const O=t.find(se=>se.name.toLowerCase().includes("steve")||se.name.toLowerCase().includes("s")),J=t.find(se=>se.name.toLowerCase().includes("jof")||se.name.toLowerCase().includes("j"));if(O){const se=`${O.id}:${C}`;console.log(`[League] STEVE (${O.name}):`,{id:O.id,submitted:!!Ke.get(se),key:se})}if(J){const se=`${J.id}:${C}`;console.log(`[League] JOF (${J.name}):`,{id:J.id,submitted:!!Ke.get(se),key:se})}}console.log(`GW${C} deadline check:`,{gwDeadline:te,now:new Date,deadlinePassed:ie,allSubmitted:ne,willShowPredictions:ne||ie});const oe=Z?!ne:!ne&&!ie;return(Z?!ne:!ne&&!ie)?(console.log(`[League] Not all submitted, showing ONLY "Who's submitted" view. Blocking all predictions/fixtures.`,{isApiTestLeague:Z,allSubmitted:ne,deadlinePassed:ie,remaining:ye}),e.jsxs("div",{className:"mt-2 pt-2",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700",children:e.jsxs(e.Fragment,{children:["Waiting for ",e.jsx("span",{className:"font-semibold",children:ye})," of ",t.length," to submit."]})}),e.jsxs("button",{onClick:()=>{const W=`Game Week ${C} Predictions Reminder!

DEADLINE: THIS ${(()=>{const J=new Date(Ue.find(Ee=>Ee.gw===C)?.kickoff_time||""),se=new Date(J.getTime()-4500*1e3),fe=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],Q=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],me=fe[se.getUTCDay()],ge=se.getUTCDate(),ue=Q[se.getUTCMonth()],X=se.getUTCHours().toString().padStart(2,"0"),ae=se.getUTCMinutes().toString().padStart(2,"0");return`${me} ${ge} ${ue}, ${X}:${ae} BST`})()}

Don't forget!
playtotl.com`,O=`https://wa.me/?text=${encodeURIComponent(W)}`;try{window.open(O,"_blank")}catch{navigator.clipboard.writeText(W).then(()=>{alert("Message copied to clipboard! You can now paste it in WhatsApp or Messages.")}).catch(()=>{alert(`Unable to open WhatsApp. Please copy this message manually:

`+W)})}},className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium hover:bg-emerald-700 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share Reminder"]})]}),(()=>{const W=Ue.map(le=>le.kickoff_time).filter(le=>!!le).map(le=>new Date(le)).filter(le=>!isNaN(le.getTime()));if(W.length===0)return null;const O=new Date(Math.min(...W.map(le=>le.getTime()))),J=new Date(O.getTime()-4500*1e3),se=new Date>=J,fe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],me=fe[J.getUTCDay()],ge=J.getUTCDate(),ue=Q[J.getUTCMonth()],X=J.getUTCHours().toString().padStart(2,"0"),ae=J.getUTCMinutes().toString().padStart(2,"0"),Ee=`${me} ${ge} ${ue}, ${X}:${ae} BST`;return e.jsxs("div",{className:`mb-3 text-xs font-medium ${se?"text-orange-600":"text-slate-600"} flex items-center gap-1.5`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),se?"Deadline Passed: ":"Deadline: ",Ee]})})(),e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 bg-white",children:e.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),e.jsx("tbody",{children:t.slice().sort((W,O)=>W.name.localeCompare(O.name)).map(W=>{const O=`${W.id}:${C}`,J=!!Ke.get(O);return e.jsxs("tr",{className:"border-t border-slate-200",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 truncate whitespace-nowrap",style:{overflow:"hidden",textOverflow:"ellipsis"},children:W.name}),e.jsx("td",{className:"px-4 py-3",children:J?e.jsxs("span",{className:"inline-flex items-center gap-1.5 justify-center rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-xs px-2.5 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Submitted"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2.5 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Not yet"]})})]},W.id)})})]})})]})):e.jsxs("div",{className:"mt-2 pt-2",children:[oe?e.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-700",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("div",{children:ne?e.jsxs(e.Fragment,{children:["All ",t.length," members have submitted."]}):e.jsxs(e.Fragment,{children:["Waiting for ",e.jsx("span",{className:"font-semibold",children:ye})," of ",t.length," to submit."]})}),!ne&&e.jsxs("button",{onClick:()=>{const W=`Game Week ${C} Predictions Reminder!

DEADLINE: THIS ${(()=>{const J=new Date(Ue.find(Ee=>Ee.gw===C)?.kickoff_time||""),se=new Date(J.getTime()-4500*1e3),fe=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],Q=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],me=fe[se.getUTCDay()],ge=se.getUTCDate(),ue=Q[se.getUTCMonth()],X=se.getUTCHours().toString().padStart(2,"0"),ae=se.getUTCMinutes().toString().padStart(2,"0");return`${me} ${ge} ${ue}, ${X}:${ae} BST`})()}

Don't forget!
playtotl.com`,O=`https://wa.me/?text=${encodeURIComponent(W)}`;try{window.open(O,"_blank")}catch{navigator.clipboard.writeText(W).then(()=>{alert("Message copied to clipboard! You can now paste it in WhatsApp or Messages.")}).catch(()=>{alert(`Unable to open WhatsApp. Please copy this message manually:

`+W)})}},className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share Reminder"]})]}),(()=>{const W=Ue.map(le=>le.kickoff_time).filter(le=>!!le).map(le=>new Date(le)).filter(le=>!isNaN(le.getTime()));if(W.length===0)return null;const O=new Date(Math.min(...W.map(le=>le.getTime()))),J=new Date(O.getTime()-4500*1e3),se=new Date>=J,fe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],me=fe[J.getUTCDay()],ge=J.getUTCDate(),ue=Q[J.getUTCMonth()],X=J.getUTCHours().toString().padStart(2,"0"),ae=J.getUTCMinutes().toString().padStart(2,"0"),Ee=`${me} ${ge} ${ue}, ${X}:${ae} BST`;return e.jsxs("div",{className:`mb-3 text-sm ${se?"text-orange-600 font-semibold":"text-slate-600"}`,children:[se?" Deadline Passed: ":" Deadline: ",Ee]})})(),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),e.jsx("tbody",{children:t.slice().sort((W,O)=>W.name.localeCompare(O.name)).map(W=>{const O=`${W.id}:${C}`,J=!!Ke.get(O);return W.name==="Jof"&&console.log(`Checking Jof submission: key=${O}, submitted=${J}, submittedMap has:`,Ke.has(O),"picksGw=",C),e.jsxs("tr",{className:"border-t border-slate-200",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 truncate whitespace-nowrap",style:{overflow:"hidden",textOverflow:"ellipsis"},children:W.name}),e.jsx("td",{className:"px-4 py-3",children:J?e.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-xs px-2 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:" Submitted"}):e.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:" Not yet"})})]},W.id)})})]})})]}):null,a?.name==="API Test"&&ne&&q.length>0&&!oe&&(()=>{const W=q.flatMap(ue=>ue.items),O=new Set(W.map(ue=>ue.fixture_index)),J={};Object.keys(lt).forEach(ue=>{const X=parseInt(ue,10);O.has(X)&&(J[X]=lt[X])});const se=J,fe=W.some(ue=>{const X=se[ue.fixture_index];return X&&(X.status==="IN_PLAY"||X.status==="PAUSED")}),Q=W.length>0&&W.every(ue=>{const X=se[ue.fixture_index];return X&&X.status==="FINISHED"}),me=fe||Q||W.some(ue=>se[ue.fixture_index]);let ge=0;return w?.id&&W.forEach(ue=>{const X=se[ue.fixture_index],ae=X&&(X.status==="IN_PLAY"||X.status==="PAUSED"),Ee=X&&X.status==="FINISHED";if(X&&(ae||Ee)){const ke=(V.get(ue.fixture_index)??[]).find(nt=>nt.user_id===w.id);if(ke){let nt=!1;(ke.pick==="H"&&X.homeScore>X.awayScore||ke.pick==="A"&&X.awayScore>X.homeScore||ke.pick==="D"&&X.homeScore===X.awayScore)&&(nt=!0),nt&&ge++}}}),e.jsx("div",{className:"mt-3 space-y-6",children:q.map((ue,X)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-slate-700 font-normal text-lg",children:ue.label}),X===0&&e.jsxs(e.Fragment,{children:[fe&&(()=>{const ae=W.length;return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-600 text-white text-sm font-bold border border-red-700 shadow-sm",style:{marginTop:"-2px"},children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"Live"}),e.jsxs("span",{className:"flex items-baseline gap-0.5",children:[e.jsx("span",{className:"text-base sm:text-lg font-extrabold",children:ge}),e.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"/"}),e.jsx("span",{className:"text-sm sm:text-base font-semibold opacity-80",children:ae})]})]})})(),Q&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),!me&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"})]})]}),e.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:e.jsxs("ul",{children:[ue.items.map((ae,Ee)=>{try{const le=ae.home_team||ae.home_name||"Home",ke=ae.away_team||ae.away_name||"Away",nt=(ae.home_code||ae.home_team||ae.home_name||"").toUpperCase(),At=(ae.away_code||ae.away_team||ae.away_name||"").toUpperCase(),Ft=(Be=>{if(!Be)return"";const $e=new Date(Be);if(isNaN($e.getTime()))return"";const He=String($e.getUTCHours()).padStart(2,"0"),Lt=String($e.getUTCMinutes()).padStart(2,"0");return`${He}:${Lt}`})(ae.kickoff_time),Rt=ae.fixture_index,Wt=V.get(Rt)??[],ve=se[Rt],Ie=ve&&ve.status==="IN_PLAY",Je=ve&&(ve.status==="PAUSED"||ve.status==="HALF_TIME"||ve.status==="HT"),bt=ve&&ve.status==="FINISHED",jt=Ie||Je,Tt=Be=>{const $e=Wt.filter(ct=>ct.pick===Be);let He=null;a?.name==="API Test"?ve&&(ve.homeScore>ve.awayScore?He="H":ve.awayScore>ve.homeScore?He="A":ve.homeScore===ve.awayScore&&(He="D")):He=z.get(Rt)||null;const Lt=Wt.length===t.length&&$e.length===t.length,Ot=4,Dt=[];for(let ct=0;ct<$e.length;ct+=Ot){const Nt=$e.slice(ct,ct+Ot);Dt.push(Nt)}return e.jsx("div",{className:"flex flex-col gap-1",children:Dt.map((ct,Nt)=>e.jsx("div",{className:"flex items-center justify-center",children:ct.map((Ct,vs)=>{const Vs=t.find(Ns=>Ns.id===Ct.user_id),ys=Ts(Vs?.name??"?"),js=Ke.has(`${Ct.user_id}:${C}`),Gt=He&&He===Be?!0:null;return Lt?e.jsx("span",{className:"inline-block",style:{marginLeft:vs>0?"-8px":"0",position:"relative",zIndex:vs},children:e.jsx(Yt,{letter:ys,correct:Gt,unicorn:Gt===!0,hasSubmitted:js,isLive:Ie,isOngoing:jt,isFinished:bt})},Ct.user_id):e.jsx(Yt,{letter:ys,correct:Gt,unicorn:Gt===!0,hasSubmitted:js,isLive:Ie,isOngoing:jt,isFinished:bt},Ct.user_id)})},Nt))})};return e.jsx("li",{className:Ee>0?"border-t":"",children:e.jsxs("div",{className:"p-4 bg-white relative",children:[(Ie||Je)&&e.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:"LIVE"})]}),bt&&!Ie&&!Je&&e.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:e.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"FT"})}),e.jsxs("div",{className:`grid grid-cols-3 items-center ${jt?"pt-4":""}`,children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:le})}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[nt&&e.jsx("img",{src:ae.home_crest||_t(ae.home_code||ae.home_team||ae.home_name||nt||""),alt:`${le} badge`,className:"h-6 w-6 object-contain",onError:Be=>{const $e=Be.currentTarget,He=_t(ae.home_code||ae.home_team||ae.home_name||nt||"");$e.src!==He?$e.src=He:$e.style.opacity="0.35"}}),e.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:ve&&(Ie||Je||bt)?e.jsxs("span",{className:"font-bold text-base text-slate-900",children:[ve.homeScore," - ",ve.awayScore]}):e.jsx("span",{children:Ft})}),At&&e.jsx("img",{src:ae.away_crest||_t(ae.away_code||ae.away_team||ae.away_name||At||""),alt:`${ke} badge`,className:"h-6 w-6 object-contain",onError:Be=>{const $e=Be.currentTarget,He=_t(ae.away_code||ae.away_team||ae.away_name||At||"");$e.src!==He?$e.src=He:$e.style.opacity="0.35"}})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:ke})})]}),ve&&(jt||bt)&&e.jsx("div",{className:"flex justify-center mt-1",children:e.jsx("span",{className:`text-[10px] font-semibold ${jt?"text-red-600":"text-slate-500"}`,children:jr(ve.status,ve.minute)})}),e.jsxs("div",{className:"mt-2 grid grid-cols-3",children:[e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Tt("H")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Tt("D")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Tt("A")})})]})]})},`${ae.gw}-${ae.fixture_index}`)}catch(le){return console.error("Error rendering fixture:",le,ae),e.jsxs("li",{className:"p-4 text-red-500",children:["Error loading fixture: ",ae.fixture_index]},`${ae.gw}-${ae.fixture_index}`)}}),!ue.items.length&&e.jsx("li",{className:"p-4 text-slate-500",children:"No fixtures."})]})})]},X))})})(),q.length>0&&a?.name!=="API Test"&&e.jsx("div",{className:"mt-3 space-y-6",children:q.map((W,O)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-slate-700 font-normal text-lg",children:W.label}),O===0&&ne&&xe&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),O===0&&ne&&!xe&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"}),O===0&&ie&&!ne&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-orange-100 text-orange-800 text-sm font-bold border border-orange-300 shadow-sm",style:{marginTop:"-2px"},children:["Deadline Passed ",G.length>0&&`(${G.join(", ")} didn't submit)`]})]}),e.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:e.jsxs("ul",{children:[W.items.map((J,se)=>{try{const fe=J.home_name||J.home_team||"Home",Q=J.away_name||J.away_team||"Away",me=J.home_code||"",ge=J.away_code||"",X=(ve=>{if(!ve)return"";const Ie=new Date(ve);if(isNaN(Ie.getTime()))return"";const Je=String(Ie.getUTCHours()).padStart(2,"0"),bt=String(Ie.getUTCMinutes()).padStart(2,"0");return`${Je}:${bt}`})(J.kickoff_time),ae=J.fixture_index,Ee=V.get(ae)??[],le=lt[ae],ke=le&&le.status==="IN_PLAY",nt=le&&(le.status==="PAUSED"||le.status==="HALF_TIME"||le.status==="HT"),At=le&&le.status==="FINISHED",os=ke||nt,Ft=ve=>{const Ie=Ee.filter(Be=>Be.pick===ve),Je=z.get(ae),bt=Ee.length===t.length&&Ie.length===t.length,jt=4,Tt=[];for(let Be=0;Be<Ie.length;Be+=jt){const $e=Ie.slice(Be,Be+jt);Tt.push($e)}return e.jsx("div",{className:"flex flex-col gap-1",children:Tt.map((Be,$e)=>e.jsx("div",{className:"flex items-center justify-center",children:Be.map((He,Lt)=>{const Ot=t.find(Ct=>Ct.id===He.user_id),Dt=Ts(Ot?.name??"?"),ct=Ke.has(`${He.user_id}:${C}`),Nt=Je&&Je===ve?!0:null;return bt?e.jsx("span",{className:"inline-block",style:{marginLeft:Lt>0?"-8px":"0",position:"relative",zIndex:Lt},children:e.jsx(Yt,{letter:Dt,correct:Nt,unicorn:Nt===!0,hasSubmitted:ct,isLive:ke,isOngoing:os,isFinished:At})},He.user_id):e.jsx(Yt,{letter:Dt,correct:Nt,unicorn:Nt===!0,hasSubmitted:ct,isLive:ke,isOngoing:os,isFinished:At},He.user_id)})},$e))})},Rt=J.home_crest||_t(J.home_code||J.home_team||J.home_name||me||""),Wt=J.away_crest||_t(J.away_code||J.away_team||J.away_name||ge||"");return e.jsx("li",{className:se>0?"border-t":"",children:e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:fe})}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("img",{src:Rt,alt:`${fe} badge`,className:"h-6 w-6",onError:ve=>{const Ie=ve.currentTarget,Je=_t(J.home_code||J.home_team||J.home_name||me||"");Ie.src!==Je?Ie.src=Je:Ie.style.opacity="0.35"}}),e.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:X}),e.jsx("img",{src:Wt,alt:`${Q} badge`,className:"h-6 w-6",onError:ve=>{const Ie=ve.currentTarget,Je=_t(J.away_code||J.away_team||J.away_name||ge||"");Ie.src!==Je?Ie.src=Je:Ie.style.opacity="0.35"}})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:Q})})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-3",children:[e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Ft("H")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Ft("D")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Ft("A")})})]})]})},`${J.gw}-${J.fixture_index}`)}catch(fe){return console.error("Error rendering fixture:",fe,J),e.jsxs("li",{className:"p-4 text-red-500",children:["Error loading fixture: ",J.fixture_index]},`${J.gw}-${J.fixture_index}`)}}),!W.items.length&&e.jsx("li",{className:"p-4 text-slate-500",children:"No fixtures."})]})})]},O))}),!q.length&&!oe&&e.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-500",children:["No fixtures for GW ",C,"."]})]})}function Ys(){const C=a?.name==="API Test"?rt??1:L;if(!C||d.length===0&&a?.name!=="API Test")return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No game week selected."});if(!ks(a,C,ot))return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Results Available"}),e.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),e.jsxs("div",{className:"text-sm",children:["GW",C," results are not included in this league."]})]})});const z=new Map,q=a?.name==="API Test";q&&C===(rt??1)?Ue.forEach(te=>{const ie=lt[te.fixture_index];ie&&(ie.status==="IN_PLAY"||ie.status==="PAUSED"||ie.status==="FINISHED")&&(ie.homeScore>ie.awayScore?z.set(te.fixture_index,"H"):ie.awayScore>ie.homeScore?z.set(te.fixture_index,"A"):z.set(te.fixture_index,"D"))}):gs.forEach(G=>{if(G.gw!==C)return;const te=us(G);te&&z.set(G.fixture_index,te)});const Y=t.map(G=>({user_id:G.id,name:G.name,score:0,unicorns:0})),Z=new Map;Mt.forEach(G=>{if(G.gw!==C)return;const te=Z.get(G.fixture_index)??[];te.push(G),Z.set(G.fixture_index,te)}),Array.from(z.entries()).forEach(([G,te])=>{const oe=(Z.get(G)??[]).filter(Ae=>Ae.pick===te).map(Ae=>Ae.user_id);if(oe.forEach(Ae=>{const W=Y.find(O=>O.user_id===Ae);W.score+=1}),oe.length===1&&t.length>=3){const Ae=Y.find(W=>W.user_id===oe[0]);Ae.unicorns+=1}}),Y.sort((G,te)=>te.score-G.score||te.unicorns-G.unicorns||G.name.localeCompare(te.name)),I.useEffect(()=>{if(Y.length===0)return;const G=new Map;Y.forEach((ie,oe)=>{G.set(ie.user_id,oe)});const te=new Set;if(G.forEach((ie,oe)=>{const Ae=g.current.get(oe);Ae!==void 0&&Ae!==ie&&te.add(oe)}),g.current=G,te.size>0){b(te);const ie=setTimeout(()=>{b(new Set)},2e3);return()=>clearTimeout(ie)}},[Y.map(G=>`${G.user_id}-${G.score}-${G.unicorns}`).join(",")]);let ne=!1,V=!1,xe=!1,ye=!1;if(q&&C===(rt??1)){const G=Ue;if(G.length>0&&(ne=G.every(ie=>{const oe=lt[ie.fixture_index];return oe&&oe.status==="FINISHED"}),V=!!G.find(ie=>{const oe=lt[ie.fixture_index];return oe&&(oe.status==="IN_PLAY"||oe.status==="PAUSED")}),ye=G.some(ie=>{const oe=lt[ie.fixture_index];return oe&&(oe.status==="IN_PLAY"||oe.status==="PAUSED"||oe.status==="FINISHED")}),!ne)){const ie=new Date;xe=G.some(oe=>{if(!oe.kickoff_time)return!1;const W=new Date(oe.kickoff_time).getTime()-ie.getTime(),O=lt[oe.fixture_index];return(!O||O.status!=="IN_PLAY"&&O.status!=="PAUSED"&&O.status!=="FINISHED")&&W>0&&W<=1440*60*1e3})}}else{const G=Ue.filter(te=>te.gw===C);G.length>0&&(ne=G.every(te=>z.has(te.fixture_index)))}return e.jsxs("div",{children:[e.jsx("style",{children:`
          @keyframes flash {
            0%, 100% {
              background-color: rgb(209, 250, 229);
            }
            25% {
              background-color: rgb(167, 243, 208);
            }
            50% {
              background-color: rgb(209, 250, 229);
            }
            75% {
              background-color: rgb(167, 243, 208);
            }
          }
          @keyframes pulse-score {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.7;
            }
          }
          @keyframes position-change {
            0% {
              background-color: rgb(254, 243, 199);
            }
            50% {
              background-color: rgb(253, 230, 138);
            }
            100% {
              background-color: transparent;
            }
          }
          .flash-user-row {
            animation: flash 1.5s ease-in-out 3;
          }
          .pulse-live-score {
            animation: pulse-score 2s ease-in-out infinite;
          }
          .position-changed {
            animation: position-change 1.5s ease-out;
          }
          .full-width-header-border::after {
            content: '';
            position: absolute;
            left: -1rem;
            right: -1rem;
            bottom: 0;
            height: 1px;
            background-color: #cbd5e1;
            z-index: 1;
          }
        `}),Y.length>0&&ne&&e.jsx("div",{className:"mt-4 mb-4 py-6 px-6 rounded-xl bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 shadow-2xl shadow-slate-600/50 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/30 after:to-transparent after:animate-[shimmer_2.5s_ease-in-out_infinite_0.6s]",children:e.jsx("div",{className:"text-center relative z-10",children:Y[0].score===Y[1]?.score&&Y[0].unicorns===Y[1]?.unicorns?e.jsx("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:" It's a Draw!"}):e.jsxs("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:[Y[0].name," Wins!"]})})}),e.jsx("div",{className:"overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x border-b border-slate-200 bg-slate-50 shadow-sm",style:{backgroundColor:"#f8fafc"},children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc"},children:[e.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:e.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[e.jsx("th",{className:"py-4 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),e.jsx("th",{className:"py-4 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:e.jsxs("div",{className:"flex items-center gap-2",children:["Player",q&&V&&e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-600 text-white shadow-md shadow-red-500/30",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] font-medium",children:"LIVE"})]}),q&&!ne&&xe&&!V&&e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500 text-white shadow-md shadow-amber-500/30",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-[10px] font-medium",children:ye?"Next Game Starting Soon":"Starting soon"})]})]})}),e.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8"},children:"Score"}),t.length>=3&&e.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""})]})}),e.jsxs("tbody",{children:[Y.map((G,te)=>{const ie=G.user_id===w?.id,oe=te===Y.length-1,Ae=j.has(G.user_id);return e.jsxs("tr",{className:`${ie?"flash-user-row":""} ${Ae?"position-changed":""}`,style:{position:"relative",backgroundColor:"#f8fafc",...oe?{}:{borderBottom:"1px solid #e2e8f0"}},children:[e.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:te+1}),e.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[q&&V&&e.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse flex-shrink-0",style:{minWidth:"8px",minHeight:"8px"}}),q&&!V&&xe&&e.jsx("svg",{className:"w-3 h-3 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:G.name})]})}),e.jsx("td",{className:`py-4 text-center tabular-nums font-bold ${q&&V?"pulse-live-score":""}`,style:{width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:G.score}),t.length>=3&&e.jsx("td",{className:`py-4 text-center tabular-nums ${q&&V?"pulse-live-score":""}`,style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:G.unicorns})]},G.user_id)}),!Y.length&&e.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:e.jsxs("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:t.length>=3?4:3,style:{backgroundColor:"#f8fafc"},children:["No results recorded for GW ",C," yet."]})})]})]})}),d.length>1&&e.jsx("div",{className:"mt-6 mb-4 flex flex-col items-center gap-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full max-w-sm",children:[e.jsx("div",{className:"flex-1",children:e.jsx("select",{value:C,onChange:G=>l(parseInt(G.target.value,10)),className:"gw-selector w-full bg-white rounded-full border-2 border-slate-300 px-3 py-2 text-xs font-normal text-slate-600 text-center focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-[#1C8376] active:bg-slate-50 transition-colors",style:{fontSize:"12px",minHeight:"40px",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2.5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1em 1em",paddingRight:"2.5rem"},children:d.map(G=>e.jsxs("option",{value:G,style:{fontSize:"12px",padding:"0.5rem",fontWeight:"normal",color:"#64748b",textTransform:"uppercase"},children:["GAME WEEK ",G]},G))})}),e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[e.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),e.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})}),re&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>K(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:G=>G.stopPropagation(),children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Weekly Winner"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1C8376]/10 border border-[#1C8376]/20 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-[#1C8376]/90 mb-3",children:" How to Win the Week:"}),e.jsxs("p",{className:"text-[#1C8376]/80",children:["The player with the ",e.jsx("strong",{children:"most correct predictions"})," wins that gameweek."]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:" Unicorn Rule"}),e.jsxs("p",{className:"text-purple-700",children:["In Mini-Leagues with ",e.jsx("strong",{children:"3 or more players"}),", if you're the ",e.jsx("strong",{children:"only person"})," to correctly predict a fixture, that's a ",e.jsx("strong",{children:" Unicorn"}),". In ties, the player with most ",e.jsx("strong",{children:" Unicorns"})," wins!"]})]})]})]})]})})]})}return I.useEffect(()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"auto"})},[v]),u?e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-10",children:e.jsx("div",{className:"text-slate-500",children:"Loading"})}):!a&&!u?e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-10",children:e.jsxs("div",{className:"rounded border bg-white p-6",children:[e.jsx("div",{className:"font-semibold mb-2",children:"League not found"}),e.jsx(_s,{to:"/leagues",className:"text-slate-600 underline",children:"Back to Mini Leagues"})]})}):a?e.jsxs("div",{className:`${R?"oldschool-theme":"bg-slate-50"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",maxHeight:"100vh",overflow:"hidden"},children:[e.jsx("style",{children:`
        .league-header-fixed {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          z-index: 50 !important;
          transform: translate3d(0, 0, 0) !important;
          -webkit-transform: translate3d(0, 0, 0) !important;
          will-change: transform !important;
          contain: layout style paint !important;
        }
        .league-header-fixed .relative {
          position: relative !important;
          z-index: 100 !important;
        }
        @supports (height: 100dvh) {
          .league-header-fixed {
            top: env(safe-area-inset-top, 0px) !important;
          }
        }
        .league-content-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
          left: 0;
          right: 0;
          bottom: 0;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
          padding-bottom: 2rem;
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .league-content-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
        }
        @media (max-width: 768px) {
          .league-content-wrapper {
            top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
            padding-bottom: 2rem;
            padding-left: 1rem;
            padding-right: 1rem;
          }
          .league-content-wrapper.has-banner {
            top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
          }
        }
        /* Chat tab - full height layout */
        .chat-tab-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px));
          left: 0;
          right: 0;
          bottom: 0;
          height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          z-index: 10;
          overflow: visible;
          pointer-events: none;
        }
        .chat-tab-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px));
          height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
        }
        .chat-tab-wrapper > * {
          pointer-events: auto;
        }
        @supports (height: 100dvh) {
          .chat-tab-wrapper {
            height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          }
          .chat-tab-wrapper.has-banner {
            height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          }
        }
      `}),e.jsx("div",{ref:r,className:"league-header-fixed bg-white border-b border-slate-200 shadow-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between h-14",children:[e.jsx(_s,{to:"/leagues",className:"flex items-center text-slate-600 hover:text-slate-900 transition-colors -ml-2 px-2 py-1",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-lg font-normal text-slate-900 truncate flex-1 text-left px-2",children:a.name}),e.jsx("div",{className:"relative",style:{zIndex:100},children:e.jsx("button",{onClick:()=>pe(!_e),className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-slate-100 transition-colors -mr-2","aria-label":"Menu",children:e.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]}),e.jsxs("div",{className:"flex border-b border-slate-200 bg-white",children:[e.jsxs("button",{onClick:()=>{i.current=!0,n("chat-beta")},className:"flex-1 px-3 sm:px-6 py-3 text-sm font-semibold transition-colors relative "+(v==="chat-beta"?"text-[#1C8376]":"text-slate-400"),children:["Chat (beta)",v==="chat-beta"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(d.length>0||a?.name==="API Test")&&e.jsxs("button",{onClick:()=>{i.current=!0,n("gwr")},className:"flex-1 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight flex items-center justify-center gap-1.5 "+(v==="gwr"?"text-[#1C8376]":"text-slate-400"),children:[(()=>{const C=a?.name==="API Test"?rt??1:L||U,z=a?.name==="API Test"?`T${C}`:C,q=new Date,Y=Ue[0],Z=Y?.kickoff_time?new Date(Y.kickoff_time):null,ne=Z&&Z<=q,xe=Ue[Ue.length-1]?.fixture_index,G=(xe!==void 0?lt[xe]:null)?.status==="FINISHED",te=ne&&!G,ie=te?"Live Table":"Results";return e.jsxs(e.Fragment,{children:[te&&e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:z?`GW ${z} ${ie}`:`GW ${ie}`}),e.jsx("span",{className:"sm:hidden whitespace-pre-line text-center",children:z?`GW${z}
${ie}`:`GW
${ie}`})]})})(),v==="gwr"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(U||a?.name==="API Test")&&e.jsxs("button",{onClick:()=>{i.current=!0,n("gw")},className:"flex-1 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight "+(v==="gw"?"text-[#1C8376]":"text-slate-400"),children:[e.jsx("span",{className:"hidden sm:inline",children:a?.name==="API Test"?`GW T${rt??1} Predictions`:U?`GW ${U} Predictions`:"GW Predictions"}),e.jsx("span",{className:"sm:hidden whitespace-pre-line",children:a?.name==="API Test"?`GWT${rt??1}
Predictions`:U?`GW${U}
Predictions`:`GW
Predictions`}),v==="gw"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),e.jsxs("button",{onClick:()=>{i.current=!0,n("mlt")},className:"flex-1 px-3 sm:px-6 py-3 text-sm font-semibold transition-colors relative "+(v==="mlt"?"text-[#1C8376]":"text-slate-400"),children:["Table",v==="mlt"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]})]})]})}),_e&&typeof document<"u"&&document.body&&tr.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0",onClick:()=>pe(!1),style:{backgroundColor:"transparent",zIndex:99998}}),e.jsxs("div",{className:"fixed w-56 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",style:{zIndex:99999,top:"calc(3.5rem + 0.5rem + env(safe-area-inset-top, 0px))",right:"1rem"},children:[it&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Admin:"}),e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:Pt})]}),e.jsx("button",{onClick:()=>{D(!0),pe(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Manage"}),e.jsx("button",{onClick:()=>{B(!0),pe(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Upload avatar"})]}),e.jsx("button",{onClick:()=>{Le(!0),pe(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Invite players"}),e.jsx("button",{onClick:()=>{$t(),pe(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:"Share league code"}),e.jsx("button",{onClick:()=>{T(!0),pe(!1)},className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Leave"})]})]}),document.body),v==="chat"?e.jsx("div",{className:"chat-tab-wrapper",children:e.jsx(_r,{chat:tt,userId:w?.id,nameById:vt,isMember:ts,newMsg:st,setNewMsg:Ze,onSend:Gs,leagueCode:a?.code,memberCount:t.length,maxMembers:Kt,notificationStatus:gt})}):v==="chat-beta"?e.jsx("div",{className:"chat-tab-wrapper",children:e.jsx(yr,{miniLeagueId:a?.id??null,memberNames:vt})}):e.jsx("div",{className:"league-content-wrapper",children:e.jsxs("div",{className:"px-1 sm:px-2",children:[v==="mlt"&&e.jsx(qs,{}),v==="gw"&&e.jsx(Ks,{}),v==="gwr"&&e.jsx(Ys,{})]})}),it&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>D(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:C=>C.stopPropagation(),children:[e.jsx("button",{onClick:()=>D(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"League Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-slate-600 mb-3 font-semibold",children:"Remove Members:"}),e.jsxs("div",{className:"space-y-2",children:[t.filter(C=>C.id!==w?.id).map(C=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-slate-800",children:C.name}),e.jsx("button",{onClick:()=>{je(C),De(!0),D(!1)},className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded-md transition-colors font-medium",children:"Remove"})]},C.id)),t.filter(C=>C.id!==w?.id).length===0&&e.jsx("div",{className:"text-sm text-slate-500 italic py-4 text-center",children:"No other members to remove"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsx("button",{onClick:()=>{ze(!0),D(!1)},className:"w-full px-4 py-3 text-sm bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:" End League"})})]})]})]})}),it&&ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>B(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:C=>C.stopPropagation(),children:[e.jsx("button",{onClick:()=>{B(!1),he(null),we(!1)},className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Upload League Avatar"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-2 font-medium",children:"Current Avatar:"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-100 flex items-center justify-center",children:e.jsx("img",{src:a?Xs(a):"/assets/league-avatars/ML-avatar-1.png",alt:"League avatar",className:"w-full h-full object-cover",onError:C=>{const z=C.target;z.src="/assets/league-avatars/ML-avatar-1.png"}})}),a?.avatar&&e.jsx("button",{onClick:xt,disabled:F,className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded-md transition-colors font-medium disabled:opacity-50",children:"Remove Avatar"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload New Avatar"}),e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:C=>{const z=C.target.files?.[0];z&&Ht(z)},disabled:F,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[#1C8376] file:text-white hover:file:bg-emerald-700 file:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Images will be automatically compressed to ~60KB and resized to 256x256px. Max file size: 2MB before compression."})]}),F&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#1C8376]"}),e.jsx("span",{children:"Processing and uploading..."})]}),be&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-800",children:" Avatar uploaded successfully!"}),Ne&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-800",children:Ne})]})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>H(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:C=>C.stopPropagation(),children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"League Points"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1C8376]/10 border border-[#1C8376]/20 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-[#1C8376]/90 mb-3",children:"League Points:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),e.jsxs("span",{className:"text-[#1C8376]/80",children:[e.jsx("strong",{children:"Win the week"}),"  3 points"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),e.jsxs("span",{className:"text-[#1C8376]/80",children:[e.jsx("strong",{children:"Draw"}),"  1 point"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),e.jsxs("span",{className:"text-[#1C8376]/80",children:[e.jsx("strong",{children:"Lose"}),"  0 points"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" Ties"}),e.jsxs("p",{className:"text-blue-700",children:["If two or more players are tied on Points, the player with the most overall ",e.jsx("strong",{children:" Unicorns"})," in the mini league is ranked higher."]})]})]}),a&&(["The Bird league"].includes(a.name)||["gregVjofVcarl","Let Down"].includes(a.name))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-700 text-sm",children:[e.jsx("strong",{children:"Note:"}),' This mini league started after GW1, so the "CP" column shows correct predictions since this mini league began.']})})]})]})}),Te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Invite players"}),e.jsxs("p",{className:"text-slate-600 text-sm",children:["Share this code (up to ",Kt," members):"]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("code",{className:"font-mono text-lg font-bold",children:a.code}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(a.code)},className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Copy"}),e.jsx("button",{onClick:$t,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Share"})]}),e.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:[t.length,"/",Kt," members"]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>Le(!1),className:"px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50",children:"Close"})})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Leave League"}),e.jsxs("p",{className:"text-slate-600 mb-6",children:['Are you sure you want to leave "',a?.name,`"? You'll need the league code to rejoin later.`]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:_,children:"Cancel"}),e.jsx("button",{onClick:ut,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:_,children:_?"Leaving...":"Leave League"})]})]})}),ht&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Join Mini League"}),e.jsxs("p",{className:"text-slate-600 mb-6",children:["You are about to join ",e.jsxs("strong",{children:['"',a?.name,'"']}),". Are you sure?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Qe(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:Ce,children:"Cancel"}),e.jsx("button",{onClick:ft,className:"flex-1 px-4 py-2 bg-[#1C8376] text-white rounded-md hover:bg-emerald-700 transition-colors disabled:opacity-50",disabled:Ce,children:Ce?"Joining...":"Join League"})]})]})}),Re&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Remove Member"}),e.jsxs("p",{className:"text-slate-600 mb-6",children:["Are you sure you want to remove ",e.jsxs("strong",{children:['"',Se?.name,'"']})," from the league? They will need the league code to rejoin."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>De(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:We,children:"Cancel"}),e.jsx("button",{onClick:yt,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:We,children:We?"Removing...":"Remove Member"})]})]})}),Me&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:" End League"}),e.jsxs("p",{className:"text-slate-600 mb-4",children:["Are you absolutely sure you want to ",e.jsx("strong",{children:"permanently end"})," the league ",e.jsxs("strong",{children:['"',a?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This will remove all members and delete the league forever. This action cannot be undone!"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ze(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:wt,children:"Cancel"}),e.jsx("button",{onClick:kt,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:wt,children:wt?"Ending...":"Yes, End League"})]})]})}),a?.name==="API Test"&&e.jsx("div",{className:"mt-6 mb-4 px-4 py-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:" Test League:"})," This league uses test API data and starts from Test GW 1 with zero points. It does not affect your main game scores."]})})]}):null}export{Tr as default};
