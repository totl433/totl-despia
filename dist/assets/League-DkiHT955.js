import{a as Bs,b as Gs,u as qs,r as G,s as me,j as e,L as xs}from"./index-CTKCpAmM.js";import{r as Ks,a as Ys,s as ps}from"./leagueStart-BeI_tn-G.js";import{u as Qs}from"./useLiveScores-CezJ10XJ.js";import{g as wt}from"./teamNames-lueGeFt9.js";var Js=Bs();function Vs(L,k){return k.forEach((function($){$&&typeof $!="string"&&!Array.isArray($)&&Object.keys($).forEach((function(i){if(i!=="default"&&!(i in L)){var s=Object.getOwnPropertyDescriptor($,i);Object.defineProperty(L,i,s.get?s:{enumerable:!0,get:function(){return $[i]}})}}))})),Object.freeze(L)}function vs(L,k){return new Promise((function($,i){let s;return Zs(L).then((function(t){try{return s=t,$(new Blob([k.slice(0,2),s,k.slice(2)],{type:"image/jpeg"}))}catch(m){return i(m)}}),i)}))}const Zs=L=>new Promise(((k,$)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:s}})=>{const t=new DataView(s);let m=0;if(t.getUint16(m)!==65496)return $("not a valid JPEG");for(m+=2;;){const c=t.getUint16(m);if(c===65498)break;const p=t.getUint16(m+2);if(c===65505&&t.getUint32(m+4)===1165519206){const x=m+10;let n;switch(t.getUint16(x)){case 18761:n=!0;break;case 19789:n=!1;break;default:return $("TIFF header contains invalid endian")}if(t.getUint16(x+2,n)!==42)return $("TIFF header contains invalid version");const a=t.getUint32(x+4,n),r=x+a+2+12*t.getUint16(x+a,n);for(let o=x+a+2;o<r;o+=12)if(t.getUint16(o,n)==274){if(t.getUint16(o+2,n)!==3)return $("Orientation data type is invalid");if(t.getUint32(o+4,n)!==1)return $("Orientation data count is invalid");t.setUint16(o+8,1,n);break}return k(s.slice(m,m+2+p))}m+=2+p}return k(new Blob)})),i.readAsArrayBuffer(L)}));var Gt={},Xs={get exports(){return Gt},set exports(L){Gt=L}};(function(L){var k,$,i={};Xs.exports=i,i.parse=function(s,t){for(var m=i.bin.readUshort,c=i.bin.readUint,p=0,x={},n=new Uint8Array(s),a=n.length-4;c(n,a)!=101010256;)a--;p=a,p+=4;var r=m(n,p+=4);m(n,p+=2);var o=c(n,p+=2),h=c(n,p+=4);p+=4,p=h;for(var _=0;_<r;_++){c(n,p),p+=4,p+=4,p+=4,c(n,p+=4),o=c(n,p+=4);var E=c(n,p+=4),v=m(n,p+=4),P=m(n,p+2),F=m(n,p+4);p+=6;var S=c(n,p+=8);p+=4,p+=v+P+F,i._readLocal(n,S,x,o,E,t)}return x},i._readLocal=function(s,t,m,c,p,x){var n=i.bin.readUshort,a=i.bin.readUint;a(s,t),n(s,t+=4),n(s,t+=2);var r=n(s,t+=2);a(s,t+=2),a(s,t+=4),t+=4;var o=n(s,t+=8),h=n(s,t+=2);t+=2;var _=i.bin.readUTF8(s,t,o);if(t+=o,t+=h,x)m[_]={size:p,csize:c};else{var E=new Uint8Array(s.buffer,t);if(r==0)m[_]=new Uint8Array(E.buffer.slice(t,t+c));else{if(r!=8)throw"unknown compression method: "+r;var v=new Uint8Array(p);i.inflateRaw(E,v),m[_]=v}}},i.inflateRaw=function(s,t){return i.F.inflate(s,t)},i.inflate=function(s,t){return s[0],s[1],i.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),t)},i.deflate=function(s,t){t==null&&(t={level:6});var m=0,c=new Uint8Array(50+Math.floor(1.1*s.length));c[m]=120,c[m+1]=156,m+=2,m=i.F.deflateRaw(s,c,m,t.level);var p=i.adler(s,0,s.length);return c[m+0]=p>>>24&255,c[m+1]=p>>>16&255,c[m+2]=p>>>8&255,c[m+3]=p>>>0&255,new Uint8Array(c.buffer,0,m+4)},i.deflateRaw=function(s,t){t==null&&(t={level:6});var m=new Uint8Array(50+Math.floor(1.1*s.length)),c=i.F.deflateRaw(s,m,c,t.level);return new Uint8Array(m.buffer,0,c)},i.encode=function(s,t){t==null&&(t=!1);var m=0,c=i.bin.writeUint,p=i.bin.writeUshort,x={};for(var n in s){var a=!i._noNeed(n)&&!t,r=s[n],o=i.crc.crc(r,0,r.length);x[n]={cpr:a,usize:r.length,crc:o,file:a?i.deflateRaw(r):r}}for(var n in x)m+=x[n].file.length+30+46+2*i.bin.sizeUTF8(n);m+=22;var h=new Uint8Array(m),_=0,E=[];for(var n in x){var v=x[n];E.push(_),_=i._writeHeader(h,_,n,v,0)}var P=0,F=_;for(var n in x)v=x[n],E.push(_),_=i._writeHeader(h,_,n,v,1,E[P++]);var S=_-F;return c(h,_,101010256),_+=4,p(h,_+=4,P),p(h,_+=2,P),c(h,_+=2,S),c(h,_+=4,F),_+=4,_+=2,h.buffer},i._noNeed=function(s){var t=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},i._writeHeader=function(s,t,m,c,p,x){var n=i.bin.writeUint,a=i.bin.writeUshort,r=c.file;return n(s,t,p==0?67324752:33639248),t+=4,p==1&&(t+=2),a(s,t,20),a(s,t+=2,0),a(s,t+=2,c.cpr?8:0),n(s,t+=2,0),n(s,t+=4,c.crc),n(s,t+=4,r.length),n(s,t+=4,c.usize),a(s,t+=4,i.bin.sizeUTF8(m)),a(s,t+=2,0),t+=2,p==1&&(t+=2,t+=2,n(s,t+=6,x),t+=4),t+=i.bin.writeUTF8(s,t,m),p==0&&(s.set(r,t),t+=r.length),t},i.crc={table:(function(){for(var s=new Uint32Array(256),t=0;t<256;t++){for(var m=t,c=0;c<8;c++)1&m?m=3988292384^m>>>1:m>>>=1;s[t]=m}return s})(),update:function(s,t,m,c){for(var p=0;p<c;p++)s=i.crc.table[255&(s^t[m+p])]^s>>>8;return s},crc:function(s,t,m){return 4294967295^i.crc.update(4294967295,s,t,m)}},i.adler=function(s,t,m){for(var c=1,p=0,x=t,n=t+m;x<n;){for(var a=Math.min(x+5552,n);x<a;)p+=c+=s[x++];c%=65521,p%=65521}return p<<16|c},i.bin={readUshort:function(s,t){return s[t]|s[t+1]<<8},writeUshort:function(s,t,m){s[t]=255&m,s[t+1]=m>>8&255},readUint:function(s,t){return 16777216*s[t+3]+(s[t+2]<<16|s[t+1]<<8|s[t])},writeUint:function(s,t,m){s[t]=255&m,s[t+1]=m>>8&255,s[t+2]=m>>16&255,s[t+3]=m>>24&255},readASCII:function(s,t,m){for(var c="",p=0;p<m;p++)c+=String.fromCharCode(s[t+p]);return c},writeASCII:function(s,t,m){for(var c=0;c<m.length;c++)s[t+c]=m.charCodeAt(c)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,t,m){for(var c,p="",x=0;x<m;x++)p+="%"+i.bin.pad(s[t+x].toString(16));try{c=decodeURIComponent(p)}catch{return i.bin.readASCII(s,t,m)}return c},writeUTF8:function(s,t,m){for(var c=m.length,p=0,x=0;x<c;x++){var n=m.charCodeAt(x);if((4294967168&n)==0)s[t+p]=n,p++;else if((4294965248&n)==0)s[t+p]=192|n>>6,s[t+p+1]=128|n>>0&63,p+=2;else if((4294901760&n)==0)s[t+p]=224|n>>12,s[t+p+1]=128|n>>6&63,s[t+p+2]=128|n>>0&63,p+=3;else{if((4292870144&n)!=0)throw"e";s[t+p]=240|n>>18,s[t+p+1]=128|n>>12&63,s[t+p+2]=128|n>>6&63,s[t+p+3]=128|n>>0&63,p+=4}}return p},sizeUTF8:function(s){for(var t=s.length,m=0,c=0;c<t;c++){var p=s.charCodeAt(c);if((4294967168&p)==0)m++;else if((4294965248&p)==0)m+=2;else if((4294901760&p)==0)m+=3;else{if((4292870144&p)!=0)throw"e";m+=4}}return m}},i.F={},i.F.deflateRaw=function(s,t,m,c){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],x=i.F.U,n=i.F._goodIndex;i.F._hash;var a=i.F._putsE,r=0,o=m<<3,h=0,_=s.length;if(c==0){for(;r<_;)a(t,o,r+(N=Math.min(65535,_-r))==_?1:0),o=i.F._copyExact(s,r,N,t,o+8),r+=N;return o>>>3}var E=x.lits,v=x.strt,P=x.prev,F=0,S=0,U=0,g=0,I=0,d=0;for(_>2&&(v[d=i.F._hash(s,0)]=0),r=0;r<_;r++){if(I=d,r+1<_-2){d=i.F._hash(s,r+1);var u=r+1&32767;P[u]=v[d],v[d]=u}if(h<=r){(F>14e3||S>26697)&&_-r>100&&(h<r&&(E[F]=r-h,F+=2,h=r),o=i.F._writeBlock(r==_-1||h==_?1:0,E,F,g,s,U,r-U,t,o),F=S=g=0,U=r);var w=0;r<_-2&&(w=i.F._bestMatch(s,r,P,I,Math.min(p[2],_-r),p[3]));var N=w>>>16,j=65535&w;if(w!=0){j=65535&w;var A=n(N=w>>>16,x.of0);x.lhst[257+A]++;var b=n(j,x.df0);x.dhst[b]++,g+=x.exb[A]+x.dxb[b],E[F]=N<<23|r-h,E[F+1]=j<<16|A<<8|b,F+=2,h=r+N}else x.lhst[s[r]]++;S++}}for(U==r&&s.length!=0||(h<r&&(E[F]=r-h,F+=2,h=r),o=i.F._writeBlock(1,E,F,g,s,U,r-U,t,o),F=0,S=0,F=S=g=0,U=r);(7&o)!=0;)o++;return o>>>3},i.F._bestMatch=function(s,t,m,c,p,x){var n=32767&t,a=m[n],r=n-a+32768&32767;if(a==n||c!=i.F._hash(s,t-r))return 0;for(var o=0,h=0,_=Math.min(32767,t);r<=_&&--x!=0&&a!=n;){if(o==0||s[t+o]==s[t+o-r]){var E=i.F._howLong(s,t,r);if(E>o){if(h=r,(o=E)>=p)break;r+2<E&&(E=r+2);for(var v=0,P=0;P<E-2;P++){var F=t-r+P+32768&32767,S=F-m[F]+32768&32767;S>v&&(v=S,a=F)}}}r+=(n=a)-(a=m[n])+32768&32767}return o<<16|h},i.F._howLong=function(s,t,m){if(s[t]!=s[t-m]||s[t+1]!=s[t+1-m]||s[t+2]!=s[t+2-m])return 0;var c=t,p=Math.min(s.length,t+258);for(t+=3;t<p&&s[t]==s[t-m];)t++;return t-c},i.F._hash=function(s,t){return(s[t]<<8|s[t+1])+(s[t+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(s,t,m,c,p,x,n,a,r){var o,h,_,E,v,P,F,S,U,g=i.F.U,I=i.F._putsF,d=i.F._putsE;g.lhst[256]++,h=(o=i.F.getTrees())[0],_=o[1],E=o[2],v=o[3],P=o[4],F=o[5],S=o[6],U=o[7];var u=32+((r+3&7)==0?0:8-(r+3&7))+(n<<3),w=c+i.F.contSize(g.fltree,g.lhst)+i.F.contSize(g.fdtree,g.dhst),N=c+i.F.contSize(g.ltree,g.lhst)+i.F.contSize(g.dtree,g.dhst);N+=14+3*F+i.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var j=0;j<286;j++)g.lhst[j]=0;for(j=0;j<30;j++)g.dhst[j]=0;for(j=0;j<19;j++)g.ihst[j]=0;var A=u<w&&u<N?0:w<N?1:2;if(I(a,r,s),I(a,r+1,A),r+=3,A==0){for(;(7&r)!=0;)r++;r=i.F._copyExact(p,x,n,a,r)}else{var b,T;if(A==1&&(b=g.fltree,T=g.fdtree),A==2){i.F.makeCodes(g.ltree,h),i.F.revCodes(g.ltree,h),i.F.makeCodes(g.dtree,_),i.F.revCodes(g.dtree,_),i.F.makeCodes(g.itree,E),i.F.revCodes(g.itree,E),b=g.ltree,T=g.dtree,d(a,r,v-257),d(a,r+=5,P-1),d(a,r+=5,F-4),r+=4;for(var f=0;f<F;f++)d(a,r+3*f,g.itree[1+(g.ordr[f]<<1)]);r+=3*F,r=i.F._codeTiny(S,g.itree,a,r),r=i.F._codeTiny(U,g.itree,a,r)}for(var l=x,D=0;D<m;D+=2){for(var C=t[D],R=C>>>23,oe=l+(8388607&C);l<oe;)r=i.F._writeLit(p[l++],b,a,r);if(R!=0){var Y=t[D+1],se=Y>>16,z=Y>>8&255,M=255&Y;d(a,r=i.F._writeLit(257+z,b,a,r),R-g.of0[z]),r+=g.exb[z],I(a,r=i.F._writeLit(M,T,a,r),se-g.df0[M]),r+=g.dxb[M],l+=R}}r=i.F._writeLit(256,b,a,r)}return r},i.F._copyExact=function(s,t,m,c,p){var x=p>>>3;return c[x]=m,c[x+1]=m>>>8,c[x+2]=255-c[x],c[x+3]=255-c[x+1],x+=4,c.set(new Uint8Array(s.buffer,t,m),x),p+(m+4<<3)},i.F.getTrees=function(){for(var s=i.F.U,t=i.F._hufTree(s.lhst,s.ltree,15),m=i.F._hufTree(s.dhst,s.dtree,15),c=[],p=i.F._lenCodes(s.ltree,c),x=[],n=i.F._lenCodes(s.dtree,x),a=0;a<c.length;a+=2)s.ihst[c[a]]++;for(a=0;a<x.length;a+=2)s.ihst[x[a]]++;for(var r=i.F._hufTree(s.ihst,s.itree,7),o=19;o>4&&s.itree[1+(s.ordr[o-1]<<1)]==0;)o--;return[t,m,r,p,n,o,c,x]},i.F.getSecond=function(s){for(var t=[],m=0;m<s.length;m+=2)t.push(s[m+1]);return t},i.F.nonZero=function(s){for(var t="",m=0;m<s.length;m+=2)s[m+1]!=0&&(t+=(m>>1)+",");return t},i.F.contSize=function(s,t){for(var m=0,c=0;c<t.length;c++)m+=t[c]*s[1+(c<<1)];return m},i.F._codeTiny=function(s,t,m,c){for(var p=0;p<s.length;p+=2){var x=s[p],n=s[p+1];c=i.F._writeLit(x,t,m,c);var a=x==16?2:x==17?3:7;x>15&&(i.F._putsE(m,c,n,a),c+=a)}return c},i.F._lenCodes=function(s,t){for(var m=s.length;m!=2&&s[m-1]==0;)m-=2;for(var c=0;c<m;c+=2){var p=s[c+1],x=c+3<m?s[c+3]:-1,n=c+5<m?s[c+5]:-1,a=c==0?-1:s[c-1];if(p==0&&x==p&&n==p){for(var r=c+5;r+2<m&&s[r+2]==p;)r+=2;(o=Math.min(r+1-c>>>1,138))<11?t.push(17,o-3):t.push(18,o-11),c+=2*o-2}else if(p==a&&x==p&&n==p){for(r=c+5;r+2<m&&s[r+2]==p;)r+=2;var o=Math.min(r+1-c>>>1,6);t.push(16,o-3),c+=2*o-2}else t.push(p,0)}return m>>>1},i.F._hufTree=function(s,t,m){var c=[],p=s.length,x=t.length,n=0;for(n=0;n<x;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<p;n++)s[n]!=0&&c.push({lit:n,f:s[n]});var a=c.length,r=c.slice(0);if(a==0)return 0;if(a==1){var o=c[0].lit;return r=o==0?1:0,t[1+(o<<1)]=1,t[1+(r<<1)]=1,1}c.sort((function(S,U){return S.f-U.f}));var h=c[0],_=c[1],E=0,v=1,P=2;for(c[0]={lit:-1,f:h.f+_.f,l:h,r:_,d:0};v!=a-1;)h=E!=v&&(P==a||c[E].f<c[P].f)?c[E++]:c[P++],_=E!=v&&(P==a||c[E].f<c[P].f)?c[E++]:c[P++],c[v++]={lit:-1,f:h.f+_.f,l:h,r:_};var F=i.F.setDepth(c[v-1],0);for(F>m&&(i.F.restrictDepth(r,m,F),F=m),n=0;n<a;n++)t[1+(r[n].lit<<1)]=r[n].d;return F},i.F.setDepth=function(s,t){return s.lit!=-1?(s.d=t,t):Math.max(i.F.setDepth(s.l,t+1),i.F.setDepth(s.r,t+1))},i.F.restrictDepth=function(s,t,m){var c=0,p=1<<m-t,x=0;for(s.sort((function(a,r){return r.d==a.d?a.f-r.f:r.d-a.d})),c=0;c<s.length&&s[c].d>t;c++){var n=s[c].d;s[c].d=t,x+=p-(1<<m-n)}for(x>>>=m-t;x>0;)(n=s[c].d)<t?(s[c].d++,x-=1<<t-n-1):c++;for(;c>=0;c--)s[c].d==t&&x<0&&(s[c].d--,x++);x!=0&&console.log("debt left")},i.F._goodIndex=function(s,t){var m=0;return t[16|m]<=s&&(m|=16),t[8|m]<=s&&(m|=8),t[4|m]<=s&&(m|=4),t[2|m]<=s&&(m|=2),t[1|m]<=s&&(m|=1),m},i.F._writeLit=function(s,t,m,c){return i.F._putsF(m,c,t[s<<1]),c+t[1+(s<<1)]},i.F.inflate=function(s,t){var m=Uint8Array;if(s[0]==3&&s[1]==0)return t||new m(0);var c=i.F,p=c._bitsF,x=c._bitsE,n=c._decodeTiny,a=c.makeCodes,r=c.codes2map,o=c._get17,h=c.U,_=t==null;_&&(t=new m(s.length>>>2<<3));for(var E,v,P=0,F=0,S=0,U=0,g=0,I=0,d=0,u=0,w=0;P==0;)if(P=p(s,w,1),F=p(s,w+1,2),w+=3,F!=0){if(_&&(t=i.F._check(t,u+(1<<17))),F==1&&(E=h.flmap,v=h.fdmap,I=511,d=31),F==2){S=x(s,w,5)+257,U=x(s,w+5,5)+1,g=x(s,w+10,4)+4,w+=14;for(var N=0;N<38;N+=2)h.itree[N]=0,h.itree[N+1]=0;var j=1;for(N=0;N<g;N++){var A=x(s,w+3*N,3);h.itree[1+(h.ordr[N]<<1)]=A,A>j&&(j=A)}w+=3*g,a(h.itree,j),r(h.itree,j,h.imap),E=h.lmap,v=h.dmap,w=n(h.imap,(1<<j)-1,S+U,s,w,h.ttree);var b=c._copyOut(h.ttree,0,S,h.ltree);I=(1<<b)-1;var T=c._copyOut(h.ttree,S,U,h.dtree);d=(1<<T)-1,a(h.ltree,b),r(h.ltree,b,E),a(h.dtree,T),r(h.dtree,T,v)}for(;;){var f=E[o(s,w)&I];w+=15&f;var l=f>>>4;if(!(l>>>8))t[u++]=l;else{if(l==256)break;var D=u+l-254;if(l>264){var C=h.ldef[l-257];D=u+(C>>>3)+x(s,w,7&C),w+=7&C}var R=v[o(s,w)&d];w+=15&R;var oe=R>>>4,Y=h.ddef[oe],se=(Y>>>4)+p(s,w,15&Y);for(w+=15&Y,_&&(t=i.F._check(t,u+(1<<17)));u<D;)t[u]=t[u++-se],t[u]=t[u++-se],t[u]=t[u++-se],t[u]=t[u++-se];u=D}}}else{(7&w)!=0&&(w+=8-(7&w));var z=4+(w>>>3),M=s[z-4]|s[z-3]<<8;_&&(t=i.F._check(t,u+M)),t.set(new m(s.buffer,s.byteOffset+z,M),u),w=z+M<<3,u+=M}return t.length==u?t:t.slice(0,u)},i.F._check=function(s,t){var m=s.length;if(t<=m)return s;var c=new Uint8Array(Math.max(m<<1,t));return c.set(s,0),c},i.F._decodeTiny=function(s,t,m,c,p,x){for(var n=i.F._bitsE,a=i.F._get17,r=0;r<m;){var o=s[a(c,p)&t];p+=15&o;var h=o>>>4;if(h<=15)x[r]=h,r++;else{var _=0,E=0;h==16?(E=3+n(c,p,2),p+=2,_=x[r-1]):h==17?(E=3+n(c,p,3),p+=3):h==18&&(E=11+n(c,p,7),p+=7);for(var v=r+E;r<v;)x[r]=_,r++}}return p},i.F._copyOut=function(s,t,m,c){for(var p=0,x=0,n=c.length>>>1;x<m;){var a=s[x+t];c[x<<1]=0,c[1+(x<<1)]=a,a>p&&(p=a),x++}for(;x<n;)c[x<<1]=0,c[1+(x<<1)]=0,x++;return p},i.F.makeCodes=function(s,t){for(var m,c,p,x,n=i.F.U,a=s.length,r=n.bl_count,o=0;o<=t;o++)r[o]=0;for(o=1;o<a;o+=2)r[s[o]]++;var h=n.next_code;for(m=0,r[0]=0,c=1;c<=t;c++)m=m+r[c-1]<<1,h[c]=m;for(p=0;p<a;p+=2)(x=s[p+1])!=0&&(s[p]=h[x],h[x]++)},i.F.codes2map=function(s,t,m){for(var c=s.length,p=i.F.U.rev15,x=0;x<c;x+=2)if(s[x+1]!=0)for(var n=x>>1,a=s[x+1],r=n<<4|a,o=t-a,h=s[x]<<o,_=h+(1<<o);h!=_;)m[p[h]>>>15-t]=r,h++},i.F.revCodes=function(s,t){for(var m=i.F.U.rev15,c=15-t,p=0;p<s.length;p+=2){var x=s[p]<<t-s[p+1];s[p]=m[x]>>>c}},i.F._putsE=function(s,t,m){m<<=7&t;var c=t>>>3;s[c]|=m,s[c+1]|=m>>>8},i.F._putsF=function(s,t,m){m<<=7&t;var c=t>>>3;s[c]|=m,s[c+1]|=m>>>8,s[c+2]|=m>>>16},i.F._bitsE=function(s,t,m){return(s[t>>>3]|s[1+(t>>>3)]<<8)>>>(7&t)&(1<<m)-1},i.F._bitsF=function(s,t,m){return(s[t>>>3]|s[1+(t>>>3)]<<8|s[2+(t>>>3)]<<16)>>>(7&t)&(1<<m)-1},i.F._get17=function(s,t){return(s[t>>>3]|s[1+(t>>>3)]<<8|s[2+(t>>>3)]<<16)>>>(7&t)},i.F._get25=function(s,t){return(s[t>>>3]|s[1+(t>>>3)]<<8|s[2+(t>>>3)]<<16|s[3+(t>>>3)]<<24)>>>(7&t)},i.F.U=(k=Uint16Array,$=Uint32Array,{next_code:new k(16),bl_count:new k(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new k(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new $(32),flmap:new k(512),fltree:[],fdmap:new k(32),fdtree:[],lmap:new k(32768),ltree:[],ttree:[],dmap:new k(32768),dtree:[],imap:new k(512),itree:[],rev15:new k(32768),lhst:new $(286),dhst:new $(30),ihst:new $(19),lits:new $(15e3),strt:new k(65536),prev:new k(32768)}),(function(){for(var s=i.F.U,t=0;t<32768;t++){var m=t;m=(4278255360&(m=(4042322160&(m=(3435973836&(m=(2863311530&m)>>>1|(1431655765&m)<<1))>>>2|(858993459&m)<<2))>>>4|(252645135&m)<<4))>>>8|(16711935&m)<<8,s.rev15[t]=(m>>>16|m<<16)>>>17}function c(p,x,n){for(;x--!=0;)p.push(0,n)}for(t=0;t<32;t++)s.ldef[t]=s.of0[t]<<3|s.exb[t],s.ddef[t]=s.df0[t]<<4|s.dxb[t];c(s.fltree,144,8),c(s.fltree,112,9),c(s.fltree,24,7),c(s.fltree,8,8),i.F.makeCodes(s.fltree,9),i.F.codes2map(s.fltree,9,s.flmap),i.F.revCodes(s.fltree,9),c(s.fdtree,32,5),i.F.makeCodes(s.fdtree,5),i.F.codes2map(s.fdtree,5,s.fdmap),i.F.revCodes(s.fdtree,5),c(s.itree,19,0),c(s.ltree,286,0),c(s.dtree,30,0),c(s.ttree,320,0)})()})();var er=Vs({__proto__:null,default:Gt},[Gt]);const ft=(function(){var L={nextZero(n,a){for(;n[a]!=0;)a++;return a},readUshort:(n,a)=>n[a]<<8|n[a+1],writeUshort(n,a,r){n[a]=r>>8&255,n[a+1]=255&r},readUint:(n,a)=>16777216*n[a]+(n[a+1]<<16|n[a+2]<<8|n[a+3]),writeUint(n,a,r){n[a]=r>>24&255,n[a+1]=r>>16&255,n[a+2]=r>>8&255,n[a+3]=255&r},readASCII(n,a,r){let o="";for(let h=0;h<r;h++)o+=String.fromCharCode(n[a+h]);return o},writeASCII(n,a,r){for(let o=0;o<r.length;o++)n[a+o]=r.charCodeAt(o)},readBytes(n,a,r){const o=[];for(let h=0;h<r;h++)o.push(n[a+h]);return o},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,a,r){let o,h="";for(let _=0;_<r;_++)h+=`%${L.pad(n[a+_].toString(16))}`;try{o=decodeURIComponent(h)}catch{return L.readASCII(n,a,r)}return o}};function k(n,a,r,o){const h=a*r,_=t(o),E=Math.ceil(a*_/8),v=new Uint8Array(4*h),P=new Uint32Array(v.buffer),{ctype:F}=o,{depth:S}=o,U=L.readUshort;if(F==6){const C=h<<2;if(S==8)for(var g=0;g<C;g+=4)v[g]=n[g],v[g+1]=n[g+1],v[g+2]=n[g+2],v[g+3]=n[g+3];if(S==16)for(g=0;g<C;g++)v[g]=n[g<<1]}else if(F==2){const C=o.tabs.tRNS;if(C==null){if(S==8)for(g=0;g<h;g++){var I=3*g;P[g]=255<<24|n[I+2]<<16|n[I+1]<<8|n[I]}if(S==16)for(g=0;g<h;g++)I=6*g,P[g]=255<<24|n[I+4]<<16|n[I+2]<<8|n[I]}else{var d=C[0];const R=C[1],oe=C[2];if(S==8)for(g=0;g<h;g++){var u=g<<2;I=3*g,P[g]=255<<24|n[I+2]<<16|n[I+1]<<8|n[I],n[I]==d&&n[I+1]==R&&n[I+2]==oe&&(v[u+3]=0)}if(S==16)for(g=0;g<h;g++)u=g<<2,I=6*g,P[g]=255<<24|n[I+4]<<16|n[I+2]<<8|n[I],U(n,I)==d&&U(n,I+2)==R&&U(n,I+4)==oe&&(v[u+3]=0)}}else if(F==3){const C=o.tabs.PLTE,R=o.tabs.tRNS,oe=R?R.length:0;if(S==1)for(var w=0;w<r;w++){var N=w*E,j=w*a;for(g=0;g<a;g++){u=j+g<<2;var A=3*(b=n[N+(g>>3)]>>7-((7&g)<<0)&1);v[u]=C[A],v[u+1]=C[A+1],v[u+2]=C[A+2],v[u+3]=b<oe?R[b]:255}}if(S==2)for(w=0;w<r;w++)for(N=w*E,j=w*a,g=0;g<a;g++)u=j+g<<2,A=3*(b=n[N+(g>>2)]>>6-((3&g)<<1)&3),v[u]=C[A],v[u+1]=C[A+1],v[u+2]=C[A+2],v[u+3]=b<oe?R[b]:255;if(S==4)for(w=0;w<r;w++)for(N=w*E,j=w*a,g=0;g<a;g++)u=j+g<<2,A=3*(b=n[N+(g>>1)]>>4-((1&g)<<2)&15),v[u]=C[A],v[u+1]=C[A+1],v[u+2]=C[A+2],v[u+3]=b<oe?R[b]:255;if(S==8)for(g=0;g<h;g++){var b;u=g<<2,A=3*(b=n[g]),v[u]=C[A],v[u+1]=C[A+1],v[u+2]=C[A+2],v[u+3]=b<oe?R[b]:255}}else if(F==4){if(S==8)for(g=0;g<h;g++){u=g<<2;var T=n[f=g<<1];v[u]=T,v[u+1]=T,v[u+2]=T,v[u+3]=n[f+1]}if(S==16)for(g=0;g<h;g++){var f;u=g<<2,T=n[f=g<<2],v[u]=T,v[u+1]=T,v[u+2]=T,v[u+3]=n[f+2]}}else if(F==0)for(d=o.tabs.tRNS?o.tabs.tRNS:-1,w=0;w<r;w++){const C=w*E,R=w*a;if(S==1)for(var l=0;l<a;l++){var D=(T=255*(n[C+(l>>>3)]>>>7-(7&l)&1))==255*d?0:255;P[R+l]=D<<24|T<<16|T<<8|T}else if(S==2)for(l=0;l<a;l++)D=(T=85*(n[C+(l>>>2)]>>>6-((3&l)<<1)&3))==85*d?0:255,P[R+l]=D<<24|T<<16|T<<8|T;else if(S==4)for(l=0;l<a;l++)D=(T=17*(n[C+(l>>>1)]>>>4-((1&l)<<2)&15))==17*d?0:255,P[R+l]=D<<24|T<<16|T<<8|T;else if(S==8)for(l=0;l<a;l++)D=(T=n[C+l])==d?0:255,P[R+l]=D<<24|T<<16|T<<8|T;else if(S==16)for(l=0;l<a;l++)T=n[C+(l<<1)],D=U(n,C+(l<<1))==d?0:255,P[R+l]=D<<24|T<<16|T<<8|T}return v}function $(n,a,r,o){const h=t(n),_=Math.ceil(r*h/8),E=new Uint8Array((_+1+n.interlace)*o);return a=n.tabs.CgBI?s(a,E):i(a,E),n.interlace==0?a=m(a,n,0,r,o):n.interlace==1&&(a=(function(P,F){const S=F.width,U=F.height,g=t(F),I=g>>3,d=Math.ceil(S*g/8),u=new Uint8Array(U*d);let w=0;const N=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],A=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let T=0;for(;T<7;){const l=A[T],D=b[T];let C=0,R=0,oe=N[T];for(;oe<U;)oe+=l,R++;let Y=j[T];for(;Y<S;)Y+=D,C++;const se=Math.ceil(C*g/8);m(P,F,w,C,R);let z=0,M=N[T];for(;M<U;){let ce=j[T],Ne=w+z*se<<3;for(;ce<S;){var f;if(g==1&&(f=(f=P[Ne>>3])>>7-(7&Ne)&1,u[M*d+(ce>>3)]|=f<<7-((7&ce)<<0)),g==2&&(f=(f=P[Ne>>3])>>6-(7&Ne)&3,u[M*d+(ce>>2)]|=f<<6-((3&ce)<<1)),g==4&&(f=(f=P[Ne>>3])>>4-(7&Ne)&15,u[M*d+(ce>>1)]|=f<<4-((1&ce)<<2)),g>=8){const ye=M*d+ce*I;for(let xe=0;xe<I;xe++)u[ye+xe]=P[(Ne>>3)+xe]}Ne+=g,ce+=D}z++,M+=l}C*R!=0&&(w+=R*(1+se)),T+=1}return u})(a,n)),a}function i(n,a){return s(new Uint8Array(n.buffer,2,n.length-6),a)}var s=(function(){const n={H:{}};return n.H.N=function(a,r){const o=Uint8Array;let h,_,E=0,v=0,P=0,F=0,S=0,U=0,g=0,I=0,d=0;if(a[0]==3&&a[1]==0)return r||new o(0);const u=n.H,w=u.b,N=u.e,j=u.R,A=u.n,b=u.A,T=u.Z,f=u.m,l=r==null;for(l&&(r=new o(a.length>>>2<<5));E==0;)if(E=w(a,d,1),v=w(a,d+1,2),d+=3,v!=0){if(l&&(r=n.H.W(r,I+(1<<17))),v==1&&(h=f.J,_=f.h,U=511,g=31),v==2){P=N(a,d,5)+257,F=N(a,d+5,5)+1,S=N(a,d+10,4)+4,d+=14;let C=1;for(var D=0;D<38;D+=2)f.Q[D]=0,f.Q[D+1]=0;for(D=0;D<S;D++){const Y=N(a,d+3*D,3);f.Q[1+(f.X[D]<<1)]=Y,Y>C&&(C=Y)}d+=3*S,A(f.Q,C),b(f.Q,C,f.u),h=f.w,_=f.d,d=j(f.u,(1<<C)-1,P+F,a,d,f.v);const R=u.V(f.v,0,P,f.C);U=(1<<R)-1;const oe=u.V(f.v,P,F,f.D);g=(1<<oe)-1,A(f.C,R),b(f.C,R,h),A(f.D,oe),b(f.D,oe,_)}for(;;){const C=h[T(a,d)&U];d+=15&C;const R=C>>>4;if(!(R>>>8))r[I++]=R;else{if(R==256)break;{let oe=I+R-254;if(R>264){const ce=f.q[R-257];oe=I+(ce>>>3)+N(a,d,7&ce),d+=7&ce}const Y=_[T(a,d)&g];d+=15&Y;const se=Y>>>4,z=f.c[se],M=(z>>>4)+w(a,d,15&z);for(d+=15&z;I<oe;)r[I]=r[I++-M],r[I]=r[I++-M],r[I]=r[I++-M],r[I]=r[I++-M];I=oe}}}}else{(7&d)!=0&&(d+=8-(7&d));const C=4+(d>>>3),R=a[C-4]|a[C-3]<<8;l&&(r=n.H.W(r,I+R)),r.set(new o(a.buffer,a.byteOffset+C,R),I),d=C+R<<3,I+=R}return r.length==I?r:r.slice(0,I)},n.H.W=function(a,r){const o=a.length;if(r<=o)return a;const h=new Uint8Array(o<<1);return h.set(a,0),h},n.H.R=function(a,r,o,h,_,E){const v=n.H.e,P=n.H.Z;let F=0;for(;F<o;){const S=a[P(h,_)&r];_+=15&S;const U=S>>>4;if(U<=15)E[F]=U,F++;else{let g=0,I=0;U==16?(I=3+v(h,_,2),_+=2,g=E[F-1]):U==17?(I=3+v(h,_,3),_+=3):U==18&&(I=11+v(h,_,7),_+=7);const d=F+I;for(;F<d;)E[F]=g,F++}}return _},n.H.V=function(a,r,o,h){let _=0,E=0;const v=h.length>>>1;for(;E<o;){const P=a[E+r];h[E<<1]=0,h[1+(E<<1)]=P,P>_&&(_=P),E++}for(;E<v;)h[E<<1]=0,h[1+(E<<1)]=0,E++;return _},n.H.n=function(a,r){const o=n.H.m,h=a.length;let _,E,v,P;const F=o.j;for(var S=0;S<=r;S++)F[S]=0;for(S=1;S<h;S+=2)F[a[S]]++;const U=o.K;for(_=0,F[0]=0,E=1;E<=r;E++)_=_+F[E-1]<<1,U[E]=_;for(v=0;v<h;v+=2)P=a[v+1],P!=0&&(a[v]=U[P],U[P]++)},n.H.A=function(a,r,o){const h=a.length,_=n.H.m.r;for(let E=0;E<h;E+=2)if(a[E+1]!=0){const v=E>>1,P=a[E+1],F=v<<4|P,S=r-P;let U=a[E]<<S;const g=U+(1<<S);for(;U!=g;)o[_[U]>>>15-r]=F,U++}},n.H.l=function(a,r){const o=n.H.m.r,h=15-r;for(let _=0;_<a.length;_+=2){const E=a[_]<<r-a[_+1];a[_]=o[E]>>>h}},n.H.M=function(a,r,o){o<<=7&r;const h=r>>>3;a[h]|=o,a[h+1]|=o>>>8},n.H.I=function(a,r,o){o<<=7&r;const h=r>>>3;a[h]|=o,a[h+1]|=o>>>8,a[h+2]|=o>>>16},n.H.e=function(a,r,o){return(a[r>>>3]|a[1+(r>>>3)]<<8)>>>(7&r)&(1<<o)-1},n.H.b=function(a,r,o){return(a[r>>>3]|a[1+(r>>>3)]<<8|a[2+(r>>>3)]<<16)>>>(7&r)&(1<<o)-1},n.H.Z=function(a,r){return(a[r>>>3]|a[1+(r>>>3)]<<8|a[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(a,r){return(a[r>>>3]|a[1+(r>>>3)]<<8|a[2+(r>>>3)]<<16|a[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=(function(){const a=Uint16Array,r=Uint32Array;return{K:new a(16),j:new a(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new a(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new a(512),_:[],h:new a(32),$:[],w:new a(32768),C:[],v:[],d:new a(32768),D:[],u:new a(512),Q:[],r:new a(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new a(65536),g:new a(32768)}})(),(function(){const a=n.H.m;for(var r=0;r<32768;r++){let h=r;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,a.r[r]=(h>>>16|h<<16)>>>17}function o(h,_,E){for(;_--!=0;)h.push(0,E)}for(r=0;r<32;r++)a.q[r]=a.S[r]<<3|a.T[r],a.c[r]=a.p[r]<<4|a.z[r];o(a._,144,8),o(a._,112,9),o(a._,24,7),o(a._,8,8),n.H.n(a._,9),n.H.A(a._,9,a.J),n.H.l(a._,9),o(a.$,32,5),n.H.n(a.$,5),n.H.A(a.$,5,a.h),n.H.l(a.$,5),o(a.Q,19,0),o(a.C,286,0),o(a.D,30,0),o(a.v,320,0)})(),n.H.N})();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function m(n,a,r,o,h){let _=t(a);const E=Math.ceil(o*_/8);let v,P;_=Math.ceil(_/8);let F=n[r],S=0;if(F>1&&(n[r]=[0,0,1][F-2]),F==3)for(S=_;S<E;S++)n[S+1]=n[S+1]+(n[S+1-_]>>>1)&255;for(let U=0;U<h;U++)if(v=r+U*E,P=v+U+1,F=n[P-1],S=0,F==0)for(;S<E;S++)n[v+S]=n[P+S];else if(F==1){for(;S<_;S++)n[v+S]=n[P+S];for(;S<E;S++)n[v+S]=n[P+S]+n[v+S-_]}else if(F==2)for(;S<E;S++)n[v+S]=n[P+S]+n[v+S-E];else if(F==3){for(;S<_;S++)n[v+S]=n[P+S]+(n[v+S-E]>>>1);for(;S<E;S++)n[v+S]=n[P+S]+(n[v+S-E]+n[v+S-_]>>>1)}else{for(;S<_;S++)n[v+S]=n[P+S]+c(0,n[v+S-E],0);for(;S<E;S++)n[v+S]=n[P+S]+c(n[v+S-_],n[v+S-E],n[v+S-_-E])}return n}function c(n,a,r){const o=n+a-r,h=o-n,_=o-a,E=o-r;return h*h<=_*_&&h*h<=E*E?n:_*_<=E*E?a:r}function p(n,a,r){r.width=L.readUint(n,a),a+=4,r.height=L.readUint(n,a),a+=4,r.depth=n[a],a++,r.ctype=n[a],a++,r.compress=n[a],a++,r.filter=n[a],a++,r.interlace=n[a],a++}function x(n,a,r,o,h,_,E,v,P){const F=Math.min(a,h),S=Math.min(r,_);let U=0,g=0;for(let T=0;T<S;T++)for(let f=0;f<F;f++)if(E>=0&&v>=0?(U=T*a+f<<2,g=(v+T)*h+E+f<<2):(U=(-v+T)*a-E+f<<2,g=T*h+f<<2),P==0)o[g]=n[U],o[g+1]=n[U+1],o[g+2]=n[U+2],o[g+3]=n[U+3];else if(P==1){var I=n[U+3]*.00392156862745098,d=n[U]*I,u=n[U+1]*I,w=n[U+2]*I,N=o[g+3]*(1/255),j=o[g]*N,A=o[g+1]*N,b=o[g+2]*N;const l=1-I,D=I+N*l,C=D==0?0:1/D;o[g+3]=255*D,o[g+0]=(d+j*l)*C,o[g+1]=(u+A*l)*C,o[g+2]=(w+b*l)*C}else if(P==2)I=n[U+3],d=n[U],u=n[U+1],w=n[U+2],N=o[g+3],j=o[g],A=o[g+1],b=o[g+2],I==N&&d==j&&u==A&&w==b?(o[g]=0,o[g+1]=0,o[g+2]=0,o[g+3]=0):(o[g]=d,o[g+1]=u,o[g+2]=w,o[g+3]=I);else if(P==3){if(I=n[U+3],d=n[U],u=n[U+1],w=n[U+2],N=o[g+3],j=o[g],A=o[g+1],b=o[g+2],I==N&&d==j&&u==A&&w==b)continue;if(I<220&&N>20)return!1}return!0}return{decode:function(a){const r=new Uint8Array(a);let o=8;const h=L,_=h.readUshort,E=h.readUint,v={tabs:{},frames:[]},P=new Uint8Array(r.length);let F,S=0,U=0;const g=[137,80,78,71,13,10,26,10];for(var I=0;I<8;I++)if(r[I]!=g[I])throw"The input is not a PNG file!";for(;o<r.length;){const T=h.readUint(r,o);o+=4;const f=h.readASCII(r,o,4);if(o+=4,f=="IHDR")p(r,o,v);else if(f=="iCCP"){for(var d=o;r[d]!=0;)d++;h.readASCII(r,o,d-o),r[d+1];const l=r.slice(d+2,o+T);let D=null;try{D=i(l)}catch{D=s(l)}v.tabs[f]=D}else if(f=="CgBI")v.tabs[f]=r.slice(o,o+4);else if(f=="IDAT"){for(I=0;I<T;I++)P[S+I]=r[o+I];S+=T}else if(f=="acTL")v.tabs[f]={num_frames:E(r,o),num_plays:E(r,o+4)},F=new Uint8Array(r.length);else if(f=="fcTL"){U!=0&&((b=v.frames[v.frames.length-1]).data=$(v,F.slice(0,U),b.rect.width,b.rect.height),U=0);const l={x:E(r,o+12),y:E(r,o+16),width:E(r,o+4),height:E(r,o+8)};let D=_(r,o+22);D=_(r,o+20)/(D==0?100:D);const C={rect:l,delay:Math.round(1e3*D),dispose:r[o+24],blend:r[o+25]};v.frames.push(C)}else if(f=="fdAT"){for(I=0;I<T-4;I++)F[U+I]=r[o+I+4];U+=T-4}else if(f=="pHYs")v.tabs[f]=[h.readUint(r,o),h.readUint(r,o+4),r[o+8]];else if(f=="cHRM")for(v.tabs[f]=[],I=0;I<8;I++)v.tabs[f].push(h.readUint(r,o+4*I));else if(f=="tEXt"||f=="zTXt"){v.tabs[f]==null&&(v.tabs[f]={});var u=h.nextZero(r,o),w=h.readASCII(r,o,u-o),N=o+T-u-1;if(f=="tEXt")A=h.readASCII(r,u+1,N);else{var j=i(r.slice(u+2,u+2+N));A=h.readUTF8(j,0,j.length)}v.tabs[f][w]=A}else if(f=="iTXt"){v.tabs[f]==null&&(v.tabs[f]={}),u=0,d=o,u=h.nextZero(r,d),w=h.readASCII(r,d,u-d);const l=r[d=u+1];var A;r[d+1],d+=2,u=h.nextZero(r,d),h.readASCII(r,d,u-d),d=u+1,u=h.nextZero(r,d),h.readUTF8(r,d,u-d),N=T-((d=u+1)-o),l==0?A=h.readUTF8(r,d,N):(j=i(r.slice(d,d+N)),A=h.readUTF8(j,0,j.length)),v.tabs[f][w]=A}else if(f=="PLTE")v.tabs[f]=h.readBytes(r,o,T);else if(f=="hIST"){const l=v.tabs.PLTE.length/3;for(v.tabs[f]=[],I=0;I<l;I++)v.tabs[f].push(_(r,o+2*I))}else if(f=="tRNS")v.ctype==3?v.tabs[f]=h.readBytes(r,o,T):v.ctype==0?v.tabs[f]=_(r,o):v.ctype==2&&(v.tabs[f]=[_(r,o),_(r,o+2),_(r,o+4)]);else if(f=="gAMA")v.tabs[f]=h.readUint(r,o)/1e5;else if(f=="sRGB")v.tabs[f]=r[o];else if(f=="bKGD")v.ctype==0||v.ctype==4?v.tabs[f]=[_(r,o)]:v.ctype==2||v.ctype==6?v.tabs[f]=[_(r,o),_(r,o+2),_(r,o+4)]:v.ctype==3&&(v.tabs[f]=r[o]);else if(f=="IEND")break;o+=T,h.readUint(r,o),o+=4}var b;return U!=0&&((b=v.frames[v.frames.length-1]).data=$(v,F.slice(0,U),b.rect.width,b.rect.height)),v.data=$(v,P,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(a){const r=a.width,o=a.height;if(a.tabs.acTL==null)return[k(a.data,r,o,a).buffer];const h=[];a.frames[0].data==null&&(a.frames[0].data=a.data);const _=r*o*4,E=new Uint8Array(_),v=new Uint8Array(_),P=new Uint8Array(_);for(let S=0;S<a.frames.length;S++){const U=a.frames[S],g=U.rect.x,I=U.rect.y,d=U.rect.width,u=U.rect.height,w=k(U.data,d,u,a);if(S!=0)for(var F=0;F<_;F++)P[F]=E[F];if(U.blend==0?x(w,d,u,E,r,o,g,I,0):U.blend==1&&x(w,d,u,E,r,o,g,I,1),h.push(E.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)x(v,d,u,E,r,o,g,I,0);else if(U.dispose==2)for(F=0;F<_;F++)E[F]=P[F]}}return h},_paeth:c,_copyTile:x,_bin:L}})();(function(){const{_copyTile:L}=ft,{_bin:k}=ft,$=ft._paeth;var i={table:(function(){const d=new Uint32Array(256);for(let u=0;u<256;u++){let w=u;for(let N=0;N<8;N++)1&w?w=3988292384^w>>>1:w>>>=1;d[u]=w}return d})(),update(d,u,w,N){for(let j=0;j<N;j++)d=i.table[255&(d^u[w+j])]^d>>>8;return d},crc:(d,u,w)=>4294967295^i.update(4294967295,d,u,w)};function s(d,u,w,N){u[w]+=d[0]*N>>4,u[w+1]+=d[1]*N>>4,u[w+2]+=d[2]*N>>4,u[w+3]+=d[3]*N>>4}function t(d){return Math.max(0,Math.min(255,d))}function m(d,u){const w=d[0]-u[0],N=d[1]-u[1],j=d[2]-u[2],A=d[3]-u[3];return w*w+N*N+j*j+A*A}function c(d,u,w,N,j,A,b){b==null&&(b=1);const T=N.length,f=[];for(var l=0;l<T;l++){const M=N[l];f.push([M>>>0&255,M>>>8&255,M>>>16&255,M>>>24&255])}for(l=0;l<T;l++){let M=4294967295;for(var D=0,C=0;C<T;C++){var R=m(f[l],f[C]);C!=l&&R<M&&(M=R,D=C)}}const oe=new Uint32Array(j.buffer),Y=new Int16Array(u*w*4),se=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(l=0;l<se.length;l++)se[l]=255*((se[l]+.5)/16-.5);for(let M=0;M<w;M++)for(let ce=0;ce<u;ce++){var z;l=4*(M*u+ce),b!=2?z=[t(d[l]+Y[l]),t(d[l+1]+Y[l+1]),t(d[l+2]+Y[l+2]),t(d[l+3]+Y[l+3])]:(R=se[4*(3&M)+(3&ce)],z=[t(d[l]+R),t(d[l+1]+R),t(d[l+2]+R),t(d[l+3]+R)]),D=0;let Ne=16777215;for(C=0;C<T;C++){const Ae=m(z,f[C]);Ae<Ne&&(Ne=Ae,D=C)}const ye=f[D],xe=[z[0]-ye[0],z[1]-ye[1],z[2]-ye[2],z[3]-ye[3]];b==1&&(ce!=u-1&&s(xe,Y,l+4,7),M!=w-1&&(ce!=0&&s(xe,Y,l+4*u-4,3),s(xe,Y,l+4*u,5),ce!=u-1&&s(xe,Y,l+4*u+4,1))),A[l>>2]=D,oe[l>>2]=N[D]}}function p(d,u,w,N,j){j==null&&(j={});const{crc:A}=i,b=k.writeUint,T=k.writeUshort,f=k.writeASCII;let l=8;const D=d.frames.length>1;let C,R=!1,oe=33+(D?20:0);if(j.sRGB!=null&&(oe+=13),j.pHYs!=null&&(oe+=21),j.iCCP!=null&&(C=pako.deflate(j.iCCP),oe+=21+C.length+4),d.ctype==3){for(var Y=d.plte.length,se=0;se<Y;se++)d.plte[se]>>>24!=255&&(R=!0);oe+=8+3*Y+4+(R?8+1*Y+4:0)}for(var z=0;z<d.frames.length;z++)D&&(oe+=38),oe+=(ye=d.frames[z]).cimg.length+12,z!=0&&(oe+=4);oe+=12;const M=new Uint8Array(oe),ce=[137,80,78,71,13,10,26,10];for(se=0;se<8;se++)M[se]=ce[se];if(b(M,l,13),l+=4,f(M,l,"IHDR"),l+=4,b(M,l,u),l+=4,b(M,l,w),l+=4,M[l]=d.depth,l++,M[l]=d.ctype,l++,M[l]=0,l++,M[l]=0,l++,M[l]=0,l++,b(M,l,A(M,l-17,17)),l+=4,j.sRGB!=null&&(b(M,l,1),l+=4,f(M,l,"sRGB"),l+=4,M[l]=j.sRGB,l++,b(M,l,A(M,l-5,5)),l+=4),j.iCCP!=null){const xe=13+C.length;b(M,l,xe),l+=4,f(M,l,"iCCP"),l+=4,f(M,l,"ICC profile"),l+=11,l+=2,M.set(C,l),l+=C.length,b(M,l,A(M,l-(xe+4),xe+4)),l+=4}if(j.pHYs!=null&&(b(M,l,9),l+=4,f(M,l,"pHYs"),l+=4,b(M,l,j.pHYs[0]),l+=4,b(M,l,j.pHYs[1]),l+=4,M[l]=j.pHYs[2],l++,b(M,l,A(M,l-13,13)),l+=4),D&&(b(M,l,8),l+=4,f(M,l,"acTL"),l+=4,b(M,l,d.frames.length),l+=4,b(M,l,j.loop!=null?j.loop:0),l+=4,b(M,l,A(M,l-12,12)),l+=4),d.ctype==3){for(b(M,l,3*(Y=d.plte.length)),l+=4,f(M,l,"PLTE"),l+=4,se=0;se<Y;se++){const xe=3*se,Ae=d.plte[se],Te=255&Ae,De=Ae>>>8&255,it=Ae>>>16&255;M[l+xe+0]=Te,M[l+xe+1]=De,M[l+xe+2]=it}if(l+=3*Y,b(M,l,A(M,l-3*Y-4,3*Y+4)),l+=4,R){for(b(M,l,Y),l+=4,f(M,l,"tRNS"),l+=4,se=0;se<Y;se++)M[l+se]=d.plte[se]>>>24&255;l+=Y,b(M,l,A(M,l-Y-4,Y+4)),l+=4}}let Ne=0;for(z=0;z<d.frames.length;z++){var ye=d.frames[z];D&&(b(M,l,26),l+=4,f(M,l,"fcTL"),l+=4,b(M,l,Ne++),l+=4,b(M,l,ye.rect.width),l+=4,b(M,l,ye.rect.height),l+=4,b(M,l,ye.rect.x),l+=4,b(M,l,ye.rect.y),l+=4,T(M,l,N[z]),l+=2,T(M,l,1e3),l+=2,M[l]=ye.dispose,l++,M[l]=ye.blend,l++,b(M,l,A(M,l-30,30)),l+=4);const xe=ye.cimg;b(M,l,(Y=xe.length)+(z==0?0:4)),l+=4;const Ae=l;f(M,l,z==0?"IDAT":"fdAT"),l+=4,z!=0&&(b(M,l,Ne++),l+=4),M.set(xe,l),l+=Y,b(M,l,A(M,Ae,l-Ae)),l+=4}return b(M,l,0),l+=4,f(M,l,"IEND"),l+=4,b(M,l,A(M,l-4,4)),l+=4,M.buffer}function x(d,u,w){for(let N=0;N<d.frames.length;N++){const j=d.frames[N];j.rect.width;const A=j.rect.height,b=new Uint8Array(A*j.bpl+A);j.cimg=o(j.img,A,j.bpp,j.bpl,b,u,w)}}function n(d,u,w,N,j){const A=j[0],b=j[1],T=j[2],f=j[3],l=j[4],D=j[5];let C=6,R=8,oe=255;for(var Y=0;Y<d.length;Y++){const Pe=new Uint8Array(d[Y]);for(var se=Pe.length,z=0;z<se;z+=4)oe&=Pe[z+3]}const M=oe!=255,ce=(function(Se,ke,Ee,ze,Ue,Ke){const Ie=[];for(var _e=0;_e<Se.length;_e++){const Me=new Uint8Array(Se[_e]),et=new Uint32Array(Me.buffer);var Be;let Qe=0,Je=0,Ve=ke,ot=Ee,Tt=ze?1:0;if(_e!=0){const tt=Ke||ze||_e==1||Ie[_e-2].dispose!=0?1:2;let Lt=0,Pt=1e9;for(let gt=0;gt<tt;gt++){var rt=new Uint8Array(Se[_e-1-gt]);const Jt=new Uint32Array(Se[_e-1-gt]);let We=ke,pe=Ee,xt=-1,lt=-1;for(let ct=0;ct<Ee;ct++)for(let dt=0;dt<ke;dt++)et[Re=ct*ke+dt]!=Jt[Re]&&(dt<We&&(We=dt),dt>xt&&(xt=dt),ct<pe&&(pe=ct),ct>lt&&(lt=ct));xt==-1&&(We=pe=xt=lt=0),Ue&&((1&We)==1&&We--,(1&pe)==1&&pe--);const Nt=(xt-We+1)*(lt-pe+1);Nt<Pt&&(Pt=Nt,Lt=gt,Qe=We,Je=pe,Ve=xt-We+1,ot=lt-pe+1)}rt=new Uint8Array(Se[_e-1-Lt]),Lt==1&&(Ie[_e-1].dispose=2),Be=new Uint8Array(Ve*ot*4),L(rt,ke,Ee,Be,Ve,ot,-Qe,-Je,0),Tt=L(Me,ke,Ee,Be,Ve,ot,-Qe,-Je,3)?1:0,Tt==1?r(Me,ke,Ee,Be,{x:Qe,y:Je,width:Ve,height:ot}):L(Me,ke,Ee,Be,Ve,ot,-Qe,-Je,0)}else Be=Me.slice(0);Ie.push({rect:{x:Qe,y:Je,width:Ve,height:ot},img:Be,blend:Tt,dispose:0})}if(ze)for(_e=0;_e<Ie.length;_e++){if((mt=Ie[_e]).blend==1)continue;const Me=mt.rect,et=Ie[_e-1].rect,Qe=Math.min(Me.x,et.x),Je=Math.min(Me.y,et.y),Ve={x:Qe,y:Je,width:Math.max(Me.x+Me.width,et.x+et.width)-Qe,height:Math.max(Me.y+Me.height,et.y+et.height)-Je};Ie[_e-1].dispose=1,_e-1!=0&&a(Se,ke,Ee,Ie,_e-1,Ve,Ue),a(Se,ke,Ee,Ie,_e,Ve,Ue)}let vt=0;if(Se.length!=1)for(var Re=0;Re<Ie.length;Re++){var mt;vt+=(mt=Ie[Re]).rect.width*mt.rect.height}return Ie})(d,u,w,A,b,T),Ne={},ye=[],xe=[];if(N!=0){const Pe=[];for(z=0;z<ce.length;z++)Pe.push(ce[z].img.buffer);const Se=(function(Ue){let Ke=0;for(var Ie=0;Ie<Ue.length;Ie++)Ke+=Ue[Ie].byteLength;const _e=new Uint8Array(Ke);let Be=0;for(Ie=0;Ie<Ue.length;Ie++){const rt=new Uint8Array(Ue[Ie]),vt=rt.length;for(let Re=0;Re<vt;Re+=4){let mt=rt[Re],Me=rt[Re+1],et=rt[Re+2];const Qe=rt[Re+3];Qe==0&&(mt=Me=et=0),_e[Be+Re]=mt,_e[Be+Re+1]=Me,_e[Be+Re+2]=et,_e[Be+Re+3]=Qe}Be+=vt}return _e.buffer})(Pe),ke=_(Se,N);for(z=0;z<ke.plte.length;z++)ye.push(ke.plte[z].est.rgba);let Ee=0;for(z=0;z<ce.length;z++){const ze=(Te=ce[z]).img.length;var Ae=new Uint8Array(ke.inds.buffer,Ee>>2,ze>>2);xe.push(Ae);const Ue=new Uint8Array(ke.abuf,Ee,ze);D&&c(Te.img,Te.rect.width,Te.rect.height,ye,Ue,Ae),Te.img.set(Ue),Ee+=ze}}else for(Y=0;Y<ce.length;Y++){var Te=ce[Y];const Pe=new Uint32Array(Te.img.buffer);var De=Te.rect.width;for(se=Pe.length,Ae=new Uint8Array(se),xe.push(Ae),z=0;z<se;z++){const Se=Pe[z];if(z!=0&&Se==Pe[z-1])Ae[z]=Ae[z-1];else if(z>De&&Se==Pe[z-De])Ae[z]=Ae[z-De];else{let ke=Ne[Se];if(ke==null&&(Ne[Se]=ke=ye.length,ye.push(Se),ye.length>=300))break;Ae[z]=ke}}}const it=ye.length;for(it<=256&&l==0&&(R=it<=2?1:it<=4?2:it<=16?4:8,R=Math.max(R,f)),Y=0;Y<ce.length;Y++){(Te=ce[Y]).rect.x,Te.rect.y,De=Te.rect.width;const Pe=Te.rect.height;let Se=Te.img;new Uint32Array(Se.buffer);let ke=4*De,Ee=4;if(it<=256&&l==0){ke=Math.ceil(R*De/8);var st=new Uint8Array(ke*Pe);const ze=xe[Y];for(let Ue=0;Ue<Pe;Ue++){z=Ue*ke;const Ke=Ue*De;if(R==8)for(var Le=0;Le<De;Le++)st[z+Le]=ze[Ke+Le];else if(R==4)for(Le=0;Le<De;Le++)st[z+(Le>>1)]|=ze[Ke+Le]<<4-4*(1&Le);else if(R==2)for(Le=0;Le<De;Le++)st[z+(Le>>2)]|=ze[Ke+Le]<<6-2*(3&Le);else if(R==1)for(Le=0;Le<De;Le++)st[z+(Le>>3)]|=ze[Ke+Le]<<7-1*(7&Le)}Se=st,C=3,Ee=1}else if(M==0&&ce.length==1){st=new Uint8Array(De*Pe*3);const ze=De*Pe;for(z=0;z<ze;z++){const Ue=3*z,Ke=4*z;st[Ue]=Se[Ke],st[Ue+1]=Se[Ke+1],st[Ue+2]=Se[Ke+2]}Se=st,C=2,Ee=3,ke=3*De}Te.img=Se,Te.bpl=ke,Te.bpp=Ee}return{ctype:C,depth:R,plte:ye,frames:ce}}function a(d,u,w,N,j,A,b){const T=Uint8Array,f=Uint32Array,l=new T(d[j-1]),D=new f(d[j-1]),C=j+1<d.length?new T(d[j+1]):null,R=new T(d[j]),oe=new f(R.buffer);let Y=u,se=w,z=-1,M=-1;for(let Ne=0;Ne<A.height;Ne++)for(let ye=0;ye<A.width;ye++){const xe=A.x+ye,Ae=A.y+Ne,Te=Ae*u+xe,De=oe[Te];De==0||N[j-1].dispose==0&&D[Te]==De&&(C==null||C[4*Te+3]!=0)||(xe<Y&&(Y=xe),xe>z&&(z=xe),Ae<se&&(se=Ae),Ae>M&&(M=Ae))}z==-1&&(Y=se=z=M=0),b&&((1&Y)==1&&Y--,(1&se)==1&&se--),A={x:Y,y:se,width:z-Y+1,height:M-se+1};const ce=N[j];ce.rect=A,ce.blend=1,ce.img=new Uint8Array(A.width*A.height*4),N[j-1].dispose==0?(L(l,u,w,ce.img,A.width,A.height,-A.x,-A.y,0),r(R,u,w,ce.img,A)):L(R,u,w,ce.img,A.width,A.height,-A.x,-A.y,0)}function r(d,u,w,N,j){L(d,u,w,N,j.width,j.height,-j.x,-j.y,2)}function o(d,u,w,N,j,A,b){const T=[];let f,l=[0,1,2,3,4];A!=-1?l=[A]:(u*N>5e5||w==1)&&(l=[0]),b&&(f={level:0});const D=er;for(var C=0;C<l.length;C++){for(let Y=0;Y<u;Y++)h(j,d,Y,N,w,l[C]);T.push(D.deflate(j,f))}let R,oe=1e9;for(C=0;C<T.length;C++)T[C].length<oe&&(R=C,oe=T[C].length);return T[R]}function h(d,u,w,N,j,A){const b=w*N;let T=b+w;if(d[T]=A,T++,A==0)if(N<500)for(var f=0;f<N;f++)d[T+f]=u[b+f];else d.set(new Uint8Array(u.buffer,b,N),T);else if(A==1){for(f=0;f<j;f++)d[T+f]=u[b+f];for(f=j;f<N;f++)d[T+f]=u[b+f]-u[b+f-j]+256&255}else if(w==0){for(f=0;f<j;f++)d[T+f]=u[b+f];if(A==2)for(f=j;f<N;f++)d[T+f]=u[b+f];if(A==3)for(f=j;f<N;f++)d[T+f]=u[b+f]-(u[b+f-j]>>1)+256&255;if(A==4)for(f=j;f<N;f++)d[T+f]=u[b+f]-$(u[b+f-j],0,0)+256&255}else{if(A==2)for(f=0;f<N;f++)d[T+f]=u[b+f]+256-u[b+f-N]&255;if(A==3){for(f=0;f<j;f++)d[T+f]=u[b+f]+256-(u[b+f-N]>>1)&255;for(f=j;f<N;f++)d[T+f]=u[b+f]+256-(u[b+f-N]+u[b+f-j]>>1)&255}if(A==4){for(f=0;f<j;f++)d[T+f]=u[b+f]+256-$(0,u[b+f-N],0)&255;for(f=j;f<N;f++)d[T+f]=u[b+f]+256-$(u[b+f-j],u[b+f-N],u[b+f-j-N])&255}}}function _(d,u){const w=new Uint8Array(d),N=w.slice(0),j=new Uint32Array(N.buffer),A=E(N,u),b=A[0],T=A[1],f=w.length,l=new Uint8Array(f>>2);let D;if(w.length<2e7)for(var C=0;C<f;C+=4)D=v(b,R=w[C]*(1/255),oe=w[C+1]*(1/255),Y=w[C+2]*(1/255),se=w[C+3]*(1/255)),l[C>>2]=D.ind,j[C>>2]=D.est.rgba;else for(C=0;C<f;C+=4){var R=w[C]*.00392156862745098,oe=w[C+1]*(1/255),Y=w[C+2]*(1/255),se=w[C+3]*(1/255);for(D=b;D.left;)D=P(D.est,R,oe,Y,se)<=0?D.left:D.right;l[C>>2]=D.ind,j[C>>2]=D.est.rgba}return{abuf:N.buffer,inds:l,plte:T}}function E(d,u,w){w==null&&(w=1e-4);const N=new Uint32Array(d.buffer),j={i0:0,i1:d.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=U(d,j.i0,j.i1),j.est=g(j.bst);const A=[j];for(;A.length<u;){let T=0,f=0;for(var b=0;b<A.length;b++)A[b].est.L>T&&(T=A[b].est.L,f=b);if(T<w)break;const l=A[f],D=F(d,N,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=D||l.i1<=D){l.est.L=0;continue}const C={i0:l.i0,i1:D,bst:null,est:null,tdst:0,left:null,right:null};C.bst=U(d,C.i0,C.i1),C.est=g(C.bst);const R={i0:D,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(R.bst={R:[],m:[],N:l.bst.N-C.bst.N},b=0;b<16;b++)R.bst.R[b]=l.bst.R[b]-C.bst.R[b];for(b=0;b<4;b++)R.bst.m[b]=l.bst.m[b]-C.bst.m[b];R.est=g(R.bst),l.left=C,l.right=R,A[f]=C,A.push(R)}for(A.sort(((T,f)=>f.bst.N-T.bst.N)),b=0;b<A.length;b++)A[b].ind=b;return[j,A]}function v(d,u,w,N,j){if(d.left==null)return d.tdst=(function(C,R,oe,Y,se){const z=R-C[0],M=oe-C[1],ce=Y-C[2],Ne=se-C[3];return z*z+M*M+ce*ce+Ne*Ne})(d.est.q,u,w,N,j),d;const A=P(d.est,u,w,N,j);let b=d.left,T=d.right;A>0&&(b=d.right,T=d.left);const f=v(b,u,w,N,j);if(f.tdst<=A*A)return f;const l=v(T,u,w,N,j);return l.tdst<f.tdst?l:f}function P(d,u,w,N,j){const{e:A}=d;return A[0]*u+A[1]*w+A[2]*N+A[3]*j-d.eMq}function F(d,u,w,N,j,A){for(N-=4;w<N;){for(;S(d,w,j)<=A;)w+=4;for(;S(d,N,j)>A;)N-=4;if(w>=N)break;const b=u[w>>2];u[w>>2]=u[N>>2],u[N>>2]=b,w+=4,N-=4}for(;S(d,w,j)>A;)w-=4;return w+4}function S(d,u,w){return d[u]*w[0]+d[u+1]*w[1]+d[u+2]*w[2]+d[u+3]*w[3]}function U(d,u,w){const N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],A=w-u>>2;for(let b=u;b<w;b+=4){const T=d[b]*.00392156862745098,f=d[b+1]*(1/255),l=d[b+2]*(1/255),D=d[b+3]*(1/255);j[0]+=T,j[1]+=f,j[2]+=l,j[3]+=D,N[0]+=T*T,N[1]+=T*f,N[2]+=T*l,N[3]+=T*D,N[5]+=f*f,N[6]+=f*l,N[7]+=f*D,N[10]+=l*l,N[11]+=l*D,N[15]+=D*D}return N[4]=N[1],N[8]=N[2],N[9]=N[6],N[12]=N[3],N[13]=N[7],N[14]=N[11],{R:N,m:j,N:A}}function g(d){const{R:u}=d,{m:w}=d,{N}=d,j=w[0],A=w[1],b=w[2],T=w[3],f=N==0?0:1/N,l=[u[0]-j*j*f,u[1]-j*A*f,u[2]-j*b*f,u[3]-j*T*f,u[4]-A*j*f,u[5]-A*A*f,u[6]-A*b*f,u[7]-A*T*f,u[8]-b*j*f,u[9]-b*A*f,u[10]-b*b*f,u[11]-b*T*f,u[12]-T*j*f,u[13]-T*A*f,u[14]-T*b*f,u[15]-T*T*f],D=l,C=I;let R=[Math.random(),Math.random(),Math.random(),Math.random()],oe=0,Y=0;if(N!=0)for(let z=0;z<16&&(R=C.multVec(D,R),Y=Math.sqrt(C.dot(R,R)),R=C.sml(1/Y,R),!(z!=0&&Math.abs(Y-oe)<1e-9));z++)oe=Y;const se=[j*f,A*f,b*f,T*f];return{Cov:l,q:se,e:R,L:oe,eMq255:C.dot(C.sml(255,se),R),eMq:C.dot(R,se),rgba:(Math.round(255*se[3])<<24|Math.round(255*se[2])<<16|Math.round(255*se[1])<<8|Math.round(255*se[0])<<0)>>>0}}var I={multVec:(d,u)=>[d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]*u[3],d[4]*u[0]+d[5]*u[1]+d[6]*u[2]+d[7]*u[3],d[8]*u[0]+d[9]*u[1]+d[10]*u[2]+d[11]*u[3],d[12]*u[0]+d[13]*u[1]+d[14]*u[2]+d[15]*u[3]],dot:(d,u)=>d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]*u[3],sml:(d,u)=>[d*u[0],d*u[1],d*u[2],d*u[3]]};ft.encode=function(u,w,N,j,A,b,T){j==null&&(j=0),T==null&&(T=!1);const f=n(u,w,N,j,[!1,!1,!1,0,T,!1]);return x(f,-1),p(f,w,N,A,b)},ft.encodeLL=function(u,w,N,j,A,b,T,f){const l={ctype:0+(j==1?0:2)+(A==0?0:4),depth:b,frames:[]},D=(j+A)*b,C=D*w;for(let R=0;R<u.length;R++)l.frames.push({rect:{x:0,y:0,width:w,height:N},img:new Uint8Array(u[R]),blend:0,dispose:1,bpp:Math.ceil(D/8),bpl:Math.ceil(C/8)});return x(l,0,!0),p(l,w,N,T,f)},ft.encode.compress=n,ft.encode.dither=c,ft.quantize=_,ft.quantize.getKDtree=E,ft.quantize.getNearest=v})();const ys={toArrayBuffer(L,k){const $=L.width,i=L.height,s=$<<2,t=L.getContext("2d").getImageData(0,0,$,i),m=new Uint32Array(t.data.buffer),c=(32*$+31)/32<<2,p=c*i,x=122+p,n=new ArrayBuffer(x),a=new DataView(n),r=1<<20;let o,h,_,E,v=r,P=0,F=0,S=0;function U(d){a.setUint16(F,d,!0),F+=2}function g(d){a.setUint32(F,d,!0),F+=4}function I(d){F+=d}U(19778),g(x),I(4),g(122),g(108),g($),g(-i>>>0),U(1),U(32),g(3),g(p),g(2835),g(2835),I(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),(function d(){for(;P<i&&v>0;){for(E=122+P*c,o=0;o<s;)v--,h=m[S++],_=h>>>24,a.setUint32(E+o,h<<8|_),o+=4;P++}S<m.length?(v=r,setTimeout(d,ys._dly)):k(n)})()},toBlob(L,k){this.toArrayBuffer(L,($=>{k(new Blob([$],{type:"image/bmp"}))}))},_dly:9};var Xe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},tr={[Xe.CHROME]:16384,[Xe.FIREFOX]:11180,[Xe.DESKTOP_SAFARI]:16384,[Xe.IE]:8192,[Xe.IOS]:4096,[Xe.ETC]:8192};const ss=typeof window<"u",js=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,qt=ss&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),sr=(ss||js)&&(qt&&qt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Ns=(ss||js)&&(qt&&qt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function rs(L,k,$=Date.now()){return new Promise((i=>{const s=L.split(","),t=s[0].match(/:(.*?);/)[1],m=globalThis.atob(s[1]);let c=m.length;const p=new Uint8Array(c);for(;c--;)p[c]=m.charCodeAt(c);const x=new Blob([p],{type:t});x.name=k,x.lastModified=$,i(x)}))}function _s(L){return new Promise(((k,$)=>{const i=new Ns;i.onload=()=>k(i.result),i.onerror=s=>$(s),i.readAsDataURL(L)}))}function ks(L){return new Promise(((k,$)=>{const i=new Image;i.onload=()=>k(i),i.onerror=s=>$(s),i.src=L}))}function jt(){if(jt.cachedResult!==void 0)return jt.cachedResult;let L=Xe.ETC;const{userAgent:k}=navigator;return/Chrom(e|ium)/i.test(k)?L=Xe.CHROME:/iP(ad|od|hone)/i.test(k)&&/WebKit/i.test(k)?L=Xe.IOS:/Safari/i.test(k)?L=Xe.DESKTOP_SAFARI:/Firefox/i.test(k)?L=Xe.FIREFOX:(/MSIE/i.test(k)||document.documentMode)&&(L=Xe.IE),jt.cachedResult=L,jt.cachedResult}function As(L,k){const $=jt(),i=tr[$];let s=L,t=k,m=s*t;const c=s>t?t/s:s/t;for(;m>i*i;){const p=(i+s)/2,x=(i+t)/2;p<x?(t=x,s=x*c):(t=p*c,s=p),m=s*t}return{width:s,height:t}}function Qt(L,k){let $,i;try{if($=new OffscreenCanvas(L,k),i=$.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{$=document.createElement("canvas"),i=$.getContext("2d")}return $.width=L,$.height=k,[$,i]}function Ss(L,k){const{width:$,height:i}=As(L.width,L.height),[s,t]=Qt($,i);return k&&/jpe?g/.test(k)&&(t.fillStyle="white",t.fillRect(0,0,s.width,s.height)),t.drawImage(L,0,0,s.width,s.height),s}function Bt(){return Bt.cachedResult!==void 0||(Bt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Bt.cachedResult}function Kt(L,k={}){return new Promise((function($,i){let s,t;var m=function(){try{return t=Ss(s,k.fileType||L.type),$([s,t])}catch(p){return i(p)}},c=function(p){try{var x=function(n){try{throw n}catch(a){return i(a)}};try{let n;return _s(L).then((function(a){try{return n=a,ks(n).then((function(r){try{return s=r,(function(){try{return m()}catch(o){return i(o)}})()}catch(o){return x(o)}}),x)}catch(r){return x(r)}}),x)}catch(n){x(n)}}catch(n){return i(n)}};try{if(Bt()||[Xe.DESKTOP_SAFARI,Xe.MOBILE_SAFARI].includes(jt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(L).then((function(p){try{return s=p,m()}catch{return c()}}),c)}catch{c()}}))}function Yt(L,k,$,i,s=1){return new Promise((function(t,m){let c;if(k==="image/png"){let x,n,a;return x=L.getContext("2d"),{data:n}=x.getImageData(0,0,L.width,L.height),a=ft.encode([n.buffer],L.width,L.height,4096*s),c=new Blob([a],{type:k}),c.name=$,c.lastModified=i,p.call(this)}{let x=function(){return p.call(this)};if(k==="image/bmp")return new Promise((n=>ys.toBlob(L,n))).then((function(n){try{return c=n,c.name=$,c.lastModified=i,x.call(this)}catch(a){return m(a)}}).bind(this),m);{let n=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&L instanceof OffscreenCanvas)return L.convertToBlob({type:k,quality:s}).then((function(a){try{return c=a,c.name=$,c.lastModified=i,n.call(this)}catch(r){return m(r)}}).bind(this),m);{let a;return a=L.toDataURL(k,s),rs(a,$,i).then((function(r){try{return c=r,n.call(this)}catch(o){return m(o)}}).bind(this),m)}}}function p(){return t(c)}}))}function ht(L){L.width=0,L.height=0}function Ct(){return new Promise((function(L,k){let $,i,s,t;return Ct.cachedResult!==void 0?L(Ct.cachedResult):rs("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(m){try{return $=m,Kt($).then((function(c){try{return i=c[1],Yt(i,$.type,$.name,$.lastModified).then((function(p){try{return s=p,ht(i),Kt(s).then((function(x){try{return t=x[0],Ct.cachedResult=t.width===1&&t.height===2,L(Ct.cachedResult)}catch(n){return k(n)}}),k)}catch(x){return k(x)}}),k)}catch(p){return k(p)}}),k)}catch(c){return k(c)}}),k)}))}function Cs(L){return new Promise(((k,$)=>{const i=new Ns;i.onload=s=>{const t=new DataView(s.target.result);if(t.getUint16(0,!1)!=65496)return k(-2);const m=t.byteLength;let c=2;for(;c<m;){if(t.getUint16(c+2,!1)<=8)return k(-1);const p=t.getUint16(c,!1);if(c+=2,p==65505){if(t.getUint32(c+=2,!1)!=1165519206)return k(-1);const x=t.getUint16(c+=6,!1)==18761;c+=t.getUint32(c+4,x);const n=t.getUint16(c,x);c+=2;for(let a=0;a<n;a++)if(t.getUint16(c+12*a,x)==274)return k(t.getUint16(c+12*a+8,x))}else{if((65280&p)!=65280)break;c+=t.getUint16(c,!1)}}return k(-1)},i.onerror=s=>$(s),i.readAsArrayBuffer(L)}))}function Ts(L,k){const{width:$}=L,{height:i}=L,{maxWidthOrHeight:s}=k;let t,m=L;return isFinite(s)&&($>s||i>s)&&([m,t]=Qt($,i),$>i?(m.width=s,m.height=i/$*s):(m.width=$/i*s,m.height=s),t.drawImage(L,0,0,m.width,m.height),ht(L)),m}function Ls(L,k){const{width:$}=L,{height:i}=L,[s,t]=Qt($,i);switch(k>4&&k<9?(s.width=i,s.height=$):(s.width=$,s.height=i),k){case 2:t.transform(-1,0,0,1,$,0);break;case 3:t.transform(-1,0,0,-1,$,i);break;case 4:t.transform(1,0,0,-1,0,i);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,i,0);break;case 7:t.transform(0,-1,-1,0,i,$);break;case 8:t.transform(0,-1,1,0,0,$)}return t.drawImage(L,0,0,$,i),ht(L),s}function bs(L,k,$=0){return new Promise((function(i,s){let t,m,c,p,x,n,a,r,o,h,_,E,v,P,F,S,U,g,I,d;function u(N=5){if(k.signal&&k.signal.aborted)throw k.signal.reason;t+=N,k.onProgress(Math.min(t,100))}function w(N){if(k.signal&&k.signal.aborted)throw k.signal.reason;t=Math.min(Math.max(N,t),100),k.onProgress(t)}return t=$,m=k.maxIteration||10,c=1024*k.maxSizeMB*1024,u(),Kt(L,k).then((function(N){try{return[,p]=N,u(),x=Ts(p,k),u(),new Promise((function(j,A){var b;if(!(b=k.exifOrientation))return Cs(L).then((function(f){try{return b=f,T.call(this)}catch(l){return A(l)}}).bind(this),A);function T(){return j(b)}return T.call(this)})).then((function(j){try{return n=j,u(),Ct().then((function(A){try{return a=A?x:Ls(x,n),u(),r=k.initialQuality||1,o=k.fileType||L.type,Yt(a,o,L.name,L.lastModified,r).then((function(b){try{{let f=function(){if(m--&&(F>c||F>v)){let D,C;return D=d?.95*I.width:I.width,C=d?.95*I.height:I.height,[U,g]=Qt(D,C),g.drawImage(I,0,0,D,C),r*=o==="image/png"?.85:.95,Yt(U,o,L.name,L.lastModified,r).then((function(R){try{return S=R,ht(I),I=U,F=S.size,w(Math.min(99,Math.floor((P-F)/(P-c)*100))),f}catch(oe){return s(oe)}}),s)}return[1]},l=function(){return ht(I),ht(U),ht(x),ht(a),ht(p),w(100),i(S)};if(h=b,u(),_=h.size>c,E=h.size>L.size,!_&&!E)return w(100),i(h);var T;return v=L.size,P=h.size,F=P,I=a,d=!k.alwaysKeepResolution&&_,(T=(function(D){for(;D;){if(D.then)return void D.then(T,s);try{if(D.pop){if(D.length)return D.pop()?l.call(this):D;D=f}else D=D.call(this)}catch(C){return s(C)}}}).bind(this))(f)}}catch(f){return s(f)}}).bind(this),s)}catch(b){return s(b)}}).bind(this),s)}catch(A){return s(A)}}).bind(this),s)}catch(j){return s(j)}}).bind(this),s)}))}const rr=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let es;function nr(L,k){return new Promise((($,i)=>{es||(es=(function(m){const c=[];return c.push(m),URL.createObjectURL(new Blob(c))})(rr));const s=new Worker(es);s.addEventListener("message",(function(m){if(k.signal&&k.signal.aborted)s.terminate();else if(m.data.progress===void 0){if(m.data.error)return i(new Error(m.data.error)),void s.terminate();$(m.data.file),s.terminate()}else k.onProgress(m.data.progress)})),s.addEventListener("error",i),k.signal&&k.signal.addEventListener("abort",(()=>{i(k.signal.reason),s.terminate()})),s.postMessage({file:L,imageCompressionLibUrl:k.libURL,options:{...k,onProgress:void 0,signal:void 0}})}))}function qe(L,k){return new Promise((function($,i){let s,t,m,c,p,x;if(s={...k},m=0,{onProgress:c}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=o=>{m=o,typeof c=="function"&&c(m)},!(L instanceof Blob||L instanceof sr))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(L.type))return i(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||x)return bs(L,s).then((function(o){try{return t=o,r.call(this)}catch(h){return i(h)}}).bind(this),i);var n=(function(){try{return r.call(this)}catch(o){return i(o)}}).bind(this),a=function(o){try{return bs(L,s).then((function(h){try{return t=h,n()}catch(_){return i(_)}}),i)}catch(h){return i(h)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",nr(L,s).then((function(o){try{return t=o,n()}catch{return a()}}),a)}catch{a()}function r(){try{t.name=L.name,t.lastModified=L.lastModified}catch{}try{s.preserveExif&&L.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===L.type)&&(t=vs(L,t))}catch{}return $(t)}}))}qe.getDataUrlFromFile=_s,qe.getFilefromDataUrl=rs,qe.loadImage=ks,qe.drawImageInCanvas=Ss,qe.drawFileInCanvas=Kt,qe.canvasToFile=Yt,qe.getExifOrientation=Cs,qe.handleMaxWidthOrHeight=Ts,qe.followExifOrientation=Ls,qe.cleanupCanvasMemory=ht,qe.isAutoOrientationInBrowser=Ct,qe.approximateBelowMaximumCanvasSizeOfBrowser=As,qe.copyExifWithoutOrientation=vs,qe.getBrowserName=jt,qe.version="2.0.2";const Ot=8;function ar(L,k){if(L==="FINISHED")return"FT";if(L==="PAUSED")return"HT";if(L==="IN_PLAY"){if(k==null)return"LIVE";if(k>=1&&k<=45)return"First Half";if(k>45&&k<=50)return"45+";if(k>50)return"Second Half"}return"LIVE"}function ws(L){const k=(L||"?").trim().split(/\s+/);return k.length?k.length===1?k[0].slice(0,1).toUpperCase():(k[0][0]+k[k.length-1][0]).toUpperCase():"?"}function ts(L){return L.result==="H"||L.result==="D"||L.result==="A"?L.result:typeof L.home_goals=="number"&&typeof L.away_goals=="number"?L.home_goals>L.away_goals?"H":L.home_goals<L.away_goals?"A":"D":null}function zt({letter:L,correct:k,unicorn:$,hasSubmitted:i,isLive:s,isOngoing:t,isFinished:m}){let c;return k===!0?s||t?c="bg-emerald-600 text-white border-emerald-600 animate-pulse shadow-lg shadow-emerald-500/50":m?c="bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":c="bg-emerald-600 text-white border-emerald-600":i?c="bg-emerald-600 text-white border-emerald-600":c="bg-slate-100 text-slate-600 border-slate-200",e.jsxs("span",{className:["inline-flex items-center justify-center h-5 min-w-[18px] px-1.5","rounded-full border text-[11px] font-semibold mb-0.5","align-middle",c].join(" "),title:$?"Unicorn!":void 0,children:[L,$?e.jsx("span",{className:"ml-1",children:""}):null]})}function ir({chat:L,userId:k,nameById:$,isMember:i,newMsg:s,setNewMsg:t,onSend:m,leagueCode:c,memberCount:p,maxMembers:x,notificationStatus:n}){const a=G.useRef(null),r=G.useRef(null),o=G.useRef(null),h=G.useRef(null),[_,E]=G.useState(0),v=()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},P=G.useCallback((U=[0,100,300,500,700])=>{requestAnimationFrame(()=>{U.forEach(g=>{setTimeout(()=>v(),g)})})},[]);G.useEffect(()=>{L.length>0&&setTimeout(()=>v(),100)},[L.length]),G.useEffect(()=>{!s&&o.current&&(o.current.style.height="auto",o.current.style.height="42px")},[s]),G.useEffect(()=>{const U=window.visualViewport;if(!U)return;let g=null,I=0;const d=()=>{g&&(clearTimeout(g),g=null),g=setTimeout(()=>{const N=window.innerHeight,j=U.height,A=U.offsetTop+j,b=N-A;Math.abs(b-I)<10&&b>0||(I=b,b>100?(E(b),setTimeout(()=>{const T=h.current?.offsetHeight||100,f=b+T+20;a.current&&(a.current.style.paddingBottom=`${f}px`,a.current.offsetHeight,P([0,100,300,500,700]))},100)):(E(0),a.current&&(a.current.style.paddingBottom="",a.current.offsetHeight,P([0,50,150,300]))))},50)};U.addEventListener("resize",d),U.addEventListener("scroll",d);const u=()=>{setTimeout(d,100),setTimeout(d,300)},w=setTimeout(()=>{o.current&&o.current.addEventListener("focus",u)},100);return d(),()=>{g&&clearTimeout(g),clearTimeout(w),U.removeEventListener("resize",d),U.removeEventListener("scroll",d),o.current&&o.current.removeEventListener("focus",u)}},[]);const F=()=>{const U=window.visualViewport;U&&setTimeout(()=>{const g=window.innerHeight,I=U.height,d=U.offsetTop+I,u=g-d;u>100&&(E(u),setTimeout(()=>{const w=h.current?.offsetHeight||100,N=u+w+20;a.current&&(a.current.style.paddingBottom=`${N}px`,a.current.offsetHeight,P([0,200,400,600,800]))},100))},100),P([200,400,600])},S=U=>{const g=U.target;!(g.tagName==="A"||g.tagName==="BUTTON"||g.closest("a, button"))&&o.current&&document.activeElement===o.current&&o.current.blur()};return e.jsxs("div",{className:"flex flex-col chat-container",style:{height:"100%"},children:[e.jsxs("div",{ref:a,className:"flex-1 overflow-y-auto px-3 pt-3 pb-4 min-h-0 messages-container",onClick:S,style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",marginBottom:_>0?"0":"auto",cursor:"pointer"},children:[L.map(U=>{const g=U.user_id===k,I=$.get(U.user_id)??"Unknown",d=new Date(U.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:`mb-2 flex ${g?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[75%] rounded-lg px-3 py-2 text-sm ${g?"bg-[#1C8376] text-white":"bg-slate-100 text-slate-900"}`,children:[!g&&e.jsx("div",{className:"font-semibold text-xs text-slate-600 mb-1",children:I}),e.jsx("div",{className:"whitespace-pre-wrap break-words",children:U.content}),e.jsx("div",{className:`mt-1 text-[10px] ${g?"text-emerald-100":"text-slate-500"}`,children:d})]})},U.id)}),e.jsx("div",{ref:r,style:{height:"1px",width:"100%"}})]}),e.jsxs("div",{ref:h,className:"flex-shrink-0 bg-white border-t border-slate-200 px-4 py-3",style:{paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))",position:_>0?"fixed":"relative",bottom:_>0?`${_}px`:"auto",left:_>0?"0":"auto",right:_>0?"0":"auto",width:_>0?"100%":"auto",zIndex:_>0?1e3:"auto"},children:[i?e.jsxs("form",{onSubmit:U=>{U.preventDefault(),m()},className:"flex items-center gap-2",children:[e.jsx("textarea",{ref:o,value:s,onChange:U=>{t(U.target.value),o.current&&(o.current.style.height="auto",o.current.style.height=`${Math.min(o.current.scrollHeight,120)}px`)},onFocus:F,onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),s.trim()&&m())},placeholder:"Start typing...",maxLength:2e3,rows:1,className:"flex-1 rounded-xl border border-slate-300 px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-transparent resize-none overflow-hidden",style:{minHeight:"42px",maxHeight:"120px",lineHeight:"1.5"}}),e.jsx("button",{type:"submit",className:"flex-shrink-0 w-10 h-10 rounded-full bg-[#1C8376] text-white flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:!s.trim(),style:{backgroundColor:s.trim()?"#1C8376":"#94a3b8"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]}):e.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 text-amber-800 p-3 text-sm",children:"Join this league to chat with other members."}),n&&e.jsx("div",{className:`w-full rounded px-2 py-1 text-xs mt-2 ${n.type==="success"?"bg-green-50 text-green-700 border border-green-200":n.type==="warning"?"bg-amber-50 text-amber-700 border border-amber-200":"bg-red-50 text-red-700 border border-red-200"}`,children:n.message})]})]})}function ur(){const{code:L=""}=Gs(),{user:k}=qs(),[$]=G.useState(()=>{const y=localStorage.getItem("oldSchoolMode");return y?JSON.parse(y):!1});G.useEffect(()=>{localStorage.setItem("oldSchoolMode",JSON.stringify($))},[$]),G.useEffect(()=>{const y=Q=>{const Z=Q.target;(Z.tagName==="INPUT"||Z.tagName==="TEXTAREA")&&setTimeout(()=>{window.scrollTo(0,0);const ee=document.querySelector(".league-header-fixed");ee&&(ee.style.top="0")},100)},W=()=>{const Q=document.querySelector(".league-header-fixed");Q&&(Q.style.top="0")};return document.addEventListener("focusin",y),window.addEventListener("resize",W),window.addEventListener("orientationchange",W),()=>{document.removeEventListener("focusin",y),window.removeEventListener("resize",W),window.removeEventListener("orientationchange",W)}},[]);const[i,s]=G.useState(null),[t,m]=G.useState([]),[c,p]=G.useState(!0),[x,n]=G.useState("chat"),[a,r]=G.useState(!1),o=G.useRef(!1),[h,_]=G.useState(!1),[E,v]=G.useState(!1),[P,F]=G.useState(!1),[S,U]=G.useState(null),[g,I]=G.useState(null),[d,u]=G.useState(null),[w,N]=G.useState([]),j=G.useRef({}),A=G.useRef(new Map),[b,T]=G.useState(new Set),[f,l]=G.useState(!1),[D,C]=G.useState(!1),[R,oe]=G.useState(!1),[Y,se]=G.useState(!1),[z,M]=G.useState(!1),[ce,Ne]=G.useState(!1),[ye,xe]=G.useState(null),[Ae,Te]=G.useState(!1),[De,it]=G.useState(!1),[st,Le]=G.useState(!1),[Pe,Se]=G.useState(!1),[ke,Ee]=G.useState(!1),[ze,Ue]=G.useState(!1),[Ke,Ie]=G.useState(!1),[_e,Be]=G.useState(null),[rt,vt]=G.useState(!1),[Re,mt]=G.useState(!1),[Me,et]=G.useState(null),[Qe,Je]=G.useState([]),[Ve,ot]=G.useState(""),[Tt,tt]=G.useState(null),Lt=G.useMemo(()=>!!k?.id&&t.some(y=>y.id===k.id),[k?.id,t]),Pt=G.useMemo(()=>{const y=new Map;return t.forEach(W=>y.set(W.id,W.name)),y},[t]),[gt,Jt]=G.useState(new Map);G.useEffect(()=>{(async()=>{const y=new Map,{data:W}=await me.from("fixtures").select("gw, kickoff_time").order("gw",{ascending:!0}),{data:Q}=await me.from("test_api_fixtures").select("test_gw, kickoff_time").order("fixture_index",{ascending:!0}),Z=new Map;if(W&&W.forEach(ee=>{(!Z.has(ee.gw)||ee.kickoff_time&&new Date(ee.kickoff_time)<new Date(Z.get(ee.gw)))&&ee.kickoff_time&&Z.set(ee.gw,ee.kickoff_time)}),Q&&Q.length>0){const ee=Q.find(ae=>ae.kickoff_time)?.kickoff_time;if(ee){const ae=Z.get(1);(!ae||new Date(ee)<new Date(ae))&&Z.set(1,ee)}}Z.forEach((ee,ae)=>{const K=new Date(ee),de=new Date(K.getTime()-4500*1e3);y.set(ae,de)}),Jt(y)})()},[]),G.useEffect(()=>{const y=W=>{const Q=W.target;f&&!Q.closest(".gw-dropdown-container")&&l(!1)};return f&&document.addEventListener("click",y),()=>document.removeEventListener("click",y)},[f]),G.useEffect(()=>{let y=!0;return(async()=>{const{data:W}=await me.from("meta").select("current_gw").eq("id",1).maybeSingle();if(!y)return;U(W?.current_gw??null);const{data:Q}=await me.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1);if(!y)return;I(Q&&Q.length?Q[0].gw:null);const{data:Z}=await me.from("gw_results").select("gw").order("gw",{ascending:!1});if(!y)return;const ee=Z?[...new Set(Z.map(ae=>ae.gw))].sort((ae,K)=>K-ae):[];N(ee),ee.length>0&&u(ee[0])})(),()=>{y=!1}},[]);const We=G.useMemo(()=>t.map(y=>y.id),[t]),[pe,xt]=G.useState([]),[lt,Nt]=G.useState([]),[ct,dt]=G.useState([]),[ns,Vt]=G.useState([]),as=G.useMemo(()=>!pe||pe.length===0?[]:pe.map(y=>y.api_match_id).filter(y=>y!=null),[pe]),Rt=G.useMemo(()=>i?.name==="API Test",[i?.name]),[nt,is]=G.useState(null);G.useEffect(()=>{if(!Rt){is(null);return}let y=!0;return(async()=>{const{data:W}=await me.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle();let Q=W?.current_test_gw??1;if(Q&&Q!==1){const{data:Z}=await me.from("test_api_fixtures").select("test_gw").eq("test_gw",Q).limit(1).maybeSingle();if(!Z){const{data:ee}=await me.from("test_api_fixtures").select("test_gw").eq("test_gw",1).limit(1).maybeSingle();ee&&(Q=1)}}y&&is(Q)})(),()=>{y=!1}},[Rt]);const Es=G.useMemo(()=>Rt&&nt!==null?nt:d||S||void 0,[Rt,nt,d,S]),{liveScores:os}=Qs(Es,as.length>0?as:void 0),Ze=G.useMemo(()=>{const y={};return!pe||pe.length===0||pe.forEach(W=>{const Q=W.api_match_id;if(Q){const Z=os.get(Q);Z&&(y[W.fixture_index]={homeScore:Z.home_score??0,awayScore:Z.away_score??0,status:Z.status||"SCHEDULED",minute:Z.minute??null})}}),y},[os,pe]),[Zt,Et]=G.useState([]),[ls,Ut]=G.useState(!1);G.useEffect(()=>{let y=!0;return(async()=>{p(!0);const{data:W}=await me.from("leagues").select("id,name,code,created_at").eq("code",L).maybeSingle();if(!y)return;if(!W){s(null),m([]),p(!1);return}s(W);const{data:Q}=await me.from("league_members").select("users(id,name),created_at").eq("league_id",W.id).order("created_at",{ascending:!0}),Z=Q?.map(K=>({id:K.users.id,name:K.users.name??"(no name)"}))??[],ee=[...Z].sort((K,de)=>K.name.localeCompare(de.name));m(ee);const ae=Z[0];et(ae),k?.id&&!Z.some(K=>K.id===k.id)&&Le(!0),p(!1)})(),()=>{y=!1}},[L]),G.useEffect(()=>{},[i,x]);const cs=G.useCallback(async(y,W=!1)=>{const{data:Q,error:Z}=await me.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",y).order("created_at",{ascending:!1}).limit(500);if(!Z&&Q){const ae=(Q??[]).reverse();W&&console.log("[Chat] Loaded messages:",ae.length,"from database (most recent)"),Je(K=>{const de=new Set(K.map(ie=>ie.id)),we=ae.filter(ie=>!de.has(ie.id));if(K.length===0)return W&&console.log("[Chat] Initial load, setting",ae.length,"messages"),ae;const re=[...K,...we].sort((ie,be)=>new Date(ie.created_at).getTime()-new Date(be.created_at).getTime()),ne=re.length>500?re.slice(-500):re;return W&&console.log("[Chat] Merged messages. Previous:",K.length,"New from DB:",we.length,"Total:",re.length,"After limit:",ne.length),ne})}else Z&&console.error("[Chat] Error loading messages:",Z)},[]);G.useEffect(()=>{if(!i?.id)return;let y=!0;const W=async()=>{y&&await cs(i.id,!0)};W();const Q=me.channel(`league-messages:${i.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${i.id}`},ae=>{const K=ae.new;console.log("[Chat] Realtime message received:",K.id,K.content.substring(0,50)),Je(de=>{if(de.some(B=>B.id===K.id))return console.log("[Chat] Message already exists, skipping"),de;const we=[...de,K];return console.log("[Chat] Added realtime message. Total messages:",we.length),we})}).subscribe(),Z=()=>{!document.hidden&&i?.id&&y&&(console.log("[Chat] App became visible, refetching messages..."),W())},ee=()=>{i?.id&&y&&(console.log("[Chat] Window gained focus, refetching messages..."),W())};return document.addEventListener("visibilitychange",Z),window.addEventListener("focus",ee),()=>{y=!1,me.removeChannel(Q),document.removeEventListener("visibilitychange",Z),window.removeEventListener("focus",ee)}},[i?.id]),G.useEffect(()=>{if(x!=="chat"||!i?.id||!k?.id)return;cs(i.id,!1),(async()=>{await me.from("league_message_reads").upsert({league_id:i.id,user_id:k.id,last_read_at:new Date().toISOString()},{onConflict:"league_id,user_id"})})()},[x,i?.id,k?.id]);const Us=async y=>{if(!i||!k?.id||!It){xe("Only admins can upload avatars");return}Ne(!0),xe(null),Te(!1);try{const{data:{session:W},error:Q}=await me.auth.getSession();if(Q||!W)throw console.error("[Avatar Upload] No Supabase session:",Q),new Error("You must be logged in to upload avatars. Please refresh the page and try again.");const Z="https://gyjagrtwrhctmgkootjj.supabase.co",ee=Z?.match(/https:\/\/([^.]+)\.supabase\.co/)?.[1];if(console.log("[Avatar Upload] Supabase project:",{url:Z,projectRef:ee,userId:W.user.id}),!["image/png","image/jpeg","image/jpg","image/webp"].includes(y.type))throw new Error("Invalid file type. Please upload PNG, JPG, or WebP images.");const K=2*1024*1024;if(y.size>K)throw new Error("File size too large. Please upload an image smaller than 2MB.");let de=y;const we=60,B=80*1024;console.log(`[Avatar Upload] Starting compression. Original size: ${(y.size/1024).toFixed(1)}KB`);const ne=document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0?"image/webp":"image/jpeg",ie=[{maxWidthOrHeight:256,initialQuality:.85,format:ne},{maxWidthOrHeight:256,initialQuality:.75,format:ne},{maxWidthOrHeight:256,initialQuality:.65,format:"image/jpeg"},{maxWidthOrHeight:200,initialQuality:.6,format:"image/jpeg"},{maxWidthOrHeight:200,initialQuality:.5,format:"image/jpeg"}];let be=!1;for(let V=0;V<ie.length;V++){const X=ie[V];try{const je={maxSizeMB:we/1024,maxWidthOrHeight:X.maxWidthOrHeight,useWebWorker:!0,fileType:X.format,initialQuality:X.initialQuality};de=await qe(y,je);const le=de.size/1024;if(console.log(`[Avatar Upload] Attempt ${V+1}: ${le.toFixed(1)}KB (target: ${we}KB, format: ${X.format})`),de.size<=B){be=!0,console.log(`[Avatar Upload] Compression successful: ${le.toFixed(1)}KB`);break}}catch(je){console.warn(`[Avatar Upload] Compression attempt ${V+1} failed:`,je.message)}}if(!be||de.size>B){const V=(de.size/1024).toFixed(1);if(de.size<=100*1024)console.warn(`[Avatar Upload] Image slightly over target (${V}KB) but acceptable`),be=!0;else throw new Error(`Image is too large (${V}KB). Please use a smaller or simpler image. Recommended: images under 2MB before upload, with less detail or fewer colors.`)}let H="jpg";de.type.includes("webp")?H="webp":de.type.includes("png")&&(H="png");const O=`${i.id}.${H}`,{data:q,error:te}=await me.storage.listBuckets();if(te)console.warn("[Avatar Upload] Could not list buckets (this is OK if you lack list permissions):",te);else{const V=q?.some(X=>{const je=X.id==="league-avatars",le=X.name==="league-avatars";return(je||le)&&console.log("[Avatar Upload] Found bucket:",{id:X.id,name:X.name}),je||le});console.log("[Avatar Upload] Available buckets:",q?.map(X=>({id:X.id,name:X.name}))),q&&q.length>0&&!V&&console.warn(`[Avatar Upload] Bucket 'league-avatars' not in list. Available: ${q.map(X=>X.id||X.name).join(", ")}`)}console.log("[Avatar Upload] Attempting upload to bucket: league-avatars");const{error:ue,data:J}=await me.storage.from("league-avatars").upload(O,de,{upsert:!0,contentType:de.type});if(ue)throw console.error("[Avatar Upload] Upload error details:",{message:ue.message,error:ue}),new Error(`Upload failed: ${ue.message}`);console.log("[Avatar Upload] Upload successful:",J);const{data:he}=me.storage.from("league-avatars").getPublicUrl(O);if(!he?.publicUrl)throw new Error("Failed to get public URL for uploaded avatar");const{error:ge}=await me.from("leagues").update({avatar:he.publicUrl}).eq("id",i.id);if(ge)throw new Error(`Failed to update league: ${ge.message}`);const{data:fe}=await me.from("leagues").select("*").eq("id",i.id).single();fe&&s(fe),Te(!0),setTimeout(()=>{M(!1),Te(!1)},2e3)}catch(W){console.error("Avatar upload error:",W),xe(W.message||"Failed to upload avatar. Please try again.")}finally{Ne(!1)}},Is=async()=>{if(!(!i||!k?.id||!It)){Ne(!0),xe(null);try{const{error:y}=await me.from("leagues").update({avatar:null}).eq("id",i.id);if(y)throw new Error(`Failed to remove avatar: ${y.message}`);const{data:W}=await me.from("leagues").select("*").eq("id",i.id).single();W&&s(W),M(!1)}catch(y){console.error("Remove avatar error:",y),xe(y.message||"Failed to remove avatar. Please try again.")}finally{Ne(!1)}}};async function Ms(){if(!(!i||!k?.id)){F(!0);try{const{error:y}=await me.from("league_members").delete().eq("league_id",i.id).eq("user_id",k.id);if(y)throw y;window.location.href="/leagues"}catch(y){console.error("Error leaving league:",y),alert("Failed to leave league. Please try again.")}finally{F(!1),v(!1)}}}async function Fs(){if(!(!i||!k?.id)){Se(!0);try{if(t.length>=Ot){alert("League is full (max 8 members)."),Le(!1);return}const{error:y}=await me.from("league_members").insert({league_id:i.id,user_id:k.id});if(y)throw y;window.location.reload()}catch(y){alert(y?.message??"Failed to join league.")}finally{Se(!1)}}}const It=G.useMemo(()=>i?.created_by===k?.id||Me&&Me.id===k?.id&&!i?.created_by,[i?.created_by,k?.id,Me]),Ds=G.useMemo(()=>i?.created_by?t.find(y=>y.id===i.created_by)?.name||"Unknown":Me?Me.name:"Unknown",[i?.created_by,t,Me]);async function Ps(){if(!(!_e||!i||!k?.id)){vt(!0);try{const{error:y}=await me.from("league_members").delete().eq("league_id",i.id).eq("user_id",_e.id);if(y)throw y;window.location.reload()}catch(y){alert(y?.message??"Failed to remove member.")}finally{vt(!1),Ue(!1),Be(null)}}}async function Rs(){if(!(!i||!k?.id)){mt(!0);try{const{error:y}=await me.from("league_members").delete().eq("league_id",i.id);if(y)throw y;const{error:W}=await me.from("leagues").delete().eq("id",i.id);if(W)throw W;window.location.href="/leagues"}catch(y){alert(y?.message??"Failed to end league.")}finally{mt(!1),Ie(!1)}}}function ds(){if(!i)return;const y=`Join my mini league "${i.name}" on TotL!`,W=`${window.location.origin}/league/${i.code}`;navigator.share?navigator.share({title:`Join ${i.name}`,text:y,url:W}).catch(console.error):navigator.clipboard.writeText(`${y}

${W}`).then(()=>{alert("League link copied to clipboard!")}).catch(()=>{prompt("Share this league code:",i.code)})}const $s=G.useCallback(async()=>{if(!i||!k?.id)return;const y=Ve.trim();if(!y)return;ot("");const{data:W,error:Q}=await me.from("league_messages").insert({league_id:i.id,user_id:k.id,content:y}).select("id, league_id, user_id, content, created_at").single();Q?(console.error(Q),alert("Failed to send message.")):W&&Je(ee=>[...ee,W]),window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||setTimeout(async()=>{try{const ee=k.user_metadata?.display_name||k.email||"User",ae=await fetch("/.netlify/functions/notifyLeagueMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:i.id,senderId:k.id,senderName:ee,content:y})}),K=await ae.json().catch(()=>({}));K.ok===!0?K.sent&&K.sent>0?tt({message:` Message sent to ${K.sent} device${K.sent===1?"":"s"}`,type:"success"}):K.message==="No subscribed devices"?tt({message:` No subscribed devices (${K.eligibleRecipients||0} eligible recipient${K.eligibleRecipients===1?"":"s"})`,type:"warning"}):K.message==="No devices"?tt({message:` No devices registered (${K.eligibleRecipients||0} eligible recipient${K.eligibleRecipients===1?"":"s"})`,type:"warning"}):K.message==="No eligible recipients"?tt({message:" All members are currently active",type:"success"}):tt({message:` ${K.message||"Notification sent"}`,type:"success"}):K.ok===!1||K.error?tt({message:` Failed to send notification: ${K.error||"Unknown error"}`,type:"error"}):ae.ok||tt({message:` Notification error (HTTP ${ae.status})`,type:"error"}),setTimeout(()=>tt(null),5e3)}catch(ee){console.error("[Chat] Notification exception:",ee),tt({message:" Failed to send notification",type:"error"}),setTimeout(()=>tt(null),5e3)}},100)},[i,k,Ve,ot,Je,tt]);G.useEffect(()=>{let y=!0;return(async()=>{const W=i?.name==="API Test";let Q=nt??1;if(W){const{data:B}=await me.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle();if(Q=B?.current_test_gw??1,Q&&Q!==1){const{data:re}=await me.from("test_api_fixtures").select("test_gw").eq("test_gw",Q).limit(1).maybeSingle();if(re)console.log("[League] Using current_test_gw from meta:",Q);else{const{data:ne}=await me.from("test_api_fixtures").select("test_gw").eq("test_gw",1).limit(1).maybeSingle();ne&&(Q=1,console.log("[League] No fixtures for current_test_gw, falling back to GW T1"))}}else console.log("[League] Using GW T1 or current_test_gw:",Q)}const Z=W&&(x==="gw"||x==="gwr");console.log("[League] Data fetch:",{isApiTestLeague:W,tab:x,useTestFixtures:Z,leagueName:i?.name,testGwForData:Q,willUseTestTables:Z,willUseMainTables:!Z});let ee=x==="gwr"?d:S;if(W&&(x==="gw"||x==="gwr")&&(ee=Q),x==="gw"&&!W&&We.length>0){const{data:B}=await me.from("gw_submissions").select("gw").in("user_id",We).not("submitted_at","is",null).order("gw",{ascending:!1}).limit(10);if(B&&B.length>0){const re=[...new Set(B.map(ne=>ne.gw))].sort((ne,ie)=>(ie||0)-(ne||0));for(const ne of re)if(ne){const{data:ie}=await me.from("fixtures").select("gw").eq("gw",ne).limit(1);if(ie&&ie.length>0){console.log("[League] Found fixtures for GW",ne,"from submissions - using this GW (currentGw was",ee,")"),ee=ne;break}}}!ee&&S&&(ee=S,console.log("[League] Using currentGw as fallback:",S))}if(console.log("[League] gwForData:",ee,"memberIds:",We),!ee&&!Z){xt([]),Nt([]),dt([]),Vt([]);return}let ae;if(Z){const{data:B}=await me.from("test_api_fixtures").select("id,test_gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,home_crest,away_crest,kickoff_time,api_match_id").eq("test_gw",Q).order("fixture_index",{ascending:!0});ae=B?.map(re=>({...re,gw:re.test_gw}))||null}else{console.log("[League] Fetching from MAIN database table (fixtures) for regular league, GW:",ee);const{data:B}=await me.from("fixtures").select("id,gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,kickoff_time").eq("gw",ee).order("fixture_index",{ascending:!0});ae=B?.map(re=>({...re,api_match_id:null}))||null,console.log("[League] Fetched fixtures from main database:",B?.length||0,"fixtures")}if(!y)return;if(xt(ae??[]),!We.length){Nt([]),dt([]),Vt([]);return}let K=null,de;if(Z){const{data:B}=await me.from("test_api_picks").select("user_id,matchday,fixture_index,pick").eq("matchday",Q).in("user_id",We);K=B?.map(O=>({...O,gw:O.matchday}))||null;const{data:re,error:ne}=await me.from("test_api_submissions").select("user_id,matchday,submitted_at").eq("matchday",Q).not("submitted_at","is",null).in("user_id",We);ne&&console.error("Error fetching test_api_submissions:",ne);const{data:ie}=await me.from("test_api_fixtures").select("fixture_index,home_team,away_team,home_code,away_code,kickoff_time").eq("test_gw",Q).order("fixture_index",{ascending:!0}),be=new Set((ie||[]).map(O=>O.fixture_index));console.log("[League] Current fixture indices from test_api_fixtures:",Array.from(be)),console.log("[League] Current fixtures:",ie?.map(O=>({index:O.fixture_index,home:O.home_team,away:O.away_team})));const H=[];if(re&&K&&ie){const O=be.size;console.log("[League] Required fixture count for valid submission:",O);const q=(ie||[]).map(J=>J.kickoff_time?new Date(J.kickoff_time):null).filter(J=>J!==null&&!isNaN(J.getTime())),te=q.length>0?new Date(Math.min(...q.map(J=>J.getTime()))):null,ue=new Date("2025-11-18T00:00:00Z");console.log("[League] Submission cutoff date (submissions before this are old):",ue.toISOString()),console.log("[League] Earliest kickoff:",te?.toISOString()),re.forEach(J=>{const he=(K||[]).filter(Ce=>Ce.user_id===J.user_id&&Ce.matchday===Q),ge=he.filter(Ce=>be.has(Ce.fixture_index)),fe=ge.length===O&&O>0,V=new Set(ge.map(Ce=>Ce.fixture_index)),X=V.size===O,je=J.submitted_at?new Date(J.submitted_at):null,le=je&&je>=ue;if(fe&&X&&le)H.push(J),console.log("[League]  VALID submission (has picks for ALL current fixtures AND recent submission):",{user_id:J.user_id,submitted_at:J.submitted_at,submissionDate:je?.toISOString(),cutoffDate:ue.toISOString(),picksCount:he.length,picksForCurrentFixtures:ge.length,uniqueIndices:V.size,requiredCount:O});else{const Ce=[];fe||Ce.push("missing picks"),X||Ce.push("duplicate/extra picks"),le||Ce.push(`old submission (${je?.toISOString()} < ${ue.toISOString()})`),console.log("[League]  INVALID submission:",{user_id:J.user_id,submitted_at:J.submitted_at,submissionDate:je?.toISOString(),cutoffDate:ue.toISOString(),picksCount:he.length,picksForCurrentFixtures:ge.length,uniqueIndices:V.size,requiredCount:O,hasAllRequired:fe,hasExactMatch:X,isRecent:le,reason:Ce.join(", ")})}})}de=H.map(O=>({...O,gw:O.matchday}))||null,console.log("[League] Test API submissions fetched (filtered to only current fixtures):",de),console.log("[League] Valid submissions count:",H.length,"out of",re?.length||0,"total")}else{console.log("[League] Fetching from MAIN database tables (picks, gw_submissions) for regular league");const{data:B}=await me.from("picks").select("user_id,gw,fixture_index,pick").eq("gw",ee).in("user_id",We);K=B,console.log("[League] Fetched picks from main database:",B?.length||0,"picks");const{data:re}=await me.from("gw_submissions").select("user_id,gw,submitted_at").eq("gw",ee).in("user_id",We);de=re,console.log("[League] Fetched submissions from main database:",re?.length||0,"submissions")}if(!y)return;Nt(K??[]),dt(de??[]);const{data:we}=await me.from("gw_results").select("gw,fixture_index,result").eq("gw",Z?1:ee||0);y&&Vt(we??[])})(),()=>{y=!1}},[x,S,g,d,We]),G.useEffect(()=>{j.current=Ze},[Ze]),G.useEffect(()=>{if(a||o.current||!pe.length||x!=="chat")return;const W=i?.name==="API Test"?!0:d===S||d===null;if(!W){r(!0);return}const Q=new Date,Z=pe[0],ee=Z?.kickoff_time?new Date(Z.kickoff_time):null,ae=ee&&ee<=Q,K=pe[pe.length-1],de=K?.kickoff_time?new Date(K.kickoff_time):null,we=K?.fixture_index,B=we!==void 0?Ze[we]:null,re=B?.status==="FINISHED";let ne=!1;if(re&&de){const be=new Date(de.getTime()+72e5),H=(Q.getTime()-be.getTime())/(1e3*60*60);ne=H<=12&&H>=0}const ie=Object.values(Ze).some(be=>be.status==="IN_PLAY"||be.status==="PAUSED");(ae||ne||ie)&&(console.log("[League] Setting default tab to GW Results:",{firstGameStarted:ae,lastGameFinishedWithin12Hours:ne,hasLiveGame:ie,lastFixtureScore:B?.status,viewingCurrentGw:W}),n("gwr")),r(!0)},[pe,Ze,a,S,d,i?.name]);const Ge=G.useMemo(()=>{const y=new Map;return console.log("[League] Building submittedMap from subs:",ct),ct.forEach(W=>{if(W.submitted_at){const Q=`${W.user_id}:${W.gw}`;console.log(`[League] Adding submission key: ${Q}`,W),y.set(Q,!0)}else console.log("[League] Skipping submission with null submitted_at:",W)}),console.log("[League] Final submittedMap:",Array.from(y.entries())),y},[ct]),$t=G.useCallback(y=>y.map(W=>({user_id:W.id,name:W.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]})),[]);G.useEffect(()=>{let y=!0;return(async()=>{if(!t.length){Et([]);return}if(i?.name==="API Test"){Et($t(t)),Ut(!1);return}if(S===null)return;Ut(!0);const{data:W}=await me.from("gw_results").select("gw,fixture_index,result"),Q=W??[],Z=new Map;if(Q.forEach(J=>{const he=ts(J);he&&Z.set(`${J.gw}:${J.fixture_index}`,he)}),Z.size===0){Et($t(t)),Ut(!1);return}const ee=[...new Set(Array.from(Z.keys()).map(J=>parseInt(J.split(":")[0],10)))].sort((J,he)=>J-he),ae=["Prem Predictions","FC Football","Easy League"],K=["The Bird league"],de=await Ks(i,S),we=ee.filter(J=>J>=de);if(!ae.includes(i?.name||"")&&!K.includes(i?.name||"")&&we.length===0){Et($t(t)),Ut(!1);return}const{data:B}=await me.from("picks").select("user_id,gw,fixture_index,pick").in("user_id",t.map(J=>J.id)).in("gw",we),re=B??[],ne=new Map;we.forEach(J=>{const he=new Map;t.forEach(ge=>he.set(ge.id,{user_id:ge.id,score:0,unicorns:0})),ne.set(J,he)}),we.forEach(J=>{Array.from(Z.entries()).filter(([ge])=>parseInt(ge.split(":")[0],10)===J).map(([ge,fe])=>({idx:parseInt(ge.split(":")[1],10),out:fe})).forEach(({idx:ge,out:fe})=>{const V=re.filter(le=>le.gw===J&&le.fixture_index===ge),X=V.filter(le=>le.pick===fe).map(le=>le.user_id),je=ne.get(J);if(V.forEach(le=>{if(le.pick===fe){const Ce=je.get(le.user_id);Ce.score+=1}}),X.length===1&&t.length>=3){const le=X[0],Ce=je.get(le);Ce.unicorns+=1}})});const ie=new Map,be=new Map,H=new Map,O=new Map,q=new Map,te=new Map;t.forEach(J=>{ie.set(J.id,0),be.set(J.id,0),H.set(J.id,0),O.set(J.id,0),q.set(J.id,0),te.set(J.id,[])}),we.forEach(J=>{const he=Array.from(ne.get(J).values());if(he.forEach(V=>{be.set(V.user_id,(be.get(V.user_id)??0)+V.score),H.set(V.user_id,(H.get(V.user_id)??0)+V.unicorns)}),he.sort((V,X)=>X.score-V.score||X.unicorns-V.unicorns),!he.length)return;const ge=he[0],fe=he.filter(V=>V.score===ge.score&&V.unicorns===ge.unicorns);fe.length===1?(ie.set(ge.user_id,(ie.get(ge.user_id)??0)+3),O.set(ge.user_id,(O.get(ge.user_id)??0)+1),te.get(ge.user_id).push("W"),he.slice(1).forEach(V=>te.get(V.user_id).push("L"))):(fe.forEach(V=>{ie.set(V.user_id,(ie.get(V.user_id)??0)+1),q.set(V.user_id,(q.get(V.user_id)??0)+1),te.get(V.user_id).push("D")}),he.filter(V=>!fe.find(X=>X.user_id===V.user_id)).forEach(V=>te.get(V.user_id).push("L")))});const ue=t.map(J=>({user_id:J.id,name:J.name,mltPts:ie.get(J.id)??0,ocp:be.get(J.id)??0,unicorns:H.get(J.id)??0,wins:O.get(J.id)??0,draws:q.get(J.id)??0,form:te.get(J.id)??[]}));ue.sort((J,he)=>he.mltPts-J.mltPts||he.unicorns-J.unicorns||he.ocp-J.ocp||J.name.localeCompare(he.name)),y&&(Et(ue),Ut(!1))})(),()=>{y=!1}},[t,i,S,$t]);function Hs(){const y=K=>{const de=K.slice(-5),we=5-de.length;return e.jsxs("div",{className:"flex items-center justify-between w-full",children:[Array.from({length:we}).map((B,re)=>e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-200"},`dot-${re}`)),de.map((B,re)=>e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${B==="W"?"bg-green-100 text-green-700":B==="D"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:B},re))]})},W=["Prem Predictions","FC Football","Easy League"],Q=["The Bird league"],Z=["gregVjofVcarl","Let Down"],ee=i&&!W.includes(i.name)&&!Q.includes(i.name)&&!Z.includes(i.name),ae=Zt.length?Zt:t.map(K=>({user_id:K.id,name:K.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}));return t.length===1?e.jsxs("div",{className:"text-center p-8 bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Invite at least one more user to make the ML start"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Share your league code with friends to get the competition going!"}),e.jsx("button",{onClick:()=>it(!0),className:"px-4 py-2 bg-[#1C8376] text-white font-semibold rounded-lg hover:bg-emerald-700 transition-colors",children:"Share League Code"})]}):e.jsxs("div",{className:"pt-4",children:[e.jsx("style",{children:`
          .mlt-table tbody tr:last-child {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table tbody tr:last-child td {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table tbody tr:last-child th {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table {
            border-bottom: none !important;
          }
          .mlt-table tbody {
            border-bottom: none !important;
          }
          .mlt-table-container {
            border-bottom: none !important;
          }
          .mlt-table-container table {
            border-bottom: none !important;
          }
          .mlt-table-container tbody {
            border-bottom: none !important;
          }
          .mlt-table-container tbody tr:last-child {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table-container tbody tr:last-child td {
            border-bottom: none !important;
            border: none !important;
          }
        `}),e.jsx("div",{className:"mlt-table-container overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x bg-slate-50",style:{backgroundColor:"#f8fafc",borderBottom:"none",boxShadow:"none"},children:e.jsxs("table",{className:"mlt-table w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc",border:"none",borderBottom:"none"},children:[e.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:e.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[e.jsx("th",{className:"py-3 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),e.jsx("th",{className:"py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:"Player"}),h?e.jsx("th",{className:"px-4 py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8"},children:"Form"}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"W"}),e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"D"}),e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:ee?"CP":"OCP"}),t.length>=3&&e.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""}),e.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"PTS"})]})]})}),e.jsxs("tbody",{children:[ae.map((K,de)=>{const we=K.user_id===k?.id,B=de===ae.length-1;return e.jsxs("tr",{className:we?"flash-user-row":"",style:{position:"relative",backgroundColor:"#f8fafc",...B?{}:{borderBottom:"1px solid #e2e8f0"}},children:[e.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:de+1}),e.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:K.name}),h?e.jsx("td",{className:"px-4 py-4",style:{backgroundColor:"#f8fafc"},children:y(K.form)}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:K.wins}),e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:K.draws}),e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:K.ocp}),t.length>=3&&e.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:K.unicorns}),e.jsx("td",{className:"py-4 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:K.mltPts})]})]},K.user_id)}),ls&&e.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:e.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:h?3:t.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"Calculating"})}),!ls&&!Zt.length&&e.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:e.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:h?3:t.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"No gameweeks completed yet  this will populate after the first results are saved."})})]})]})}),e.jsx("div",{className:"mt-6 flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"inline-flex rounded-full bg-slate-100 p-0.5 shadow-sm border border-slate-200",children:[e.jsx("button",{onClick:()=>_(!1),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${h?"text-slate-600 hover:text-slate-900 hover:bg-white/50":"bg-[#1C8376] text-white shadow-sm"}`,children:"Points"}),e.jsx("button",{onClick:()=>_(!0),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${h?"bg-[#1C8376] text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"Form"})]}),e.jsxs("button",{onClick:()=>{console.log("Button clicked, setting modal to true"),oe(!0)},className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[e.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),e.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})}),i?.name==="API Test"&&e.jsx("div",{className:"mt-4",style:{marginLeft:"-1rem",marginRight:"-1rem",width:"calc(100% + 2rem)",paddingLeft:0,paddingRight:0},children:e.jsx("video",{src:"/assets/Animation/Unicorn_Small.mov",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"auto",display:"block",padding:0,margin:0}})})]})}function Ws(){const y=i?.name==="API Test"?nt??1:S;if(!y)return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No current game week available."});if(!ps(i,y,gt))return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Predictions Available"}),e.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),e.jsxs("div",{className:"text-sm",children:["GW",y," predictions are not included in this league."]})]})});const W=new Map;ns.forEach(H=>{if(H.gw!==y)return;const O=ts(H);O&&W.set(H.fixture_index,O)});const Q=G.useMemo(()=>{const H=te=>{if(!te)return"Fixtures";const ue=new Date(te);return isNaN(ue.getTime())?"Fixtures":ue.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})},O=new Map;pe.filter(te=>te.gw===y).forEach(te=>{const ue=H(te.kickoff_time),J=te.kickoff_time?new Date(te.kickoff_time).getTime():Number.MAX_SAFE_INTEGER;O.has(ue)||O.set(ue,{label:ue,key:J,items:[]}),O.get(ue).items.push(te)});const q=Array.from(O.values());return q.forEach(te=>te.items.sort((ue,J)=>ue.fixture_index-J.fixture_index)),q.sort((te,ue)=>te.key-ue.key),q},[pe,y]),Z=new Set(pe.filter(H=>H.gw===y).map(H=>H.fixture_index)),ee=i?.name==="API Test",ae=t.length>0&&t.every(H=>Ge.get(`${H.id}:${y}`));if(ee&&y===(nt??1)){console.log("[League] API Test filtering:",{currentFixtureIndices:Array.from(Z),totalPicks:lt.length,picksForGw:lt.filter(O=>O.gw===y).length,submittedMapSize:Ge.size,allSubmitted:ae,members:t.map(O=>({id:O.id,name:O.name,submitted:Ge.get(`${O.id}:${y}`)})),fixturesCount:pe.filter(O=>O.gw===y).length});const H=lt.filter(O=>O.gw===y);console.log(`[League] All picks for GW${y}:`,H.map(O=>({user_id:O.user_id,userName:t.find(q=>q.id===O.user_id)?.name,fixture_index:O.fixture_index,pick:O.pick,hasSubmitted:!!Ge.get(`${O.user_id}:${y}`),inCurrentFixtures:Z.has(O.fixture_index)})))}const K=new Map;!ee||ae?lt.forEach(H=>{if(H.gw!==y)return;if(ee&&!Ge.get(`${H.user_id}:${y}`)){y===1&&console.log("[League] API Test: Filtering out unsubmitted pick:",{user_id:H.user_id,fixture_index:H.fixture_index,userName:t.find(te=>te.id===H.user_id)?.name});return}if(!Z.has(H.fixture_index)){ee&&y===1&&console.log("[League] Filtering out old pick (not in current fixtures):",{fixture_index:H.fixture_index,currentIndices:Array.from(Z),userName:t.find(q=>q.id===H.user_id)?.name});return}const O=K.get(H.fixture_index)??[];O.push(H),K.set(H.fixture_index,O)}):console.log("[League] API Test: Not all submitted - skipping ALL picks processing. allSubmitted=",ae);const de=g!==null&&g>=y,we=t.filter(H=>!Ge.get(`${H.id}:${y}`)).length,B=t.filter(H=>!Ge.get(`${H.id}:${y}`)).map(H=>H.name),re=gt.get(y),ne=re?new Date>=re:!1;if(ee&&y===1){const H=t.map(te=>{const ue=`${te.id}:${y}`,J=Ge.get(ue);return{id:te.id,name:te.name,submitted:!!J,key:ue}});console.log(`[League] ===== API Test GW${y} SUBMISSION CHECK =====`),console.log("[League] All submitted:",ae),console.log("[League] Remaining:",we),console.log("[League] Who didn't submit:",B),console.log("[League] Member submission status:",H),console.log("[League] Submitted map entries:",Array.from(Ge.entries())),console.log("[League] ================================================");const O=t.find(te=>te.name.toLowerCase().includes("steve")||te.name.toLowerCase().includes("s")),q=t.find(te=>te.name.toLowerCase().includes("jof")||te.name.toLowerCase().includes("j"));if(O){const te=`${O.id}:${y}`;console.log(`[League] STEVE (${O.name}):`,{id:O.id,submitted:!!Ge.get(te),key:te})}if(q){const te=`${q.id}:${y}`;console.log(`[League] JOF (${q.name}):`,{id:q.id,submitted:!!Ge.get(te),key:te})}}console.log(`GW${y} deadline check:`,{gwDeadline:re,now:new Date,deadlinePassed:ne,allSubmitted:ae,willShowPredictions:ae||ne});const ie=ee?!ae:!ae&&!ne;return(ee?!ae:!ae&&!ne)?(console.log(`[League] Not all submitted, showing ONLY "Who's submitted" view. Blocking all predictions/fixtures.`,{isApiTestLeague:ee,allSubmitted:ae,deadlinePassed:ne,remaining:we}),e.jsxs("div",{className:"mt-2 pt-2",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700",children:e.jsxs(e.Fragment,{children:["Waiting for ",e.jsx("span",{className:"font-semibold",children:we})," of ",t.length," to submit."]})}),e.jsxs("button",{onClick:()=>{const H=`Game Week ${y} Predictions Reminder!

DEADLINE: THIS ${(()=>{const q=new Date(pe.find(je=>je.gw===y)?.kickoff_time||""),te=new Date(q.getTime()-4500*1e3),ue=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],J=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],he=ue[te.getUTCDay()],ge=te.getUTCDate(),fe=J[te.getUTCMonth()],V=te.getUTCHours().toString().padStart(2,"0"),X=te.getUTCMinutes().toString().padStart(2,"0");return`${he} ${ge} ${fe}, ${V}:${X} BST`})()}

Don't forget!
playtotl.com`,O=`https://wa.me/?text=${encodeURIComponent(H)}`;try{window.open(O,"_blank")}catch{navigator.clipboard.writeText(H).then(()=>{alert("Message copied to clipboard! You can now paste it in WhatsApp or Messages.")}).catch(()=>{alert(`Unable to open WhatsApp. Please copy this message manually:

`+H)})}},className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-medium hover:bg-emerald-700 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share Reminder"]})]}),(()=>{const H=pe.map(le=>le.kickoff_time).filter(le=>!!le).map(le=>new Date(le)).filter(le=>!isNaN(le.getTime()));if(H.length===0)return null;const O=new Date(Math.min(...H.map(le=>le.getTime()))),q=new Date(O.getTime()-4500*1e3),te=new Date>=q,ue=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],he=ue[q.getUTCDay()],ge=q.getUTCDate(),fe=J[q.getUTCMonth()],V=q.getUTCHours().toString().padStart(2,"0"),X=q.getUTCMinutes().toString().padStart(2,"0"),je=`${he} ${ge} ${fe}, ${V}:${X} BST`;return e.jsxs("div",{className:`mb-3 text-xs font-medium ${te?"text-orange-600":"text-slate-600"} flex items-center gap-1.5`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),te?"Deadline Passed: ":"Deadline: ",je]})})(),e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 bg-white",children:e.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),e.jsx("tbody",{children:t.slice().sort((H,O)=>H.name.localeCompare(O.name)).map(H=>{const O=`${H.id}:${y}`,q=!!Ge.get(O);return e.jsxs("tr",{className:"border-t border-slate-200",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 truncate whitespace-nowrap",style:{overflow:"hidden",textOverflow:"ellipsis"},children:H.name}),e.jsx("td",{className:"px-4 py-3",children:q?e.jsxs("span",{className:"inline-flex items-center gap-1.5 justify-center rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-xs px-2.5 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Submitted"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2.5 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Not yet"]})})]},H.id)})})]})})]})):e.jsxs("div",{className:"mt-2 pt-2",children:[ie?e.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-700",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("div",{children:ae?e.jsxs(e.Fragment,{children:["All ",t.length," members have submitted."]}):e.jsxs(e.Fragment,{children:["Waiting for ",e.jsx("span",{className:"font-semibold",children:we})," of ",t.length," to submit."]})}),!ae&&e.jsxs("button",{onClick:()=>{const H=`Game Week ${y} Predictions Reminder!

DEADLINE: THIS ${(()=>{const q=new Date(pe.find(je=>je.gw===y)?.kickoff_time||""),te=new Date(q.getTime()-4500*1e3),ue=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],J=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],he=ue[te.getUTCDay()],ge=te.getUTCDate(),fe=J[te.getUTCMonth()],V=te.getUTCHours().toString().padStart(2,"0"),X=te.getUTCMinutes().toString().padStart(2,"0");return`${he} ${ge} ${fe}, ${V}:${X} BST`})()}

Don't forget!
playtotl.com`,O=`https://wa.me/?text=${encodeURIComponent(H)}`;try{window.open(O,"_blank")}catch{navigator.clipboard.writeText(H).then(()=>{alert("Message copied to clipboard! You can now paste it in WhatsApp or Messages.")}).catch(()=>{alert(`Unable to open WhatsApp. Please copy this message manually:

`+H)})}},className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share Reminder"]})]}),(()=>{const H=pe.map(le=>le.kickoff_time).filter(le=>!!le).map(le=>new Date(le)).filter(le=>!isNaN(le.getTime()));if(H.length===0)return null;const O=new Date(Math.min(...H.map(le=>le.getTime()))),q=new Date(O.getTime()-4500*1e3),te=new Date>=q,ue=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],he=ue[q.getUTCDay()],ge=q.getUTCDate(),fe=J[q.getUTCMonth()],V=q.getUTCHours().toString().padStart(2,"0"),X=q.getUTCMinutes().toString().padStart(2,"0"),je=`${he} ${ge} ${fe}, ${V}:${X} BST`;return e.jsxs("div",{className:`mb-3 text-sm ${te?"text-orange-600 font-semibold":"text-slate-600"}`,children:[te?" Deadline Passed: ":" Deadline: ",je]})})(),e.jsx("div",{className:"overflow-hidden rounded-lg border",children:e.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),e.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),e.jsx("tbody",{children:t.slice().sort((H,O)=>H.name.localeCompare(O.name)).map(H=>{const O=`${H.id}:${y}`,q=!!Ge.get(O);return H.name==="Jof"&&console.log(`Checking Jof submission: key=${O}, submitted=${q}, submittedMap has:`,Ge.has(O),"picksGw=",y),e.jsxs("tr",{className:"border-t border-slate-200",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 truncate whitespace-nowrap",style:{overflow:"hidden",textOverflow:"ellipsis"},children:H.name}),e.jsx("td",{className:"px-4 py-3",children:q?e.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-xs px-2 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:" Submitted"}):e.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:" Not yet"})})]},H.id)})})]})})]}):null,i?.name==="API Test"&&ae&&Q.length>0&&!ie&&(()=>{const H=Q.flatMap(fe=>fe.items),O=new Set(H.map(fe=>fe.fixture_index)),q={};Object.keys(Ze).forEach(fe=>{const V=parseInt(fe,10);O.has(V)&&(q[V]=Ze[V])});const te=q,ue=H.some(fe=>{const V=te[fe.fixture_index];return V&&(V.status==="IN_PLAY"||V.status==="PAUSED")}),J=H.length>0&&H.every(fe=>{const V=te[fe.fixture_index];return V&&V.status==="FINISHED"}),he=ue||J||H.some(fe=>te[fe.fixture_index]);let ge=0;return k?.id&&H.forEach(fe=>{const V=te[fe.fixture_index],X=V&&(V.status==="IN_PLAY"||V.status==="PAUSED"),je=V&&V.status==="FINISHED";if(V&&(X||je)){const Ce=(K.get(fe.fixture_index)??[]).find(at=>at.user_id===k.id);if(Ce){let at=!1;(Ce.pick==="H"&&V.homeScore>V.awayScore||Ce.pick==="A"&&V.awayScore>V.homeScore||Ce.pick==="D"&&V.homeScore===V.awayScore)&&(at=!0),at&&ge++}}}),e.jsx("div",{className:"mt-3 space-y-6",children:Q.map((fe,V)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-slate-700 font-normal text-lg",children:fe.label}),V===0&&e.jsxs(e.Fragment,{children:[ue&&(()=>{const X=H.length;return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-600 text-white text-sm font-bold border border-red-700 shadow-sm",style:{marginTop:"-2px"},children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"Live"}),e.jsxs("span",{className:"flex items-baseline gap-0.5",children:[e.jsx("span",{className:"text-base sm:text-lg font-extrabold",children:ge}),e.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"/"}),e.jsx("span",{className:"text-sm sm:text-base font-semibold opacity-80",children:X})]})]})})(),J&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),!he&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"})]})]}),e.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:e.jsxs("ul",{children:[fe.items.map((X,je)=>{try{const le=X.home_team||X.home_name||"Home",Ce=X.away_team||X.away_name||"Away",at=(X.home_code||X.home_team||X.home_name||"").toUpperCase(),_t=(X.away_code||X.away_team||X.away_name||"").toUpperCase(),Mt=(Oe=>{if(!Oe)return"";const $e=new Date(Oe);if(isNaN($e.getTime()))return"";const He=String($e.getUTCHours()).padStart(2,"0"),At=String($e.getUTCMinutes()).padStart(2,"0");return`${He}:${At}`})(X.kickoff_time),Ft=X.fixture_index,Ht=K.get(Ft)??[],ve=te[Ft],Fe=ve&&ve.status==="IN_PLAY",Ye=ve&&(ve.status==="PAUSED"||ve.status==="HALF_TIME"||ve.status==="HT"),pt=ve&&ve.status==="FINISHED",bt=Fe||Ye,kt=Oe=>{const $e=Ht.filter(ut=>ut.pick===Oe);let He=null;i?.name==="API Test"&&y===1?ve&&(ve.homeScore>ve.awayScore?He="H":ve.awayScore>ve.homeScore?He="A":ve.homeScore===ve.awayScore&&(He="D")):He=W.get(Ft)||null;const At=Ht.length===t.length&&$e.length===t.length,Wt=4,Dt=[];for(let ut=0;ut<$e.length;ut+=Wt){const St=$e.slice(ut,ut+Wt);Dt.push(St)}return e.jsx("div",{className:"flex flex-col gap-1",children:Dt.map((ut,St)=>e.jsx("div",{className:"flex items-center justify-center",children:ut.map((yt,us)=>{const zs=t.find(gs=>gs.id===yt.user_id),fs=ws(zs?.name??"?"),ms=Ge.has(`${yt.user_id}:${y}`),hs=He&&He===Oe?!0:null;return At?e.jsx("span",{className:"inline-block",style:{marginLeft:us>0?"-8px":"0",position:"relative",zIndex:us},children:e.jsx(zt,{letter:fs,correct:hs,unicorn:!1,hasSubmitted:ms,isLive:Fe,isOngoing:bt,isFinished:pt})},yt.user_id):e.jsx(zt,{letter:fs,correct:hs,unicorn:!1,hasSubmitted:ms,isLive:Fe,isOngoing:bt,isFinished:pt},yt.user_id)})},St))})};return e.jsx("li",{className:je>0?"border-t":"",children:e.jsxs("div",{className:"p-4 bg-white relative",children:[(Fe||Ye)&&e.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:"LIVE"})]}),pt&&!Fe&&!Ye&&e.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:e.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"FT"})}),e.jsxs("div",{className:`grid grid-cols-3 items-center ${bt?"pt-4":""}`,children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:le})}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[at&&e.jsx("img",{src:X.home_crest||wt(X.home_code||X.home_team||X.home_name||at||""),alt:`${le} badge`,className:"h-6 w-6 object-contain",onError:Oe=>{const $e=Oe.currentTarget,He=wt(X.home_code||X.home_team||X.home_name||at||"");$e.src!==He?$e.src=He:$e.style.opacity="0.35"}}),e.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:ve&&(Fe||Ye||pt)?e.jsxs("span",{className:"font-bold text-base text-slate-900",children:[ve.homeScore," - ",ve.awayScore]}):e.jsx("span",{children:Mt})}),_t&&e.jsx("img",{src:X.away_crest||wt(X.away_code||X.away_team||X.away_name||_t||""),alt:`${Ce} badge`,className:"h-6 w-6 object-contain",onError:Oe=>{const $e=Oe.currentTarget,He=wt(X.away_code||X.away_team||X.away_name||_t||"");$e.src!==He?$e.src=He:$e.style.opacity="0.35"}})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:Ce})})]}),ve&&(bt||pt)&&e.jsx("div",{className:"flex justify-center mt-1",children:e.jsx("span",{className:`text-[10px] font-semibold ${bt?"text-red-600":"text-slate-500"}`,children:ar(ve.status,ve.minute)})}),e.jsxs("div",{className:"mt-2 grid grid-cols-3",children:[e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:kt("H")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:kt("D")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:kt("A")})})]})]})},`${X.gw}-${X.fixture_index}`)}catch(le){return console.error("Error rendering fixture:",le,X),e.jsxs("li",{className:"p-4 text-red-500",children:["Error loading fixture: ",X.fixture_index]},`${X.gw}-${X.fixture_index}`)}}),!fe.items.length&&e.jsx("li",{className:"p-4 text-slate-500",children:"No fixtures."})]})})]},V))})})(),Q.length>0&&i?.name!=="API Test"&&e.jsx("div",{className:"mt-3 space-y-6",children:Q.map((H,O)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-slate-700 font-normal text-lg",children:H.label}),O===0&&ae&&de&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),O===0&&ae&&!de&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"}),O===0&&ne&&!ae&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-orange-100 text-orange-800 text-sm font-bold border border-orange-300 shadow-sm",style:{marginTop:"-2px"},children:["Deadline Passed ",B.length>0&&`(${B.join(", ")} didn't submit)`]})]}),e.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:e.jsxs("ul",{children:[H.items.map((q,te)=>{try{const ue=q.home_name||q.home_team||"Home",J=q.away_name||q.away_team||"Away",he=q.home_code||"",ge=q.away_code||"",V=(ve=>{if(!ve)return"";const Fe=new Date(ve);if(isNaN(Fe.getTime()))return"";const Ye=String(Fe.getUTCHours()).padStart(2,"0"),pt=String(Fe.getUTCMinutes()).padStart(2,"0");return`${Ye}:${pt}`})(q.kickoff_time),X=q.fixture_index,je=K.get(X)??[],le=Ze[X],Ce=le&&le.status==="IN_PLAY",at=le&&(le.status==="PAUSED"||le.status==="HALF_TIME"||le.status==="HT"),_t=le&&le.status==="FINISHED",Xt=Ce||at,Mt=ve=>{const Fe=je.filter(Oe=>Oe.pick===ve),Ye=W.get(X),pt=je.length===t.length&&Fe.length===t.length,bt=4,kt=[];for(let Oe=0;Oe<Fe.length;Oe+=bt){const $e=Fe.slice(Oe,Oe+bt);kt.push($e)}return e.jsx("div",{className:"flex flex-col gap-1",children:kt.map((Oe,$e)=>e.jsx("div",{className:"flex items-center justify-center",children:Oe.map((He,At)=>{const Wt=t.find(yt=>yt.id===He.user_id),Dt=ws(Wt?.name??"?"),ut=Ge.has(`${He.user_id}:${y}`),St=Ye&&Ye===ve?!0:null;return pt?e.jsx("span",{className:"inline-block",style:{marginLeft:At>0?"-8px":"0",position:"relative",zIndex:At},children:e.jsx(zt,{letter:Dt,correct:St,unicorn:!1,hasSubmitted:ut,isLive:Ce,isOngoing:Xt,isFinished:_t})},He.user_id):e.jsx(zt,{letter:Dt,correct:St,unicorn:!1,hasSubmitted:ut,isLive:Ce,isOngoing:Xt,isFinished:_t},He.user_id)})},$e))})},Ft=q.home_crest||wt(q.home_code||q.home_team||q.home_name||he||""),Ht=q.away_crest||wt(q.away_code||q.away_team||q.away_name||ge||"");return e.jsx("li",{className:te>0?"border-t":"",children:e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:ue})}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("img",{src:Ft,alt:`${ue} badge`,className:"h-6 w-6",onError:ve=>{const Fe=ve.currentTarget,Ye=wt(q.home_code||q.home_team||q.home_name||he||"");Fe.src!==Ye?Fe.src=Ye:Fe.style.opacity="0.35"}}),e.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:V}),e.jsx("img",{src:Ht,alt:`${J} badge`,className:"h-6 w-6",onError:ve=>{const Fe=ve.currentTarget,Ye=wt(q.away_code||q.away_team||q.away_name||ge||"");Fe.src!==Ye?Fe.src=Ye:Fe.style.opacity="0.35"}})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:J})})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-3",children:[e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Mt("H")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Mt("D")})}),e.jsx("div",{className:"relative min-h-6",children:e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Mt("A")})})]})]})},`${q.gw}-${q.fixture_index}`)}catch(ue){return console.error("Error rendering fixture:",ue,q),e.jsxs("li",{className:"p-4 text-red-500",children:["Error loading fixture: ",q.fixture_index]},`${q.gw}-${q.fixture_index}`)}}),!H.items.length&&e.jsx("li",{className:"p-4 text-slate-500",children:"No fixtures."})]})})]},O))}),!Q.length&&!ie&&e.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-500",children:["No fixtures for GW ",y,"."]})]})}function Os(){const y=i?.name==="API Test"?nt??1:d;if(!y||w.length===0&&i?.name!=="API Test")return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No game week selected."});if(!ps(i,y,gt))return e.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Results Available"}),e.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),e.jsxs("div",{className:"text-sm",children:["GW",y," results are not included in this league."]})]})});const W=new Map,Q=i?.name==="API Test";Q&&y===(nt??1)?pe.forEach(re=>{const ne=Ze[re.fixture_index];ne&&(ne.status==="IN_PLAY"||ne.status==="PAUSED"||ne.status==="FINISHED")&&(ne.homeScore>ne.awayScore?W.set(re.fixture_index,"H"):ne.awayScore>ne.homeScore?W.set(re.fixture_index,"A"):W.set(re.fixture_index,"D"))}):ns.forEach(B=>{if(B.gw!==y)return;const re=ts(B);re&&W.set(B.fixture_index,re)});const Z=t.map(B=>({user_id:B.id,name:B.name,score:0,unicorns:0})),ee=new Map;lt.forEach(B=>{if(B.gw!==y)return;const re=ee.get(B.fixture_index)??[];re.push(B),ee.set(B.fixture_index,re)}),Array.from(W.entries()).forEach(([B,re])=>{const ie=(ee.get(B)??[]).filter(be=>be.pick===re).map(be=>be.user_id);if(ie.forEach(be=>{const H=Z.find(O=>O.user_id===be);H.score+=1}),ie.length===1&&t.length>=3){const be=Z.find(H=>H.user_id===ie[0]);be.unicorns+=1}}),Z.sort((B,re)=>re.score-B.score||re.unicorns-B.unicorns||B.name.localeCompare(re.name)),G.useEffect(()=>{if(Z.length===0)return;const B=new Map;Z.forEach((ne,ie)=>{B.set(ne.user_id,ie)});const re=new Set;if(B.forEach((ne,ie)=>{const be=A.current.get(ie);be!==void 0&&be!==ne&&re.add(ie)}),A.current=B,re.size>0){T(re);const ne=setTimeout(()=>{T(new Set)},2e3);return()=>clearTimeout(ne)}},[Z.map(B=>`${B.user_id}-${B.score}-${B.unicorns}`).join(",")]);let ae=!1,K=!1,de=!1,we=!1;if(Q&&y===(nt??1)){const B=pe;if(B.length>0&&(ae=B.every(ne=>{const ie=Ze[ne.fixture_index];return ie&&ie.status==="FINISHED"}),K=!!B.find(ne=>{const ie=Ze[ne.fixture_index];return ie&&(ie.status==="IN_PLAY"||ie.status==="PAUSED")}),we=B.some(ne=>{const ie=Ze[ne.fixture_index];return ie&&(ie.status==="IN_PLAY"||ie.status==="PAUSED"||ie.status==="FINISHED")}),!ae)){const ne=new Date;de=B.some(ie=>{if(!ie.kickoff_time)return!1;const H=new Date(ie.kickoff_time).getTime()-ne.getTime(),O=Ze[ie.fixture_index];return(!O||O.status!=="IN_PLAY"&&O.status!=="PAUSED"&&O.status!=="FINISHED")&&H>0&&H<=1440*60*1e3})}}else{const B=pe.filter(re=>re.gw===y);B.length>0&&(ae=B.every(re=>W.has(re.fixture_index)))}return e.jsxs("div",{children:[e.jsx("style",{children:`
          @keyframes flash {
            0%, 100% {
              background-color: rgb(209, 250, 229);
            }
            25% {
              background-color: rgb(167, 243, 208);
            }
            50% {
              background-color: rgb(209, 250, 229);
            }
            75% {
              background-color: rgb(167, 243, 208);
            }
          }
          @keyframes pulse-score {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.7;
            }
          }
          @keyframes position-change {
            0% {
              background-color: rgb(254, 243, 199);
            }
            50% {
              background-color: rgb(253, 230, 138);
            }
            100% {
              background-color: transparent;
            }
          }
          .flash-user-row {
            animation: flash 1.5s ease-in-out 3;
          }
          .pulse-live-score {
            animation: pulse-score 2s ease-in-out infinite;
          }
          .position-changed {
            animation: position-change 1.5s ease-out;
          }
          .full-width-header-border::after {
            content: '';
            position: absolute;
            left: -1rem;
            right: -1rem;
            bottom: 0;
            height: 1px;
            background-color: #cbd5e1;
            z-index: 1;
          }
        `}),Z.length>0&&ae&&e.jsx("div",{className:"mt-4 mb-4 py-6 px-6 rounded-xl bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 shadow-2xl shadow-slate-600/50 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/30 after:to-transparent after:animate-[shimmer_2.5s_ease-in-out_infinite_0.6s]",children:e.jsx("div",{className:"text-center relative z-10",children:Z[0].score===Z[1]?.score&&Z[0].unicorns===Z[1]?.unicorns?e.jsx("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:" It's a Draw!"}):e.jsxs("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:[Z[0].name," Wins!"]})})}),e.jsx("div",{className:"overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x border-b border-slate-200 bg-slate-50 shadow-sm",style:{backgroundColor:"#f8fafc"},children:e.jsxs("table",{className:"w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc"},children:[e.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:e.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[e.jsx("th",{className:"py-4 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),e.jsx("th",{className:"py-4 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:e.jsxs("div",{className:"flex items-center gap-2",children:["Player",Q&&K&&e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-600 text-white shadow-md shadow-red-500/30",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] font-medium",children:"LIVE"})]}),Q&&!ae&&de&&!K&&e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500 text-white shadow-md shadow-amber-500/30",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-[10px] font-medium",children:we?"Next Game Starting Soon":"Starting soon"})]})]})}),e.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8"},children:"Score"}),t.length>=3&&e.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""})]})}),e.jsxs("tbody",{children:[Z.map((B,re)=>{const ne=B.user_id===k?.id,ie=re===Z.length-1,be=b.has(B.user_id);return e.jsxs("tr",{className:`${ne?"flash-user-row":""} ${be?"position-changed":""}`,style:{position:"relative",backgroundColor:"#f8fafc",...ie?{}:{borderBottom:"1px solid #e2e8f0"}},children:[e.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:re+1}),e.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[Q&&K&&e.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse flex-shrink-0",style:{minWidth:"8px",minHeight:"8px"}}),Q&&!K&&de&&e.jsx("svg",{className:"w-3 h-3 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:B.name})]})}),e.jsx("td",{className:`py-4 text-center tabular-nums font-bold ${Q&&K?"pulse-live-score":""}`,style:{width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:B.score}),t.length>=3&&e.jsx("td",{className:`py-4 text-center tabular-nums ${Q&&K?"pulse-live-score":""}`,style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:B.unicorns})]},B.user_id)}),!Z.length&&e.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:e.jsxs("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:t.length>=3?4:3,style:{backgroundColor:"#f8fafc"},children:["No results recorded for GW ",y," yet."]})})]})]})}),w.length>1&&e.jsx("div",{className:"mt-6 mb-4 flex flex-col items-center gap-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 w-full max-w-sm",children:[e.jsx("div",{className:"flex-1",children:e.jsx("select",{value:y,onChange:B=>u(parseInt(B.target.value,10)),className:"gw-selector w-full bg-white rounded-full border-2 border-slate-300 px-3 py-2 text-xs font-normal text-slate-600 text-center focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-[#1C8376] active:bg-slate-50 transition-colors",style:{fontSize:"12px",minHeight:"40px",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2.5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1em 1em",paddingRight:"2.5rem"},children:w.map(B=>e.jsxs("option",{value:B,style:{fontSize:"12px",padding:"0.5rem",fontWeight:"normal",color:"#64748b",textTransform:"uppercase"},children:["GAME WEEK ",B]},B))})}),e.jsxs("button",{onClick:()=>se(!0),className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[e.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),e.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>se(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:B=>B.stopPropagation(),children:[e.jsx("button",{onClick:()=>se(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Weekly Winner"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1C8376]/10 border border-[#1C8376]/20 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-[#1C8376]/90 mb-3",children:" How to Win the Week:"}),e.jsxs("p",{className:"text-[#1C8376]/80",children:["The player with the ",e.jsx("strong",{children:"most correct predictions"})," wins that gameweek."]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:" Unicorn Rule"}),e.jsxs("p",{className:"text-purple-700",children:["In Mini-Leagues with ",e.jsx("strong",{children:"3 or more players"}),", if you're the ",e.jsx("strong",{children:"only person"})," to correctly predict a fixture, that's a ",e.jsx("strong",{children:" Unicorn"}),". In ties, the player with most ",e.jsx("strong",{children:" Unicorns"})," wins!"]})]})]})]})]})})]})}return G.useEffect(()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"auto"})},[x]),c?e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-10",children:e.jsx("div",{className:"text-slate-500",children:"Loading"})}):!i&&!c?e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-10",children:e.jsxs("div",{className:"rounded border bg-white p-6",children:[e.jsx("div",{className:"font-semibold mb-2",children:"League not found"}),e.jsx(xs,{to:"/leagues",className:"text-slate-600 underline",children:"Back to Mini Leagues"})]})}):i?e.jsxs("div",{className:`${$?"oldschool-theme":"bg-slate-50"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",maxHeight:"100vh",overflow:"hidden"},children:[e.jsx("style",{children:`
        .league-header-fixed {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          z-index: 50 !important;
          transform: translate3d(0, 0, 0) !important;
          -webkit-transform: translate3d(0, 0, 0) !important;
          will-change: transform !important;
          contain: layout style paint !important;
        }
        .league-header-fixed .relative {
          position: relative !important;
          z-index: 100 !important;
        }
        @supports (height: 100dvh) {
          .league-header-fixed {
            top: env(safe-area-inset-top, 0px) !important;
          }
        }
        .league-content-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
          left: 0;
          right: 0;
          bottom: 0;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
          padding-bottom: 2rem;
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .league-content-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
        }
        @media (max-width: 768px) {
          .league-content-wrapper {
            top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
            padding-bottom: 2rem;
            padding-left: 1rem;
            padding-right: 1rem;
          }
          .league-content-wrapper.has-banner {
            top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
          }
        }
        /* Chat tab - full height layout */
        .chat-tab-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px));
          left: 0;
          right: 0;
          bottom: 0;
          height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          z-index: 10;
          overflow: visible;
          pointer-events: none;
        }
        .chat-tab-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px));
          height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
        }
        .chat-tab-wrapper > * {
          pointer-events: auto;
        }
        @supports (height: 100dvh) {
          .chat-tab-wrapper {
            height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          }
          .chat-tab-wrapper.has-banner {
            height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          }
        }
      `}),e.jsx("div",{className:"league-header-fixed bg-white border-b border-slate-200 shadow-sm",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between h-14",children:[e.jsx(xs,{to:"/leagues",className:"flex items-center text-slate-600 hover:text-slate-900 transition-colors -ml-2 px-2 py-1",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-lg font-normal text-slate-900 truncate flex-1 text-left px-2",children:i.name}),e.jsx("div",{className:"relative",style:{zIndex:100},children:e.jsx("button",{onClick:()=>Ee(!ke),className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-slate-100 transition-colors -mr-2","aria-label":"Menu",children:e.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]}),e.jsxs("div",{className:"flex border-b border-slate-200 bg-white",children:[e.jsxs("button",{onClick:()=>{o.current=!0,r(!0),n("chat")},className:"flex-1 px-3 sm:px-6 py-3 text-sm font-semibold transition-colors relative "+(x==="chat"?"text-[#1C8376]":"text-slate-400"),children:["Chat",x==="chat"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(w.length>0||i?.name==="API Test")&&e.jsxs("button",{onClick:()=>{o.current=!0,r(!0),n("gwr")},className:"flex-1 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight flex items-center justify-center gap-1.5 "+(x==="gwr"?"text-[#1C8376]":"text-slate-400"),children:[(()=>{const y=i?.name==="API Test"?nt??1:d||S,W=i?.name==="API Test"?`T${y}`:y,Q=new Date,Z=pe[0],ee=Z?.kickoff_time?new Date(Z.kickoff_time):null,ae=ee&&ee<=Q,de=pe[pe.length-1]?.fixture_index,B=(de!==void 0?Ze[de]:null)?.status==="FINISHED",re=ae&&!B,ne=re?"Live Table":"Results";return e.jsxs(e.Fragment,{children:[re&&e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:W?`GW ${W} ${ne}`:`GW ${ne}`}),e.jsx("span",{className:"sm:hidden whitespace-pre-line text-center",children:W?`GW${W}
${ne}`:`GW
${ne}`})]})})(),x==="gwr"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(S||i?.name==="API Test")&&e.jsxs("button",{onClick:()=>{o.current=!0,r(!0),n("gw")},className:"flex-1 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight "+(x==="gw"?"text-[#1C8376]":"text-slate-400"),children:[e.jsx("span",{className:"hidden sm:inline",children:i?.name==="API Test"?`GW T${nt??1} Predictions`:S?`GW ${S} Predictions`:"GW Predictions"}),e.jsx("span",{className:"sm:hidden whitespace-pre-line",children:i?.name==="API Test"?`GWT${nt??1}
Predictions`:S?`GW${S}
Predictions`:`GW
Predictions`}),x==="gw"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),e.jsxs("button",{onClick:()=>{o.current=!0,r(!0),n("mlt")},className:"flex-1 px-3 sm:px-6 py-3 text-sm font-semibold transition-colors relative "+(x==="mlt"?"text-[#1C8376]":"text-slate-400"),children:["Table",x==="mlt"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]})]})]})}),ke&&typeof document<"u"&&document.body&&Js.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0",onClick:()=>Ee(!1),style:{backgroundColor:"transparent",zIndex:99998}}),e.jsxs("div",{className:"fixed w-56 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",style:{zIndex:99999,top:"calc(3.5rem + 0.5rem + env(safe-area-inset-top, 0px))",right:"1rem"},children:[It&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[e.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Admin:"}),e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:Ds})]}),e.jsx("button",{onClick:()=>{C(!0),Ee(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Manage"}),e.jsx("button",{onClick:()=>{M(!0),Ee(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Upload avatar"})]}),e.jsx("button",{onClick:()=>{it(!0),Ee(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Invite players"}),e.jsx("button",{onClick:()=>{ds(),Ee(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:"Share league code"}),e.jsx("button",{onClick:()=>{v(!0),Ee(!1)},className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Leave"})]})]}),document.body),x==="chat"?e.jsx("div",{className:"chat-tab-wrapper",children:e.jsx(ir,{chat:Qe,userId:k?.id,nameById:Pt,isMember:Lt,newMsg:Ve,setNewMsg:ot,onSend:$s,leagueCode:i?.code,memberCount:t.length,maxMembers:Ot,notificationStatus:Tt})}):e.jsx("div",{className:"league-content-wrapper",children:e.jsxs("div",{className:"px-1 sm:px-2",children:[x==="mlt"&&e.jsx(Hs,{}),x==="gw"&&e.jsx(Ws,{}),x==="gwr"&&e.jsx(Os,{})]})}),It&&D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>C(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:y=>y.stopPropagation(),children:[e.jsx("button",{onClick:()=>C(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"League Management"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-slate-600 mb-3 font-semibold",children:"Remove Members:"}),e.jsxs("div",{className:"space-y-2",children:[t.filter(y=>y.id!==k?.id).map(y=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-slate-800",children:y.name}),e.jsx("button",{onClick:()=>{Be(y),Ue(!0),C(!1)},className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded-md transition-colors font-medium",children:"Remove"})]},y.id)),t.filter(y=>y.id!==k?.id).length===0&&e.jsx("div",{className:"text-sm text-slate-500 italic py-4 text-center",children:"No other members to remove"})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsx("button",{onClick:()=>{Ie(!0),C(!1)},className:"w-full px-4 py-3 text-sm bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:" End League"})})]})]})]})}),It&&z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>M(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:y=>y.stopPropagation(),children:[e.jsx("button",{onClick:()=>{M(!1),xe(null),Te(!1)},className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Upload League Avatar"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm text-slate-600 mb-2 font-medium",children:"Current Avatar:"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-slate-100 flex items-center justify-center",children:e.jsx("img",{src:i?Ys(i):"/assets/league-avatars/ML-avatar-1.png",alt:"League avatar",className:"w-full h-full object-cover",onError:y=>{const W=y.target;W.src="/assets/league-avatars/ML-avatar-1.png"}})}),i?.avatar&&e.jsx("button",{onClick:Is,disabled:ce,className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded-md transition-colors font-medium disabled:opacity-50",children:"Remove Avatar"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload New Avatar"}),e.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:y=>{const W=y.target.files?.[0];W&&Us(W)},disabled:ce,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[#1C8376] file:text-white hover:file:bg-emerald-700 file:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Images will be automatically compressed to ~60KB and resized to 256x256px. Max file size: 2MB before compression."})]}),ce&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#1C8376]"}),e.jsx("span",{children:"Processing and uploading..."})]}),Ae&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-800",children:" Avatar uploaded successfully!"}),ye&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-800",children:ye})]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>oe(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:y=>y.stopPropagation(),children:[e.jsx("button",{onClick:()=>oe(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"p-6 pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"League Points"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1C8376]/10 border border-[#1C8376]/20 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-[#1C8376]/90 mb-3",children:"League Points:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),e.jsxs("span",{className:"text-[#1C8376]/80",children:[e.jsx("strong",{children:"Win the week"}),"  3 points"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),e.jsxs("span",{className:"text-[#1C8376]/80",children:[e.jsx("strong",{children:"Draw"}),"  1 point"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),e.jsxs("span",{className:"text-[#1C8376]/80",children:[e.jsx("strong",{children:"Lose"}),"  0 points"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" Ties"}),e.jsxs("p",{className:"text-blue-700",children:["If two or more players are tied on Points, the player with the most overall ",e.jsx("strong",{children:" Unicorns"})," in the mini league is ranked higher."]})]})]}),i&&(["The Bird league"].includes(i.name)||["gregVjofVcarl","Let Down"].includes(i.name))&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-700 text-sm",children:[e.jsx("strong",{children:"Note:"}),' This mini league started after GW1, so the "CP" column shows correct predictions since this mini league began.']})})]})]})}),De&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Invite players"}),e.jsxs("p",{className:"text-slate-600 text-sm",children:["Share this code (up to ",Ot," members):"]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("code",{className:"font-mono text-lg font-bold",children:i.code}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(i.code)},className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Copy"}),e.jsx("button",{onClick:ds,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Share"})]}),e.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:[t.length,"/",Ot," members"]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>it(!1),className:"px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50",children:"Close"})})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Leave League"}),e.jsxs("p",{className:"text-slate-600 mb-6",children:['Are you sure you want to leave "',i?.name,`"? You'll need the league code to rejoin later.`]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:P,children:"Cancel"}),e.jsx("button",{onClick:Ms,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:P,children:P?"Leaving...":"Leave League"})]})]})}),st&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Join Mini League"}),e.jsxs("p",{className:"text-slate-600 mb-6",children:["You are about to join ",e.jsxs("strong",{children:['"',i?.name,'"']}),". Are you sure?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Le(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:Pe,children:"Cancel"}),e.jsx("button",{onClick:Fs,className:"flex-1 px-4 py-2 bg-[#1C8376] text-white rounded-md hover:bg-emerald-700 transition-colors disabled:opacity-50",disabled:Pe,children:Pe?"Joining...":"Join League"})]})]})}),ze&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Remove Member"}),e.jsxs("p",{className:"text-slate-600 mb-6",children:["Are you sure you want to remove ",e.jsxs("strong",{children:['"',_e?.name,'"']})," from the league? They will need the league code to rejoin."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ue(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:rt,children:"Cancel"}),e.jsx("button",{onClick:Ps,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:rt,children:rt?"Removing...":"Remove Member"})]})]})}),Ke&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:" End League"}),e.jsxs("p",{className:"text-slate-600 mb-4",children:["Are you absolutely sure you want to ",e.jsx("strong",{children:"permanently end"})," the league ",e.jsxs("strong",{children:['"',i?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This will remove all members and delete the league forever. This action cannot be undone!"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Ie(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:Re,children:"Cancel"}),e.jsx("button",{onClick:Rs,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:Re,children:Re?"Ending...":"Yes, End League"})]})]})}),i?.name==="API Test"&&e.jsx("div",{className:"mt-6 mb-4 px-4 py-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:" Test League:"})," This league uses test API data and starts from Test GW 1 with zero points. It does not affect your main game scores."]})})]}):null}export{ur as default};
