function sv(r,e){for(var A=0;A<e.length;A++){const n=e[A];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in r)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(r,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function A(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=A(a);fetch(a.href,o)}})();function Ll(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function iv(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var A=function n(){var a=!1;try{a=this instanceof n}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};A.prototype=e.prototype}else A={};return Object.defineProperty(A,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var a=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(A,n,a.get?a:{enumerable:!0,get:function(){return r[n]}})}),A}var Cu={exports:{}},ta={},Eu={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function av(){if(Tm)return Tt;Tm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function v(Q){return Q===null||typeof Q!="object"?null:(Q=w&&Q[w]||Q["@@iterator"],typeof Q=="function"?Q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,b={};function E(Q,K,Z){this.props=Q,this.context=K,this.refs=b,this.updater=Z||y}E.prototype.isReactComponent={},E.prototype.setState=function(Q,K){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,K,"setState")},E.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function S(){}S.prototype=E.prototype;function k(Q,K,Z){this.props=Q,this.context=K,this.refs=b,this.updater=Z||y}var N=k.prototype=new S;N.constructor=k,C(N,E.prototype),N.isPureReactComponent=!0;var O=Array.isArray,j=Object.prototype.hasOwnProperty,L={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function G(Q,K,Z){var te,se={},He=null,We=null;if(K!=null)for(te in K.ref!==void 0&&(We=K.ref),K.key!==void 0&&(He=""+K.key),K)j.call(K,te)&&!R.hasOwnProperty(te)&&(se[te]=K[te]);var ie=arguments.length-2;if(ie===1)se.children=Z;else if(1<ie){for(var he=Array(ie),Te=0;Te<ie;Te++)he[Te]=arguments[Te+2];se.children=he}if(Q&&Q.defaultProps)for(te in ie=Q.defaultProps,ie)se[te]===void 0&&(se[te]=ie[te]);return{$$typeof:r,type:Q,key:He,ref:We,props:se,_owner:L.current}}function H(Q,K){return{$$typeof:r,type:Q.type,key:K,ref:Q.ref,props:Q.props,_owner:Q._owner}}function ve(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===r}function W(Q){var K={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Z){return K[Z]})}var ae=/\/+/g;function fe(Q,K){return typeof Q=="object"&&Q!==null&&Q.key!=null?W(""+Q.key):K.toString(36)}function P(Q,K,Z,te,se){var He=typeof Q;(He==="undefined"||He==="boolean")&&(Q=null);var We=!1;if(Q===null)We=!0;else switch(He){case"string":case"number":We=!0;break;case"object":switch(Q.$$typeof){case r:case e:We=!0}}if(We)return We=Q,se=se(We),Q=te===""?"."+fe(We,0):te,O(se)?(Z="",Q!=null&&(Z=Q.replace(ae,"$&/")+"/"),P(se,K,Z,"",function(Te){return Te})):se!=null&&(ve(se)&&(se=H(se,Z+(!se.key||We&&We.key===se.key?"":(""+se.key).replace(ae,"$&/")+"/")+Q)),K.push(se)),1;if(We=0,te=te===""?".":te+":",O(Q))for(var ie=0;ie<Q.length;ie++){He=Q[ie];var he=te+fe(He,ie);We+=P(He,K,Z,he,se)}else if(he=v(Q),typeof he=="function")for(Q=he.call(Q),ie=0;!(He=Q.next()).done;)He=He.value,he=te+fe(He,ie++),We+=P(He,K,Z,he,se);else if(He==="object")throw K=String(Q),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return We}function ue(Q,K,Z){if(Q==null)return Q;var te=[],se=0;return P(Q,te,"","",function(He){return K.call(Z,He,se++)}),te}function Y(Q){if(Q._status===-1){var K=Q._result;K=K(),K.then(function(Z){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Z)},function(Z){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Z)}),Q._status===-1&&(Q._status=0,Q._result=K)}if(Q._status===1)return Q._result.default;throw Q._result}var D={current:null},_={transition:null},I={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:_,ReactCurrentOwner:L};function $(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:ue,forEach:function(Q,K,Z){ue(Q,function(){K.apply(this,arguments)},Z)},count:function(Q){var K=0;return ue(Q,function(){K++}),K},toArray:function(Q){return ue(Q,function(K){return K})||[]},only:function(Q){if(!ve(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Tt.Component=E,Tt.Fragment=A,Tt.Profiler=a,Tt.PureComponent=k,Tt.StrictMode=n,Tt.Suspense=f,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,Tt.act=$,Tt.cloneElement=function(Q,K,Z){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var te=C({},Q.props),se=Q.key,He=Q.ref,We=Q._owner;if(K!=null){if(K.ref!==void 0&&(He=K.ref,We=L.current),K.key!==void 0&&(se=""+K.key),Q.type&&Q.type.defaultProps)var ie=Q.type.defaultProps;for(he in K)j.call(K,he)&&!R.hasOwnProperty(he)&&(te[he]=K[he]===void 0&&ie!==void 0?ie[he]:K[he])}var he=arguments.length-2;if(he===1)te.children=Z;else if(1<he){ie=Array(he);for(var Te=0;Te<he;Te++)ie[Te]=arguments[Te+2];te.children=ie}return{$$typeof:r,type:Q.type,key:se,ref:He,props:te,_owner:We}},Tt.createContext=function(Q){return Q={$$typeof:c,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:o,_context:Q},Q.Consumer=Q},Tt.createElement=G,Tt.createFactory=function(Q){var K=G.bind(null,Q);return K.type=Q,K},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(Q){return{$$typeof:d,render:Q}},Tt.isValidElement=ve,Tt.lazy=function(Q){return{$$typeof:g,_payload:{_status:-1,_result:Q},_init:Y}},Tt.memo=function(Q,K){return{$$typeof:m,type:Q,compare:K===void 0?null:K}},Tt.startTransition=function(Q){var K=_.transition;_.transition={};try{Q()}finally{_.transition=K}},Tt.unstable_act=$,Tt.useCallback=function(Q,K){return D.current.useCallback(Q,K)},Tt.useContext=function(Q){return D.current.useContext(Q)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(Q){return D.current.useDeferredValue(Q)},Tt.useEffect=function(Q,K){return D.current.useEffect(Q,K)},Tt.useId=function(){return D.current.useId()},Tt.useImperativeHandle=function(Q,K,Z){return D.current.useImperativeHandle(Q,K,Z)},Tt.useInsertionEffect=function(Q,K){return D.current.useInsertionEffect(Q,K)},Tt.useLayoutEffect=function(Q,K){return D.current.useLayoutEffect(Q,K)},Tt.useMemo=function(Q,K){return D.current.useMemo(Q,K)},Tt.useReducer=function(Q,K,Z){return D.current.useReducer(Q,K,Z)},Tt.useRef=function(Q){return D.current.useRef(Q)},Tt.useState=function(Q){return D.current.useState(Q)},Tt.useSyncExternalStore=function(Q,K,Z){return D.current.useSyncExternalStore(Q,K,Z)},Tt.useTransition=function(){return D.current.useTransition()},Tt.version="18.3.1",Tt}var Lm;function Yd(){return Lm||(Lm=1,Eu.exports=av()),Eu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function ov(){if(Hm)return ta;Hm=1;var r=Yd(),e=Symbol.for("react.element"),A=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(d,f,m){var g,w={},v=null,y=null;m!==void 0&&(v=""+m),f.key!==void 0&&(v=""+f.key),f.ref!==void 0&&(y=f.ref);for(g in f)n.call(f,g)&&!o.hasOwnProperty(g)&&(w[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)w[g]===void 0&&(w[g]=f[g]);return{$$typeof:e,type:d,key:v,ref:y,props:w,_owner:a.current}}return ta.Fragment=A,ta.jsx=c,ta.jsxs=c,ta}var Dm;function lv(){return Dm||(Dm=1,Cu.exports=ov()),Cu.exports}var i=lv(),x=Yd();const cs=Ll(x);var To={},_u={exports:{}},qA={},Qu={exports:{}},Uu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function cv(){return Pm||(Pm=1,(function(r){function e(_,I){var $=_.length;_.push(I);e:for(;0<$;){var Q=$-1>>>1,K=_[Q];if(0<a(K,I))_[Q]=I,_[$]=K,$=Q;else break e}}function A(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var I=_[0],$=_.pop();if($!==I){_[0]=$;e:for(var Q=0,K=_.length,Z=K>>>1;Q<Z;){var te=2*(Q+1)-1,se=_[te],He=te+1,We=_[He];if(0>a(se,$))He<K&&0>a(We,se)?(_[Q]=We,_[He]=$,Q=He):(_[Q]=se,_[te]=$,Q=te);else if(He<K&&0>a(We,$))_[Q]=We,_[He]=$,Q=He;else break e}}return I}function a(_,I){var $=_.sortIndex-I.sortIndex;return $!==0?$:_.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var f=[],m=[],g=1,w=null,v=3,y=!1,C=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(_){for(var I=A(m);I!==null;){if(I.callback===null)n(m);else if(I.startTime<=_)n(m),I.sortIndex=I.expirationTime,e(f,I);else break;I=A(m)}}function O(_){if(b=!1,N(_),!C)if(A(f)!==null)C=!0,Y(j);else{var I=A(m);I!==null&&D(O,I.startTime-_)}}function j(_,I){C=!1,b&&(b=!1,S(G),G=-1),y=!0;var $=v;try{for(N(I),w=A(f);w!==null&&(!(w.expirationTime>I)||_&&!W());){var Q=w.callback;if(typeof Q=="function"){w.callback=null,v=w.priorityLevel;var K=Q(w.expirationTime<=I);I=r.unstable_now(),typeof K=="function"?w.callback=K:w===A(f)&&n(f),N(I)}else n(f);w=A(f)}if(w!==null)var Z=!0;else{var te=A(m);te!==null&&D(O,te.startTime-I),Z=!1}return Z}finally{w=null,v=$,y=!1}}var L=!1,R=null,G=-1,H=5,ve=-1;function W(){return!(r.unstable_now()-ve<H)}function ae(){if(R!==null){var _=r.unstable_now();ve=_;var I=!0;try{I=R(!0,_)}finally{I?fe():(L=!1,R=null)}}else L=!1}var fe;if(typeof k=="function")fe=function(){k(ae)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ue=P.port2;P.port1.onmessage=ae,fe=function(){ue.postMessage(null)}}else fe=function(){E(ae,0)};function Y(_){R=_,L||(L=!0,fe())}function D(_,I){G=E(function(){_(r.unstable_now())},I)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(_){_.callback=null},r.unstable_continueExecution=function(){C||y||(C=!0,Y(j))},r.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<_?Math.floor(1e3/_):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return A(f)},r.unstable_next=function(_){switch(v){case 1:case 2:case 3:var I=3;break;default:I=v}var $=v;v=I;try{return _()}finally{v=$}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(_,I){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var $=v;v=_;try{return I()}finally{v=$}},r.unstable_scheduleCallback=function(_,I,$){var Q=r.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,_){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=$+K,_={id:g++,callback:I,priorityLevel:_,startTime:$,expirationTime:K,sortIndex:-1},$>Q?(_.sortIndex=$,e(m,_),A(f)===null&&_===A(m)&&(b?(S(G),G=-1):b=!0,D(O,$-Q))):(_.sortIndex=K,e(f,_),C||y||(C=!0,Y(j))),_},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(_){var I=v;return function(){var $=v;v=I;try{return _.apply(this,arguments)}finally{v=$}}}})(Uu)),Uu}var Rm;function uv(){return Rm||(Rm=1,Qu.exports=cv()),Qu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function dv(){if(Om)return qA;Om=1;var r=Yd(),e=uv();function A(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function o(t,s){c(t,s),c(t+"Capture",s)}function c(t,s){for(a[t]=s,t=0;t<s.length;t++)n.add(s[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function v(t){return f.call(w,t)?!0:f.call(g,t)?!1:m.test(t)?w[t]=!0:(g[t]=!0,!1)}function y(t,s,l,u){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C(t,s,l,u){if(s===null||typeof s>"u"||y(t,s,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function b(t,s,l,u,h,p,B){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=l,this.propertyName=t,this.type=s,this.sanitizeURL=p,this.removeEmptyString=B}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){E[t]=new b(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];E[s]=new b(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){E[t]=new b(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){E[t]=new b(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){E[t]=new b(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){E[t]=new b(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){E[t]=new b(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){E[t]=new b(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){E[t]=new b(t,5,!1,t.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function k(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(S,k);E[s]=new b(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(S,k);E[s]=new b(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(S,k);E[s]=new b(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){E[t]=new b(t,1,!1,t.toLowerCase(),null,!1,!1)}),E.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){E[t]=new b(t,1,!1,t.toLowerCase(),null,!0,!0)});function N(t,s,l,u){var h=E.hasOwnProperty(s)?E[s]:null;(h!==null?h.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,l,h,u)&&(l=null),u||h===null?v(s)&&(l===null?t.removeAttribute(s):t.setAttribute(s,""+l)):h.mustUseProperty?t[h.propertyName]=l===null?h.type===3?!1:"":l:(s=h.attributeName,u=h.attributeNamespace,l===null?t.removeAttribute(s):(h=h.type,l=h===3||h===4&&l===!0?"":""+l,u?t.setAttributeNS(u,s,l):t.setAttribute(s,l))))}var O=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),L=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),W=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),_=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=_&&t[_]||t["@@iterator"],typeof t=="function"?t:null)}var $=Object.assign,Q;function K(t){if(Q===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Q=s&&s[1]||""}return`
`+Q+t}var Z=!1;function te(t,s){if(!t||Z)return"";Z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ee){var u=ee}Reflect.construct(t,[],s)}else{try{s.call()}catch(ee){u=ee}t.call(s.prototype)}else{try{throw Error()}catch(ee){u=ee}t()}}catch(ee){if(ee&&u&&typeof ee.stack=="string"){for(var h=ee.stack.split(`
`),p=u.stack.split(`
`),B=h.length-1,F=p.length-1;1<=B&&0<=F&&h[B]!==p[F];)F--;for(;1<=B&&0<=F;B--,F--)if(h[B]!==p[F]){if(B!==1||F!==1)do if(B--,F--,0>F||h[B]!==p[F]){var T=`
`+h[B].replace(" at new "," at ");return t.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",t.displayName)),T}while(1<=B&&0<=F);break}}}finally{Z=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?K(t):""}function se(t){switch(t.tag){case 5:return K(t.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return t=te(t.type,!1),t;case 11:return t=te(t.type.render,!1),t;case 1:return t=te(t.type,!0),t;default:return""}}function He(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case L:return"Portal";case H:return"Profiler";case G:return"StrictMode";case fe:return"Suspense";case P:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case W:return(t.displayName||"Context")+".Consumer";case ve:return(t._context.displayName||"Context")+".Provider";case ae:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ue:return s=t.displayName||null,s!==null?s:He(t.type)||"Memo";case Y:s=t._payload,t=t._init;try{return He(t(s))}catch{}}return null}function We(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return He(s);case 8:return s===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ie(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function he(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Te(t){var s=he(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),u=""+t[s];if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(B){u=""+B,p.call(this,B)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(B){u=""+B},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function be(t){t._valueTracker||(t._valueTracker=Te(t))}function Ze(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return t&&(u=he(t)?t.checked?"true":"false":t.value),t=u,t!==l?(s.setValue(t),!0):!1}function gt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nt(t,s){var l=s.checked;return $({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function rA(t,s){var l=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;l=ie(s.value!=null?s.value:l),t._wrapperState={initialChecked:u,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Xt(t,s){s=s.checked,s!=null&&N(t,"checked",s,!1)}function le(t,s){Xt(t,s);var l=ie(s.value),u=s.type;if(l!=null)u==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Le(t,s.type,l):s.hasOwnProperty("defaultValue")&&Le(t,s.type,ie(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function et(t,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,l||s===t.value||(t.value=s),t.defaultValue=s}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function Le(t,s,l){(s!=="number"||gt(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var Ce=Array.isArray;function mt(t,s,l,u){if(t=t.options,s){s={};for(var h=0;h<l.length;h++)s["$"+l[h]]=!0;for(l=0;l<t.length;l++)h=s.hasOwnProperty("$"+t[l].value),t[l].selected!==h&&(t[l].selected=h),h&&u&&(t[l].defaultSelected=!0)}else{for(l=""+ie(l),s=null,h=0;h<t.length;h++){if(t[h].value===l){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function pt(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(A(91));return $({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ye(t,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(A(92));if(Ce(l)){if(1<l.length)throw Error(A(93));l=l[0]}s=l}s==null&&(s=""),l=s}t._wrapperState={initialValue:ie(l)}}function rt(t,s){var l=ie(s.value),u=ie(s.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),s.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),u!=null&&(t.defaultValue=""+u)}function ze(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Qt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kt(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Qt(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vt,wt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,u,h){MSApp.execUnsafeLocalFunction(function(){return t(s,l,u,h)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(vt=vt||document.createElement("div"),vt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function cA(t,s){if(s){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=s;return}}t.textContent=s}var Ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ct=["Webkit","ms","Moz","O"];Object.keys(Ve).forEach(function(t){ct.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ve[s]=Ve[t]})});function kt(t,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Ve.hasOwnProperty(t)&&Ve[t]?(""+s).trim():s+"px"}function Pt(t,s){t=t.style;for(var l in s)if(s.hasOwnProperty(l)){var u=l.indexOf("--")===0,h=kt(l,s[l],u);l==="float"&&(l="cssFloat"),u?t.setProperty(l,h):t[l]=h}}var Bt=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yt(t,s){if(s){if(Bt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(A(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(A(61))}if(s.style!=null&&typeof s.style!="object")throw Error(A(62))}}function Wt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vt=null;function mA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gt=null,xe=null,Be=null;function Se(t){if(t=Ri(t)){if(typeof Gt!="function")throw Error(A(280));var s=t.stateNode;s&&(s=Ja(s),Gt(t.stateNode,t.type,s))}}function Me(t){xe?Be?Be.push(t):Be=[t]:xe=t}function Pe(){if(xe){var t=xe,s=Be;if(Be=xe=null,Se(t),s)for(t=0;t<s.length;t++)Se(s[t])}}function ke(t,s){return t(s)}function oe(){}var Xe=!1;function dt(t,s,l){if(Xe)return t(s,l);Xe=!0;try{return ke(t,s,l)}finally{Xe=!1,(xe!==null||Be!==null)&&(oe(),Pe())}}function Qe(t,s){var l=t.stateNode;if(l===null)return null;var u=Ja(l);if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(A(231,s,typeof l));return l}var Ge=!1;if(d)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Ge=!1}function $e(t,s,l,u,h,p,B,F,T){var ee=Array.prototype.slice.call(arguments,3);try{s.apply(l,ee)}catch(Fe){this.onError(Fe)}}var Ne=!1,nt=null,yt=!1,Oe=null,me={onError:function(t){Ne=!0,nt=t}};function X(t,s,l,u,h,p,B,F,T){Ne=!1,nt=null,$e.apply(me,arguments)}function U(t,s,l,u,h,p,B,F,T){if(X.apply(this,arguments),Ne){if(Ne){var ee=nt;Ne=!1,nt=null}else throw Error(A(198));yt||(yt=!0,Oe=ee)}}function re(t){var s=t,l=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(l=s.return),t=s.return;while(t)}return s.tag===3?l:null}function pe(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ye(t){if(re(t)!==t)throw Error(A(188))}function _e(t){var s=t.alternate;if(!s){if(s=re(t),s===null)throw Error(A(188));return s!==t?null:t}for(var l=t,u=s;;){var h=l.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){l=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===l)return ye(h),t;if(p===u)return ye(h),s;p=p.sibling}throw Error(A(188))}if(l.return!==u.return)l=h,u=p;else{for(var B=!1,F=h.child;F;){if(F===l){B=!0,l=h,u=p;break}if(F===u){B=!0,u=h,l=p;break}F=F.sibling}if(!B){for(F=p.child;F;){if(F===l){B=!0,l=p,u=h;break}if(F===u){B=!0,u=p,l=h;break}F=F.sibling}if(!B)throw Error(A(189))}}if(l.alternate!==u)throw Error(A(190))}if(l.tag!==3)throw Error(A(188));return l.stateNode.current===l?t:s}function de(t){return t=_e(t),t!==null?ne(t):null}function ne(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=ne(t);if(s!==null)return s;t=t.sibling}return null}var we=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,ce=e.unstable_shouldYield,De=e.unstable_requestPaint,Ae=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,je=e.unstable_ImmediatePriority,ft=e.unstable_UserBlockingPriority,xt=e.unstable_NormalPriority,jt=e.unstable_LowPriority,zt=e.unstable_IdlePriority,Rt=null,qe=null;function J(t){if(qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Rt,t,void 0,(t.current.flags&128)===128)}catch{}}var ge=Math.clz32?Math.clz32:nA,tt=Math.log,ot=Math.LN2;function nA(t){return t>>>=0,t===0?32:31-(tt(t)/ot|0)|0}var It=64,Lt=4194304;function _t(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function St(t,s){var l=t.pendingLanes;if(l===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,B=l&268435455;if(B!==0){var F=B&~h;F!==0?u=_t(F):(p&=B,p!==0&&(u=_t(p)))}else B=l&~h,B!==0?u=_t(B):p!==0&&(u=_t(p));if(u===0)return 0;if(s!==0&&s!==u&&(s&h)===0&&(h=u&-u,p=s&-s,h>=p||h===16&&(p&4194240)!==0))return s;if((u&4)!==0&&(u|=l&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=u;0<s;)l=31-ge(s),h=1<<l,u|=t[l],s&=~h;return u}function Rr(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jr(t,s){for(var l=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var B=31-ge(p),F=1<<B,T=h[B];T===-1?((F&l)===0||(F&u)!==0)&&(h[B]=Rr(F,s)):T<=s&&(t.expiredLanes|=F),p&=~F}}function lr(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OA(){var t=It;return It<<=1,(It&4194240)===0&&(It=64),t}function Cr(t){for(var s=[],l=0;31>l;l++)s.push(t);return s}function vA(t,s,l){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ge(s),t[s]=l}function cr(t,s){var l=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<l;){var h=31-ge(l),p=1<<h;s[h]=0,u[h]=-1,t[h]=-1,l&=~p}}function WA(t,s){var l=t.entangledLanes|=s;for(t=t.entanglements;l;){var u=31-ge(l),h=1<<u;h&s|t[u]&s&&(t[u]|=s),l&=~h}}var Ht=0;function fn(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var hn,ur,vs,Bs,yi,bi=!1,Wn=[],Er=null,_r=null,mn=null,Ci=new Map,Ei=new Map,gn=[],Qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wf(t,s){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Ci.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(s.pointerId)}}function _i(t,s,l,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},s!==null&&(s=Ri(s),s!==null&&ur(s)),t):(t.eventSystemFlags|=u,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function Uw(t,s,l,u,h){switch(s){case"focusin":return Er=_i(Er,t,s,l,u,h),!0;case"dragenter":return _r=_i(_r,t,s,l,u,h),!0;case"mouseover":return mn=_i(mn,t,s,l,u,h),!0;case"pointerover":var p=h.pointerId;return Ci.set(p,_i(Ci.get(p)||null,t,s,l,u,h)),!0;case"gotpointercapture":return p=h.pointerId,Ei.set(p,_i(Ei.get(p)||null,t,s,l,u,h)),!0}return!1}function xf(t){var s=Vn(t.target);if(s!==null){var l=re(s);if(l!==null){if(s=l.tag,s===13){if(s=pe(l),s!==null){t.blockedOn=s,yi(t.priority,function(){vs(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ta(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var l=Xl(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var u=new l.constructor(l.type,l);Vt=u,l.target.dispatchEvent(u),Vt=null}else return s=Ri(l),s!==null&&ur(s),t.blockedOn=l,!1;s.shift()}return!0}function vf(t,s,l){Ta(t)&&l.delete(s)}function Fw(){bi=!1,Er!==null&&Ta(Er)&&(Er=null),_r!==null&&Ta(_r)&&(_r=null),mn!==null&&Ta(mn)&&(mn=null),Ci.forEach(vf),Ei.forEach(vf)}function Qi(t,s){t.blockedOn===s&&(t.blockedOn=null,bi||(bi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fw)))}function Ui(t){function s(h){return Qi(h,t)}if(0<Wn.length){Qi(Wn[0],t);for(var l=1;l<Wn.length;l++){var u=Wn[l];u.blockedOn===t&&(u.blockedOn=null)}}for(Er!==null&&Qi(Er,t),_r!==null&&Qi(_r,t),mn!==null&&Qi(mn,t),Ci.forEach(s),Ei.forEach(s),l=0;l<gn.length;l++)u=gn[l],u.blockedOn===t&&(u.blockedOn=null);for(;0<gn.length&&(l=gn[0],l.blockedOn===null);)xf(l),l.blockedOn===null&&gn.shift()}var ys=O.ReactCurrentBatchConfig,La=!0;function Sw(t,s,l,u){var h=Ht,p=ys.transition;ys.transition=null;try{Ht=1,Yl(t,s,l,u)}finally{Ht=h,ys.transition=p}}function kw(t,s,l,u){var h=Ht,p=ys.transition;ys.transition=null;try{Ht=4,Yl(t,s,l,u)}finally{Ht=h,ys.transition=p}}function Yl(t,s,l,u){if(La){var h=Xl(t,s,l,u);if(h===null)hc(t,s,u,Ha,l),wf(t,u);else if(Uw(h,t,s,l,u))u.stopPropagation();else if(wf(t,u),s&4&&-1<Qw.indexOf(t)){for(;h!==null;){var p=Ri(h);if(p!==null&&hn(p),p=Xl(t,s,l,u),p===null&&hc(t,s,u,Ha,l),p===h)break;h=p}h!==null&&u.stopPropagation()}else hc(t,s,u,null,l)}}var Ha=null;function Xl(t,s,l,u){if(Ha=null,t=mA(u),t=Vn(t),t!==null)if(s=re(t),s===null)t=null;else if(l=s.tag,l===13){if(t=pe(s),t!==null)return t;t=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Ha=t,null}function Bf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ue()){case je:return 1;case ft:return 4;case xt:case jt:return 16;case zt:return 536870912;default:return 16}default:return 16}}var pn=null,ql=null,Da=null;function yf(){if(Da)return Da;var t,s=ql,l=s.length,u,h="value"in pn?pn.value:pn.textContent,p=h.length;for(t=0;t<l&&s[t]===h[t];t++);var B=l-t;for(u=1;u<=B&&s[l-u]===h[p-u];u++);return Da=h.slice(t,1<u?1-u:void 0)}function Pa(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ra(){return!0}function bf(){return!1}function Ar(t){function s(l,u,h,p,B){this._reactName=l,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=B,this.currentTarget=null;for(var F in t)t.hasOwnProperty(F)&&(l=t[F],this[F]=l?l(p):p[F]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ra:bf,this.isPropagationStopped=bf,this}return $(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),s}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zl=Ar(bs),Fi=$({},bs,{view:0,detail:0}),Nw=Ar(Fi),ec,tc,Si,Oa=$({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?(ec=t.screenX-Si.screenX,tc=t.screenY-Si.screenY):tc=ec=0,Si=t),ec)},movementY:function(t){return"movementY"in t?t.movementY:tc}}),Cf=Ar(Oa),Iw=$({},Oa,{dataTransfer:0}),jw=Ar(Iw),Tw=$({},Fi,{relatedTarget:0}),Ac=Ar(Tw),Lw=$({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Hw=Ar(Lw),Dw=$({},bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pw=Ar(Dw),Rw=$({},bs,{data:0}),Ef=Ar(Rw),Ow={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gw(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Kw[t])?!!s[t]:!1}function rc(){return Gw}var $w=$({},Fi,{key:function(t){if(t.key){var s=Ow[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Pa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(t){return t.type==="keypress"?Pa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ww=Ar($w),Vw=$({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=Ar(Vw),zw=$({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),Jw=Ar(zw),Yw=$({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xw=Ar(Yw),qw=$({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zw=Ar(qw),ex=[9,13,27,32],nc=d&&"CompositionEvent"in window,ki=null;d&&"documentMode"in document&&(ki=document.documentMode);var tx=d&&"TextEvent"in window&&!ki,Qf=d&&(!nc||ki&&8<ki&&11>=ki),Uf=" ",Ff=!1;function Sf(t,s){switch(t){case"keyup":return ex.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cs=!1;function Ax(t,s){switch(t){case"compositionend":return kf(s);case"keypress":return s.which!==32?null:(Ff=!0,Uf);case"textInput":return t=s.data,t===Uf&&Ff?null:t;default:return null}}function rx(t,s){if(Cs)return t==="compositionend"||!nc&&Sf(t,s)?(t=yf(),Da=ql=pn=null,Cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qf&&s.locale!=="ko"?null:s.data;default:return null}}var nx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!nx[t.type]:s==="textarea"}function If(t,s,l,u){Me(u),s=Wa(s,"onChange"),0<s.length&&(l=new Zl("onChange","change",null,l,u),t.push({event:l,listeners:s}))}var Ni=null,Ii=null;function sx(t){Xf(t,0)}function Ma(t){var s=Fs(t);if(Ze(s))return t}function ix(t,s){if(t==="change")return s}var jf=!1;if(d){var sc;if(d){var ic="oninput"in document;if(!ic){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),ic=typeof Tf.oninput=="function"}sc=ic}else sc=!1;jf=sc&&(!document.documentMode||9<document.documentMode)}function Lf(){Ni&&(Ni.detachEvent("onpropertychange",Hf),Ii=Ni=null)}function Hf(t){if(t.propertyName==="value"&&Ma(Ii)){var s=[];If(s,Ii,t,mA(t)),dt(sx,s)}}function ax(t,s,l){t==="focusin"?(Lf(),Ni=s,Ii=l,Ni.attachEvent("onpropertychange",Hf)):t==="focusout"&&Lf()}function ox(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ma(Ii)}function lx(t,s){if(t==="click")return Ma(s)}function cx(t,s){if(t==="input"||t==="change")return Ma(s)}function ux(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Qr=typeof Object.is=="function"?Object.is:ux;function ji(t,s){if(Qr(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var l=Object.keys(t),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var h=l[u];if(!f.call(s,h)||!Qr(t[h],s[h]))return!1}return!0}function Df(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pf(t,s){var l=Df(t);t=0;for(var u;l;){if(l.nodeType===3){if(u=t+l.textContent.length,t<=s&&u>=s)return{node:l,offset:s-t};t=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Df(l)}}function Rf(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Rf(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Of(){for(var t=window,s=gt();s instanceof t.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)t=s.contentWindow;else break;s=gt(t.document)}return s}function ac(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function dx(t){var s=Of(),l=t.focusedElem,u=t.selectionRange;if(s!==l&&l&&l.ownerDocument&&Rf(l.ownerDocument.documentElement,l)){if(u!==null&&ac(l)){if(s=u.start,t=u.end,t===void 0&&(t=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(t,l.value.length);else if(t=(s=l.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var h=l.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=Pf(l,p);var B=Pf(l,u);h&&B&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==B.node||t.focusOffset!==B.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(s),t.extend(B.node,B.offset)):(s.setEnd(B.node,B.offset),t.addRange(s)))}}for(s=[],t=l;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)t=s[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fx=d&&"documentMode"in document&&11>=document.documentMode,Es=null,oc=null,Ti=null,lc=!1;function Mf(t,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;lc||Es==null||Es!==gt(u)||(u=Es,"selectionStart"in u&&ac(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ti&&ji(Ti,u)||(Ti=u,u=Wa(oc,"onSelect"),0<u.length&&(s=new Zl("onSelect","select",null,s,l),t.push({event:s,listeners:u}),s.target=Es)))}function Ka(t,s){var l={};return l[t.toLowerCase()]=s.toLowerCase(),l["Webkit"+t]="webkit"+s,l["Moz"+t]="moz"+s,l}var _s={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},cc={},Kf={};d&&(Kf=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Ga(t){if(cc[t])return cc[t];if(!_s[t])return t;var s=_s[t],l;for(l in s)if(s.hasOwnProperty(l)&&l in Kf)return cc[t]=s[l];return t}var Gf=Ga("animationend"),$f=Ga("animationiteration"),Wf=Ga("animationstart"),Vf=Ga("transitionend"),zf=new Map,Jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(t,s){zf.set(t,s),o(s,[t])}for(var uc=0;uc<Jf.length;uc++){var dc=Jf[uc],hx=dc.toLowerCase(),mx=dc[0].toUpperCase()+dc.slice(1);wn(hx,"on"+mx)}wn(Gf,"onAnimationEnd"),wn($f,"onAnimationIteration"),wn(Wf,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(Vf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Yf(t,s,l){var u=t.type||"unknown-event";t.currentTarget=l,U(u,s,void 0,t),t.currentTarget=null}function Xf(t,s){s=(s&4)!==0;for(var l=0;l<t.length;l++){var u=t[l],h=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var B=u.length-1;0<=B;B--){var F=u[B],T=F.instance,ee=F.currentTarget;if(F=F.listener,T!==p&&h.isPropagationStopped())break e;Yf(h,F,ee),p=T}else for(B=0;B<u.length;B++){if(F=u[B],T=F.instance,ee=F.currentTarget,F=F.listener,T!==p&&h.isPropagationStopped())break e;Yf(h,F,ee),p=T}}}if(yt)throw t=Oe,yt=!1,Oe=null,t}function tA(t,s){var l=s[vc];l===void 0&&(l=s[vc]=new Set);var u=t+"__bubble";l.has(u)||(qf(s,t,2,!1),l.add(u))}function fc(t,s,l){var u=0;s&&(u|=4),qf(l,t,u,s)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[$a]){t[$a]=!0,n.forEach(function(l){l!=="selectionchange"&&(gx.has(l)||fc(l,!1,t),fc(l,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[$a]||(s[$a]=!0,fc("selectionchange",!1,s))}}function qf(t,s,l,u){switch(Bf(s)){case 1:var h=Sw;break;case 4:h=kw;break;default:h=Yl}l=h.bind(null,s,l,t),h=void 0,!Ge||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(s,l,{capture:!0,passive:h}):t.addEventListener(s,l,!0):h!==void 0?t.addEventListener(s,l,{passive:h}):t.addEventListener(s,l,!1)}function hc(t,s,l,u,h){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var B=u.tag;if(B===3||B===4){var F=u.stateNode.containerInfo;if(F===h||F.nodeType===8&&F.parentNode===h)break;if(B===4)for(B=u.return;B!==null;){var T=B.tag;if((T===3||T===4)&&(T=B.stateNode.containerInfo,T===h||T.nodeType===8&&T.parentNode===h))return;B=B.return}for(;F!==null;){if(B=Vn(F),B===null)return;if(T=B.tag,T===5||T===6){u=p=B;continue e}F=F.parentNode}}u=u.return}dt(function(){var ee=p,Fe=mA(l),Ie=[];e:{var Ee=zf.get(t);if(Ee!==void 0){var st=Zl,lt=t;switch(t){case"keypress":if(Pa(l)===0)break e;case"keydown":case"keyup":st=Ww;break;case"focusin":lt="focus",st=Ac;break;case"focusout":lt="blur",st=Ac;break;case"beforeblur":case"afterblur":st=Ac;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=jw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Jw;break;case Gf:case $f:case Wf:st=Hw;break;case Vf:st=Xw;break;case"scroll":st=Nw;break;case"wheel":st=Zw;break;case"copy":case"cut":case"paste":st=Pw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=_f}var ut=(s&4)!==0,dA=!ut&&t==="scroll",V=ut?Ee!==null?Ee+"Capture":null:Ee;ut=[];for(var M=ee,q;M!==null;){q=M;var Re=q.stateNode;if(q.tag===5&&Re!==null&&(q=Re,V!==null&&(Re=Qe(M,V),Re!=null&&ut.push(Di(M,Re,q)))),dA)break;M=M.return}0<ut.length&&(Ee=new st(Ee,lt,null,l,Fe),Ie.push({event:Ee,listeners:ut}))}}if((s&7)===0){e:{if(Ee=t==="mouseover"||t==="pointerover",st=t==="mouseout"||t==="pointerout",Ee&&l!==Vt&&(lt=l.relatedTarget||l.fromElement)&&(Vn(lt)||lt[Yr]))break e;if((st||Ee)&&(Ee=Fe.window===Fe?Fe:(Ee=Fe.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,st?(lt=l.relatedTarget||l.toElement,st=ee,lt=lt?Vn(lt):null,lt!==null&&(dA=re(lt),lt!==dA||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(st=null,lt=ee),st!==lt)){if(ut=Cf,Re="onMouseLeave",V="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(ut=_f,Re="onPointerLeave",V="onPointerEnter",M="pointer"),dA=st==null?Ee:Fs(st),q=lt==null?Ee:Fs(lt),Ee=new ut(Re,M+"leave",st,l,Fe),Ee.target=dA,Ee.relatedTarget=q,Re=null,Vn(Fe)===ee&&(ut=new ut(V,M+"enter",lt,l,Fe),ut.target=q,ut.relatedTarget=dA,Re=ut),dA=Re,st&&lt)t:{for(ut=st,V=lt,M=0,q=ut;q;q=Qs(q))M++;for(q=0,Re=V;Re;Re=Qs(Re))q++;for(;0<M-q;)ut=Qs(ut),M--;for(;0<q-M;)V=Qs(V),q--;for(;M--;){if(ut===V||V!==null&&ut===V.alternate)break t;ut=Qs(ut),V=Qs(V)}ut=null}else ut=null;st!==null&&Zf(Ie,Ee,st,ut,!1),lt!==null&&dA!==null&&Zf(Ie,dA,lt,ut,!0)}}e:{if(Ee=ee?Fs(ee):window,st=Ee.nodeName&&Ee.nodeName.toLowerCase(),st==="select"||st==="input"&&Ee.type==="file")var ht=ix;else if(Nf(Ee))if(jf)ht=cx;else{ht=ox;var bt=ax}else(st=Ee.nodeName)&&st.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(ht=lx);if(ht&&(ht=ht(t,ee))){If(Ie,ht,l,Fe);break e}bt&&bt(t,Ee,ee),t==="focusout"&&(bt=Ee._wrapperState)&&bt.controlled&&Ee.type==="number"&&Le(Ee,"number",Ee.value)}switch(bt=ee?Fs(ee):window,t){case"focusin":(Nf(bt)||bt.contentEditable==="true")&&(Es=bt,oc=ee,Ti=null);break;case"focusout":Ti=oc=Es=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Mf(Ie,l,Fe);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":Mf(Ie,l,Fe)}var Ct;if(nc)e:{switch(t){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else Cs?Sf(t,l)&&(Ut="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Ut="onCompositionStart");Ut&&(Qf&&l.locale!=="ko"&&(Cs||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Cs&&(Ct=yf()):(pn=Fe,ql="value"in pn?pn.value:pn.textContent,Cs=!0)),bt=Wa(ee,Ut),0<bt.length&&(Ut=new Ef(Ut,t,null,l,Fe),Ie.push({event:Ut,listeners:bt}),Ct?Ut.data=Ct:(Ct=kf(l),Ct!==null&&(Ut.data=Ct)))),(Ct=tx?Ax(t,l):rx(t,l))&&(ee=Wa(ee,"onBeforeInput"),0<ee.length&&(Fe=new Ef("onBeforeInput","beforeinput",null,l,Fe),Ie.push({event:Fe,listeners:ee}),Fe.data=Ct))}Xf(Ie,s)})}function Di(t,s,l){return{instance:t,listener:s,currentTarget:l}}function Wa(t,s){for(var l=s+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=Qe(t,l),p!=null&&u.unshift(Di(t,p,h)),p=Qe(t,s),p!=null&&u.push(Di(t,p,h))),t=t.return}return u}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zf(t,s,l,u,h){for(var p=s._reactName,B=[];l!==null&&l!==u;){var F=l,T=F.alternate,ee=F.stateNode;if(T!==null&&T===u)break;F.tag===5&&ee!==null&&(F=ee,h?(T=Qe(l,p),T!=null&&B.unshift(Di(l,T,F))):h||(T=Qe(l,p),T!=null&&B.push(Di(l,T,F)))),l=l.return}B.length!==0&&t.push({event:s,listeners:B})}var px=/\r\n?/g,wx=/\u0000|\uFFFD/g;function eh(t){return(typeof t=="string"?t:""+t).replace(px,`
`).replace(wx,"")}function Va(t,s,l){if(s=eh(s),eh(t)!==s&&l)throw Error(A(425))}function za(){}var mc=null,gc=null;function pc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wc=typeof setTimeout=="function"?setTimeout:void 0,xx=typeof clearTimeout=="function"?clearTimeout:void 0,th=typeof Promise=="function"?Promise:void 0,vx=typeof queueMicrotask=="function"?queueMicrotask:typeof th<"u"?function(t){return th.resolve(null).then(t).catch(Bx)}:wc;function Bx(t){setTimeout(function(){throw t})}function xc(t,s){var l=s,u=0;do{var h=l.nextSibling;if(t.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(u===0){t.removeChild(h),Ui(s);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=h}while(l);Ui(s)}function xn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Ah(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return t;s--}else l==="/$"&&s++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),Or="__reactFiber$"+Us,Pi="__reactProps$"+Us,Yr="__reactContainer$"+Us,vc="__reactEvents$"+Us,yx="__reactListeners$"+Us,bx="__reactHandles$"+Us;function Vn(t){var s=t[Or];if(s)return s;for(var l=t.parentNode;l;){if(s=l[Yr]||l[Or]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(t=Ah(t);t!==null;){if(l=t[Or])return l;t=Ah(t)}return s}t=l,l=t.parentNode}return null}function Ri(t){return t=t[Or]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function Ja(t){return t[Pi]||null}var Bc=[],Ss=-1;function vn(t){return{current:t}}function AA(t){0>Ss||(t.current=Bc[Ss],Bc[Ss]=null,Ss--)}function qt(t,s){Ss++,Bc[Ss]=t.current,t.current=s}var Bn={},TA=vn(Bn),VA=vn(!1),zn=Bn;function ks(t,s){var l=t.type.contextTypes;if(!l)return Bn;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in l)h[p]=s[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=h),h}function zA(t){return t=t.childContextTypes,t!=null}function Ya(){AA(VA),AA(TA)}function rh(t,s,l){if(TA.current!==Bn)throw Error(A(168));qt(TA,s),qt(VA,l)}function nh(t,s,l){var u=t.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var h in u)if(!(h in s))throw Error(A(108,We(t)||"Unknown",h));return $({},l,u)}function Xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bn,zn=TA.current,qt(TA,t),qt(VA,VA.current),!0}function sh(t,s,l){var u=t.stateNode;if(!u)throw Error(A(169));l?(t=nh(t,s,zn),u.__reactInternalMemoizedMergedChildContext=t,AA(VA),AA(TA),qt(TA,t)):AA(VA),qt(VA,l)}var Xr=null,qa=!1,yc=!1;function ih(t){Xr===null?Xr=[t]:Xr.push(t)}function Cx(t){qa=!0,ih(t)}function yn(){if(!yc&&Xr!==null){yc=!0;var t=0,s=Ht;try{var l=Xr;for(Ht=1;t<l.length;t++){var u=l[t];do u=u(!0);while(u!==null)}Xr=null,qa=!1}catch(h){throw Xr!==null&&(Xr=Xr.slice(t+1)),we(je,yn),h}finally{Ht=s,yc=!1}}return null}var Ns=[],Is=0,Za=null,eo=0,dr=[],fr=0,Jn=null,qr=1,Zr="";function Yn(t,s){Ns[Is++]=eo,Ns[Is++]=Za,Za=t,eo=s}function ah(t,s,l){dr[fr++]=qr,dr[fr++]=Zr,dr[fr++]=Jn,Jn=t;var u=qr;t=Zr;var h=32-ge(u)-1;u&=~(1<<h),l+=1;var p=32-ge(s)+h;if(30<p){var B=h-h%5;p=(u&(1<<B)-1).toString(32),u>>=B,h-=B,qr=1<<32-ge(s)+h|l<<h|u,Zr=p+t}else qr=1<<p|l<<h|u,Zr=t}function bc(t){t.return!==null&&(Yn(t,1),ah(t,1,0))}function Cc(t){for(;t===Za;)Za=Ns[--Is],Ns[Is]=null,eo=Ns[--Is],Ns[Is]=null;for(;t===Jn;)Jn=dr[--fr],dr[fr]=null,Zr=dr[--fr],dr[fr]=null,qr=dr[--fr],dr[fr]=null}var rr=null,nr=null,sA=!1,Ur=null;function oh(t,s){var l=pr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=t,s=t.deletions,s===null?(t.deletions=[l],t.flags|=16):s.push(l)}function lh(t,s){switch(t.tag){case 5:var l=t.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,rr=t,nr=xn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,rr=t,nr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Jn!==null?{id:qr,overflow:Zr}:null,t.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=pr(18,null,null,0),l.stateNode=s,l.return=t,t.child=l,rr=t,nr=null,!0):!1;default:return!1}}function Ec(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _c(t){if(sA){var s=nr;if(s){var l=s;if(!lh(t,s)){if(Ec(t))throw Error(A(418));s=xn(l.nextSibling);var u=rr;s&&lh(t,s)?oh(u,l):(t.flags=t.flags&-4097|2,sA=!1,rr=t)}}else{if(Ec(t))throw Error(A(418));t.flags=t.flags&-4097|2,sA=!1,rr=t}}}function ch(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rr=t}function to(t){if(t!==rr)return!1;if(!sA)return ch(t),sA=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!pc(t.type,t.memoizedProps)),s&&(s=nr)){if(Ec(t))throw uh(),Error(A(418));for(;s;)oh(t,s),s=xn(s.nextSibling)}if(ch(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(s===0){nr=xn(t.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}t=t.nextSibling}nr=null}}else nr=rr?xn(t.stateNode.nextSibling):null;return!0}function uh(){for(var t=nr;t;)t=xn(t.nextSibling)}function js(){nr=rr=null,sA=!1}function Qc(t){Ur===null?Ur=[t]:Ur.push(t)}var Ex=O.ReactCurrentBatchConfig;function Oi(t,s,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(A(309));var u=l.stateNode}if(!u)throw Error(A(147,t));var h=u,p=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(B){var F=h.refs;B===null?delete F[p]:F[p]=B},s._stringRef=p,s)}if(typeof t!="string")throw Error(A(284));if(!l._owner)throw Error(A(290,t))}return t}function Ao(t,s){throw t=Object.prototype.toString.call(s),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function dh(t){var s=t._init;return s(t._payload)}function fh(t){function s(V,M){if(t){var q=V.deletions;q===null?(V.deletions=[M],V.flags|=16):q.push(M)}}function l(V,M){if(!t)return null;for(;M!==null;)s(V,M),M=M.sibling;return null}function u(V,M){for(V=new Map;M!==null;)M.key!==null?V.set(M.key,M):V.set(M.index,M),M=M.sibling;return V}function h(V,M){return V=Sn(V,M),V.index=0,V.sibling=null,V}function p(V,M,q){return V.index=q,t?(q=V.alternate,q!==null?(q=q.index,q<M?(V.flags|=2,M):q):(V.flags|=2,M)):(V.flags|=1048576,M)}function B(V){return t&&V.alternate===null&&(V.flags|=2),V}function F(V,M,q,Re){return M===null||M.tag!==6?(M=wu(q,V.mode,Re),M.return=V,M):(M=h(M,q),M.return=V,M)}function T(V,M,q,Re){var ht=q.type;return ht===R?Fe(V,M,q.props.children,Re,q.key):M!==null&&(M.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Y&&dh(ht)===M.type)?(Re=h(M,q.props),Re.ref=Oi(V,M,q),Re.return=V,Re):(Re=Qo(q.type,q.key,q.props,null,V.mode,Re),Re.ref=Oi(V,M,q),Re.return=V,Re)}function ee(V,M,q,Re){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=xu(q,V.mode,Re),M.return=V,M):(M=h(M,q.children||[]),M.return=V,M)}function Fe(V,M,q,Re,ht){return M===null||M.tag!==7?(M=ns(q,V.mode,Re,ht),M.return=V,M):(M=h(M,q),M.return=V,M)}function Ie(V,M,q){if(typeof M=="string"&&M!==""||typeof M=="number")return M=wu(""+M,V.mode,q),M.return=V,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case j:return q=Qo(M.type,M.key,M.props,null,V.mode,q),q.ref=Oi(V,null,M),q.return=V,q;case L:return M=xu(M,V.mode,q),M.return=V,M;case Y:var Re=M._init;return Ie(V,Re(M._payload),q)}if(Ce(M)||I(M))return M=ns(M,V.mode,q,null),M.return=V,M;Ao(V,M)}return null}function Ee(V,M,q,Re){var ht=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ht!==null?null:F(V,M,""+q,Re);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case j:return q.key===ht?T(V,M,q,Re):null;case L:return q.key===ht?ee(V,M,q,Re):null;case Y:return ht=q._init,Ee(V,M,ht(q._payload),Re)}if(Ce(q)||I(q))return ht!==null?null:Fe(V,M,q,Re,null);Ao(V,q)}return null}function st(V,M,q,Re,ht){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return V=V.get(q)||null,F(M,V,""+Re,ht);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case j:return V=V.get(Re.key===null?q:Re.key)||null,T(M,V,Re,ht);case L:return V=V.get(Re.key===null?q:Re.key)||null,ee(M,V,Re,ht);case Y:var bt=Re._init;return st(V,M,q,bt(Re._payload),ht)}if(Ce(Re)||I(Re))return V=V.get(q)||null,Fe(M,V,Re,ht,null);Ao(M,Re)}return null}function lt(V,M,q,Re){for(var ht=null,bt=null,Ct=M,Ut=M=0,QA=null;Ct!==null&&Ut<q.length;Ut++){Ct.index>Ut?(QA=Ct,Ct=null):QA=Ct.sibling;var Mt=Ee(V,Ct,q[Ut],Re);if(Mt===null){Ct===null&&(Ct=QA);break}t&&Ct&&Mt.alternate===null&&s(V,Ct),M=p(Mt,M,Ut),bt===null?ht=Mt:bt.sibling=Mt,bt=Mt,Ct=QA}if(Ut===q.length)return l(V,Ct),sA&&Yn(V,Ut),ht;if(Ct===null){for(;Ut<q.length;Ut++)Ct=Ie(V,q[Ut],Re),Ct!==null&&(M=p(Ct,M,Ut),bt===null?ht=Ct:bt.sibling=Ct,bt=Ct);return sA&&Yn(V,Ut),ht}for(Ct=u(V,Ct);Ut<q.length;Ut++)QA=st(Ct,V,Ut,q[Ut],Re),QA!==null&&(t&&QA.alternate!==null&&Ct.delete(QA.key===null?Ut:QA.key),M=p(QA,M,Ut),bt===null?ht=QA:bt.sibling=QA,bt=QA);return t&&Ct.forEach(function(kn){return s(V,kn)}),sA&&Yn(V,Ut),ht}function ut(V,M,q,Re){var ht=I(q);if(typeof ht!="function")throw Error(A(150));if(q=ht.call(q),q==null)throw Error(A(151));for(var bt=ht=null,Ct=M,Ut=M=0,QA=null,Mt=q.next();Ct!==null&&!Mt.done;Ut++,Mt=q.next()){Ct.index>Ut?(QA=Ct,Ct=null):QA=Ct.sibling;var kn=Ee(V,Ct,Mt.value,Re);if(kn===null){Ct===null&&(Ct=QA);break}t&&Ct&&kn.alternate===null&&s(V,Ct),M=p(kn,M,Ut),bt===null?ht=kn:bt.sibling=kn,bt=kn,Ct=QA}if(Mt.done)return l(V,Ct),sA&&Yn(V,Ut),ht;if(Ct===null){for(;!Mt.done;Ut++,Mt=q.next())Mt=Ie(V,Mt.value,Re),Mt!==null&&(M=p(Mt,M,Ut),bt===null?ht=Mt:bt.sibling=Mt,bt=Mt);return sA&&Yn(V,Ut),ht}for(Ct=u(V,Ct);!Mt.done;Ut++,Mt=q.next())Mt=st(Ct,V,Ut,Mt.value,Re),Mt!==null&&(t&&Mt.alternate!==null&&Ct.delete(Mt.key===null?Ut:Mt.key),M=p(Mt,M,Ut),bt===null?ht=Mt:bt.sibling=Mt,bt=Mt);return t&&Ct.forEach(function(nv){return s(V,nv)}),sA&&Yn(V,Ut),ht}function dA(V,M,q,Re){if(typeof q=="object"&&q!==null&&q.type===R&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case j:e:{for(var ht=q.key,bt=M;bt!==null;){if(bt.key===ht){if(ht=q.type,ht===R){if(bt.tag===7){l(V,bt.sibling),M=h(bt,q.props.children),M.return=V,V=M;break e}}else if(bt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Y&&dh(ht)===bt.type){l(V,bt.sibling),M=h(bt,q.props),M.ref=Oi(V,bt,q),M.return=V,V=M;break e}l(V,bt);break}else s(V,bt);bt=bt.sibling}q.type===R?(M=ns(q.props.children,V.mode,Re,q.key),M.return=V,V=M):(Re=Qo(q.type,q.key,q.props,null,V.mode,Re),Re.ref=Oi(V,M,q),Re.return=V,V=Re)}return B(V);case L:e:{for(bt=q.key;M!==null;){if(M.key===bt)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){l(V,M.sibling),M=h(M,q.children||[]),M.return=V,V=M;break e}else{l(V,M);break}else s(V,M);M=M.sibling}M=xu(q,V.mode,Re),M.return=V,V=M}return B(V);case Y:return bt=q._init,dA(V,M,bt(q._payload),Re)}if(Ce(q))return lt(V,M,q,Re);if(I(q))return ut(V,M,q,Re);Ao(V,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,M!==null&&M.tag===6?(l(V,M.sibling),M=h(M,q),M.return=V,V=M):(l(V,M),M=wu(q,V.mode,Re),M.return=V,V=M),B(V)):l(V,M)}return dA}var Ts=fh(!0),hh=fh(!1),ro=vn(null),no=null,Ls=null,Uc=null;function Fc(){Uc=Ls=no=null}function Sc(t){var s=ro.current;AA(ro),t._currentValue=s}function kc(t,s,l){for(;t!==null;){var u=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),t===l)break;t=t.return}}function Hs(t,s){no=t,Uc=Ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(JA=!0),t.firstContext=null)}function hr(t){var s=t._currentValue;if(Uc!==t)if(t={context:t,memoizedValue:s,next:null},Ls===null){if(no===null)throw Error(A(308));Ls=t,no.dependencies={lanes:0,firstContext:t}}else Ls=Ls.next=t;return s}var Xn=null;function Nc(t){Xn===null?Xn=[t]:Xn.push(t)}function mh(t,s,l,u){var h=s.interleaved;return h===null?(l.next=l,Nc(s)):(l.next=h.next,h.next=l),s.interleaved=l,en(t,u)}function en(t,s){t.lanes|=s;var l=t.alternate;for(l!==null&&(l.lanes|=s),l=t,t=t.return;t!==null;)t.childLanes|=s,l=t.alternate,l!==null&&(l.childLanes|=s),l=t,t=t.return;return l.tag===3?l.stateNode:null}var bn=!1;function Ic(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tn(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Cn(t,s,l){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ot&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,en(t,l)}return h=u.interleaved,h===null?(s.next=s,Nc(u)):(s.next=h.next,h.next=s),u.interleaved=s,en(t,l)}function so(t,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var u=s.lanes;u&=t.pendingLanes,l|=u,s.lanes=l,WA(t,l)}}function ph(t,s){var l=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var h=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var B={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};p===null?h=p=B:p=p.next=B,l=l.next}while(l!==null);p===null?h=p=s:p=p.next=s}else h=p=s;l={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=s:t.next=s,l.lastBaseUpdate=s}function io(t,s,l,u){var h=t.updateQueue;bn=!1;var p=h.firstBaseUpdate,B=h.lastBaseUpdate,F=h.shared.pending;if(F!==null){h.shared.pending=null;var T=F,ee=T.next;T.next=null,B===null?p=ee:B.next=ee,B=T;var Fe=t.alternate;Fe!==null&&(Fe=Fe.updateQueue,F=Fe.lastBaseUpdate,F!==B&&(F===null?Fe.firstBaseUpdate=ee:F.next=ee,Fe.lastBaseUpdate=T))}if(p!==null){var Ie=h.baseState;B=0,Fe=ee=T=null,F=p;do{var Ee=F.lane,st=F.eventTime;if((u&Ee)===Ee){Fe!==null&&(Fe=Fe.next={eventTime:st,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var lt=t,ut=F;switch(Ee=s,st=l,ut.tag){case 1:if(lt=ut.payload,typeof lt=="function"){Ie=lt.call(st,Ie,Ee);break e}Ie=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=ut.payload,Ee=typeof lt=="function"?lt.call(st,Ie,Ee):lt,Ee==null)break e;Ie=$({},Ie,Ee);break e;case 2:bn=!0}}F.callback!==null&&F.lane!==0&&(t.flags|=64,Ee=h.effects,Ee===null?h.effects=[F]:Ee.push(F))}else st={eventTime:st,lane:Ee,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Fe===null?(ee=Fe=st,T=Ie):Fe=Fe.next=st,B|=Ee;if(F=F.next,F===null){if(F=h.shared.pending,F===null)break;Ee=F,F=Ee.next,Ee.next=null,h.lastBaseUpdate=Ee,h.shared.pending=null}}while(!0);if(Fe===null&&(T=Ie),h.baseState=T,h.firstBaseUpdate=ee,h.lastBaseUpdate=Fe,s=h.shared.interleaved,s!==null){h=s;do B|=h.lane,h=h.next;while(h!==s)}else p===null&&(h.shared.lanes=0);es|=B,t.lanes=B,t.memoizedState=Ie}}function wh(t,s,l){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var u=t[s],h=u.callback;if(h!==null){if(u.callback=null,u=l,typeof h!="function")throw Error(A(191,h));h.call(u)}}}var Mi={},Mr=vn(Mi),Ki=vn(Mi),Gi=vn(Mi);function qn(t){if(t===Mi)throw Error(A(174));return t}function jc(t,s){switch(qt(Gi,s),qt(Ki,t),qt(Mr,Mi),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Kt(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Kt(s,t)}AA(Mr),qt(Mr,s)}function Ds(){AA(Mr),AA(Ki),AA(Gi)}function xh(t){qn(Gi.current);var s=qn(Mr.current),l=Kt(s,t.type);s!==l&&(qt(Ki,t),qt(Mr,l))}function Tc(t){Ki.current===t&&(AA(Mr),AA(Ki))}var oA=vn(0);function ao(t){for(var s=t;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Lc=[];function Hc(){for(var t=0;t<Lc.length;t++)Lc[t]._workInProgressVersionPrimary=null;Lc.length=0}var oo=O.ReactCurrentDispatcher,Dc=O.ReactCurrentBatchConfig,Zn=0,lA=null,BA=null,EA=null,lo=!1,$i=!1,Wi=0,_x=0;function LA(){throw Error(A(321))}function Pc(t,s){if(s===null)return!1;for(var l=0;l<s.length&&l<t.length;l++)if(!Qr(t[l],s[l]))return!1;return!0}function Rc(t,s,l,u,h,p){if(Zn=p,lA=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,oo.current=t===null||t.memoizedState===null?Sx:kx,t=l(u,h),$i){p=0;do{if($i=!1,Wi=0,25<=p)throw Error(A(301));p+=1,EA=BA=null,s.updateQueue=null,oo.current=Nx,t=l(u,h)}while($i)}if(oo.current=fo,s=BA!==null&&BA.next!==null,Zn=0,EA=BA=lA=null,lo=!1,s)throw Error(A(300));return t}function Oc(){var t=Wi!==0;return Wi=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return EA===null?lA.memoizedState=EA=t:EA=EA.next=t,EA}function mr(){if(BA===null){var t=lA.alternate;t=t!==null?t.memoizedState:null}else t=BA.next;var s=EA===null?lA.memoizedState:EA.next;if(s!==null)EA=s,BA=t;else{if(t===null)throw Error(A(310));BA=t,t={memoizedState:BA.memoizedState,baseState:BA.baseState,baseQueue:BA.baseQueue,queue:BA.queue,next:null},EA===null?lA.memoizedState=EA=t:EA=EA.next=t}return EA}function Vi(t,s){return typeof s=="function"?s(t):s}function Mc(t){var s=mr(),l=s.queue;if(l===null)throw Error(A(311));l.lastRenderedReducer=t;var u=BA,h=u.baseQueue,p=l.pending;if(p!==null){if(h!==null){var B=h.next;h.next=p.next,p.next=B}u.baseQueue=h=p,l.pending=null}if(h!==null){p=h.next,u=u.baseState;var F=B=null,T=null,ee=p;do{var Fe=ee.lane;if((Zn&Fe)===Fe)T!==null&&(T=T.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),u=ee.hasEagerState?ee.eagerState:t(u,ee.action);else{var Ie={lane:Fe,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};T===null?(F=T=Ie,B=u):T=T.next=Ie,lA.lanes|=Fe,es|=Fe}ee=ee.next}while(ee!==null&&ee!==p);T===null?B=u:T.next=F,Qr(u,s.memoizedState)||(JA=!0),s.memoizedState=u,s.baseState=B,s.baseQueue=T,l.lastRenderedState=u}if(t=l.interleaved,t!==null){h=t;do p=h.lane,lA.lanes|=p,es|=p,h=h.next;while(h!==t)}else h===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Kc(t){var s=mr(),l=s.queue;if(l===null)throw Error(A(311));l.lastRenderedReducer=t;var u=l.dispatch,h=l.pending,p=s.memoizedState;if(h!==null){l.pending=null;var B=h=h.next;do p=t(p,B.action),B=B.next;while(B!==h);Qr(p,s.memoizedState)||(JA=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),l.lastRenderedState=p}return[p,u]}function vh(){}function Bh(t,s){var l=lA,u=mr(),h=s(),p=!Qr(u.memoizedState,h);if(p&&(u.memoizedState=h,JA=!0),u=u.queue,Gc(Ch.bind(null,l,u,t),[t]),u.getSnapshot!==s||p||EA!==null&&EA.memoizedState.tag&1){if(l.flags|=2048,zi(9,bh.bind(null,l,u,h,s),void 0,null),_A===null)throw Error(A(349));(Zn&30)!==0||yh(l,s,h)}return h}function yh(t,s,l){t.flags|=16384,t={getSnapshot:s,value:l},s=lA.updateQueue,s===null?(s={lastEffect:null,stores:null},lA.updateQueue=s,s.stores=[t]):(l=s.stores,l===null?s.stores=[t]:l.push(t))}function bh(t,s,l,u){s.value=l,s.getSnapshot=u,Eh(s)&&_h(t)}function Ch(t,s,l){return l(function(){Eh(s)&&_h(t)})}function Eh(t){var s=t.getSnapshot;t=t.value;try{var l=s();return!Qr(t,l)}catch{return!0}}function _h(t){var s=en(t,1);s!==null&&Nr(s,t,1,-1)}function Qh(t){var s=Kr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},s.queue=t,t=t.dispatch=Fx.bind(null,lA,t),[s.memoizedState,t]}function zi(t,s,l,u){return t={tag:t,create:s,destroy:l,deps:u,next:null},s=lA.updateQueue,s===null?(s={lastEffect:null,stores:null},lA.updateQueue=s,s.lastEffect=t.next=t):(l=s.lastEffect,l===null?s.lastEffect=t.next=t:(u=l.next,l.next=t,t.next=u,s.lastEffect=t)),t}function Uh(){return mr().memoizedState}function co(t,s,l,u){var h=Kr();lA.flags|=t,h.memoizedState=zi(1|s,l,void 0,u===void 0?null:u)}function uo(t,s,l,u){var h=mr();u=u===void 0?null:u;var p=void 0;if(BA!==null){var B=BA.memoizedState;if(p=B.destroy,u!==null&&Pc(u,B.deps)){h.memoizedState=zi(s,l,p,u);return}}lA.flags|=t,h.memoizedState=zi(1|s,l,p,u)}function Fh(t,s){return co(8390656,8,t,s)}function Gc(t,s){return uo(2048,8,t,s)}function Sh(t,s){return uo(4,2,t,s)}function kh(t,s){return uo(4,4,t,s)}function Nh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Ih(t,s,l){return l=l!=null?l.concat([t]):null,uo(4,4,Nh.bind(null,s,t),l)}function $c(){}function jh(t,s){var l=mr();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&Pc(s,u[1])?u[0]:(l.memoizedState=[t,s],t)}function Th(t,s){var l=mr();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&Pc(s,u[1])?u[0]:(t=t(),l.memoizedState=[t,s],t)}function Lh(t,s,l){return(Zn&21)===0?(t.baseState&&(t.baseState=!1,JA=!0),t.memoizedState=l):(Qr(l,s)||(l=OA(),lA.lanes|=l,es|=l,t.baseState=!0),s)}function Qx(t,s){var l=Ht;Ht=l!==0&&4>l?l:4,t(!0);var u=Dc.transition;Dc.transition={};try{t(!1),s()}finally{Ht=l,Dc.transition=u}}function Hh(){return mr().memoizedState}function Ux(t,s,l){var u=Un(t);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},Dh(t))Ph(s,l);else if(l=mh(t,s,l,u),l!==null){var h=KA();Nr(l,t,u,h),Rh(l,s,u)}}function Fx(t,s,l){var u=Un(t),h={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dh(t))Ph(s,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var B=s.lastRenderedState,F=p(B,l);if(h.hasEagerState=!0,h.eagerState=F,Qr(F,B)){var T=s.interleaved;T===null?(h.next=h,Nc(s)):(h.next=T.next,T.next=h),s.interleaved=h;return}}catch{}finally{}l=mh(t,s,h,u),l!==null&&(h=KA(),Nr(l,t,u,h),Rh(l,s,u))}}function Dh(t){var s=t.alternate;return t===lA||s!==null&&s===lA}function Ph(t,s){$i=lo=!0;var l=t.pending;l===null?s.next=s:(s.next=l.next,l.next=s),t.pending=s}function Rh(t,s,l){if((l&4194240)!==0){var u=s.lanes;u&=t.pendingLanes,l|=u,s.lanes=l,WA(t,l)}}var fo={readContext:hr,useCallback:LA,useContext:LA,useEffect:LA,useImperativeHandle:LA,useInsertionEffect:LA,useLayoutEffect:LA,useMemo:LA,useReducer:LA,useRef:LA,useState:LA,useDebugValue:LA,useDeferredValue:LA,useTransition:LA,useMutableSource:LA,useSyncExternalStore:LA,useId:LA,unstable_isNewReconciler:!1},Sx={readContext:hr,useCallback:function(t,s){return Kr().memoizedState=[t,s===void 0?null:s],t},useContext:hr,useEffect:Fh,useImperativeHandle:function(t,s,l){return l=l!=null?l.concat([t]):null,co(4194308,4,Nh.bind(null,s,t),l)},useLayoutEffect:function(t,s){return co(4194308,4,t,s)},useInsertionEffect:function(t,s){return co(4,2,t,s)},useMemo:function(t,s){var l=Kr();return s=s===void 0?null:s,t=t(),l.memoizedState=[t,s],t},useReducer:function(t,s,l){var u=Kr();return s=l!==void 0?l(s):s,u.memoizedState=u.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},u.queue=t,t=t.dispatch=Ux.bind(null,lA,t),[u.memoizedState,t]},useRef:function(t){var s=Kr();return t={current:t},s.memoizedState=t},useState:Qh,useDebugValue:$c,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=Qh(!1),s=t[0];return t=Qx.bind(null,t[1]),Kr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,l){var u=lA,h=Kr();if(sA){if(l===void 0)throw Error(A(407));l=l()}else{if(l=s(),_A===null)throw Error(A(349));(Zn&30)!==0||yh(u,s,l)}h.memoizedState=l;var p={value:l,getSnapshot:s};return h.queue=p,Fh(Ch.bind(null,u,p,t),[t]),u.flags|=2048,zi(9,bh.bind(null,u,p,l,s),void 0,null),l},useId:function(){var t=Kr(),s=_A.identifierPrefix;if(sA){var l=Zr,u=qr;l=(u&~(1<<32-ge(u)-1)).toString(32)+l,s=":"+s+"R"+l,l=Wi++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=_x++,s=":"+s+"r"+l.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},kx={readContext:hr,useCallback:jh,useContext:hr,useEffect:Gc,useImperativeHandle:Ih,useInsertionEffect:Sh,useLayoutEffect:kh,useMemo:Th,useReducer:Mc,useRef:Uh,useState:function(){return Mc(Vi)},useDebugValue:$c,useDeferredValue:function(t){var s=mr();return Lh(s,BA.memoizedState,t)},useTransition:function(){var t=Mc(Vi)[0],s=mr().memoizedState;return[t,s]},useMutableSource:vh,useSyncExternalStore:Bh,useId:Hh,unstable_isNewReconciler:!1},Nx={readContext:hr,useCallback:jh,useContext:hr,useEffect:Gc,useImperativeHandle:Ih,useInsertionEffect:Sh,useLayoutEffect:kh,useMemo:Th,useReducer:Kc,useRef:Uh,useState:function(){return Kc(Vi)},useDebugValue:$c,useDeferredValue:function(t){var s=mr();return BA===null?s.memoizedState=t:Lh(s,BA.memoizedState,t)},useTransition:function(){var t=Kc(Vi)[0],s=mr().memoizedState;return[t,s]},useMutableSource:vh,useSyncExternalStore:Bh,useId:Hh,unstable_isNewReconciler:!1};function Fr(t,s){if(t&&t.defaultProps){s=$({},s),t=t.defaultProps;for(var l in t)s[l]===void 0&&(s[l]=t[l]);return s}return s}function Wc(t,s,l,u){s=t.memoizedState,l=l(u,s),l=l==null?s:$({},s,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var ho={isMounted:function(t){return(t=t._reactInternals)?re(t)===t:!1},enqueueSetState:function(t,s,l){t=t._reactInternals;var u=KA(),h=Un(t),p=tn(u,h);p.payload=s,l!=null&&(p.callback=l),s=Cn(t,p,h),s!==null&&(Nr(s,t,h,u),so(s,t,h))},enqueueReplaceState:function(t,s,l){t=t._reactInternals;var u=KA(),h=Un(t),p=tn(u,h);p.tag=1,p.payload=s,l!=null&&(p.callback=l),s=Cn(t,p,h),s!==null&&(Nr(s,t,h,u),so(s,t,h))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var l=KA(),u=Un(t),h=tn(l,u);h.tag=2,s!=null&&(h.callback=s),s=Cn(t,h,u),s!==null&&(Nr(s,t,u,l),so(s,t,u))}};function Oh(t,s,l,u,h,p,B){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,B):s.prototype&&s.prototype.isPureReactComponent?!ji(l,u)||!ji(h,p):!0}function Mh(t,s,l){var u=!1,h=Bn,p=s.contextType;return typeof p=="object"&&p!==null?p=hr(p):(h=zA(s)?zn:TA.current,u=s.contextTypes,p=(u=u!=null)?ks(t,h):Bn),s=new s(l,p),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ho,t.stateNode=s,s._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),s}function Kh(t,s,l,u){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==t&&ho.enqueueReplaceState(s,s.state,null)}function Vc(t,s,l,u){var h=t.stateNode;h.props=l,h.state=t.memoizedState,h.refs={},Ic(t);var p=s.contextType;typeof p=="object"&&p!==null?h.context=hr(p):(p=zA(s)?zn:TA.current,h.context=ks(t,p)),h.state=t.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Wc(t,s,p,l),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&ho.enqueueReplaceState(h,h.state,null),io(t,l,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Ps(t,s){try{var l="",u=s;do l+=se(u),u=u.return;while(u);var h=l}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:s,stack:h,digest:null}}function zc(t,s,l){return{value:t,source:null,stack:l??null,digest:s??null}}function Jc(t,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var Ix=typeof WeakMap=="function"?WeakMap:Map;function Gh(t,s,l){l=tn(-1,l),l.tag=3,l.payload={element:null};var u=s.value;return l.callback=function(){Bo||(Bo=!0,cu=u),Jc(t,s)},l}function $h(t,s,l){l=tn(-1,l),l.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=s.value;l.payload=function(){return u(h)},l.callback=function(){Jc(t,s)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(l.callback=function(){Jc(t,s),typeof u!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var B=s.stack;this.componentDidCatch(s.value,{componentStack:B!==null?B:""})}),l}function Wh(t,s,l){var u=t.pingCache;if(u===null){u=t.pingCache=new Ix;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(l)||(h.add(l),t=Vx.bind(null,t,s,l),s.then(t,t))}function Vh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function zh(t,s,l,u,h){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=tn(-1,1),s.tag=2,Cn(l,s,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var jx=O.ReactCurrentOwner,JA=!1;function MA(t,s,l,u){s.child=t===null?hh(s,null,l,u):Ts(s,t.child,l,u)}function Jh(t,s,l,u,h){l=l.render;var p=s.ref;return Hs(s,h),u=Rc(t,s,l,u,p,h),l=Oc(),t!==null&&!JA?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~h,An(t,s,h)):(sA&&l&&bc(s),s.flags|=1,MA(t,s,u,h),s.child)}function Yh(t,s,l,u,h){if(t===null){var p=l.type;return typeof p=="function"&&!pu(p)&&p.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=p,Xh(t,s,p,u,h)):(t=Qo(l.type,null,u,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(p=t.child,(t.lanes&h)===0){var B=p.memoizedProps;if(l=l.compare,l=l!==null?l:ji,l(B,u)&&t.ref===s.ref)return An(t,s,h)}return s.flags|=1,t=Sn(p,u),t.ref=s.ref,t.return=s,s.child=t}function Xh(t,s,l,u,h){if(t!==null){var p=t.memoizedProps;if(ji(p,u)&&t.ref===s.ref)if(JA=!1,s.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(JA=!0);else return s.lanes=t.lanes,An(t,s,h)}return Yc(t,s,l,u,h)}function qh(t,s,l){var u=s.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},qt(Os,sr),sr|=l;else{if((l&1073741824)===0)return t=p!==null?p.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,qt(Os,sr),sr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:l,qt(Os,sr),sr|=u}else p!==null?(u=p.baseLanes|l,s.memoizedState=null):u=l,qt(Os,sr),sr|=u;return MA(t,s,h,l),s.child}function Zh(t,s){var l=s.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Yc(t,s,l,u,h){var p=zA(l)?zn:TA.current;return p=ks(s,p),Hs(s,h),l=Rc(t,s,l,u,p,h),u=Oc(),t!==null&&!JA?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~h,An(t,s,h)):(sA&&u&&bc(s),s.flags|=1,MA(t,s,l,h),s.child)}function em(t,s,l,u,h){if(zA(l)){var p=!0;Xa(s)}else p=!1;if(Hs(s,h),s.stateNode===null)go(t,s),Mh(s,l,u),Vc(s,l,u,h),u=!0;else if(t===null){var B=s.stateNode,F=s.memoizedProps;B.props=F;var T=B.context,ee=l.contextType;typeof ee=="object"&&ee!==null?ee=hr(ee):(ee=zA(l)?zn:TA.current,ee=ks(s,ee));var Fe=l.getDerivedStateFromProps,Ie=typeof Fe=="function"||typeof B.getSnapshotBeforeUpdate=="function";Ie||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(F!==u||T!==ee)&&Kh(s,B,u,ee),bn=!1;var Ee=s.memoizedState;B.state=Ee,io(s,u,B,h),T=s.memoizedState,F!==u||Ee!==T||VA.current||bn?(typeof Fe=="function"&&(Wc(s,l,Fe,u),T=s.memoizedState),(F=bn||Oh(s,l,F,u,Ee,T,ee))?(Ie||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(s.flags|=4194308)):(typeof B.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=T),B.props=u,B.state=T,B.context=ee,u=F):(typeof B.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{B=s.stateNode,gh(t,s),F=s.memoizedProps,ee=s.type===s.elementType?F:Fr(s.type,F),B.props=ee,Ie=s.pendingProps,Ee=B.context,T=l.contextType,typeof T=="object"&&T!==null?T=hr(T):(T=zA(l)?zn:TA.current,T=ks(s,T));var st=l.getDerivedStateFromProps;(Fe=typeof st=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(F!==Ie||Ee!==T)&&Kh(s,B,u,T),bn=!1,Ee=s.memoizedState,B.state=Ee,io(s,u,B,h);var lt=s.memoizedState;F!==Ie||Ee!==lt||VA.current||bn?(typeof st=="function"&&(Wc(s,l,st,u),lt=s.memoizedState),(ee=bn||Oh(s,l,ee,u,Ee,lt,T)||!1)?(Fe||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(u,lt,T),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(u,lt,T)),typeof B.componentDidUpdate=="function"&&(s.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof B.componentDidUpdate!="function"||F===t.memoizedProps&&Ee===t.memoizedState||(s.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||F===t.memoizedProps&&Ee===t.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=lt),B.props=u,B.state=lt,B.context=T,u=ee):(typeof B.componentDidUpdate!="function"||F===t.memoizedProps&&Ee===t.memoizedState||(s.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||F===t.memoizedProps&&Ee===t.memoizedState||(s.flags|=1024),u=!1)}return Xc(t,s,l,u,p,h)}function Xc(t,s,l,u,h,p){Zh(t,s);var B=(s.flags&128)!==0;if(!u&&!B)return h&&sh(s,l,!1),An(t,s,p);u=s.stateNode,jx.current=s;var F=B&&typeof l.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,t!==null&&B?(s.child=Ts(s,t.child,null,p),s.child=Ts(s,null,F,p)):MA(t,s,F,p),s.memoizedState=u.state,h&&sh(s,l,!0),s.child}function tm(t){var s=t.stateNode;s.pendingContext?rh(t,s.pendingContext,s.pendingContext!==s.context):s.context&&rh(t,s.context,!1),jc(t,s.containerInfo)}function Am(t,s,l,u,h){return js(),Qc(h),s.flags|=256,MA(t,s,l,u),s.child}var qc={dehydrated:null,treeContext:null,retryLane:0};function Zc(t){return{baseLanes:t,cachePool:null,transitions:null}}function rm(t,s,l){var u=s.pendingProps,h=oA.current,p=!1,B=(s.flags&128)!==0,F;if((F=B)||(F=t!==null&&t.memoizedState===null?!1:(h&2)!==0),F?(p=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),qt(oA,h&1),t===null)return _c(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(B=u.children,t=u.fallback,p?(u=s.mode,p=s.child,B={mode:"hidden",children:B},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=B):p=Uo(B,u,0,null),t=ns(t,u,l,null),p.return=s,t.return=s,p.sibling=t,s.child=p,s.child.memoizedState=Zc(l),s.memoizedState=qc,t):eu(s,B));if(h=t.memoizedState,h!==null&&(F=h.dehydrated,F!==null))return Tx(t,s,B,u,F,h,l);if(p){p=u.fallback,B=s.mode,h=t.child,F=h.sibling;var T={mode:"hidden",children:u.children};return(B&1)===0&&s.child!==h?(u=s.child,u.childLanes=0,u.pendingProps=T,s.deletions=null):(u=Sn(h,T),u.subtreeFlags=h.subtreeFlags&14680064),F!==null?p=Sn(F,p):(p=ns(p,B,l,null),p.flags|=2),p.return=s,u.return=s,u.sibling=p,s.child=u,u=p,p=s.child,B=t.child.memoizedState,B=B===null?Zc(l):{baseLanes:B.baseLanes|l,cachePool:null,transitions:B.transitions},p.memoizedState=B,p.childLanes=t.childLanes&~l,s.memoizedState=qc,u}return p=t.child,t=p.sibling,u=Sn(p,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=l),u.return=s,u.sibling=null,t!==null&&(l=s.deletions,l===null?(s.deletions=[t],s.flags|=16):l.push(t)),s.child=u,s.memoizedState=null,u}function eu(t,s){return s=Uo({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function mo(t,s,l,u){return u!==null&&Qc(u),Ts(s,t.child,null,l),t=eu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Tx(t,s,l,u,h,p,B){if(l)return s.flags&256?(s.flags&=-257,u=zc(Error(A(422))),mo(t,s,B,u)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(p=u.fallback,h=s.mode,u=Uo({mode:"visible",children:u.children},h,0,null),p=ns(p,h,B,null),p.flags|=2,u.return=s,p.return=s,u.sibling=p,s.child=u,(s.mode&1)!==0&&Ts(s,t.child,null,B),s.child.memoizedState=Zc(B),s.memoizedState=qc,p);if((s.mode&1)===0)return mo(t,s,B,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var F=u.dgst;return u=F,p=Error(A(419)),u=zc(p,u,void 0),mo(t,s,B,u)}if(F=(B&t.childLanes)!==0,JA||F){if(u=_A,u!==null){switch(B&-B){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|B))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,en(t,h),Nr(u,t,h,-1))}return gu(),u=zc(Error(A(421))),mo(t,s,B,u)}return h.data==="$?"?(s.flags|=128,s.child=t.child,s=zx.bind(null,t),h._reactRetry=s,null):(t=p.treeContext,nr=xn(h.nextSibling),rr=s,sA=!0,Ur=null,t!==null&&(dr[fr++]=qr,dr[fr++]=Zr,dr[fr++]=Jn,qr=t.id,Zr=t.overflow,Jn=s),s=eu(s,u.children),s.flags|=4096,s)}function nm(t,s,l){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s),kc(t.return,s,l)}function tu(t,s,l,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=h)}function sm(t,s,l){var u=s.pendingProps,h=u.revealOrder,p=u.tail;if(MA(t,s,u.children,l),u=oA.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nm(t,l,s);else if(t.tag===19)nm(t,l,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(qt(oA,u),(s.mode&1)===0)s.memoizedState=null;else switch(h){case"forwards":for(l=s.child,h=null;l!==null;)t=l.alternate,t!==null&&ao(t)===null&&(h=l),l=l.sibling;l=h,l===null?(h=s.child,s.child=null):(h=l.sibling,l.sibling=null),tu(s,!1,h,l,p);break;case"backwards":for(l=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&ao(t)===null){s.child=h;break}t=h.sibling,h.sibling=l,l=h,h=t}tu(s,!0,l,null,p);break;case"together":tu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function go(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function An(t,s,l){if(t!==null&&(s.dependencies=t.dependencies),es|=s.lanes,(l&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(A(153));if(s.child!==null){for(t=s.child,l=Sn(t,t.pendingProps),s.child=l,l.return=s;t.sibling!==null;)t=t.sibling,l=l.sibling=Sn(t,t.pendingProps),l.return=s;l.sibling=null}return s.child}function Lx(t,s,l){switch(s.tag){case 3:tm(s),js();break;case 5:xh(s);break;case 1:zA(s.type)&&Xa(s);break;case 4:jc(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,h=s.memoizedProps.value;qt(ro,u._currentValue),u._currentValue=h;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(qt(oA,oA.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?rm(t,s,l):(qt(oA,oA.current&1),t=An(t,s,l),t!==null?t.sibling:null);qt(oA,oA.current&1);break;case 19:if(u=(l&s.childLanes)!==0,(t.flags&128)!==0){if(u)return sm(t,s,l);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qt(oA,oA.current),u)break;return null;case 22:case 23:return s.lanes=0,qh(t,s,l)}return An(t,s,l)}var im,Au,am,om;im=function(t,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Au=function(){},am=function(t,s,l,u){var h=t.memoizedProps;if(h!==u){t=s.stateNode,qn(Mr.current);var p=null;switch(l){case"input":h=Nt(t,h),u=Nt(t,u),p=[];break;case"select":h=$({},h,{value:void 0}),u=$({},u,{value:void 0}),p=[];break;case"textarea":h=pt(t,h),u=pt(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=za)}Yt(l,u);var B;l=null;for(ee in h)if(!u.hasOwnProperty(ee)&&h.hasOwnProperty(ee)&&h[ee]!=null)if(ee==="style"){var F=h[ee];for(B in F)F.hasOwnProperty(B)&&(l||(l={}),l[B]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?p||(p=[]):(p=p||[]).push(ee,null));for(ee in u){var T=u[ee];if(F=h?.[ee],u.hasOwnProperty(ee)&&T!==F&&(T!=null||F!=null))if(ee==="style")if(F){for(B in F)!F.hasOwnProperty(B)||T&&T.hasOwnProperty(B)||(l||(l={}),l[B]="");for(B in T)T.hasOwnProperty(B)&&F[B]!==T[B]&&(l||(l={}),l[B]=T[B])}else l||(p||(p=[]),p.push(ee,l)),l=T;else ee==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,F=F?F.__html:void 0,T!=null&&F!==T&&(p=p||[]).push(ee,T)):ee==="children"?typeof T!="string"&&typeof T!="number"||(p=p||[]).push(ee,""+T):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(ee)?(T!=null&&ee==="onScroll"&&tA("scroll",t),p||F===T||(p=[])):(p=p||[]).push(ee,T))}l&&(p=p||[]).push("style",l);var ee=p;(s.updateQueue=ee)&&(s.flags|=4)}},om=function(t,s,l,u){l!==u&&(s.flags|=4)};function Ji(t,s){if(!sA)switch(t.tailMode){case"hidden":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function HA(t){var s=t.alternate!==null&&t.alternate.child===t.child,l=0,u=0;if(s)for(var h=t.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=l,s}function Hx(t,s,l){var u=s.pendingProps;switch(Cc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return HA(s),null;case 1:return zA(s.type)&&Ya(),HA(s),null;case 3:return u=s.stateNode,Ds(),AA(VA),AA(TA),Hc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(to(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ur!==null&&(fu(Ur),Ur=null))),Au(t,s),HA(s),null;case 5:Tc(s);var h=qn(Gi.current);if(l=s.type,t!==null&&s.stateNode!=null)am(t,s,l,u,h),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(A(166));return HA(s),null}if(t=qn(Mr.current),to(s)){u=s.stateNode,l=s.type;var p=s.memoizedProps;switch(u[Or]=s,u[Pi]=p,t=(s.mode&1)!==0,l){case"dialog":tA("cancel",u),tA("close",u);break;case"iframe":case"object":case"embed":tA("load",u);break;case"video":case"audio":for(h=0;h<Li.length;h++)tA(Li[h],u);break;case"source":tA("error",u);break;case"img":case"image":case"link":tA("error",u),tA("load",u);break;case"details":tA("toggle",u);break;case"input":rA(u,p),tA("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},tA("invalid",u);break;case"textarea":Ye(u,p),tA("invalid",u)}Yt(l,p),h=null;for(var B in p)if(p.hasOwnProperty(B)){var F=p[B];B==="children"?typeof F=="string"?u.textContent!==F&&(p.suppressHydrationWarning!==!0&&Va(u.textContent,F,t),h=["children",F]):typeof F=="number"&&u.textContent!==""+F&&(p.suppressHydrationWarning!==!0&&Va(u.textContent,F,t),h=["children",""+F]):a.hasOwnProperty(B)&&F!=null&&B==="onScroll"&&tA("scroll",u)}switch(l){case"input":be(u),et(u,p,!0);break;case"textarea":be(u),ze(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=za)}u=h,s.updateQueue=u,u!==null&&(s.flags|=4)}else{B=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qt(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=B.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=B.createElement(l,{is:u.is}):(t=B.createElement(l),l==="select"&&(B=t,u.multiple?B.multiple=!0:u.size&&(B.size=u.size))):t=B.createElementNS(t,l),t[Or]=s,t[Pi]=u,im(t,s,!1,!1),s.stateNode=t;e:{switch(B=Wt(l,u),l){case"dialog":tA("cancel",t),tA("close",t),h=u;break;case"iframe":case"object":case"embed":tA("load",t),h=u;break;case"video":case"audio":for(h=0;h<Li.length;h++)tA(Li[h],t);h=u;break;case"source":tA("error",t),h=u;break;case"img":case"image":case"link":tA("error",t),tA("load",t),h=u;break;case"details":tA("toggle",t),h=u;break;case"input":rA(t,u),h=Nt(t,u),tA("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=$({},u,{value:void 0}),tA("invalid",t);break;case"textarea":Ye(t,u),h=pt(t,u),tA("invalid",t);break;default:h=u}Yt(l,h),F=h;for(p in F)if(F.hasOwnProperty(p)){var T=F[p];p==="style"?Pt(t,T):p==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&wt(t,T)):p==="children"?typeof T=="string"?(l!=="textarea"||T!=="")&&cA(t,T):typeof T=="number"&&cA(t,""+T):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?T!=null&&p==="onScroll"&&tA("scroll",t):T!=null&&N(t,p,T,B))}switch(l){case"input":be(t),et(t,u,!1);break;case"textarea":be(t),ze(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ie(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?mt(t,!!u.multiple,p,!1):u.defaultValue!=null&&mt(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=za)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return HA(s),null;case 6:if(t&&s.stateNode!=null)om(t,s,t.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(A(166));if(l=qn(Gi.current),qn(Mr.current),to(s)){if(u=s.stateNode,l=s.memoizedProps,u[Or]=s,(p=u.nodeValue!==l)&&(t=rr,t!==null))switch(t.tag){case 3:Va(u.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(u.nodeValue,l,(t.mode&1)!==0)}p&&(s.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[Or]=s,s.stateNode=u}return HA(s),null;case 13:if(AA(oA),u=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(sA&&nr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)uh(),js(),s.flags|=98560,p=!1;else if(p=to(s),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(A(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(A(317));p[Or]=s}else js(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;HA(s),p=!1}else Ur!==null&&(fu(Ur),Ur=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(oA.current&1)!==0?yA===0&&(yA=3):gu())),s.updateQueue!==null&&(s.flags|=4),HA(s),null);case 4:return Ds(),Au(t,s),t===null&&Hi(s.stateNode.containerInfo),HA(s),null;case 10:return Sc(s.type._context),HA(s),null;case 17:return zA(s.type)&&Ya(),HA(s),null;case 19:if(AA(oA),p=s.memoizedState,p===null)return HA(s),null;if(u=(s.flags&128)!==0,B=p.rendering,B===null)if(u)Ji(p,!1);else{if(yA!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(B=ao(t),B!==null){for(s.flags|=128,Ji(p,!1),u=B.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=l,l=s.child;l!==null;)p=l,t=u,p.flags&=14680066,B=p.alternate,B===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=B.childLanes,p.lanes=B.lanes,p.child=B.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=B.memoizedProps,p.memoizedState=B.memoizedState,p.updateQueue=B.updateQueue,p.type=B.type,t=B.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return qt(oA,oA.current&1|2),s.child}t=t.sibling}p.tail!==null&&Ae()>Ms&&(s.flags|=128,u=!0,Ji(p,!1),s.lanes=4194304)}else{if(!u)if(t=ao(B),t!==null){if(s.flags|=128,u=!0,l=t.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ji(p,!0),p.tail===null&&p.tailMode==="hidden"&&!B.alternate&&!sA)return HA(s),null}else 2*Ae()-p.renderingStartTime>Ms&&l!==1073741824&&(s.flags|=128,u=!0,Ji(p,!1),s.lanes=4194304);p.isBackwards?(B.sibling=s.child,s.child=B):(l=p.last,l!==null?l.sibling=B:s.child=B,p.last=B)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=Ae(),s.sibling=null,l=oA.current,qt(oA,u?l&1|2:l&1),s):(HA(s),null);case 22:case 23:return mu(),u=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(sr&1073741824)!==0&&(HA(s),s.subtreeFlags&6&&(s.flags|=8192)):HA(s),null;case 24:return null;case 25:return null}throw Error(A(156,s.tag))}function Dx(t,s){switch(Cc(s),s.tag){case 1:return zA(s.type)&&Ya(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ds(),AA(VA),AA(TA),Hc(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Tc(s),null;case 13:if(AA(oA),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(A(340));js()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return AA(oA),null;case 4:return Ds(),null;case 10:return Sc(s.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var po=!1,DA=!1,Px=typeof WeakSet=="function"?WeakSet:Set,at=null;function Rs(t,s){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){uA(t,s,u)}else l.current=null}function ru(t,s,l){try{l()}catch(u){uA(t,s,u)}}var lm=!1;function Rx(t,s){if(mc=La,t=Of(),ac(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break e}var B=0,F=-1,T=-1,ee=0,Fe=0,Ie=t,Ee=null;t:for(;;){for(var st;Ie!==l||h!==0&&Ie.nodeType!==3||(F=B+h),Ie!==p||u!==0&&Ie.nodeType!==3||(T=B+u),Ie.nodeType===3&&(B+=Ie.nodeValue.length),(st=Ie.firstChild)!==null;)Ee=Ie,Ie=st;for(;;){if(Ie===t)break t;if(Ee===l&&++ee===h&&(F=B),Ee===p&&++Fe===u&&(T=B),(st=Ie.nextSibling)!==null)break;Ie=Ee,Ee=Ie.parentNode}Ie=st}l=F===-1||T===-1?null:{start:F,end:T}}else l=null}l=l||{start:0,end:0}}else l=null;for(gc={focusedElem:t,selectionRange:l},La=!1,at=s;at!==null;)if(s=at,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,at=t;else for(;at!==null;){s=at;try{var lt=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var ut=lt.memoizedProps,dA=lt.memoizedState,V=s.stateNode,M=V.getSnapshotBeforeUpdate(s.elementType===s.type?ut:Fr(s.type,ut),dA);V.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(Re){uA(s,s.return,Re)}if(t=s.sibling,t!==null){t.return=s.return,at=t;break}at=s.return}return lt=lm,lm=!1,lt}function Yi(t,s,l){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&ru(s,l,p)}h=h.next}while(h!==u)}}function wo(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&t)===t){var u=l.create;l.destroy=u()}l=l.next}while(l!==s)}}function nu(t){var s=t.ref;if(s!==null){var l=t.stateNode;switch(t.tag){case 5:t=l;break;default:t=l}typeof s=="function"?s(t):s.current=t}}function cm(t){var s=t.alternate;s!==null&&(t.alternate=null,cm(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Or],delete s[Pi],delete s[vc],delete s[yx],delete s[bx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function um(t){return t.tag===5||t.tag===3||t.tag===4}function dm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||um(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function su(t,s,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(t,s):l.insertBefore(t,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(t,l)):(s=l,s.appendChild(t)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=za));else if(u!==4&&(t=t.child,t!==null))for(su(t,s,l),t=t.sibling;t!==null;)su(t,s,l),t=t.sibling}function iu(t,s,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?l.insertBefore(t,s):l.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(iu(t,s,l),t=t.sibling;t!==null;)iu(t,s,l),t=t.sibling}var SA=null,Sr=!1;function En(t,s,l){for(l=l.child;l!==null;)fm(t,s,l),l=l.sibling}function fm(t,s,l){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Rt,l)}catch{}switch(l.tag){case 5:DA||Rs(l,s);case 6:var u=SA,h=Sr;SA=null,En(t,s,l),SA=u,Sr=h,SA!==null&&(Sr?(t=SA,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):SA.removeChild(l.stateNode));break;case 18:SA!==null&&(Sr?(t=SA,l=l.stateNode,t.nodeType===8?xc(t.parentNode,l):t.nodeType===1&&xc(t,l),Ui(t)):xc(SA,l.stateNode));break;case 4:u=SA,h=Sr,SA=l.stateNode.containerInfo,Sr=!0,En(t,s,l),SA=u,Sr=h;break;case 0:case 11:case 14:case 15:if(!DA&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,B=p.destroy;p=p.tag,B!==void 0&&((p&2)!==0||(p&4)!==0)&&ru(l,s,B),h=h.next}while(h!==u)}En(t,s,l);break;case 1:if(!DA&&(Rs(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(F){uA(l,s,F)}En(t,s,l);break;case 21:En(t,s,l);break;case 22:l.mode&1?(DA=(u=DA)||l.memoizedState!==null,En(t,s,l),DA=u):En(t,s,l);break;default:En(t,s,l)}}function hm(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new Px),s.forEach(function(u){var h=Jx.bind(null,t,u);l.has(u)||(l.add(u),u.then(h,h))})}}function kr(t,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];try{var p=t,B=s,F=B;e:for(;F!==null;){switch(F.tag){case 5:SA=F.stateNode,Sr=!1;break e;case 3:SA=F.stateNode.containerInfo,Sr=!0;break e;case 4:SA=F.stateNode.containerInfo,Sr=!0;break e}F=F.return}if(SA===null)throw Error(A(160));fm(p,B,h),SA=null,Sr=!1;var T=h.alternate;T!==null&&(T.return=null),h.return=null}catch(ee){uA(h,s,ee)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)mm(s,t),s=s.sibling}function mm(t,s){var l=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kr(s,t),Gr(t),u&4){try{Yi(3,t,t.return),wo(3,t)}catch(ut){uA(t,t.return,ut)}try{Yi(5,t,t.return)}catch(ut){uA(t,t.return,ut)}}break;case 1:kr(s,t),Gr(t),u&512&&l!==null&&Rs(l,l.return);break;case 5:if(kr(s,t),Gr(t),u&512&&l!==null&&Rs(l,l.return),t.flags&32){var h=t.stateNode;try{cA(h,"")}catch(ut){uA(t,t.return,ut)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,B=l!==null?l.memoizedProps:p,F=t.type,T=t.updateQueue;if(t.updateQueue=null,T!==null)try{F==="input"&&p.type==="radio"&&p.name!=null&&Xt(h,p),Wt(F,B);var ee=Wt(F,p);for(B=0;B<T.length;B+=2){var Fe=T[B],Ie=T[B+1];Fe==="style"?Pt(h,Ie):Fe==="dangerouslySetInnerHTML"?wt(h,Ie):Fe==="children"?cA(h,Ie):N(h,Fe,Ie,ee)}switch(F){case"input":le(h,p);break;case"textarea":rt(h,p);break;case"select":var Ee=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var st=p.value;st!=null?mt(h,!!p.multiple,st,!1):Ee!==!!p.multiple&&(p.defaultValue!=null?mt(h,!!p.multiple,p.defaultValue,!0):mt(h,!!p.multiple,p.multiple?[]:"",!1))}h[Pi]=p}catch(ut){uA(t,t.return,ut)}}break;case 6:if(kr(s,t),Gr(t),u&4){if(t.stateNode===null)throw Error(A(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ut){uA(t,t.return,ut)}}break;case 3:if(kr(s,t),Gr(t),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Ui(s.containerInfo)}catch(ut){uA(t,t.return,ut)}break;case 4:kr(s,t),Gr(t);break;case 13:kr(s,t),Gr(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(lu=Ae())),u&4&&hm(t);break;case 22:if(Fe=l!==null&&l.memoizedState!==null,t.mode&1?(DA=(ee=DA)||Fe,kr(s,t),DA=ee):kr(s,t),Gr(t),u&8192){if(ee=t.memoizedState!==null,(t.stateNode.isHidden=ee)&&!Fe&&(t.mode&1)!==0)for(at=t,Fe=t.child;Fe!==null;){for(Ie=at=Fe;at!==null;){switch(Ee=at,st=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:Yi(4,Ee,Ee.return);break;case 1:Rs(Ee,Ee.return);var lt=Ee.stateNode;if(typeof lt.componentWillUnmount=="function"){u=Ee,l=Ee.return;try{s=u,lt.props=s.memoizedProps,lt.state=s.memoizedState,lt.componentWillUnmount()}catch(ut){uA(u,l,ut)}}break;case 5:Rs(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){wm(Ie);continue}}st!==null?(st.return=Ee,at=st):wm(Ie)}Fe=Fe.sibling}e:for(Fe=null,Ie=t;;){if(Ie.tag===5){if(Fe===null){Fe=Ie;try{h=Ie.stateNode,ee?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(F=Ie.stateNode,T=Ie.memoizedProps.style,B=T!=null&&T.hasOwnProperty("display")?T.display:null,F.style.display=kt("display",B))}catch(ut){uA(t,t.return,ut)}}}else if(Ie.tag===6){if(Fe===null)try{Ie.stateNode.nodeValue=ee?"":Ie.memoizedProps}catch(ut){uA(t,t.return,ut)}}else if((Ie.tag!==22&&Ie.tag!==23||Ie.memoizedState===null||Ie===t)&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===t)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===t)break e;Fe===Ie&&(Fe=null),Ie=Ie.return}Fe===Ie&&(Fe=null),Ie.sibling.return=Ie.return,Ie=Ie.sibling}}break;case 19:kr(s,t),Gr(t),u&4&&hm(t);break;case 21:break;default:kr(s,t),Gr(t)}}function Gr(t){var s=t.flags;if(s&2){try{e:{for(var l=t.return;l!==null;){if(um(l)){var u=l;break e}l=l.return}throw Error(A(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(cA(h,""),u.flags&=-33);var p=dm(t);iu(t,p,h);break;case 3:case 4:var B=u.stateNode.containerInfo,F=dm(t);su(t,F,B);break;default:throw Error(A(161))}}catch(T){uA(t,t.return,T)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Ox(t,s,l){at=t,gm(t)}function gm(t,s,l){for(var u=(t.mode&1)!==0;at!==null;){var h=at,p=h.child;if(h.tag===22&&u){var B=h.memoizedState!==null||po;if(!B){var F=h.alternate,T=F!==null&&F.memoizedState!==null||DA;F=po;var ee=DA;if(po=B,(DA=T)&&!ee)for(at=h;at!==null;)B=at,T=B.child,B.tag===22&&B.memoizedState!==null?xm(h):T!==null?(T.return=B,at=T):xm(h);for(;p!==null;)at=p,gm(p),p=p.sibling;at=h,po=F,DA=ee}pm(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,at=p):pm(t)}}function pm(t){for(;at!==null;){var s=at;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:DA||wo(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!DA)if(l===null)u.componentDidMount();else{var h=s.elementType===s.type?l.memoizedProps:Fr(s.type,l.memoizedProps);u.componentDidUpdate(h,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&wh(s,p,u);break;case 3:var B=s.updateQueue;if(B!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}wh(s,B,l)}break;case 5:var F=s.stateNode;if(l===null&&s.flags&4){l=F;var T=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&l.focus();break;case"img":T.src&&(l.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ee=s.alternate;if(ee!==null){var Fe=ee.memoizedState;if(Fe!==null){var Ie=Fe.dehydrated;Ie!==null&&Ui(Ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}DA||s.flags&512&&nu(s)}catch(Ee){uA(s,s.return,Ee)}}if(s===t){at=null;break}if(l=s.sibling,l!==null){l.return=s.return,at=l;break}at=s.return}}function wm(t){for(;at!==null;){var s=at;if(s===t){at=null;break}var l=s.sibling;if(l!==null){l.return=s.return,at=l;break}at=s.return}}function xm(t){for(;at!==null;){var s=at;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{wo(4,s)}catch(T){uA(s,l,T)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var h=s.return;try{u.componentDidMount()}catch(T){uA(s,h,T)}}var p=s.return;try{nu(s)}catch(T){uA(s,p,T)}break;case 5:var B=s.return;try{nu(s)}catch(T){uA(s,B,T)}}}catch(T){uA(s,s.return,T)}if(s===t){at=null;break}var F=s.sibling;if(F!==null){F.return=s.return,at=F;break}at=s.return}}var Mx=Math.ceil,xo=O.ReactCurrentDispatcher,au=O.ReactCurrentOwner,gr=O.ReactCurrentBatchConfig,Ot=0,_A=null,gA=null,kA=0,sr=0,Os=vn(0),yA=0,Xi=null,es=0,vo=0,ou=0,qi=null,YA=null,lu=0,Ms=1/0,rn=null,Bo=!1,cu=null,_n=null,yo=!1,Qn=null,bo=0,Zi=0,uu=null,Co=-1,Eo=0;function KA(){return(Ot&6)!==0?Ae():Co!==-1?Co:Co=Ae()}function Un(t){return(t.mode&1)===0?1:(Ot&2)!==0&&kA!==0?kA&-kA:Ex.transition!==null?(Eo===0&&(Eo=OA()),Eo):(t=Ht,t!==0||(t=window.event,t=t===void 0?16:Bf(t.type)),t)}function Nr(t,s,l,u){if(50<Zi)throw Zi=0,uu=null,Error(A(185));vA(t,l,u),((Ot&2)===0||t!==_A)&&(t===_A&&((Ot&2)===0&&(vo|=l),yA===4&&Fn(t,kA)),XA(t,u),l===1&&Ot===0&&(s.mode&1)===0&&(Ms=Ae()+500,qa&&yn()))}function XA(t,s){var l=t.callbackNode;Jr(t,s);var u=St(t,t===_A?kA:0);if(u===0)l!==null&&Ke(l),t.callbackNode=null,t.callbackPriority=0;else if(s=u&-u,t.callbackPriority!==s){if(l!=null&&Ke(l),s===1)t.tag===0?Cx(Bm.bind(null,t)):ih(Bm.bind(null,t)),vx(function(){(Ot&6)===0&&yn()}),l=null;else{switch(fn(u)){case 1:l=je;break;case 4:l=ft;break;case 16:l=xt;break;case 536870912:l=zt;break;default:l=xt}l=Fm(l,vm.bind(null,t))}t.callbackPriority=s,t.callbackNode=l}}function vm(t,s){if(Co=-1,Eo=0,(Ot&6)!==0)throw Error(A(327));var l=t.callbackNode;if(Ks()&&t.callbackNode!==l)return null;var u=St(t,t===_A?kA:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||s)s=_o(t,u);else{s=u;var h=Ot;Ot|=2;var p=bm();(_A!==t||kA!==s)&&(rn=null,Ms=Ae()+500,As(t,s));do try{$x();break}catch(F){ym(t,F)}while(!0);Fc(),xo.current=p,Ot=h,gA!==null?s=0:(_A=null,kA=0,s=yA)}if(s!==0){if(s===2&&(h=lr(t),h!==0&&(u=h,s=du(t,h))),s===1)throw l=Xi,As(t,0),Fn(t,u),XA(t,Ae()),l;if(s===6)Fn(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Kx(h)&&(s=_o(t,u),s===2&&(p=lr(t),p!==0&&(u=p,s=du(t,p))),s===1))throw l=Xi,As(t,0),Fn(t,u),XA(t,Ae()),l;switch(t.finishedWork=h,t.finishedLanes=u,s){case 0:case 1:throw Error(A(345));case 2:rs(t,YA,rn);break;case 3:if(Fn(t,u),(u&130023424)===u&&(s=lu+500-Ae(),10<s)){if(St(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){KA(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=wc(rs.bind(null,t,YA,rn),s);break}rs(t,YA,rn);break;case 4:if(Fn(t,u),(u&4194240)===u)break;for(s=t.eventTimes,h=-1;0<u;){var B=31-ge(u);p=1<<B,B=s[B],B>h&&(h=B),u&=~p}if(u=h,u=Ae()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Mx(u/1960))-u,10<u){t.timeoutHandle=wc(rs.bind(null,t,YA,rn),u);break}rs(t,YA,rn);break;case 5:rs(t,YA,rn);break;default:throw Error(A(329))}}}return XA(t,Ae()),t.callbackNode===l?vm.bind(null,t):null}function du(t,s){var l=qi;return t.current.memoizedState.isDehydrated&&(As(t,s).flags|=256),t=_o(t,s),t!==2&&(s=YA,YA=l,s!==null&&fu(s)),t}function fu(t){YA===null?YA=t:YA.push.apply(YA,t)}function Kx(t){for(var s=t;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var h=l[u],p=h.getSnapshot;h=h.value;try{if(!Qr(p(),h))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fn(t,s){for(s&=~ou,s&=~vo,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var l=31-ge(s),u=1<<l;t[l]=-1,s&=~u}}function Bm(t){if((Ot&6)!==0)throw Error(A(327));Ks();var s=St(t,0);if((s&1)===0)return XA(t,Ae()),null;var l=_o(t,s);if(t.tag!==0&&l===2){var u=lr(t);u!==0&&(s=u,l=du(t,u))}if(l===1)throw l=Xi,As(t,0),Fn(t,s),XA(t,Ae()),l;if(l===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,rs(t,YA,rn),XA(t,Ae()),null}function hu(t,s){var l=Ot;Ot|=1;try{return t(s)}finally{Ot=l,Ot===0&&(Ms=Ae()+500,qa&&yn())}}function ts(t){Qn!==null&&Qn.tag===0&&(Ot&6)===0&&Ks();var s=Ot;Ot|=1;var l=gr.transition,u=Ht;try{if(gr.transition=null,Ht=1,t)return t()}finally{Ht=u,gr.transition=l,Ot=s,(Ot&6)===0&&yn()}}function mu(){sr=Os.current,AA(Os)}function As(t,s){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,xx(l)),gA!==null)for(l=gA.return;l!==null;){var u=l;switch(Cc(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ya();break;case 3:Ds(),AA(VA),AA(TA),Hc();break;case 5:Tc(u);break;case 4:Ds();break;case 13:AA(oA);break;case 19:AA(oA);break;case 10:Sc(u.type._context);break;case 22:case 23:mu()}l=l.return}if(_A=t,gA=t=Sn(t.current,null),kA=sr=s,yA=0,Xi=null,ou=vo=es=0,YA=qi=null,Xn!==null){for(s=0;s<Xn.length;s++)if(l=Xn[s],u=l.interleaved,u!==null){l.interleaved=null;var h=u.next,p=l.pending;if(p!==null){var B=p.next;p.next=h,u.next=B}l.pending=u}Xn=null}return t}function ym(t,s){do{var l=gA;try{if(Fc(),oo.current=fo,lo){for(var u=lA.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}lo=!1}if(Zn=0,EA=BA=lA=null,$i=!1,Wi=0,au.current=null,l===null||l.return===null){yA=1,Xi=s,gA=null;break}e:{var p=t,B=l.return,F=l,T=s;if(s=kA,F.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var ee=T,Fe=F,Ie=Fe.tag;if((Fe.mode&1)===0&&(Ie===0||Ie===11||Ie===15)){var Ee=Fe.alternate;Ee?(Fe.updateQueue=Ee.updateQueue,Fe.memoizedState=Ee.memoizedState,Fe.lanes=Ee.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var st=Vh(B);if(st!==null){st.flags&=-257,zh(st,B,F,p,s),st.mode&1&&Wh(p,ee,s),s=st,T=ee;var lt=s.updateQueue;if(lt===null){var ut=new Set;ut.add(T),s.updateQueue=ut}else lt.add(T);break e}else{if((s&1)===0){Wh(p,ee,s),gu();break e}T=Error(A(426))}}else if(sA&&F.mode&1){var dA=Vh(B);if(dA!==null){(dA.flags&65536)===0&&(dA.flags|=256),zh(dA,B,F,p,s),Qc(Ps(T,F));break e}}p=T=Ps(T,F),yA!==4&&(yA=2),qi===null?qi=[p]:qi.push(p),p=B;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var V=Gh(p,T,s);ph(p,V);break e;case 1:F=T;var M=p.type,q=p.stateNode;if((p.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(_n===null||!_n.has(q)))){p.flags|=65536,s&=-s,p.lanes|=s;var Re=$h(p,F,s);ph(p,Re);break e}}p=p.return}while(p!==null)}Em(l)}catch(ht){s=ht,gA===l&&l!==null&&(gA=l=l.return);continue}break}while(!0)}function bm(){var t=xo.current;return xo.current=fo,t===null?fo:t}function gu(){(yA===0||yA===3||yA===2)&&(yA=4),_A===null||(es&268435455)===0&&(vo&268435455)===0||Fn(_A,kA)}function _o(t,s){var l=Ot;Ot|=2;var u=bm();(_A!==t||kA!==s)&&(rn=null,As(t,s));do try{Gx();break}catch(h){ym(t,h)}while(!0);if(Fc(),Ot=l,xo.current=u,gA!==null)throw Error(A(261));return _A=null,kA=0,yA}function Gx(){for(;gA!==null;)Cm(gA)}function $x(){for(;gA!==null&&!ce();)Cm(gA)}function Cm(t){var s=Um(t.alternate,t,sr);t.memoizedProps=t.pendingProps,s===null?Em(t):gA=s,au.current=null}function Em(t){var s=t;do{var l=s.alternate;if(t=s.return,(s.flags&32768)===0){if(l=Hx(l,s,sr),l!==null){gA=l;return}}else{if(l=Dx(l,s),l!==null){l.flags&=32767,gA=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yA=6,gA=null;return}}if(s=s.sibling,s!==null){gA=s;return}gA=s=t}while(s!==null);yA===0&&(yA=5)}function rs(t,s,l){var u=Ht,h=gr.transition;try{gr.transition=null,Ht=1,Wx(t,s,l,u)}finally{gr.transition=h,Ht=u}return null}function Wx(t,s,l,u){do Ks();while(Qn!==null);if((Ot&6)!==0)throw Error(A(327));l=t.finishedWork;var h=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var p=l.lanes|l.childLanes;if(cr(t,p),t===_A&&(gA=_A=null,kA=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||yo||(yo=!0,Fm(xt,function(){return Ks(),null})),p=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||p){p=gr.transition,gr.transition=null;var B=Ht;Ht=1;var F=Ot;Ot|=4,au.current=null,Rx(t,l),mm(l,t),dx(gc),La=!!mc,gc=mc=null,t.current=l,Ox(l),De(),Ot=F,Ht=B,gr.transition=p}else t.current=l;if(yo&&(yo=!1,Qn=t,bo=h),p=t.pendingLanes,p===0&&(_n=null),J(l.stateNode),XA(t,Ae()),s!==null)for(u=t.onRecoverableError,l=0;l<s.length;l++)h=s[l],u(h.value,{componentStack:h.stack,digest:h.digest});if(Bo)throw Bo=!1,t=cu,cu=null,t;return(bo&1)!==0&&t.tag!==0&&Ks(),p=t.pendingLanes,(p&1)!==0?t===uu?Zi++:(Zi=0,uu=t):Zi=0,yn(),null}function Ks(){if(Qn!==null){var t=fn(bo),s=gr.transition,l=Ht;try{if(gr.transition=null,Ht=16>t?16:t,Qn===null)var u=!1;else{if(t=Qn,Qn=null,bo=0,(Ot&6)!==0)throw Error(A(331));var h=Ot;for(Ot|=4,at=t.current;at!==null;){var p=at,B=p.child;if((at.flags&16)!==0){var F=p.deletions;if(F!==null){for(var T=0;T<F.length;T++){var ee=F[T];for(at=ee;at!==null;){var Fe=at;switch(Fe.tag){case 0:case 11:case 15:Yi(8,Fe,p)}var Ie=Fe.child;if(Ie!==null)Ie.return=Fe,at=Ie;else for(;at!==null;){Fe=at;var Ee=Fe.sibling,st=Fe.return;if(cm(Fe),Fe===ee){at=null;break}if(Ee!==null){Ee.return=st,at=Ee;break}at=st}}}var lt=p.alternate;if(lt!==null){var ut=lt.child;if(ut!==null){lt.child=null;do{var dA=ut.sibling;ut.sibling=null,ut=dA}while(ut!==null)}}at=p}}if((p.subtreeFlags&2064)!==0&&B!==null)B.return=p,at=B;else e:for(;at!==null;){if(p=at,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Yi(9,p,p.return)}var V=p.sibling;if(V!==null){V.return=p.return,at=V;break e}at=p.return}}var M=t.current;for(at=M;at!==null;){B=at;var q=B.child;if((B.subtreeFlags&2064)!==0&&q!==null)q.return=B,at=q;else e:for(B=M;at!==null;){if(F=at,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:wo(9,F)}}catch(ht){uA(F,F.return,ht)}if(F===B){at=null;break e}var Re=F.sibling;if(Re!==null){Re.return=F.return,at=Re;break e}at=F.return}}if(Ot=h,yn(),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Rt,t)}catch{}u=!0}return u}finally{Ht=l,gr.transition=s}}return!1}function _m(t,s,l){s=Ps(l,s),s=Gh(t,s,1),t=Cn(t,s,1),s=KA(),t!==null&&(vA(t,1,s),XA(t,s))}function uA(t,s,l){if(t.tag===3)_m(t,t,l);else for(;s!==null;){if(s.tag===3){_m(s,t,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(_n===null||!_n.has(u))){t=Ps(l,t),t=$h(s,t,1),s=Cn(s,t,1),t=KA(),s!==null&&(vA(s,1,t),XA(s,t));break}}s=s.return}}function Vx(t,s,l){var u=t.pingCache;u!==null&&u.delete(s),s=KA(),t.pingedLanes|=t.suspendedLanes&l,_A===t&&(kA&l)===l&&(yA===4||yA===3&&(kA&130023424)===kA&&500>Ae()-lu?As(t,0):ou|=l),XA(t,s)}function Qm(t,s){s===0&&((t.mode&1)===0?s=1:(s=Lt,Lt<<=1,(Lt&130023424)===0&&(Lt=4194304)));var l=KA();t=en(t,s),t!==null&&(vA(t,s,l),XA(t,l))}function zx(t){var s=t.memoizedState,l=0;s!==null&&(l=s.retryLane),Qm(t,l)}function Jx(t,s){var l=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(l=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(A(314))}u!==null&&u.delete(s),Qm(t,l)}var Um;Um=function(t,s,l){if(t!==null)if(t.memoizedProps!==s.pendingProps||VA.current)JA=!0;else{if((t.lanes&l)===0&&(s.flags&128)===0)return JA=!1,Lx(t,s,l);JA=(t.flags&131072)!==0}else JA=!1,sA&&(s.flags&1048576)!==0&&ah(s,eo,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;go(t,s),t=s.pendingProps;var h=ks(s,TA.current);Hs(s,l),h=Rc(null,s,u,t,h,l);var p=Oc();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,zA(u)?(p=!0,Xa(s)):p=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ic(s),h.updater=ho,s.stateNode=h,h._reactInternals=s,Vc(s,u,t,l),s=Xc(null,s,u,!0,p,l)):(s.tag=0,sA&&p&&bc(s),MA(null,s,h,l),s=s.child),s;case 16:u=s.elementType;e:{switch(go(t,s),t=s.pendingProps,h=u._init,u=h(u._payload),s.type=u,h=s.tag=Xx(u),t=Fr(u,t),h){case 0:s=Yc(null,s,u,t,l);break e;case 1:s=em(null,s,u,t,l);break e;case 11:s=Jh(null,s,u,t,l);break e;case 14:s=Yh(null,s,u,Fr(u.type,t),l);break e}throw Error(A(306,u,""))}return s;case 0:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:Fr(u,h),Yc(t,s,u,h,l);case 1:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:Fr(u,h),em(t,s,u,h,l);case 3:e:{if(tm(s),t===null)throw Error(A(387));u=s.pendingProps,p=s.memoizedState,h=p.element,gh(t,s),io(s,u,null,l);var B=s.memoizedState;if(u=B.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){h=Ps(Error(A(423)),s),s=Am(t,s,u,l,h);break e}else if(u!==h){h=Ps(Error(A(424)),s),s=Am(t,s,u,l,h);break e}else for(nr=xn(s.stateNode.containerInfo.firstChild),rr=s,sA=!0,Ur=null,l=hh(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(js(),u===h){s=An(t,s,l);break e}MA(t,s,u,l)}s=s.child}return s;case 5:return xh(s),t===null&&_c(s),u=s.type,h=s.pendingProps,p=t!==null?t.memoizedProps:null,B=h.children,pc(u,h)?B=null:p!==null&&pc(u,p)&&(s.flags|=32),Zh(t,s),MA(t,s,B,l),s.child;case 6:return t===null&&_c(s),null;case 13:return rm(t,s,l);case 4:return jc(s,s.stateNode.containerInfo),u=s.pendingProps,t===null?s.child=Ts(s,null,u,l):MA(t,s,u,l),s.child;case 11:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:Fr(u,h),Jh(t,s,u,h,l);case 7:return MA(t,s,s.pendingProps,l),s.child;case 8:return MA(t,s,s.pendingProps.children,l),s.child;case 12:return MA(t,s,s.pendingProps.children,l),s.child;case 10:e:{if(u=s.type._context,h=s.pendingProps,p=s.memoizedProps,B=h.value,qt(ro,u._currentValue),u._currentValue=B,p!==null)if(Qr(p.value,B)){if(p.children===h.children&&!VA.current){s=An(t,s,l);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var F=p.dependencies;if(F!==null){B=p.child;for(var T=F.firstContext;T!==null;){if(T.context===u){if(p.tag===1){T=tn(-1,l&-l),T.tag=2;var ee=p.updateQueue;if(ee!==null){ee=ee.shared;var Fe=ee.pending;Fe===null?T.next=T:(T.next=Fe.next,Fe.next=T),ee.pending=T}}p.lanes|=l,T=p.alternate,T!==null&&(T.lanes|=l),kc(p.return,l,s),F.lanes|=l;break}T=T.next}}else if(p.tag===10)B=p.type===s.type?null:p.child;else if(p.tag===18){if(B=p.return,B===null)throw Error(A(341));B.lanes|=l,F=B.alternate,F!==null&&(F.lanes|=l),kc(B,l,s),B=p.sibling}else B=p.child;if(B!==null)B.return=p;else for(B=p;B!==null;){if(B===s){B=null;break}if(p=B.sibling,p!==null){p.return=B.return,B=p;break}B=B.return}p=B}MA(t,s,h.children,l),s=s.child}return s;case 9:return h=s.type,u=s.pendingProps.children,Hs(s,l),h=hr(h),u=u(h),s.flags|=1,MA(t,s,u,l),s.child;case 14:return u=s.type,h=Fr(u,s.pendingProps),h=Fr(u.type,h),Yh(t,s,u,h,l);case 15:return Xh(t,s,s.type,s.pendingProps,l);case 17:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:Fr(u,h),go(t,s),s.tag=1,zA(u)?(t=!0,Xa(s)):t=!1,Hs(s,l),Mh(s,u,h),Vc(s,u,h,l),Xc(null,s,u,!0,t,l);case 19:return sm(t,s,l);case 22:return qh(t,s,l)}throw Error(A(156,s.tag))};function Fm(t,s){return we(t,s)}function Yx(t,s,l,u){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(t,s,l,u){return new Yx(t,s,l,u)}function pu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xx(t){if(typeof t=="function")return pu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ae)return 11;if(t===ue)return 14}return 2}function Sn(t,s){var l=t.alternate;return l===null?(l=pr(t.tag,s,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=s,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,s=t.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function Qo(t,s,l,u,h,p){var B=2;if(u=t,typeof t=="function")pu(t)&&(B=1);else if(typeof t=="string")B=5;else e:switch(t){case R:return ns(l.children,h,p,s);case G:B=8,h|=8;break;case H:return t=pr(12,l,s,h|2),t.elementType=H,t.lanes=p,t;case fe:return t=pr(13,l,s,h),t.elementType=fe,t.lanes=p,t;case P:return t=pr(19,l,s,h),t.elementType=P,t.lanes=p,t;case D:return Uo(l,h,p,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ve:B=10;break e;case W:B=9;break e;case ae:B=11;break e;case ue:B=14;break e;case Y:B=16,u=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return s=pr(B,l,s,h),s.elementType=t,s.type=u,s.lanes=p,s}function ns(t,s,l,u){return t=pr(7,t,u,s),t.lanes=l,t}function Uo(t,s,l,u){return t=pr(22,t,u,s),t.elementType=D,t.lanes=l,t.stateNode={isHidden:!1},t}function wu(t,s,l){return t=pr(6,t,null,s),t.lanes=l,t}function xu(t,s,l){return s=pr(4,t.children!==null?t.children:[],t.key,s),s.lanes=l,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function qx(t,s,l,u,h){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function vu(t,s,l,u,h,p,B,F,T){return t=new qx(t,s,l,F,T),s===1?(s=1,p===!0&&(s|=8)):s=0,p=pr(3,null,null,s),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(p),t}function Zx(t,s,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:u==null?null:""+u,children:t,containerInfo:s,implementation:l}}function Sm(t){if(!t)return Bn;t=t._reactInternals;e:{if(re(t)!==t||t.tag!==1)throw Error(A(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(zA(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(A(171))}if(t.tag===1){var l=t.type;if(zA(l))return nh(t,l,s)}return s}function km(t,s,l,u,h,p,B,F,T){return t=vu(l,u,!0,t,h,p,B,F,T),t.context=Sm(null),l=t.current,u=KA(),h=Un(l),p=tn(u,h),p.callback=s??null,Cn(l,p,h),t.current.lanes=h,vA(t,h,u),XA(t,u),t}function Fo(t,s,l,u){var h=s.current,p=KA(),B=Un(h);return l=Sm(l),s.context===null?s.context=l:s.pendingContext=l,s=tn(p,B),s.payload={element:t},u=u===void 0?null:u,u!==null&&(s.callback=u),t=Cn(h,s,B),t!==null&&(Nr(t,h,B,p),so(t,h,B)),B}function So(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nm(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<s?l:s}}function Bu(t,s){Nm(t,s),(t=t.alternate)&&Nm(t,s)}function ev(){return null}var Im=typeof reportError=="function"?reportError:function(t){console.error(t)};function yu(t){this._internalRoot=t}ko.prototype.render=yu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(A(409));Fo(t,s,null,null)},ko.prototype.unmount=yu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ts(function(){Fo(null,t,null,null)}),s[Yr]=null}};function ko(t){this._internalRoot=t}ko.prototype.unstable_scheduleHydration=function(t){if(t){var s=Bs();t={blockedOn:null,target:t,priority:s};for(var l=0;l<gn.length&&s!==0&&s<gn[l].priority;l++);gn.splice(l,0,t),l===0&&xf(t)}};function bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function No(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jm(){}function tv(t,s,l,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var ee=So(B);p.call(ee)}}var B=km(s,u,t,0,null,!1,!1,"",jm);return t._reactRootContainer=B,t[Yr]=B.current,Hi(t.nodeType===8?t.parentNode:t),ts(),B}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var F=u;u=function(){var ee=So(T);F.call(ee)}}var T=vu(t,0,!1,null,null,!1,!1,"",jm);return t._reactRootContainer=T,t[Yr]=T.current,Hi(t.nodeType===8?t.parentNode:t),ts(function(){Fo(s,T,l,u)}),T}function Io(t,s,l,u,h){var p=l._reactRootContainer;if(p){var B=p;if(typeof h=="function"){var F=h;h=function(){var T=So(B);F.call(T)}}Fo(s,B,t,h)}else B=tv(l,s,t,h,u);return So(B)}hn=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var l=_t(s.pendingLanes);l!==0&&(WA(s,l|1),XA(s,Ae()),(Ot&6)===0&&(Ms=Ae()+500,yn()))}break;case 13:ts(function(){var u=en(t,1);if(u!==null){var h=KA();Nr(u,t,1,h)}}),Bu(t,1)}},ur=function(t){if(t.tag===13){var s=en(t,134217728);if(s!==null){var l=KA();Nr(s,t,134217728,l)}Bu(t,134217728)}},vs=function(t){if(t.tag===13){var s=Un(t),l=en(t,s);if(l!==null){var u=KA();Nr(l,t,s,u)}Bu(t,s)}},Bs=function(){return Ht},yi=function(t,s){var l=Ht;try{return Ht=t,s()}finally{Ht=l}},Gt=function(t,s,l){switch(s){case"input":if(le(t,l),s=l.name,l.type==="radio"&&s!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==t&&u.form===t.form){var h=Ja(u);if(!h)throw Error(A(90));Ze(u),le(u,h)}}}break;case"textarea":rt(t,l);break;case"select":s=l.value,s!=null&&mt(t,!!l.multiple,s,!1)}},ke=hu,oe=ts;var Av={usingClientEntryPoint:!1,Events:[Ri,Fs,Ja,Me,Pe,hu]},ea={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rv={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=de(t),t===null?null:t.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||ev,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jo.isDisabled&&jo.supportsFiber)try{Rt=jo.inject(rv),qe=jo}catch{}}return qA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Av,qA.createPortal=function(t,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bu(s))throw Error(A(200));return Zx(t,s,null,l)},qA.createRoot=function(t,s){if(!bu(t))throw Error(A(299));var l=!1,u="",h=Im;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=vu(t,1,!1,null,null,l,!1,u,h),t[Yr]=s.current,Hi(t.nodeType===8?t.parentNode:t),new yu(s)},qA.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=de(s),t=t===null?null:t.stateNode,t},qA.flushSync=function(t){return ts(t)},qA.hydrate=function(t,s,l){if(!No(s))throw Error(A(200));return Io(null,t,s,!0,l)},qA.hydrateRoot=function(t,s,l){if(!bu(t))throw Error(A(405));var u=l!=null&&l.hydratedSources||null,h=!1,p="",B=Im;if(l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(B=l.onRecoverableError)),s=km(s,null,t,1,l??null,h,!1,p,B),t[Yr]=s.current,Hi(t),u)for(t=0;t<u.length;t++)l=u[t],h=l._getVersion,h=h(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,h]:s.mutableSourceEagerHydrationData.push(l,h);return new ko(s)},qA.render=function(t,s,l){if(!No(s))throw Error(A(200));return Io(null,t,s,!1,l)},qA.unmountComponentAtNode=function(t){if(!No(t))throw Error(A(40));return t._reactRootContainer?(ts(function(){Io(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1},qA.unstable_batchedUpdates=hu,qA.unstable_renderSubtreeIntoContainer=function(t,s,l,u){if(!No(l))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Io(t,s,l,!1,u)},qA.version="18.3.1-next-f1338f8080-20240426",qA}var Mm;function Ip(){if(Mm)return _u.exports;Mm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_u.exports=dv(),_u.exports}var Km;function fv(){if(Km)return To;Km=1;var r=Ip();return To.createRoot=r.createRoot,To.hydrateRoot=r.hydrateRoot,To}var hv=fv();const mv=Ll(hv);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gm="popstate";function gv(r={}){function e(n,a){let{pathname:o,search:c,hash:d}=n.location;return ud("",{pathname:o,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function A(n,a){return typeof a=="string"?a:ba(a)}return wv(e,A,null,r)}function aA(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function br(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pv(){return Math.random().toString(36).substring(2,10)}function $m(r,e){return{usr:r.state,key:r.key,idx:e}}function ud(r,e,A=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?pi(e):e,state:A,key:e&&e.key||n||pv()}}function ba({pathname:r="/",search:e="",hash:A=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),A&&A!=="#"&&(r+=A.charAt(0)==="#"?A:"#"+A),r}function pi(r){let e={};if(r){let A=r.indexOf("#");A>=0&&(e.hash=r.substring(A),r=r.substring(0,A));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function wv(r,e,A,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,d="POP",f=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function w(){d="POP";let E=g(),S=E==null?null:E-m;m=E,f&&f({action:d,location:b.location,delta:S})}function v(E,S){d="PUSH";let k=ud(b.location,E,S);m=g()+1;let N=$m(k,m),O=b.createHref(k);try{c.pushState(N,"",O)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(O)}o&&f&&f({action:d,location:b.location,delta:1})}function y(E,S){d="REPLACE";let k=ud(b.location,E,S);m=g();let N=$m(k,m),O=b.createHref(k);c.replaceState(N,"",O),o&&f&&f({action:d,location:b.location,delta:0})}function C(E){return xv(E)}let b={get action(){return d},get location(){return r(a,c)},listen(E){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Gm,w),f=E,()=>{a.removeEventListener(Gm,w),f=null}},createHref(E){return e(a,E)},createURL:C,encodeLocation(E){let S=C(E);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:y,go(E){return c.go(E)}};return b}function xv(r,e=!1){let A="http://localhost";typeof window<"u"&&(A=window.location.origin!=="null"?window.location.origin:window.location.href),aA(A,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:ba(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=A+n),new URL(n,A)}function jp(r,e,A="/"){return vv(r,e,A,!1)}function vv(r,e,A,n){let a=typeof e=="string"?pi(e):e,o=un(a.pathname||"/",A);if(o==null)return null;let c=Tp(r);Bv(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let m=Nv(o);d=Sv(c[f],m,n)}return d}function Tp(r,e=[],A=[],n="",a=!1){let o=(c,d,f=a,m)=>{let g={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&f)return;aA(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let w=on([n,g.relativePath]),v=A.concat(g);c.children&&c.children.length>0&&(aA(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Tp(c.children,e,v,w,f)),!(c.path==null&&!c.index)&&e.push({path:w,score:Uv(w,c.index),routesMeta:v})};return r.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let f of Lp(c.path))o(c,d,!0,f)}),e}function Lp(r){let e=r.split("/");if(e.length===0)return[];let[A,...n]=e,a=A.endsWith("?"),o=A.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=Lp(n.join("/")),d=[];return d.push(...c.map(f=>f===""?o:[o,f].join("/"))),a&&d.push(...c),d.map(f=>r.startsWith("/")&&f===""?"/":f)}function Bv(r){r.sort((e,A)=>e.score!==A.score?A.score-e.score:Fv(e.routesMeta.map(n=>n.childrenIndex),A.routesMeta.map(n=>n.childrenIndex)))}var yv=/^:[\w-]+$/,bv=3,Cv=2,Ev=1,_v=10,Qv=-2,Wm=r=>r==="*";function Uv(r,e){let A=r.split("/"),n=A.length;return A.some(Wm)&&(n+=Qv),e&&(n+=Cv),A.filter(a=>!Wm(a)).reduce((a,o)=>a+(yv.test(o)?bv:o===""?Ev:_v),n)}function Fv(r,e){return r.length===e.length&&r.slice(0,-1).every((n,a)=>n===e[a])?r[r.length-1]-e[e.length-1]:0}function Sv(r,e,A=!1){let{routesMeta:n}=r,a={},o="/",c=[];for(let d=0;d<n.length;++d){let f=n[d],m=d===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",w=Bl({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),v=f.route;if(!w&&m&&A&&!n[n.length-1].route.index&&(w=Bl({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!w)return null;Object.assign(a,w.params),c.push({params:a,pathname:on([o,w.pathname]),pathnameBase:Lv(on([o,w.pathnameBase])),route:v}),w.pathnameBase!=="/"&&(o=on([o,w.pathnameBase]))}return c}function Bl(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[A,n]=kv(r.path,r.caseSensitive,r.end),a=e.match(A);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((m,{paramName:g,isOptional:w},v)=>{if(g==="*"){let C=d[v]||"";c=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const y=d[v];return w&&!y?m[g]=void 0:m[g]=(y||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:r}}function kv(r,e=!1,A=!0){br(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):A?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function Nv(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return br(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function un(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let A=e.endsWith("/")?e.length-1:e.length,n=r.charAt(A);return n&&n!=="/"?null:r.slice(A)||"/"}function Iv(r,e="/"){let{pathname:A,search:n="",hash:a=""}=typeof r=="string"?pi(r):r;return{pathname:A?A.startsWith("/")?A:jv(A,e):e,search:Hv(n),hash:Dv(a)}}function jv(r,e){let A=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?A.length>1&&A.pop():a!=="."&&A.push(a)}),A.length>1?A.join("/"):"/"}function Fu(r,e,A,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${A}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Tv(r){return r.filter((e,A)=>A===0||e.route.path&&e.route.path.length>0)}function Xd(r){let e=Tv(r);return e.map((A,n)=>n===e.length-1?A.pathname:A.pathnameBase)}function qd(r,e,A,n=!1){let a;typeof r=="string"?a=pi(r):(a={...r},aA(!a.pathname||!a.pathname.includes("?"),Fu("?","pathname","search",a)),aA(!a.pathname||!a.pathname.includes("#"),Fu("#","pathname","hash",a)),aA(!a.search||!a.search.includes("#"),Fu("#","search","hash",a)));let o=r===""||a.pathname==="",c=o?"/":a.pathname,d;if(c==null)d=A;else{let w=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),w-=1;a.pathname=v.join("/")}d=w>=0?e[w]:"/"}let f=Iv(a,d),m=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&A.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}var on=r=>r.join("/").replace(/\/\/+/g,"/"),Lv=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Hv=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Dv=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Pv(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Hp=["POST","PUT","PATCH","DELETE"];new Set(Hp);var Rv=["GET",...Hp];new Set(Rv);var wi=x.createContext(null);wi.displayName="DataRouter";var Hl=x.createContext(null);Hl.displayName="DataRouterState";x.createContext(!1);var Dp=x.createContext({isTransitioning:!1});Dp.displayName="ViewTransition";var Ov=x.createContext(new Map);Ov.displayName="Fetchers";var Mv=x.createContext(null);Mv.displayName="Await";var Lr=x.createContext(null);Lr.displayName="Navigation";var Sa=x.createContext(null);Sa.displayName="Location";var Hr=x.createContext({outlet:null,matches:[],isDataRoute:!1});Hr.displayName="Route";var Zd=x.createContext(null);Zd.displayName="RouteError";function Kv(r,{relative:e}={}){aA(xi(),"useHref() may be used only in the context of a <Router> component.");let{basename:A,navigator:n}=x.useContext(Lr),{hash:a,pathname:o,search:c}=ka(r,{relative:e}),d=o;return A!=="/"&&(d=o==="/"?A:on([A,o])),n.createHref({pathname:d,search:c,hash:a})}function xi(){return x.useContext(Sa)!=null}function Dr(){return aA(xi(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Sa).location}var Pp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rp(r){x.useContext(Lr).static||x.useLayoutEffect(r)}function ws(){let{isDataRoute:r}=x.useContext(Hr);return r?rB():Gv()}function Gv(){aA(xi(),"useNavigate() may be used only in the context of a <Router> component.");let r=x.useContext(wi),{basename:e,navigator:A}=x.useContext(Lr),{matches:n}=x.useContext(Hr),{pathname:a}=Dr(),o=JSON.stringify(Xd(n)),c=x.useRef(!1);return Rp(()=>{c.current=!0}),x.useCallback((f,m={})=>{if(br(c.current,Pp),!c.current)return;if(typeof f=="number"){A.go(f);return}let g=qd(f,JSON.parse(o),a,m.relative==="path");r==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:on([e,g.pathname])),(m.replace?A.replace:A.push)(g,m.state,m)},[e,A,o,a,r])}x.createContext(null);function $v(){let{matches:r}=x.useContext(Hr),e=r[r.length-1];return e?e.params:{}}function ka(r,{relative:e}={}){let{matches:A}=x.useContext(Hr),{pathname:n}=Dr(),a=JSON.stringify(Xd(A));return x.useMemo(()=>qd(r,JSON.parse(a),n,e==="path"),[r,a,n,e])}function Wv(r,e){return Op(r,e)}function Op(r,e,A,n,a){aA(xi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=x.useContext(Lr),{matches:c}=x.useContext(Hr),d=c[c.length-1],f=d?d.params:{},m=d?d.pathname:"/",g=d?d.pathnameBase:"/",w=d&&d.route;{let k=w&&w.path||"";Mp(m,!w||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=Dr(),y;if(e){let k=typeof e=="string"?pi(e):e;aA(g==="/"||k.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${k.pathname}" was given in the \`location\` prop.`),y=k}else y=v;let C=y.pathname||"/",b=C;if(g!=="/"){let k=g.replace(/^\//,"").split("/");b="/"+C.replace(/^\//,"").split("/").slice(k.length).join("/")}let E=jp(r,{pathname:b});br(w||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),br(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Xv(E&&E.map(k=>Object.assign({},k,{params:Object.assign({},f,k.params),pathname:on([g,o.encodeLocation?o.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?g:on([g,o.encodeLocation?o.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),c,A,n,a);return e&&S?x.createElement(Sa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function Vv(){let r=AB(),e=Pv(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),A=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:o},"ErrorBoundary")," or"," ",x.createElement("code",{style:o},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),A?x.createElement("pre",{style:a},A):null,c)}var zv=x.createElement(Vv,null),Jv=class extends x.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?x.createElement(Hr.Provider,{value:this.props.routeContext},x.createElement(Zd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Yv({routeContext:r,match:e,children:A}){let n=x.useContext(wi);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(Hr.Provider,{value:r},A)}function Xv(r,e=[],A=null,n=null,a=null){if(r==null){if(!A)return null;if(A.errors)r=A.matches;else if(e.length===0&&!A.initialized&&A.matches.length>0)r=A.matches;else return null}let o=r,c=A?.errors;if(c!=null){let m=o.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);aA(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,f=-1;if(A)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:w,errors:v}=A,y=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||y){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((m,g,w)=>{let v,y=!1,C=null,b=null;A&&(v=c&&g.route.id?c[g.route.id]:void 0,C=g.route.errorElement||zv,d&&(f<0&&w===0?(Mp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):f===w&&(y=!0,b=g.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,w+1)),S=()=>{let k;return v?k=C:y?k=b:g.route.Component?k=x.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=m,x.createElement(Yv,{match:g,routeContext:{outlet:m,matches:E,isDataRoute:A!=null},children:k})};return A&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?x.createElement(Jv,{location:A.location,revalidation:A.revalidation,component:C,error:v,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:n}):S()},null)}function ef(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qv(r){let e=x.useContext(wi);return aA(e,ef(r)),e}function Zv(r){let e=x.useContext(Hl);return aA(e,ef(r)),e}function eB(r){let e=x.useContext(Hr);return aA(e,ef(r)),e}function tf(r){let e=eB(r),A=e.matches[e.matches.length-1];return aA(A.route.id,`${r} can only be used on routes that contain a unique "id"`),A.route.id}function tB(){return tf("useRouteId")}function AB(){let r=x.useContext(Zd),e=Zv("useRouteError"),A=tf("useRouteError");return r!==void 0?r:e.errors?.[A]}function rB(){let{router:r}=qv("useNavigate"),e=tf("useNavigate"),A=x.useRef(!1);return Rp(()=>{A.current=!0}),x.useCallback(async(a,o={})=>{br(A.current,Pp),A.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...o}))},[r,e])}var Vm={};function Mp(r,e,A){!e&&!Vm[r]&&(Vm[r]=!0,br(!1,A))}x.memo(nB);function nB({routes:r,future:e,state:A,unstable_onError:n}){return Op(r,void 0,A,n,e)}function Kp({to:r,replace:e,state:A,relative:n}){aA(xi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=x.useContext(Lr);br(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=x.useContext(Hr),{pathname:c}=Dr(),d=ws(),f=qd(r,Xd(o),c,n==="path"),m=JSON.stringify(f);return x.useEffect(()=>{d(JSON.parse(m),{replace:e,state:A,relative:n})},[d,m,n,e,A]),null}function GA(r){aA(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sB({basename:r="/",children:e=null,location:A,navigationType:n="POP",navigator:a,static:o=!1}){aA(!xi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof A=="string"&&(A=pi(A));let{pathname:f="/",search:m="",hash:g="",state:w=null,key:v="default"}=A,y=x.useMemo(()=>{let C=un(f,c);return C==null?null:{location:{pathname:C,search:m,hash:g,state:w,key:v},navigationType:n}},[c,f,m,g,w,v,n]);return br(y!=null,`<Router basename="${c}"> is not able to match the URL "${f}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:x.createElement(Lr.Provider,{value:d},x.createElement(Sa.Provider,{children:e,value:y}))}function iB({children:r,location:e}){return Wv(dd(r),e)}function dd(r,e=[]){let A=[];return x.Children.forEach(r,(n,a)=>{if(!x.isValidElement(n))return;let o=[...e,a];if(n.type===x.Fragment){A.push.apply(A,dd(n.props.children,o));return}aA(n.type===GA,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),aA(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=dd(n.props.children,o)),A.push(c)}),A}var fl="get",hl="application/x-www-form-urlencoded";function Dl(r){return r!=null&&typeof r.tagName=="string"}function aB(r){return Dl(r)&&r.tagName.toLowerCase()==="button"}function oB(r){return Dl(r)&&r.tagName.toLowerCase()==="form"}function lB(r){return Dl(r)&&r.tagName.toLowerCase()==="input"}function cB(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uB(r,e){return r.button===0&&(!e||e==="_self")&&!cB(r)}function fd(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,A)=>{let n=r[A];return e.concat(Array.isArray(n)?n.map(a=>[A,a]):[[A,n]])},[]))}function dB(r,e){let A=fd(r);return e&&e.forEach((n,a)=>{A.has(a)||e.getAll(a).forEach(o=>{A.append(a,o)})}),A}var Lo=null;function fB(){if(Lo===null)try{new FormData(document.createElement("form"),0),Lo=!1}catch{Lo=!0}return Lo}var hB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Su(r){return r!=null&&!hB.has(r)?(br(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hl}"`),null):r}function mB(r,e){let A,n,a,o,c;if(oB(r)){let d=r.getAttribute("action");n=d?un(d,e):null,A=r.getAttribute("method")||fl,a=Su(r.getAttribute("enctype"))||hl,o=new FormData(r)}else if(aB(r)||lB(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=r.getAttribute("formaction")||d.getAttribute("action");if(n=f?un(f,e):null,A=r.getAttribute("formmethod")||d.getAttribute("method")||fl,a=Su(r.getAttribute("formenctype"))||Su(d.getAttribute("enctype"))||hl,o=new FormData(d,r),!fB()){let{name:m,type:g,value:w}=r;if(g==="image"){let v=m?`${m}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else m&&o.append(m,w)}}else{if(Dl(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');A=fl,n=null,a=hl,c=r}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:A.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Af(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function gB(r,e,A){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${A}`:e&&un(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${A}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${A}`,n}async function pB(r,e){if(r.id in e)return e[r.id];try{let A=await import(r.module);return e[r.id]=A,A}catch(A){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(A),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wB(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function xB(r,e,A){let n=await Promise.all(r.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await pB(o,A);return c.links?c.links():[]}return[]}));return bB(n.flat(1).filter(wB).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function zm(r,e,A,n,a,o){let c=(f,m)=>A[m]?f.route.id!==A[m].route.id:!0,d=(f,m)=>A[m].pathname!==f.pathname||A[m].route.path?.endsWith("*")&&A[m].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,m)=>c(f,m)||d(f,m)):o==="data"?e.filter((f,m)=>{let g=n.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:A[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function vB(r,e,{includeHydrateFallback:A}={}){return BB(r.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),A&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function BB(r){return[...new Set(r)]}function yB(r){let e={},A=Object.keys(r).sort();for(let n of A)e[n]=r[n];return e}function bB(r,e){let A=new Set;return new Set(e),r.reduce((n,a)=>{let o=JSON.stringify(yB(a));return A.has(o)||(A.add(o),n.push({key:o,link:a})),n},[])}function Gp(){let r=x.useContext(wi);return Af(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function CB(){let r=x.useContext(Hl);return Af(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var rf=x.createContext(void 0);rf.displayName="FrameworkContext";function $p(){let r=x.useContext(rf);return Af(r,"You must render this element inside a <HydratedRouter> element"),r}function EB(r,e){let A=x.useContext(rf),[n,a]=x.useState(!1),[o,c]=x.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:g,onTouchStart:w}=e,v=x.useRef(null);x.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let b=S=>{S.forEach(k=>{c(k.isIntersecting)})},E=new IntersectionObserver(b,{threshold:.5});return v.current&&E.observe(v.current),()=>{E.disconnect()}}},[r]),x.useEffect(()=>{if(n){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[n]);let y=()=>{a(!0)},C=()=>{a(!1),c(!1)};return A?r!=="intent"?[o,v,{}]:[o,v,{onFocus:Aa(d,y),onBlur:Aa(f,C),onMouseEnter:Aa(m,y),onMouseLeave:Aa(g,C),onTouchStart:Aa(w,y)}]:[!1,v,{}]}function Aa(r,e){return A=>{r&&r(A),A.defaultPrevented||e(A)}}function _B({page:r,...e}){let{router:A}=Gp(),n=x.useMemo(()=>jp(A.routes,r,A.basename),[A.routes,r,A.basename]);return n?x.createElement(UB,{page:r,matches:n,...e}):null}function QB(r){let{manifest:e,routeModules:A}=$p(),[n,a]=x.useState([]);return x.useEffect(()=>{let o=!1;return xB(r,e,A).then(c=>{o||a(c)}),()=>{o=!0}},[r,e,A]),n}function UB({page:r,matches:e,...A}){let n=Dr(),{manifest:a,routeModules:o}=$p(),{basename:c}=Gp(),{loaderData:d,matches:f}=CB(),m=x.useMemo(()=>zm(r,e,f,a,n,"data"),[r,e,f,a,n]),g=x.useMemo(()=>zm(r,e,f,a,n,"assets"),[r,e,f,a,n]),w=x.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let C=new Set,b=!1;if(e.forEach(S=>{let k=a.routes[S.route.id];!k||!k.hasLoader||(!m.some(N=>N.route.id===S.route.id)&&S.route.id in d&&o[S.route.id]?.shouldRevalidate||k.hasClientLoader?b=!0:C.add(S.route.id))}),C.size===0)return[];let E=gB(r,c,"data");return b&&C.size>0&&E.searchParams.set("_routes",e.filter(S=>C.has(S.route.id)).map(S=>S.route.id).join(",")),[E.pathname+E.search]},[c,d,n,a,m,e,r,o]),v=x.useMemo(()=>vB(g,a),[g,a]),y=QB(g);return x.createElement(x.Fragment,null,w.map(C=>x.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...A})),v.map(C=>x.createElement("link",{key:C,rel:"modulepreload",href:C,...A})),y.map(({key:C,link:b})=>x.createElement("link",{key:C,nonce:A.nonce,...b})))}function FB(...r){return e=>{r.forEach(A=>{typeof A=="function"?A(e):A!=null&&(A.current=e)})}}var Wp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wp&&(window.__reactRouterVersion="7.9.4")}catch{}function SB({basename:r,children:e,window:A}){let n=x.useRef();n.current==null&&(n.current=gv({window:A,v5Compat:!0}));let a=n.current,[o,c]=x.useState({action:a.action,location:a.location}),d=x.useCallback(f=>{x.startTransition(()=>c(f))},[c]);return x.useLayoutEffect(()=>a.listen(d),[a,d]),x.createElement(sB,{basename:r,children:e,location:o.location,navigationType:o.action,navigator:a})}var Vp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IA=x.forwardRef(function({onClick:e,discover:A="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:d,target:f,to:m,preventScrollReset:g,viewTransition:w,...v},y){let{basename:C}=x.useContext(Lr),b=typeof m=="string"&&Vp.test(m),E,S=!1;if(typeof m=="string"&&b&&(E=m,Wp))try{let H=new URL(window.location.href),ve=m.startsWith("//")?new URL(H.protocol+m):new URL(m),W=un(ve.pathname,C);ve.origin===H.origin&&W!=null?m=W+ve.search+ve.hash:S=!0}catch{br(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=Kv(m,{relative:a}),[N,O,j]=EB(n,v),L=jB(m,{replace:c,state:d,target:f,preventScrollReset:g,relative:a,viewTransition:w});function R(H){e&&e(H),H.defaultPrevented||L(H)}let G=x.createElement("a",{...v,...j,href:E||k,onClick:S||o?e:R,ref:FB(y,O),target:f,"data-discover":!b&&A==="render"?"true":void 0});return N&&!b?x.createElement(x.Fragment,null,G,x.createElement(_B,{page:k})):G});IA.displayName="Link";var kB=x.forwardRef(function({"aria-current":e="page",caseSensitive:A=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:d,children:f,...m},g){let w=ka(c,{relative:m.relative}),v=Dr(),y=x.useContext(Hl),{navigator:C,basename:b}=x.useContext(Lr),E=y!=null&&RB(w)&&d===!0,S=C.encodeLocation?C.encodeLocation(w).pathname:w.pathname,k=v.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;A||(k=k.toLowerCase(),N=N?N.toLowerCase():null,S=S.toLowerCase()),N&&b&&(N=un(N,b)||N);const O=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let j=k===S||!a&&k.startsWith(S)&&k.charAt(O)==="/",L=N!=null&&(N===S||!a&&N.startsWith(S)&&N.charAt(S.length)==="/"),R={isActive:j,isPending:L,isTransitioning:E},G=j?e:void 0,H;typeof n=="function"?H=n(R):H=[n,j?"active":null,L?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ve=typeof o=="function"?o(R):o;return x.createElement(IA,{...m,"aria-current":G,className:H,ref:g,style:ve,to:c,viewTransition:d},typeof f=="function"?f(R):f)});kB.displayName="NavLink";var NB=x.forwardRef(({discover:r="render",fetcherKey:e,navigate:A,reloadDocument:n,replace:a,state:o,method:c=fl,action:d,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:w,...v},y)=>{let C=DB(),b=PB(d,{relative:m}),E=c.toLowerCase()==="get"?"get":"post",S=typeof d=="string"&&Vp.test(d),k=N=>{if(f&&f(N),N.defaultPrevented)return;N.preventDefault();let O=N.nativeEvent.submitter,j=O?.getAttribute("formmethod")||c;C(O||N.currentTarget,{fetcherKey:e,method:j,navigate:A,replace:a,state:o,relative:m,preventScrollReset:g,viewTransition:w})};return x.createElement("form",{ref:y,method:E,action:b,onSubmit:n?f:k,...v,"data-discover":!S&&r==="render"?"true":void 0})});NB.displayName="Form";function IB(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zp(r){let e=x.useContext(wi);return aA(e,IB(r)),e}function jB(r,{target:e,replace:A,state:n,preventScrollReset:a,relative:o,viewTransition:c}={}){let d=ws(),f=Dr(),m=ka(r,{relative:o});return x.useCallback(g=>{if(uB(g,e)){g.preventDefault();let w=A!==void 0?A:ba(f)===ba(m);d(r,{replace:w,state:n,preventScrollReset:a,relative:o,viewTransition:c})}},[f,d,m,A,n,e,r,a,o,c])}function TB(r){br(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=x.useRef(fd(r)),A=x.useRef(!1),n=Dr(),a=x.useMemo(()=>dB(n.search,A.current?null:e.current),[n.search]),o=ws(),c=x.useCallback((d,f)=>{const m=fd(typeof d=="function"?d(new URLSearchParams(a)):d);A.current=!0,o("?"+m,f)},[o,a]);return[a,c]}var LB=0,HB=()=>`__${String(++LB)}__`;function DB(){let{router:r}=zp("useSubmit"),{basename:e}=x.useContext(Lr),A=tB();return x.useCallback(async(n,a={})=>{let{action:o,method:c,encType:d,formData:f,body:m}=mB(n,e);if(a.navigate===!1){let g=a.fetcherKey||HB();await r.fetch(g,A,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await r.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:A,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,A])}function PB(r,{relative:e}={}){let{basename:A}=x.useContext(Lr),n=x.useContext(Hr);aA(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...ka(r||".",{relative:e})},c=Dr();if(r==null){o.search=c.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let g=d.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),A!=="/"&&(o.pathname=o.pathname==="/"?A:on([A,o.pathname])),ba(o)}function RB(r,{relative:e}={}){let A=x.useContext(Dp);aA(A!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=zp("useViewTransitionState"),a=ka(r,{relative:e});if(!A.isTransitioning)return!1;let o=un(A.currentLocation.pathname,n)||A.currentLocation.pathname,c=un(A.nextLocation.pathname,n)||A.nextLocation.pathname;return Bl(a.pathname,c)!=null||Bl(a.pathname,o)!=null}var OB=Ip();const Jm=["soccer-ball-motion.jpg","trophy.jpg","embrace.jpg","baseball-throw.jpg","smiling-faces.jpg","infinity.jpg","abstract-leaf.jpg","soccer-ball.jpg"];function nf(r){let e=0;for(let A=0;A<r.length;A++){const n=r.charCodeAt(A);e=(e<<5)-e+n,e=e&e}return Math.abs(e)}function ml(r){const A=nf(r)%Jm.length;return Jm[A]}function Jp(r,e=128){const A=nf(r),n=["9046579","9046578","9046577","9046576"];return`https://source.unsplash.com/collection/${n[A%n.length]}/${e}x${e}/?sig=${A}`}function Yp(r,e=128){return`https://picsum.photos/seed/${nf(r)}/${e}/${e}`}const MB="modulepreload",KB=function(r){return"/"+r},Ym={},ln=function(e,A,n){let a=Promise.resolve();if(A&&A.length>0){let m=function(g){return Promise.all(g.map(w=>Promise.resolve(w).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");a=m(A.map(g=>{if(g=KB(g),g in Ym)return;Ym[g]=!0;const w=g.endsWith(".css"),v=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const y=document.createElement("link");if(y.rel=w?"stylesheet":MB,w||(y.as="script"),y.crossOrigin="",y.href=g,f&&y.setAttribute("nonce",f),document.head.appendChild(y),w)return new Promise((C,b)=>{y.addEventListener("load",C),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return a.then(d=>{for(const f of d||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})},GB=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...A)=>ln(async()=>{const{default:n}=await Promise.resolve().then(()=>vi);return{default:n}},[]).then(({default:n})=>n(...A)):e=fetch,(...A)=>e(...A)};class sf extends Error{constructor(e,A="FunctionsError",n){super(e),this.name=A,this.context=n}}class Xm extends sf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qm extends sf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zm extends sf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(hd||(hd={}));var $B=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};class WB{constructor(e,{headers:A={},customFetch:n,region:a=hd.Any}={}){this.url=e,this.headers=A,this.region=a,this.fetch=GB(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $B(this,arguments,void 0,function*(A,n={}){var a;try{const{headers:o,method:c,body:d,signal:f}=n;let m={},{region:g}=n;g||(g=this.region);const w=new URL(`${this.url}/${A}`);g&&g!=="any"&&(m["x-region"]=g,w.searchParams.set("forceFunctionRegion",g));let v;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(m["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(m["Content-Type"]="application/json",v=JSON.stringify(d)));const y=yield this.fetch(w.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:v,signal:f}).catch(S=>{throw S.name==="AbortError"?S:new Xm(S)}),C=y.headers.get("x-relay-error");if(C&&C==="true")throw new qm(y);if(!y.ok)throw new Zm(y);let b=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),E;return b==="application/json"?E=yield y.json():b==="application/octet-stream"?E=yield y.blob():b==="text/event-stream"?E=y:b==="multipart/form-data"?E=yield y.formData():E=yield y.text(),{data:E,error:null,response:y}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Xm(o)}:{data:null,error:o,response:o instanceof Zm||o instanceof qm?o.context:void 0}}})}}var UA={},Gs={},$s={},Ws={},Vs={},zs={},VB=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mi=VB();const zB=mi.fetch,Xp=mi.fetch.bind(mi),qp=mi.Headers,JB=mi.Request,YB=mi.Response,vi=Object.freeze(Object.defineProperty({__proto__:null,Headers:qp,Request:JB,Response:YB,default:Xp,fetch:zB},Symbol.toStringTag,{value:"Module"})),XB=iv(vi);var Ho={},eg;function Zp(){if(eg)return Ho;eg=1,Object.defineProperty(Ho,"__esModule",{value:!0});class r extends Error{constructor(A){super(A.message),this.name="PostgrestError",this.details=A.details,this.hint=A.hint,this.code=A.code}}return Ho.default=r,Ho}var tg;function e0(){if(tg)return zs;tg=1;var r=zs&&zs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(zs,"__esModule",{value:!0});const e=r(XB),A=r(Zp());class n{constructor(o){var c,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(c=o.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,c){return this.headers=new Headers(this.headers),this.headers.set(o,c),this}then(o,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let f=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var g,w,v,y;let C=null,b=null,E=null,S=m.status,k=m.statusText;if(m.ok){if(this.method!=="HEAD"){const L=await m.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?b=L:b=JSON.parse(L))}const O=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),j=(v=m.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");O&&j&&j.length>1&&(E=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(C={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,E=null,S=406,k="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const O=await m.text();try{C=JSON.parse(O),Array.isArray(C)&&m.status===404&&(b=[],C=null,S=200,k="OK")}catch{m.status===404&&O===""?(S=204,k="No Content"):C={message:O}}if(C&&this.isMaybeSingle&&(!((y=C?.details)===null||y===void 0)&&y.includes("0 rows"))&&(C=null,S=200,k="OK"),C&&this.shouldThrowOnError)throw new A.default(C)}return{error:C,data:b,count:E,status:S,statusText:k}});return this.shouldThrowOnError||(f=f.catch(m=>{var g,w,v;return{error:{message:`${(g=m?.name)!==null&&g!==void 0?g:"FetchError"}: ${m?.message}`,details:`${(w=m?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(v=m?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,c)}returns(){return this}overrideTypes(){return this}}return zs.default=n,zs}var Ag;function t0(){if(Ag)return Vs;Ag=1;var r=Vs&&Vs.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vs,"__esModule",{value:!0});const e=r(e0());class A extends e.default{select(a){let o=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:c,foreignTable:d,referencedTable:f=d}={}){const m=f?`${f}.order`:"order",g=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:c=!1,buffers:d=!1,wal:f=!1,format:m="text"}={}){var g;const w=[a?"analyze":null,o?"verbose":null,c?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${w};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Vs.default=A,Vs}var rg;function af(){if(rg)return Ws;rg=1;var r=Ws&&Ws.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ws,"__esModule",{value:!0});const e=r(t0());class A extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const c=Array.from(new Set(o)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:c,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const m=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${f}fts${m}.${o}`),this}match(a){return Object.entries(a).forEach(([o,c])=>{this.url.searchParams.append(o,`eq.${c}`)}),this}not(a,o,c){return this.url.searchParams.append(a,`not.${o}.${c}`),this}or(a,{foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,o,c){return this.url.searchParams.append(a,`${o}.${c}`),this}}return Ws.default=A,Ws}var ng;function A0(){if(ng)return $s;ng=1;var r=$s&&$s.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($s,"__esModule",{value:!0});const e=r(af());class A{constructor(a,{headers:o={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=c,this.fetch=d}select(a,o){const{head:c=!1,count:d}=o??{},f=c?"HEAD":"GET";let m=!1;const g=(a??"*").split("").map(w=>/\s/.test(w)&&!m?"":(w==='"'&&(m=!m),w)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:c=!0}={}){var d;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((g,w)=>g.concat(Object.keys(w)),[]);if(m.length>0){const g=[...new Set(m)].map(w=>`"${w}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){var m;const g="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(w.length>0){const v=[...new Set(w)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:o}={}){var c;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var o;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return $s.default=A,$s}var sg;function qB(){if(sg)return Gs;sg=1;var r=Gs&&Gs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Gs,"__esModule",{value:!0});const e=r(A0()),A=r(af());class n{constructor(o,{headers:c={},schema:d,fetch:f}={}){this.url=o,this.headers=new Headers(c),this.schemaName=d,this.fetch=f}from(o){const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:d=!1,get:f=!1,count:m}={}){var g;let w;const v=new URL(`${this.url}/rpc/${o}`);let y;d||f?(w=d?"HEAD":"GET",Object.entries(c).filter(([b,E])=>E!==void 0).map(([b,E])=>[b,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([b,E])=>{v.searchParams.append(b,E)})):(w="POST",y=c);const C=new Headers(this.headers);return m&&C.set("Prefer",`count=${m}`),new A.default({method:w,url:v,headers:C,schema:this.schemaName,body:y,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Gs.default=n,Gs}var ig;function ZB(){if(ig)return UA;ig=1;var r=UA&&UA.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(UA,"__esModule",{value:!0}),UA.PostgrestError=UA.PostgrestBuilder=UA.PostgrestTransformBuilder=UA.PostgrestFilterBuilder=UA.PostgrestQueryBuilder=UA.PostgrestClient=void 0;const e=r(qB());UA.PostgrestClient=e.default;const A=r(A0());UA.PostgrestQueryBuilder=A.default;const n=r(af());UA.PostgrestFilterBuilder=n.default;const a=r(t0());UA.PostgrestTransformBuilder=a.default;const o=r(e0());UA.PostgrestBuilder=o.default;const c=r(Zp());return UA.PostgrestError=c.default,UA.default={PostgrestClient:e.default,PostgrestQueryBuilder:A.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:c.default},UA}var ey=ZB();const ty=Ll(ey),{PostgrestClient:Ay,PostgrestQueryBuilder:kF,PostgrestFilterBuilder:NF,PostgrestTransformBuilder:IF,PostgrestBuilder:jF,PostgrestError:TF}=ty;class ry{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const A=process.versions;if(A&&A.node){const n=A.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let A=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(A+=`

Suggested solution: ${e.workaround}`),new Error(A)}static createWebSocket(e,A){const n=this.getWebSocketConstructor();return new n(e,A)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ny="2.75.0",sy=`realtime-js/${ny}`,iy="1.0.0",md=1e4,ay=1e3,oy=100;var ma;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ma||(ma={}));var bA;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(bA||(bA={}));var Tr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Tr||(Tr={}));var gd;(function(r){r.websocket="websocket"})(gd||(gd={}));var us;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(us||(us={}));class ly{constructor(){this.HEADER_LENGTH=1}decode(e,A){return e.constructor===ArrayBuffer?A(this._binaryDecode(e)):A(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const A=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,A,n)}_decodeBroadcast(e,A,n){const a=A.getUint8(1),o=A.getUint8(2);let c=this.HEADER_LENGTH+2;const d=n.decode(e.slice(c,c+a));c=c+a;const f=n.decode(e.slice(c,c+o));c=c+o;const m=JSON.parse(n.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:f,payload:m}}}class r0{constructor(e,A){this.callback=e,this.timerCalc=A,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=A}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Zt||(Zt={}));const ag=(r,e,A={})=>{var n;const a=(n=A.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=cy(c,r,e,a),o),{}):{}},cy=(r,e,A,n)=>{const a=e.find(d=>d.name===r),o=a?.type,c=A[r];return o&&!n.includes(o)?n0(o,c):pd(c)},n0=(r,e)=>{if(r.charAt(0)==="_"){const A=r.slice(1,r.length);return hy(e,A)}switch(r){case Zt.bool:return uy(e);case Zt.float4:case Zt.float8:case Zt.int2:case Zt.int4:case Zt.int8:case Zt.numeric:case Zt.oid:return dy(e);case Zt.json:case Zt.jsonb:return fy(e);case Zt.timestamp:return my(e);case Zt.abstime:case Zt.date:case Zt.daterange:case Zt.int4range:case Zt.int8range:case Zt.money:case Zt.reltime:case Zt.text:case Zt.time:case Zt.timestamptz:case Zt.timetz:case Zt.tsrange:case Zt.tstzrange:return pd(e);default:return pd(e)}},pd=r=>r,uy=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},dy=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},fy=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},hy=(r,e)=>{if(typeof r!="string")return r;const A=r.length-1,n=r[A];if(r[0]==="{"&&n==="}"){let o;const c=r.slice(1,A);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(d=>n0(e,d))}return r},my=r=>typeof r=="string"?r.replace(" ","T"):r,s0=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ku{constructor(e,A,n={},a=md){this.channel=e,this.event=A,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,A){var n;return this._hasReceived(e)&&A((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:A}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=A=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=A,this._matchReceive(A)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,A){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:A})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:A}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(A))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var og;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(og||(og={}));class ga{constructor(e,A){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=A?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ga.syncState(this.state,a,o,c),this.pendingDiffs.forEach(f=>{this.state=ga.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ga.syncDiff(this.state,a,o,c),d())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,A,n,a){const o=this.cloneDeep(e),c=this.transformState(A),d={},f={};return this.map(o,(m,g)=>{c[m]||(f[m]=g)}),this.map(c,(m,g)=>{const w=o[m];if(w){const v=g.map(E=>E.presence_ref),y=w.map(E=>E.presence_ref),C=g.filter(E=>y.indexOf(E.presence_ref)<0),b=w.filter(E=>v.indexOf(E.presence_ref)<0);C.length>0&&(d[m]=C),b.length>0&&(f[m]=b)}else d[m]=g}),this.syncDiff(o,{joins:d,leaves:f},n,a)}static syncDiff(e,A,n,a){const{joins:o,leaves:c}={joins:this.transformState(A.joins),leaves:this.transformState(A.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(o,(d,f)=>{var m;const g=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(f),g.length>0){const w=e[d].map(y=>y.presence_ref),v=g.filter(y=>w.indexOf(y.presence_ref)<0);e[d].unshift(...v)}n(d,g,f)}),this.map(c,(d,f)=>{let m=e[d];if(!m)return;const g=f.map(w=>w.presence_ref);m=m.filter(w=>g.indexOf(w.presence_ref)<0),e[d]=m,a(d,m,f),m.length===0&&delete e[d]}),e}static map(e,A){return Object.getOwnPropertyNames(e).map(n=>A(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((A,n)=>{const a=e[n];return"metas"in a?A[n]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):A[n]=a,A},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lg;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(lg||(lg={}));var pa;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(pa||(pa={}));var an;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(an||(an={}));class of{constructor(e,A={config:{}},n){var a,o;if(this.topic=e,this.params=A,this.socket=n,this.bindings={},this.state=bA.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},A.config),this.timeout=this.socket.timeout,this.joinPush=new ku(this,Tr.join,this.params,this.timeout),this.rejoinTimer=new r0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bA.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bA.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=bA.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bA.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=bA.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tr.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new ga(this),this.broadcastEndpointURL=s0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,A=this.timeout){var n,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==bA.closed){const{config:{broadcast:c,presence:d,private:f}}=this.params,m=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[pa.PRESENCE]&&this.bindings[pa.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(an.CHANNEL_ERROR,y)),this._onClose(()=>e?.(an.CLOSED)),this.updateJoinPayload(Object.assign({config:v},w)),this.joinedOnce=!0,this._rejoin(A),this.joinPush.receive("ok",async({postgres_changes:y})=>{var C;if(this.socket.setAuth(),y===void 0){e?.(an.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,E=(C=b?.length)!==null&&C!==void 0?C:0,S=[];for(let k=0;k<E;k++){const N=b[k],{filter:{event:O,schema:j,table:L,filter:R}}=N,G=y&&y[k];if(G&&G.event===O&&G.schema===j&&G.table===L&&G.filter===R)S.push(Object.assign(Object.assign({},N),{id:G.id}));else{this.unsubscribe(),this.state=bA.errored,e?.(an.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(an.SUBSCRIBED);return}}).receive("error",y=>{this.state=bA.errored,e?.(an.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(an.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,A={}){return await this.send({type:"presence",event:"track",payload:e},A.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,A,n){return this.state===bA.joined&&e===pa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,A,n)}async send(e,A={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(n=A.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,d,f;const m=this._push(e.type,e,A.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bA.leaving;const A=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new ku(this,Tr.leave,{},e),n.receive("ok",()=>{A(),a("ok")}).receive("timeout",()=>{A(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bA.closed,this.bindings={}}async _fetchWithTimeout(e,A,n){const a=new AbortController,o=setTimeout(()=>a.abort(),n),c=await this.socket.fetch(e,Object.assign(Object.assign({},A),{signal:a.signal}));return clearTimeout(o),c}_push(e,A,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ku(this,e,A,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>oy){const A=this.pushBuffer.shift();A&&(A.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${A.event}`,A.payload))}}_onMessage(e,A,n){return A}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,A,n){var a,o;const c=e.toLocaleLowerCase(),{close:d,error:f,leave:m,join:g}=Tr;if(n&&[d,f,m,g].indexOf(c)>=0&&n!==this._joinRef())return;let v=this._onMessage(c,A,n);if(A&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var C,b,E;return((C=y.filter)===null||C===void 0?void 0:C.event)==="*"||((E=(b=y.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===c}).map(y=>y.callback(v,n)):(o=this.bindings[c])===null||o===void 0||o.filter(y=>{var C,b,E,S,k,N;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in y){const O=y.id,j=(C=y.filter)===null||C===void 0?void 0:C.event;return O&&((b=A.ids)===null||b===void 0?void 0:b.includes(O))&&(j==="*"||j?.toLocaleLowerCase()===((E=A.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const O=(k=(S=y?.filter)===null||S===void 0?void 0:S.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return O==="*"||O===((N=A?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===c}).map(y=>{if(typeof v=="object"&&"ids"in v){const C=v.data,{schema:b,table:E,commit_timestamp:S,type:k,errors:N}=C;v=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:S,eventType:k,new:{},old:{},errors:N}),this._getPayloadRecords(C))}y.callback(v,n)})}_isClosed(){return this.state===bA.closed}_isJoined(){return this.state===bA.joined}_isJoining(){return this.state===bA.joining}_isLeaving(){return this.state===bA.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,A,n){const a=e.toLocaleLowerCase(),o={type:a,filter:A,callback:n};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,A){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&of.isEqual(a.filter,A))})),this}static isEqual(e,A){if(Object.keys(e).length!==Object.keys(A).length)return!1;for(const n in e)if(e[n]!==A[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tr.close,{},e)}_onError(e){this._on(Tr.error,{},A=>e(A))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bA.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const A={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(A.new=ag(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(A.old=ag(e.columns,e.old_record)),A}}const Nu=()=>{},Do={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gy=[1e3,2e3,5e3,1e4],py=1e4,wy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xy{constructor(e,A){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=md,this.transport=null,this.heartbeatIntervalMs=Do.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nu,this.ref=0,this.reconnectTimer=null,this.logger=Nu,this.conn=null,this.sendBuffer=[],this.serializer=new ly,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...c)=>ln(async()=>{const{default:d}=await Promise.resolve().then(()=>vi);return{default:d}},void 0).then(({default:d})=>d(...c)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...c)=>o(...c)},!(!((n=A?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=A.params.apikey,this.endPoint=`${e}/${gd.websocket}`,this.httpEndpoint=s0(e),this._initializeOptions(A),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(A?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ry.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const A=e.message;throw A.includes("Node.js")?new Error(`${A}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${A}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iy}))}disconnect(e,A){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,A??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const A=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),A}async removeAllChannels(){const e=await Promise.all(this.channels.map(A=>A.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,A,n){this.logger(e,A,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ma.connecting:return us.Connecting;case ma.open:return us.Open;case ma.closing:return us.Closing;default:return us.Closed}}isConnected(){return this.connectionState()===us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,A={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===n);if(a)return a;{const o=new of(`realtime:${e}`,A,this);return this.channels.push(o),o}}push(e){const{topic:A,event:n,payload:a,ref:o}=e,c=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${A} ${n} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(A){this.log("error","error in heartbeat callback",A)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(A){this.log("error","error in heartbeat callback",A)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ay,"heartbeat timeout"),setTimeout(()=>{var A;this.isConnected()||(A=this.reconnectTimer)===null||A===void 0||A.scheduleTimeout()},Do.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(A){this.log("error","error in heartbeat callback",A)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let A=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));A&&(this.log("transport",`leaving duplicate topic "${e}"`),A.unsubscribe())}_remove(e){this.channels=this.channels.filter(A=>A.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,A=>{if(A.topic==="phoenix"&&A.event==="phx_reply")try{this.heartbeatCallback(A.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}A.ref&&A.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:o,ref:c}=A,d=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${n} ${a} ${d}`.trim(),o),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(a,o,c)),this._triggerStateCallbacks("message",A)})}_clearTimer(e){var A;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((A=this.reconnectTimer)===null||A===void 0||A.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=A=>{this.log("worker","worker error",A.message),this.workerRef.terminate()},this.workerRef.onmessage=A=>{A.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var A;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(A=this.reconnectTimer)===null||A===void 0||A.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tr.error))}_appendParams(e,A){if(Object.keys(A).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(A);return`${e}${n}${a}`}_workerObjectUrl(e){let A;if(e)A=e;else{const n=new Blob([wy],{type:"application/javascript"});A=URL.createObjectURL(n)}return A}_setConnectionState(e,A=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=A)}async _performAuth(e=null){let A;e?A=e:this.accessToken?A=await this.accessToken():A=this.accessTokenValue,this.accessTokenValue!=A&&(this.accessTokenValue=A,this.channels.forEach(n=>{const a={access_token:A,version:sy};A&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Tr.access_token,{access_token:A})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(A=>{this.log("error",`error setting auth in ${e}`,A)})}_triggerStateCallbacks(e,A){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(A)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new r0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Do.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var A,n,a,o,c,d,f,m,g;if(this.transport=(A=e?.transport)!==null&&A!==void 0?A:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:md,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Do.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Nu,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(w=>gy[w-1]||py),this.encode=(m=e?.encode)!==null&&m!==void 0?m:((w,v)=>v(JSON.stringify(w))),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class lf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function wA(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class vy extends lf{constructor(e,A,n){super(e),this.name="StorageApiError",this.status=A,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wd extends lf{constructor(e,A){super(e),this.name="StorageUnknownError",this.originalError=A}}var By=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};const i0=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...A)=>ln(async()=>{const{default:n}=await Promise.resolve().then(()=>vi);return{default:n}},void 0).then(({default:n})=>n(...A)):e=fetch,(...A)=>e(...A)},yy=()=>By(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ln(()=>Promise.resolve().then(()=>vi),void 0)).Response:Response}),xd=r=>{if(Array.isArray(r))return r.map(A=>xd(A));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([A,n])=>{const a=A.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=xd(n)}),e},by=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var xs=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};const Iu=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Cy=(r,e,A)=>xs(void 0,void 0,void 0,function*(){const n=yield yy();r instanceof n&&!A?.noResolveJson?r.json().then(a=>{const o=r.status||500,c=a?.statusCode||o+"";e(new vy(Iu(a),o,c))}).catch(a=>{e(new wd(Iu(a),a))}):e(new wd(Iu(r),r))}),Ey=(r,e,A,n)=>{const a={method:r,headers:e?.headers||{}};return r==="GET"||!n?a:(by(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(n)):a.body=n,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),A))};function Na(r,e,A,n,a,o){return xs(this,void 0,void 0,function*(){return new Promise((c,d)=>{r(A,Ey(e,n,a,o)).then(f=>{if(!f.ok)throw f;return n?.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>Cy(f,d,n))})})}function yl(r,e,A,n){return xs(this,void 0,void 0,function*(){return Na(r,"GET",e,A,n)})}function Wr(r,e,A,n,a){return xs(this,void 0,void 0,function*(){return Na(r,"POST",e,n,a,A)})}function vd(r,e,A,n,a){return xs(this,void 0,void 0,function*(){return Na(r,"PUT",e,n,a,A)})}function _y(r,e,A,n){return xs(this,void 0,void 0,function*(){return Na(r,"HEAD",e,Object.assign(Object.assign({},A),{noResolveJson:!0}),n)})}function a0(r,e,A,n,a){return xs(this,void 0,void 0,function*(){return Na(r,"DELETE",e,n,a,A)})}var Qy=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};class Uy{constructor(e,A){this.downloadFn=e,this.shouldThrowOnError=A}then(e,A){return this.execute().then(e,A)}execute(){return Qy(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wA(e))return{data:null,error:e};throw e}})}}var Fy=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};class Sy{constructor(e,A){this.downloadFn=e,this.shouldThrowOnError=A}asStream(){return new Uy(this.downloadFn,this.shouldThrowOnError)}then(e,A){return this.execute().then(e,A)}execute(){return Fy(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wA(e))return{data:null,error:e};throw e}})}}var ZA=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};const ky={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ny{constructor(e,A={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=A,this.bucketId=n,this.fetch=i0(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,A,n,a){return ZA(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},cg),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f))):(o=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const m=this._removeEmptyFolders(A),g=this._getFinalPath(m),w=yield(e=="PUT"?vd:Wr)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(wA(o))return{data:null,error:o};throw o}})}upload(e,A,n){return ZA(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,A,n)})}uploadToSignedUrl(e,A,n,a){return ZA(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",A);try{let f;const m=Object.assign({upsert:cg.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",m.cacheControl)):(f=n,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const w=yield vd(this.fetch,d.toString(),f,{headers:g});return{data:{path:o,fullPath:w.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(wA(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,A){return ZA(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);A?.upsert&&(a["x-upsert"]="true");const o=yield Wr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),c=new URL(this.url+o.url),d=c.searchParams.get("token");if(!d)throw new lf("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wA(n))return{data:null,error:n};throw n}})}update(e,A,n){return ZA(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,A,n)})}move(e,A,n){return ZA(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:A,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wA(a))return{data:null,error:a};throw a}})}copy(e,A,n){return ZA(this,void 0,void 0,function*(){try{return{data:{path:(yield Wr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:A,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wA(a))return{data:null,error:a};throw a}})}createSignedUrl(e,A,n){return ZA(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Wr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:A},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const c=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wA(a))return{data:null,error:a};throw a}})}createSignedUrls(e,A,n){return ZA(this,void 0,void 0,function*(){try{const a=yield Wr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:A,paths:e},{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wA(a))return{data:null,error:a};throw a}})}download(e,A){const a=typeof A?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(A?.transform||{}),c=o?`?${o}`:"",d=this._getFinalPath(e),f=()=>yl(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new Sy(f,this.shouldThrowOnError)}info(e){return ZA(this,void 0,void 0,function*(){const A=this._getFinalPath(e);try{const n=yield yl(this.fetch,`${this.url}/object/info/${A}`,{headers:this.headers});return{data:xd(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wA(n))return{data:null,error:n};throw n}})}exists(e){return ZA(this,void 0,void 0,function*(){const A=this._getFinalPath(e);try{return yield _y(this.fetch,`${this.url}/object/${A}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wA(n)&&n instanceof wd){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,A){const n=this._getFinalPath(e),a=[],o=A?.download?`download=${A.download===!0?"":A.download}`:"";o!==""&&a.push(o);const d=typeof A?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(A?.transform||{});f!==""&&a.push(f);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${m}`)}}}remove(e){return ZA(this,void 0,void 0,function*(){try{return{data:yield a0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(wA(A))return{data:null,error:A};throw A}})}list(e,A,n){return ZA(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},ky),A),{prefix:e||""});return{data:yield Wr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wA(a))return{data:null,error:a};throw a}})}listV2(e,A){return ZA(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Wr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},A),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wA(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const A=[];return e.width&&A.push(`width=${e.width}`),e.height&&A.push(`height=${e.height}`),e.resize&&A.push(`resize=${e.resize}`),e.format&&A.push(`format=${e.format}`),e.quality&&A.push(`quality=${e.quality}`),A.join("&")}}const Iy="2.75.0",jy={"X-Client-Info":`storage-js/${Iy}`};var Js=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};class Ty{constructor(e,A={},n,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jy),A),this.fetch=i0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Js(this,void 0,void 0,function*(){try{return{data:yield yl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wA(e))return{data:null,error:e};throw e}})}getBucket(e){return Js(this,void 0,void 0,function*(){try{return{data:yield yl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(wA(A))return{data:null,error:A};throw A}})}createBucket(e){return Js(this,arguments,void 0,function*(A,n={public:!1}){try{return{data:yield Wr(this.fetch,`${this.url}/bucket`,{id:A,name:A,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wA(a))return{data:null,error:a};throw a}})}updateBucket(e,A){return Js(this,void 0,void 0,function*(){try{return{data:yield vd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:A.public,file_size_limit:A.fileSizeLimit,allowed_mime_types:A.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wA(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Js(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(wA(A))return{data:null,error:A};throw A}})}deleteBucket(e){return Js(this,void 0,void 0,function*(){try{return{data:yield a0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(wA(A))return{data:null,error:A};throw A}})}}class Ly extends Ty{constructor(e,A={},n,a){super(e,A,n,a)}from(e){return new Ny(this.url,this.headers,e,this.fetch)}}const Hy="2.75.0";let aa="";typeof Deno<"u"?aa="deno":typeof document<"u"?aa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?aa="react-native":aa="node";const Dy={"X-Client-Info":`supabase-js-${aa}/${Hy}`},Py={headers:Dy},Ry={schema:"public"},Oy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},My={};var Ky=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};const Gy=r=>{let e;return r?e=r:typeof fetch>"u"?e=Xp:e=fetch,(...A)=>e(...A)},$y=()=>typeof Headers>"u"?qp:Headers,Wy=(r,e,A)=>{const n=Gy(A),a=$y();return(o,c)=>Ky(void 0,void 0,void 0,function*(){var d;const f=(d=yield e())!==null&&d!==void 0?d:r;let m=new a(c?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),n(o,Object.assign(Object.assign({},c),{headers:m}))})};var Vy=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};function zy(r){return r.endsWith("/")?r:r+"/"}function Jy(r,e){var A,n;const{db:a,auth:o,realtime:c,global:d}=r,{db:f,auth:m,realtime:g,global:w}=e,v={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},g),c),storage:{},global:Object.assign(Object.assign(Object.assign({},w),d),{headers:Object.assign(Object.assign({},(A=w?.headers)!==null&&A!==void 0?A:{}),(n=d?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Vy(this,void 0,void 0,function*(){return""})};return r.accessToken?v.accessToken=r.accessToken:delete v.accessToken,v}function Yy(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const o0="2.75.0",oi=30*1e3,Bd=3,ju=Bd*oi,Xy="http://localhost:9999",qy="supabase.auth.token",Zy={"X-Client-Info":`gotrue-js/${o0}`},yd="X-Supabase-Api-Version",l0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tb=600*1e3;class Ca extends Error{constructor(e,A,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=A,this.code=n}}function Et(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Ab extends Ca{constructor(e,A,n){super(e,A,n),this.name="AuthApiError",this.status=A,this.code=n}}function rb(r){return Et(r)&&r.name==="AuthApiError"}class ds extends Ca{constructor(e,A){super(e),this.name="AuthUnknownError",this.originalError=A}}class $n extends Ca{constructor(e,A,n,a){super(e,n,a),this.name=A,this.status=n}}class In extends $n{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nb(r){return Et(r)&&r.name==="AuthSessionMissingError"}class Ys extends $n{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Po extends $n{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ro extends $n{constructor(e,A=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=A}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sb(r){return Et(r)&&r.name==="AuthImplicitGrantRedirectError"}class ug extends $n{constructor(e,A=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=A}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bd extends $n{constructor(e,A){super(e,"AuthRetryableFetchError",A,void 0)}}function Tu(r){return Et(r)&&r.name==="AuthRetryableFetchError"}class dg extends $n{constructor(e,A,n){super(e,"AuthWeakPasswordError",A,"weak_password"),this.reasons=n}}class Cd extends $n{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fg=` 	
\r=`.split(""),ib=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<fg.length;e+=1)r[fg[e].charCodeAt(0)]=-2;for(let e=0;e<bl.length;e+=1)r[bl[e].charCodeAt(0)]=e;return r})();function hg(r,e,A){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;A(bl[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;A(bl[n]),e.queuedBits-=6}}function c0(r,e,A){const n=ib[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)A(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function mg(r){const e=[],A=c=>{e.push(String.fromCodePoint(c))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{lb(c,n,A)};for(let c=0;c<r.length;c+=1)c0(r.charCodeAt(c),a,o);return e.join("")}function ab(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function ob(r,e){for(let A=0;A<r.length;A+=1){let n=r.charCodeAt(A);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(r.charCodeAt(A+1)-56320&65535|a)+65536,A+=1}ab(n,e)}}function lb(r,e,A){if(e.utf8seq===0){if(r<=127){A(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&A(e.codepoint)}}function fi(r){const e=[],A={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)c0(r.charCodeAt(a),A,n);return new Uint8Array(e)}function cb(r){const e=[];return ob(r,A=>e.push(A)),new Uint8Array(e)}function hs(r){const e=[],A={queue:0,queuedBits:0},n=a=>{e.push(a)};return r.forEach(a=>hg(a,A,n)),hg(null,A,n),e.join("")}function ub(r){return Math.round(Date.now()/1e3)+r}function db(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ar=()=>typeof window<"u"&&typeof document<"u",ss={tested:!1,writable:!1},u0=()=>{if(!ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ss.tested)return ss.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ss.tested=!0,ss.writable=!0}catch{ss.tested=!0,ss.writable=!1}return ss.writable};function fb(r){const e={},A=new URL(r);if(A.hash&&A.hash[0]==="#")try{new URLSearchParams(A.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return A.searchParams.forEach((n,a)=>{e[a]=n}),e}const d0=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...A)=>ln(async()=>{const{default:n}=await Promise.resolve().then(()=>vi);return{default:n}},void 0).then(({default:n})=>n(...A)):e=fetch,(...A)=>e(...A)},hb=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",li=async(r,e,A)=>{await r.setItem(e,JSON.stringify(A))},is=async(r,e)=>{const A=await r.getItem(e);if(!A)return null;try{return JSON.parse(A)}catch{return A}},Nn=async(r,e)=>{await r.removeItem(e)};class Pl{constructor(){this.promise=new Pl.promiseConstructor((e,A)=>{this.resolve=e,this.reject=A})}}Pl.promiseConstructor=Promise;function Lu(r){const e=r.split(".");if(e.length!==3)throw new Cd("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!eb.test(e[n]))throw new Cd("JWT not in base64url format");return{header:JSON.parse(mg(e[0])),payload:JSON.parse(mg(e[1])),signature:fi(e[2]),raw:{header:e[0],payload:e[1]}}}async function mb(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function gb(r,e){return new Promise((n,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await r(o);if(!e(o,null,c)){n(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function pb(r){return("0"+r.toString(16)).substr(-2)}function wb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=A.length;let a="";for(let o=0;o<56;o++)a+=A.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,pb).join("")}async function xb(r){const A=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",A),a=new Uint8Array(n);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function vb(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const A=await xb(r);return btoa(A).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xs(r,e,A=!1){const n=wb();let a=n;A&&(a+="/PASSWORD_RECOVERY"),await li(r,`${e}-code-verifier`,a);const o=await vb(n);return[o,n===o?"plain":"s256"]}const Bb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yb(r){const e=r.headers.get(yd);if(!e||!e.match(Bb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bb(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Cb(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Eb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qs(r){if(!Eb.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hu(){const r={};return new Proxy(r,{get:(e,A)=>{if(A==="__isUserNotAvailableProxy")return!0;if(typeof A=="symbol"){const n=A.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${A}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,A)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${A}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,A)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${A}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gg(r){return JSON.parse(JSON.stringify(r))}var _b=function(r,e){var A={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(A[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(A[n[a]]=r[n[a]]);return A};const ls=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Qb=[502,503,504];async function pg(r){var e;if(!hb(r))throw new bd(ls(r),0);if(Qb.includes(r.status))throw new bd(ls(r),r.status);let A;try{A=await r.json()}catch(o){throw new ds(ls(o),o)}let n;const a=yb(r);if(a&&a.getTime()>=l0["2024-01-01"].timestamp&&typeof A=="object"&&A&&typeof A.code=="string"?n=A.code:typeof A=="object"&&A&&typeof A.error_code=="string"&&(n=A.error_code),n){if(n==="weak_password")throw new dg(ls(A),r.status,((e=A.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new In}else if(typeof A=="object"&&A&&typeof A.weak_password=="object"&&A.weak_password&&Array.isArray(A.weak_password.reasons)&&A.weak_password.reasons.length&&A.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new dg(ls(A),r.status,A.weak_password.reasons);throw new Ab(ls(A),r.status||500,n)}const Ub=(r,e,A,n)=>{const a={method:r,headers:e?.headers||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),A))};async function Ft(r,e,A,n){var a;const o=Object.assign({},n?.headers);o[yd]||(o[yd]=l0["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const c=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(c.redirect_to=n.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await Fb(r,e,A+d,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(f):{data:Object.assign({},f),error:null}}async function Fb(r,e,A,n,a,o){const c=Ub(e,n,a,o);let d;try{d=await r(A,Object.assign({},c))}catch(f){throw console.error(f),new bd(ls(f),0)}if(d.ok||await pg(d),n?.noResolveJson)return d;try{return await d.json()}catch(f){await pg(f)}}function Ir(r){var e;let A=null;Nb(r)&&(A=Object.assign({},r),r.expires_at||(A.expires_at=ub(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:A,user:n},error:null}}function wg(r){const e=Ir(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((A,n)=>A&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Hn(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Sb(r){return{data:r,error:null}}function kb(r){const{action_link:e,email_otp:A,hashed_token:n,redirect_to:a,verification_type:o}=r,c=_b(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:A,hashed_token:n,redirect_to:a,verification_type:o},f=Object.assign({},c);return{data:{properties:d,user:f},error:null}}function xg(r){return r}function Nb(r){return r.access_token&&r.refresh_token&&r.expires_in}const Du=["global","local","others"];var Ib=function(r,e){var A={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(A[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(A[n[a]]=r[n[a]]);return A};class jb{constructor({url:e="",headers:A={},fetch:n}){this.url=e,this.headers=A,this.fetch=d0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,A=Du[0]){if(Du.indexOf(A)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Du.join(", ")}`);try{return await Ft(this.fetch,"POST",`${this.url}/logout?scope=${A}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,A={}){try{return await Ft(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:A.data},headers:this.headers,redirectTo:A.redirectTo,xform:Hn})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:A}=e,n=Ib(e,["options"]),a=Object.assign(Object.assign({},n),A);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await Ft(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:kb,redirectTo:A?.redirectTo})}catch(A){if(Et(A))return{data:{properties:null,user:null},error:A};throw A}}async createUser(e){try{return await Ft(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hn})}catch(A){if(Et(A))return{data:{user:null},error:A};throw A}}async listUsers(e){var A,n,a,o,c,d,f;try{const m={nextPage:null,lastPage:0,total:0},g=await Ft(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(A=e?.page)===null||A===void 0?void 0:A.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:xg});if(g.error)throw g.error;const w=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,y=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(C=>{const b=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(C.split(";")[1].split("=")[1]);m[`${E}Page`]=b}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(Et(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){qs(e);try{return await Ft(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hn})}catch(A){if(Et(A))return{data:{user:null},error:A};throw A}}async updateUserById(e,A){qs(e);try{return await Ft(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:A,headers:this.headers,xform:Hn})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,A=!1){qs(e);try{return await Ft(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:A},xform:Hn})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){qs(e.userId);try{const{data:A,error:n}=await Ft(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:A,error:n}}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _deleteFactor(e){qs(e.userId),qs(e.id);try{return{data:await Ft(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _listOAuthClients(e){var A,n,a,o,c,d,f;try{const m={nextPage:null,lastPage:0,total:0},g=await Ft(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(A=e?.page)===null||A===void 0?void 0:A.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:xg});if(g.error)throw g.error;const w=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,y=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(C=>{const b=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(C.split(";")[1].split("=")[1]);m[`${E}Page`]=b}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(Et(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await Ft(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:A=>({data:A,error:null})})}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _getOAuthClient(e){try{return await Ft(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:A=>({data:A,error:null})})}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _deleteOAuthClient(e){try{return await Ft(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:A=>({data:A,error:null})})}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _regenerateOAuthClientSecret(e){try{return await Ft(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:A=>({data:A,error:null})})}catch(A){if(Et(A))return{data:null,error:A};throw A}}}function vg(r={}){return{getItem:e=>r[e]||null,setItem:(e,A)=>{r[e]=A},removeItem:e=>{delete r[e]}}}const Zs={debug:!!(globalThis&&u0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class f0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Tb extends f0{}async function Lb(r,e,A){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await A()}finally{Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Tb(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Zs.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await A()}}))}function Hb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function h0(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Db(r){return parseInt(r,16)}function Pb(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Rb(r){var e;const{chainId:A,domain:n,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:d,requestId:f,resources:m,scheme:g,uri:w,version:v}=r;{if(!Number.isInteger(A))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${A}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const y=h0(r.address),C=g?`${g}://${n}`:n,b=r.statement?`${r.statement}
`:"",E=`${C} wants you to sign in with your Ethereum account:
${y}

${b}`;let S=`URI: ${w}
Version: ${v}
Chain ID: ${A}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),d&&(S+=`
Not Before: ${d.toISOString()}`),f&&(S+=`
Request ID: ${f}`),m){let k=`
Resources:`;for(const N of m){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);k+=`
- ${N}`}S+=k}return`${E}
${S}`}class pA extends Error{constructor({message:e,code:A,cause:n,name:a}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=a??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=A}}class Cl extends pA{constructor(e,A){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:A,message:e}),this.name="WebAuthnUnknownError",this.originalError=A}}function Ob({error:r,options:e}){var A,n,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pA({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((A=o.authenticatorSelection)===null||A===void 0?void 0:A.requireResidentKey)===!0)return new pA({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pA({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pA({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new pA({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new pA({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new pA({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new pA({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const c=window.location.hostname;if(g0(c)){if(o.rp.id!==c)return new pA({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new pA({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new pA({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new pA({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new pA({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function Mb({error:r,options:e}){const{publicKey:A}=e;if(!A)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pA({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new pA({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(g0(n)){if(A.rpId!==n)return new pA({message:`The RP ID "${A.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new pA({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new pA({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new pA({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}var m0=function(r,e){var A={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(A[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(A[n[a]]=r[n[a]]);return A};class Kb{createNewAbortSignal(){if(this.controller){const A=new Error("Cancelling existing WebAuthn API call for new one");A.name="AbortError",this.controller.abort(A)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Gb=new Kb;function $b(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:A,excludeCredentials:n}=r,a=m0(r,["challenge","user","excludeCredentials"]),o=fi(e).buffer,c=Object.assign(Object.assign({},A),{id:fi(A.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:c});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const m=n[f];d.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:fi(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function Wb(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:A}=r,n=m0(r,["challenge","allowCredentials"]),a=fi(e).buffer,o=Object.assign(Object.assign({},n),{challenge:a});if(A&&A.length>0){o.allowCredentials=new Array(A.length);for(let c=0;c<A.length;c++){const d=A[c];o.allowCredentials[c]=Object.assign(Object.assign({},d),{id:fi(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function Vb(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const A=r;return{id:r.id,rawId:r.id,response:{attestationObject:hs(new Uint8Array(r.response.attestationObject)),clientDataJSON:hs(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=A.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zb(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const A=r,n=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:hs(new Uint8Array(a.authenticatorData)),clientDataJSON:hs(new Uint8Array(a.clientDataJSON)),signature:hs(new Uint8Array(a.signature)),userHandle:a.userHandle?hs(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=A.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function g0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Bg(){var r,e;return!!(ar()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Jb(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cl("Browser returned unexpected credential type",e)}:{data:null,error:new Cl("Empty credential response",e)}}catch(e){return{data:null,error:Ob({error:e,options:r})}}}async function Yb(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cl("Browser returned unexpected credential type",e)}:{data:null,error:new Cl("Empty credential response",e)}}catch(e){return{data:null,error:Mb({error:e,options:r})}}}const Xb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},qb={userVerification:"preferred",hints:["security-key"]};function El(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),A=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of r)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))n[o]=c;else if(A(c))n[o]=c;else if(e(c)){const d=n[o];e(d)?n[o]=El(d,c):n[o]=El(c)}else n[o]=c}return n}function Zb(r,e){return El(Xb,r,e||{})}function eC(r,e){return El(qb,r,e||{})}class tC{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:A,friendlyName:n,signal:a},o){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:A});if(!c)return{data:null,error:d};const f=a??Gb.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=Zb(c.webauthn.credential_options.publicKey,o?.create),{data:g,error:w}=await Jb({publicKey:m,signal:f});return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:w}}case"request":{const m=eC(c.webauthn.credential_options.publicKey,o?.request),{data:g,error:w}=await Yb(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:f}));return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:w}}}}catch(c){return Et(c)?{data:null,error:c}:{data:null,error:new ds("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:A,webauthn:n}){return this.client.mfa.verify({factorId:A,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:A=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!A)return{data:null,error:new Ca("rpId is required for WebAuthn authentication")};try{if(!Bg())return{data:null,error:new ds("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:A,rpOrigins:n},signal:a},{request:o});if(!c)return{data:null,error:d};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:A,rpOrigins:n,credential_response:f.credential_response}})}catch(c){return Et(c)?{data:null,error:c}:{data:null,error:new ds("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,rpId:A=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!A)return{data:null,error:new Ca("rpId is required for WebAuthn registration")};try{if(!Bg())return{data:null,error:new ds("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(g=>{var w;return(w=g.data)===null||w===void 0?void 0:w.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:f,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:A,rpOrigins:n},signal:a},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:A,rpOrigins:n,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(c){return Et(c)?{data:null,error:c}:{data:null,error:new ds("Unexpected error in register",c)}}}}Hb();const AC={url:Xy,storageKey:qy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yg(r,e,A){return await A()}const ei={};class Ea{get jwks(){var e,A;return(A=(e=ei[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&A!==void 0?A:{keys:[]}}set jwks(e){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,A;return(A=(e=ei[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&A!==void 0?A:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{cachedAt:e})}constructor(e){var A,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ea.nextInstanceID,Ea.nextInstanceID+=1,this.instanceID>0&&ar()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},AC),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new jb({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=d0(a.fetch),this.lock=a.lock||yg,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ar()&&(!((A=globalThis?.navigator)===null||A===void 0)&&A.locks)?this.lock=Lb:this.lock=yg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tC(this)},this.persistSession?(a.storage?this.storage=a.storage:u0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=vg(this.memoryStorage)),ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${o0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const A=fb(window.location.href);let n="none";if(this._isImplicitGrantCallback(A)?n="implicit":await this._isPKCECallback(A)&&(n="pkce"),ar()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:o}=await this._getSessionFromURL(A,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),sb(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(A){return Et(A)?{error:A}:{error:new ds("Unexpected error during initialization",A)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var A,n,a;try{const o=await Ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(A=e?.options)===null||A===void 0?void 0:A.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ir}),{data:c,error:d}=o;if(d||!c)return{data:{user:null,session:null},error:d};const f=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(Et(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var A,n,a;try{let o;if("email"in e){const{email:g,password:w,options:v}=e;let y=null,C=null;this.flowType==="pkce"&&([y,C]=await Xs(this.storage,this.storageKey)),o=await Ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:w,data:(A=v?.data)!==null&&A!==void 0?A:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:y,code_challenge_method:C},xform:Ir})}else if("phone"in e){const{phone:g,password:w,options:v}=e;o=await Ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:w,data:(n=v?.data)!==null&&n!==void 0?n:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Ir})}else throw new Po("You must provide either an email or phone number and a password");const{data:c,error:d}=o;if(d||!c)return{data:{user:null,session:null},error:d};const f=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(Et(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let A;if("email"in e){const{email:o,password:c,options:d}=e;A=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:wg})}else if("phone"in e){const{phone:o,password:c,options:d}=e;A=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:wg})}else throw new Po("You must provide either an email or phone number and a password");const{data:n,error:a}=A;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ys}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(A){if(Et(A))return{data:{user:null,session:null},error:A};throw A}}async signInWithOAuth(e){var A,n,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(A=e.options)===null||A===void 0?void 0:A.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:A}=e;switch(A){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${A}"`)}}async signInWithEthereum(e){var A,n,a,o,c,d,f,m,g,w,v;let y,C;if("message"in e)y=e.message,C=e.signature;else{const{chain:b,wallet:E,statement:S,options:k}=e;let N;if(ar())if(typeof E=="object")N=E;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")N=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=E}const O=new URL((A=k?.url)!==null&&A!==void 0?A:window.location.href),j=await N.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=h0(j[0]);let R=(n=k?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const H=await N.request({method:"eth_chainId"});R=Db(H)}const G={domain:O.host,address:L,statement:S,uri:O.href,version:"1",chainId:R,nonce:(a=k?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=k?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=k?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=k?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=k?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=k?.signInWithEthereum)===null||g===void 0?void 0:g.resources};y=Rb(G),C=await N.request({method:"personal_sign",params:[Pb(y),L]})}try{const{data:b,error:E}=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:C},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Ir});if(E)throw E;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ys}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:E})}catch(b){if(Et(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(e){var A,n,a,o,c,d,f,m,g,w,v,y;let C,b;if("message"in e)C=e.message,b=e.signature;else{const{chain:E,wallet:S,statement:k,options:N}=e;let O;if(ar())if(typeof S=="object")O=S;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))O=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=S}const j=new URL((A=N?.url)!==null&&A!==void 0?A:window.location.href);if("signIn"in O&&O.signIn){const L=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),k?{statement:k}:null));let R;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")R=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)R=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)C=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),b=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${j.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=N?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=N?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((c=N?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((f=N?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((m=N?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((w=(g=N?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||w===void 0)&&w.length?["Resources",...N.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const L=await O.signMessage(new TextEncoder().encode(C),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=L}}try{const{data:E,error:S}=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:hs(b)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ir});if(S)throw S;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Ys}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:S})}catch(E){if(Et(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const A=await is(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(A??"").split("/");try{const{data:o,error:c}=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ir});if(await Nn(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ys}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(Et(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:A,provider:n,token:a,access_token:o,nonce:c}=e,d=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:Ir}),{data:f,error:m}=d;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ys}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(A){if(Et(A))return{data:{user:null,session:null},error:A};throw A}}async signInWithOtp(e){var A,n,a,o,c;try{if("email"in e){const{email:d,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Xs(this.storage,this.storageKey));const{error:w}=await Ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(A=f?.data)!==null&&A!==void 0?A:{},create_user:(n=f?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in e){const{phone:d,options:f}=e,{data:m,error:g}=await Ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(c=f?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:g}}throw new Po("You must provide either an email or phone number.")}catch(d){if(Et(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var A,n;try{let a,o;"options"in e&&(a=(A=e.options)===null||A===void 0?void 0:A.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:c,error:d}=await Ft(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Ir});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,m=c.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var A,n,a;try{let o=null,c=null;return this.flowType==="pkce"&&([o,c]=await Xs(this.storage,this.storageKey)),await Ft(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(A=e.options)===null||A===void 0?void 0:A.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:Sb})}catch(o){if(Et(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:A},error:n}=e;if(n)throw n;if(!A)throw new In;const{error:a}=await Ft(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:A.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Et(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const A=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:o}=e,{error:c}=await Ft(this.fetch,"POST",A,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:n,type:a,options:o}=e,{data:c,error:d}=await Ft(this.fetch,"POST",A,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new Po("You must provide either an email or phone number and a type")}catch(A){if(Et(A))return{data:{user:null,session:null},error:A};throw A}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async A=>A))}async _acquireLock(e,A){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await A()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=A();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const A=await this.__loadSession();return await e(A)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const A=await is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",A),A!==null&&(this._isValidSession(A)?e=A:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ju:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const c=await is(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Hu()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,g)=>(!c&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,g))})}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hn}):await this._useSession(async A=>{var n,a,o;const{data:c,error:d}=A;if(d)throw d;return!(!((n=c.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new In}:await Ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Hn})})}catch(A){if(Et(A))return nb(A)&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:A};throw A}}async updateUser(e,A={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,A))}async _updateUser(e,A={}){try{return await this._useSession(async n=>{const{data:a,error:o}=n;if(o)throw o;if(!a.session)throw new In;const c=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await Xs(this.storage,this.storageKey));const{data:m,error:g}=await Ft(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:A?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:c.access_token,xform:Hn});if(g)throw g;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new In;const A=Date.now()/1e3;let n=A,a=!0,o=null;const{payload:c}=Lu(e.access_token);if(c.exp&&(n=c.exp,a=n<=A),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:n-A,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(A){if(Et(A))return{data:{session:null,user:null},error:A};throw A}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async A=>{var n;if(!e){const{data:c,error:d}=A;if(d)throw d;e=(n=c.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new In;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(A){if(Et(A))return{data:{user:null,session:null},error:A};throw A}}async _getSessionFromURL(e,A){try{if(!ar())throw new Ro("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ro(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(A){case"implicit":if(this.flowType==="pkce")throw new ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ro("Not a valid implicit grant flow url.");break;default:}if(A==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ug("No code detected.");const{data:k,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:d,expires_at:f,token_type:m}=e;if(!o||!d||!c||!m)throw new Ro("No session defined in URL");const g=Math.round(Date.now()/1e3),w=parseInt(d);let v=g+w;f&&(v=parseInt(f));const y=v-g;y*1e3<=oi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${w}s`);const C=v-w;g-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,v,g):g-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,v,g);const{data:b,error:E}=await this._getUser(o);if(E)throw E;const S={provider_token:n,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:v,refresh_token:c,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(n){if(Et(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const A=await is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&A)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async A=>{var n;const{data:a,error:o}=A;if(o)return{error:o};const c=(n=a.session)===null||n===void 0?void 0:n.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(rb(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Nn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const A=db(),n={id:A,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",A),this.stateChangeEmitters.delete(A)}};return this._debug("#onAuthStateChange()","registered callback with id",A),this.stateChangeEmitters.set(A,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(A)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async A=>{var n,a;try{const{data:{session:o},error:c}=A;if(c)throw c;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,A={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Xs(this.storage,this.storageKey,!0));try{return await Ft(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:A.captchaToken}},headers:this.headers,redirectTo:A.redirectTo})}catch(o){if(Et(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:A,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=A.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(A){if(Et(A))return{data:null,error:A};throw A}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var A;try{const{data:n,error:a}=await this._useSession(async o=>{var c,d,f,m,g;const{data:w,error:v}=o;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ft(this.fetch,"GET",y,{headers:this.headers,jwt:(g=(m=w.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return ar()&&!(!((A=e.options)===null||A===void 0)&&A.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(Et(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async A=>{var n;try{const{error:a,data:{session:o}}=A;if(a)throw a;const{options:c,provider:d,token:f,access_token:m,nonce:g}=e,w=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:f,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Ir}),{data:v,error:y}=w;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Ys}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async A=>{var n,a;const{data:o,error:c}=A;if(c)throw c;return await Ft(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _refreshAccessToken(e){const A=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(A,"begin");try{const n=Date.now();return await gb(async a=>(a>0&&await mb(200*Math.pow(2,a-1)),this._debug(A,"refreshing attempt",a),await Ft(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ir})),(a,o)=>{const c=200*Math.pow(2,a);return o&&Tu(o)&&Date.now()+c-n<oi})}catch(n){if(this._debug(A,"error",n),Et(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(A,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,A){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:A.redirectTo,scopes:A.scopes,queryParams:A.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",A,"url",n),ar()&&!A.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,A;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await is(this.storage,this.storageKey);if(a&&this.userStorage){let c=await is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await li(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Hu()}else if(a&&!a.user&&!a.user){const c=await is(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Nn(this.storage,this.storageKey+"-user"),await li(this.storage,this.storageKey,a)):a.user=Hu()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const o=((A=a.expires_at)!==null&&A!==void 0?A:1/0)*1e3-Date.now()<ju;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${ju}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Tu(c)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(n,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var A,n;if(!e)throw new In;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Pl;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new In;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),Et(o)){const c={data:null,error:o};return Tu(o)||await this._removeSession(),(A=this.refreshingDeferred)===null||A===void 0||A.resolve(c),c}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,A,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",A,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:A});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,A)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const A=Object.assign({},e),n=A.user&&A.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&A.user&&await li(this.userStorage,this.storageKey+"-user",{user:A.user});const a=Object.assign({},A);delete a.user;const o=gg(a);await li(this.storage,this.storageKey,o)}else{const a=gg(A);await li(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Nn(this.storage,this.storageKey),await Nn(this.storage,this.storageKey+"-code-verifier"),await Nn(this.storage,this.storageKey+"-user"),this.userStorage&&await Nn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ar()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(A){console.error("removing visibilitychange callback failed",A)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),oi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async A=>{const{data:{session:n}}=A;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/oi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${oi}ms, refresh threshold is ${Bd} ticks`),a<=Bd&&await this._callRefreshToken(n.refresh_token)})}catch(A){console.error("Auto refresh tick failed with error. This is likely a transient error.",A)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof f0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ar()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const A=`#_onVisibilityChanged(${e})`;this._debug(A,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(A,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,A,n){const a=[`provider=${encodeURIComponent(A)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,c]=await Xs(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);a.push(o.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async A=>{var n;const{data:a,error:o}=A;return o?{data:null,error:o}:await Ft(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _enroll(e){try{return await this._useSession(async A=>{var n,a;const{data:o,error:c}=A;if(c)return{data:null,error:c};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:m}=await Ft(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(A){if(Et(A))return{data:null,error:A};throw A}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async A=>{var n;const{data:a,error:o}=A;if(o)return{data:null,error:o};const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Vb(e.webauthn.credential_response):zb(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await Ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:f})})}catch(A){if(Et(A))return{data:null,error:A};throw A}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async A=>{var n;const{data:a,error:o}=A;if(o)return{data:null,error:o};const c=await Ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:$b(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:Wb(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(A){if(Et(A))return{data:null,error:A};throw A}})}async _challengeAndVerify(e){const{data:A,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:A.id,code:e.code})}async _listFactors(){var e;const{data:{user:A},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=A?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var A,n;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Lu(a.access_token);let d=null;c.aal&&(d=c.aal);let f=d;((n=(A=a.user.factors)===null||A===void 0?void 0:A.filter(w=>w.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const g=c.amr||[];return{data:{currentLevel:d,nextLevel:f,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,A={keys:[]}){let n=A.keys.find(d=>d.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===e),n&&this.jwks_cached_at+tb>a)return n;const{data:o,error:c}=await Ft(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,n=o.keys.find(d=>d.kid===e),!n)?null:n}async getClaims(e,A={}){try{let n=e;if(!n){const{data:y,error:C}=await this.getSession();if(C||!y.session)return{data:null,error:C};n=y.session.access_token}const{header:a,payload:o,signature:c,raw:{header:d,payload:f}}=Lu(n);A?.allowExpired||bb(o.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,A?.keys?{keys:A.keys}:A?.jwks);if(!m){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:o,header:a,signature:c},error:null}}const g=Cb(a.alg),w=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,w,c,cb(`${d}.${f}`)))throw new Cd("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}}Ea.nextInstanceID=0;const rC=Ea;class nC extends rC{constructor(e){super(e)}}var sC=function(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,e||[])).next())})};class iC{constructor(e,A,n){var a,o,c;this.supabaseUrl=e,this.supabaseKey=A;const d=Yy(e);if(!A)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:Ry,realtime:My,auth:Object.assign(Object.assign({},Oy),{storageKey:f}),global:Py},g=Jy(n??{},m);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(w,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=Wy(A,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new Ay(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Ly(this.storageUrl.href,this.headers,this.fetch,n?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new WB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,A={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,A,n)}channel(e,A={config:{}}){return this.realtime.channel(e,A)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return sC(this,void 0,void 0,function*(){var e,A;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(A=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&A!==void 0?A:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:A,detectSessionInUrl:n,storage:a,userStorage:o,storageKey:c,flowType:d,lock:f,debug:m},g,w){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nC({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),g),storageKey:c,autoRefreshToken:e,persistSession:A,detectSessionInUrl:n,storage:a,userStorage:o,flowType:d,lock:f,debug:m,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new xy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((A,n)=>{this._handleTokenChanged(A,"CLIENT",n?.access_token)})}_handleTokenChanged(e,A,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),A=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const aC=(r,e,A)=>new iC(r,e,A);function oC(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}oC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lC="https://gyjagrtwrhctmgkootjj.supabase.co",cC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd5amFncnR3cmhjdG1na29vdGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3MzM2OTIsImV4cCI6MjA3NDMwOTY5Mn0.S6TrCrZWkISC7g14QmVriEQSBawLwxpcGYQKcNqpazA",z=aC(lC,cC,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});async function p0(r){let e=null;try{e=(await ln(()=>Promise.resolve().then(()=>Jd),void 0)).default}catch{e=globalThis?.despia||(typeof window<"u"?window?.despia:null)}const A=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null);if(!(!!e||!!A))return console.warn("[Push] Despia not available - not in native app?"),{ok:!1,reason:"api-not-available"};try{if(e&&typeof e=="function")try{const f=e("checkNativePushPermissions://",["nativePushEnabled"]);f&&typeof f=="object"&&"nativePushEnabled"in f&&(f.nativePushEnabled||console.warn("[Push] Push notifications not enabled in OS settings"))}catch{console.log("[Push] Could not check permission status, continuing...")}console.log("[Push] Waiting for OneSignal Player ID...");let a=null;const o=10,c=500;for(let f=0;f<o;f++){const m=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null);if(m&&typeof m=="string"&&m.trim().length>0){a=m.trim();break}if(e){if(e.onesignalplayerid&&typeof e.onesignalplayerid=="string"&&e.onesignalplayerid.trim().length>0){a=e.onesignalplayerid.trim();break}else if(e.oneSignalPlayerId&&typeof e.oneSignalPlayerId=="string"&&e.oneSignalPlayerId.trim().length>0){a=e.oneSignalPlayerId.trim();break}}f<o-1&&await new Promise(g=>setTimeout(g,c))}if(!a||a.length===0)return console.warn("[Push] Player ID not available after polling",o,"times"),{ok:!1,reason:"no-player-id"};if(console.log(`[Push]  Got Player ID: ${a.slice(0,8)}`),!r?.access_token)return console.warn("[Push] No session token available"),{ok:!1,reason:"no-session"};const d=await fetch("/.netlify/functions/registerPlayer",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`},body:JSON.stringify({playerId:a,platform:"ios"})});if(!d.ok){const f=await d.json().catch(()=>({}));return console.error("[Push] Failed to register device:",f),{ok:!1,reason:"unknown"}}return console.log("[Push] Successfully registered device"),{ok:!0,playerId:a}}catch(a){return console.error("[Push] Error in ensurePushSubscribed:",a),{ok:!1,reason:"unknown"}}}const uC=Object.freeze(Object.defineProperty({__proto__:null,ensurePushSubscribed:p0},Symbol.toStringTag,{value:"Module"})),w0=x.createContext({user:null,session:null,loading:!0,signOut:async()=>{},showWelcome:!1,dismissWelcome:()=>{}});function dC({children:r}){const[e,A]=x.useState(null),[n,a]=x.useState(null),[o,c]=x.useState(!0),[d,f]=x.useState(!1),[m,g]=x.useState(!1);x.useEffect(()=>{let y=!0;z.auth.getSession().then(({data:b})=>{y&&(A(b.session??null),a(b.session?.user??null),c(!1))});const{data:C}=z.auth.onAuthStateChange((b,E)=>{if(A(E),a(E?.user??null),c(!1),b==="SIGNED_IN"&&E?.user&&!m){const S=new URLSearchParams(window.location.search),k=new URLSearchParams(window.location.hash.substring(1));(S.get("type")==="signup"||S.get("confirmation_token")||k.get("type")==="signup"||k.get("access_token")||window.location.search.includes("confirmation")||window.location.hash.includes("confirmation"))&&E.user.email_confirmed_at&&(f(!0),g(!0),window.history.replaceState({},document.title,window.location.pathname))}});return()=>{y=!1,C.subscription.unsubscribe()}},[]),x.useEffect(()=>{if(!n||!e)return;const y=n,C=e;let b=!1,E=null;async function S(O=0){if(b)return console.log("[Push] Registration cancelled"),!1;try{console.log(`[Push] Attempting auto-registration (attempt ${O+1}/15) for user ${y.id}`);const j=await p0(C);if(j.ok&&j.playerId){const L=`totl:last_pid:${y.id}`,R=localStorage.getItem(L);return localStorage.setItem(L,j.playerId),R!==j.playerId?console.log("[Push]  Auto-registered Player ID:",j.playerId.slice(0,8)+""):console.log("[Push]  Player ID already registered:",j.playerId.slice(0,8)+""),!0}j.reason==="no-player-id"?(console.log(`[Push] Player ID not ready yet, will retry in 2s (attempt ${O+1}/15)`),O<14&&!b?setTimeout(()=>S(O+1),2e3):console.warn("[Push] Failed to get Player ID after 15 attempts. OneSignal may not be initialized.")):j.reason==="permission-denied"?(console.warn("[Push] Permission denied - user needs to enable notifications in OS settings"),O<4&&!b&&setTimeout(()=>S(O+1),5e3)):j.reason==="api-not-available"?console.log("[Push] Despia API not available - not in native app, skipping"):(console.warn(`[Push] Registration failed: ${j.reason}`),O<4&&!b&&setTimeout(()=>S(O+1),3e3))}catch(j){console.error("[Push] Registration error:",j),O<4&&!b&&setTimeout(()=>S(O+1),3e3)}return!1}const k=setTimeout(()=>{S()},500),N=()=>{!document.hidden&&n&&e&&!b&&(console.log("[Push] App became visible, re-checking push subscription..."),setTimeout(()=>S(0),1e3))};return E=setInterval(()=>{!b&&n&&e&&(console.log("[Push] Periodic re-registration check..."),S(0))},300*1e3),document.addEventListener("visibilitychange",N),()=>{b=!0,clearTimeout(k),E&&clearInterval(E),document.removeEventListener("visibilitychange",N)}},[n?.id,e?.access_token]);async function w(){await z.auth.signOut()}function v(){f(!1),g(!0)}return i.jsx(w0.Provider,{value:{user:n,session:e,loading:o,signOut:w,showWelcome:d,dismissWelcome:v},children:r})}const or=()=>x.useContext(w0);function fC(r){const e=["th","st","nd","rd"],A=r%100;return r+(e[(A-20)%10]||e[A]||e[0])}function bg(r){const e=(r||"?").trim().split(/\s+/);return e.length?e.length===1?e[0].slice(0,1).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase():"?"}function hC(r){return r.result==="H"||r.result==="D"||r.result==="A"?r.result:typeof r.home_goals=="number"&&typeof r.away_goals=="number"?r.home_goals>r.away_goals?"H":r.home_goals<r.away_goals?"A":"D":null}const mC=120*1e3;let er=null;function gC(){const{user:r}=or(),[e,A]=x.useState([]),[n,a]=x.useState(!0),[o,c]=x.useState(!0),[d,f]=x.useState(!1),[m,g]=x.useState(""),[w,v]=x.useState(""),[y,C]=x.useState(""),[b,E]=x.useState({}),[S,k]=x.useState({}),[N,O]=x.useState({});async function j(){a(!0),C("");try{if(!r?.id){A([]),a(!1);return}const{data:G,error:H}=await z.from("league_members").select("league_id").eq("user_id",r.id);if(H)throw H;const ve=(G??[]).map(se=>se.league_id);if(!ve.length){A([]),a(!1);return}let W=[];const{data:ae,error:fe}=await z.from("leagues").select("id,name,code,created_at,avatar,start_gw").in("id",ve).order("created_at",{ascending:!0});if(fe){console.error("Error fetching leagues with avatar:",fe);const{data:se,error:He}=await z.from("leagues").select("id,name,code,created_at").in("id",ve).order("created_at",{ascending:!0});if(He)throw He;W=se??[]}else W=ae??[];const P=W.filter(se=>!se.avatar||se.avatar===null||se.avatar==="");if(P.length>0&&(P.forEach(se=>{se.avatar=ml(se.id)}),Promise.all(P.map(se=>{const He=ml(se.id);return Promise.resolve(z.from("leagues").update({avatar:He}).eq("id",se.id).then(()=>console.log(`Assigned avatar ${He} to league ${se.name}`))).catch(We=>console.warn(`Failed to assign avatar to league ${se.id}:`,We))})).catch(()=>{})),!W.length){A([]),a(!1);return}const{data:ue,error:Y}=await z.from("league_members").select("league_id,user_id").in("league_id",W.map(se=>se.id));if(Y)throw Y;const D=new Map;(ue??[]).forEach(se=>{const He=D.get(se.league_id)??[];He.push(se.user_id),D.set(se.league_id,He)});const{data:_}=await z.from("fixtures").select("gw").order("gw",{ascending:!1}),I=_??[],$=I.length?Math.max(...I.map(se=>se.gw)):1,Q={},K=Array.from(new Set(Array.from(D.values()).flat()));if(K.length>0){const{data:se}=await z.from("gw_submissions").select("user_id").eq("gw",$).in("user_id",K),He=new Set((se??[]).map(We=>We.user_id));for(const We of W){const ie=D.get(We.id)??[],he=ie.length,Te=ie.filter(be=>He.has(be)).length;Q[We.id]={allSubmitted:Te===he&&he>0,submittedCount:Te,totalCount:he}}}else for(const se of W)Q[se.id]={allSubmitted:!1,submittedCount:0,totalCount:0};E(Q);const Z={};try{const{data:se}=await z.from("league_message_reads").select("league_id,last_read_at").eq("user_id",r.id),He=new Map;(se??[]).forEach(ie=>He.set(ie.league_id,ie.last_read_at));const We=W.map(ie=>ie.id);if(We.length>0){const ie=new Map;We.forEach(Ze=>{ie.set(Ze,He.get(Ze)??"1970-01-01T00:00:00Z")});const he=Math.min(...Array.from(ie.values()).map(Ze=>new Date(Ze).getTime())),Te=new Date(he).toISOString(),{data:be}=await z.from("league_messages").select("id,league_id,created_at").in("league_id",We).gte("created_at",Te);We.forEach(Ze=>{const gt=ie.get(Ze),Nt=(be??[]).filter(rA=>rA.league_id===Ze&&new Date(rA.created_at)>new Date(gt)).length;Z[Ze]=Nt})}}catch(se){console.warn("Failed to fetch unread counts:",se)}O(Z);const te=W.map(se=>{const He=D.get(se.id)??[];return{id:se.id,name:se.name,code:se.code,memberCount:He.length,avatar:se.avatar,created_at:se.created_at,start_gw:se.start_gw}});te.sort((se,He)=>{const We=Z[se.id]??0,ie=Z[He.id]??0;return We>0&&ie===0?-1:We===0&&ie>0?1:0}),A(te),r?.id&&(er={rows:te,leagueSubmissions:Q,leagueData:{},unreadByLeague:Z,lastFetched:Date.now(),userId:r.id})}catch(G){C(G?.message??"Failed to load leagues.")}finally{a(!1)}}x.useEffect(()=>{if(!r?.id){a(!1);return}if(er&&er.userId===r.id&&er.rows.length>0){const G=Date.now()-er.lastFetched;if(G<mC){if(A(er.rows),E(er.leagueSubmissions),k(er.leagueData),O(er.unreadByLeague),a(!1),c(!1),G<30*1e3)return;j();return}}j()},[r?.id]),x.useEffect(()=>{if(!e.length||!r?.id){c(!1);return}c(!0);let G=!0;return(async()=>{const[H,ve]=await Promise.all([z.from("meta").select("current_gw").eq("id",1).maybeSingle(),z.from("gw_results").select("gw,fixture_index,result")]),W=H.data?.current_gw??1,{data:ae}=ve,fe=ae??[],P=new Map;fe.forEach(he=>{const Te=hC(he);Te&&P.set(`${he.gw}:${he.fixture_index}`,Te)});const ue={},Y=e.map(he=>he.id),{data:D}=await z.from("league_members").select("league_id,user_id, users(id, name)").in("league_id",Y),_=new Map;(D??[]).forEach(he=>{if(!he.users?.name)return;const Te=_.get(he.league_id)??[];Te.push({id:he.user_id,name:he.users.name}),_.set(he.league_id,Te)});const I=[...new Set(Array.from(P.keys()).map(he=>parseInt(he.split(":")[0],10)))].sort((he,Te)=>he-Te),{data:$}=await z.from("leagues").select("id,name,created_at,start_gw").in("id",Y),Q=new Map;($??[]).forEach(he=>{Q.set(he.id,he)});const{data:K}=await z.from("fixtures").select("gw,kickoff_time").in("gw",I).order("gw",{ascending:!0}).order("kickoff_time",{ascending:!0}),Z=new Map;(K??[]).forEach(he=>{const Te=Z.get(he.gw)??[];Te.push(he.kickoff_time),Z.set(he.gw,Te)});const te=new Set,se=new Map;for(const he of e){const Te=Q.get(he.id),be={id:he.id,name:Te?.name??he.name,created_at:(Te?.created_at??he.created_at)||null,start_gw:Te?.start_gw??he.start_gw};let Ze=W;const gt={"Prem Predictions":0,"FC Football":0,"Easy League":0,"API Test":999,"The Bird league":7,gregVjofVcarl:8,"Let Down":8},Nt=be.name?gt[be.name]:void 0;if(typeof Nt=="number")Ze=Nt;else if(be.start_gw!==null&&be.start_gw!==void 0)Ze=be.start_gw;else if(be.created_at&&I.length>0){const Xt=new Date(be.created_at),le=75;for(const et of I){const Le=Z.get(et);if(Le&&Le.length>0){const Ce=new Date(Le[0]),mt=new Date(Ce.getTime()-le*60*1e3);if(Xt<=mt){Ze=et;break}}}Ze===W&&I.length>0&&(Ze=Math.max(...I)+1)}se.set(he.id,Ze),I.filter(Xt=>Xt>=Ze).forEach(Xt=>te.add(Xt))}const He=Array.from(new Set(Array.from(_.values()).flat().map(he=>he.id))),{data:We}=He.length>0?await z.from("gw_submissions").select("user_id").eq("gw",W).in("user_id",He):{data:[]},ie=new Set((We??[]).map(he=>he.user_id));await Promise.all(e.map(async he=>{try{const Te=(_.get(he.id)??[]).filter(Ve=>Ve.name!=="Unknown");if(Q.get(he.id)?.name==="API Test"){const Ve=Te.sort((ct,kt)=>ct.name.localeCompare(kt.name)).map(ct=>ct.id);ue[he.id]={id:he.id,members:Te.sort((ct,kt)=>ct.name.localeCompare(kt.name)),userPosition:Ve.indexOf(r.id)+1||null,positionChange:null,sortedMemberIds:Ve,latestGwWinners:new Set};return}if(Te.length===0){ue[he.id]={id:he.id,members:[],userPosition:null,positionChange:null,sortedMemberIds:[],latestGwWinners:new Set};return}if(P.size===0){const Ve=Te.sort((ct,kt)=>ct.name.localeCompare(kt.name)).map(ct=>ct.id);ue[he.id]={id:he.id,members:Te.sort((ct,kt)=>ct.name.localeCompare(kt.name)),userPosition:null,positionChange:null,sortedMemberIds:Ve,latestGwWinners:new Set};return}const Ze=se.get(he.id)??W,gt=I.filter(Ve=>Ve>=Ze);if(gt.length===0){const Ve=Te.sort((ct,kt)=>ct.name.localeCompare(kt.name)).map(ct=>ct.id);ue[he.id]={id:he.id,members:Te.sort((ct,kt)=>ct.name.localeCompare(kt.name)),userPosition:null,positionChange:null,sortedMemberIds:Ve,latestGwWinners:new Set};return}const Nt=Te.map(Ve=>Ve.id),{data:rA}=await z.from("picks").select("user_id,gw,fixture_index,pick").in("user_id",Nt).in("gw",gt),Xt=rA??[],le=new Map,et=new Map;gt.forEach(Ve=>{const ct=new Map;Te.forEach(kt=>ct.set(kt.id,{user_id:kt.id,score:0,unicorns:0})),le.set(Ve,ct)}),gt.forEach(Ve=>{Array.from(P.entries()).filter(([kt])=>parseInt(kt.split(":")[0],10)===Ve).map(([kt,Pt])=>({idx:parseInt(kt.split(":")[1],10),out:Pt})).forEach(({idx:kt,out:Pt})=>{const Bt=Xt.filter(Vt=>Vt.gw===Ve&&Vt.fixture_index===kt),Yt=Bt.filter(Vt=>Vt.pick===Pt).map(Vt=>Vt.user_id),Wt=le.get(Ve);if(Bt.forEach(Vt=>{if(Vt.pick===Pt){const mA=Wt.get(Vt.user_id);mA.score+=1}}),Yt.length===1&&Te.length>=3){const Vt=Yt[0],mA=Wt.get(Vt);mA.unicorns+=1}})});const Le=new Map,Ce=new Map,mt=new Map;Te.forEach(Ve=>{Le.set(Ve.id,0),Ce.set(Ve.id,0),mt.set(Ve.id,0)}),gt.forEach(Ve=>{const ct=Array.from(le.get(Ve).values());if(ct.forEach(Bt=>{Ce.set(Bt.user_id,(Ce.get(Bt.user_id)??0)+Bt.score),mt.set(Bt.user_id,(mt.get(Bt.user_id)??0)+Bt.unicorns)}),ct.sort((Bt,Yt)=>Yt.score-Bt.score||Yt.unicorns-Bt.unicorns),!ct.length)return;const kt=ct[0],Pt=ct.filter(Bt=>Bt.score===kt.score&&Bt.unicorns===kt.unicorns);et.set(Ve,new Set(Pt.map(Bt=>Bt.user_id))),Pt.length===1?Le.set(kt.user_id,(Le.get(kt.user_id)??0)+3):Pt.forEach(Bt=>{Le.set(Bt.user_id,(Le.get(Bt.user_id)??0)+1)})});const Ye=[...Te.map(Ve=>({user_id:Ve.id,name:Ve.name,mltPts:Le.get(Ve.id)??0,unicorns:mt.get(Ve.id)??0,ocp:Ce.get(Ve.id)??0}))].sort((Ve,ct)=>ct.mltPts-Ve.mltPts||ct.unicorns-Ve.unicorns||ct.ocp-Ve.ocp||Ve.name.localeCompare(ct.name));let rt=Ye.findIndex(Ve=>Ve.user_id===r.id);if(rt===-1){const Ve=Te.findIndex(ct=>ct.id===r.id);Ve!==-1&&(Ye.push({user_id:r.id,name:Te[Ve].name,mltPts:0,unicorns:0,ocp:0}),Ye.sort((ct,kt)=>kt.mltPts-ct.mltPts||kt.unicorns-ct.unicorns||kt.ocp-ct.ocp||ct.name.localeCompare(kt.name)),rt=Ye.findIndex(ct=>ct.user_id===r.id))}const ze=Ye.map(Ve=>Ve.user_id);console.log(`[${he.name}] Position calculation:`,{userId:r.id,userIndex:rt,userPosition:rt!==-1?rt+1:null,rowsCount:Ye.length,rows:Ye.map((Ve,ct)=>({index:ct+1,name:Ve.name,userId:Ve.user_id,mltPts:Ve.mltPts,unicorns:Ve.unicorns,ocp:Ve.ocp})),sortedMemberIds:ze,memberIds:Te.map(Ve=>Ve.id),userInMembers:Te.some(Ve=>Ve.id===r.id),userInRows:Ye.some(Ve=>Ve.user_id===r.id),leagueStartGw:Ze,relevantGws:gt,picksCount:Xt.length,currentGw:W});const Qt=rt!==-1?rt+1:null,Kt=gt.length?Math.max(...gt):null,vt=Kt!==null?et.get(Kt)??new Set:new Set,wt=new Set;Nt.forEach(Ve=>{ie.has(Ve)&&wt.add(Ve)});const cA={id:he.id,members:Te.sort((Ve,ct)=>Ve.name.localeCompare(ct.name)),userPosition:Qt,positionChange:null,submittedMembers:wt,sortedMemberIds:[...ze],latestGwWinners:new Set(vt)};ue[he.id]=cA}catch(Te){console.error(`Error loading data for league ${he.id} (${he.name}):`,Te),console.error("Error details:",Te instanceof Error?Te.message:Te),ue[he.id]={id:he.id,members:[],userPosition:null,positionChange:null,sortedMemberIds:[],latestGwWinners:new Set}}})),G&&(k(ue),c(!1),r?.id&&(er&&er.userId===r.id?(er.leagueData=ue,er.lastFetched=Date.now()):er={rows:e,leagueSubmissions:{},leagueData:ue,unreadByLeague:{},lastFetched:Date.now(),userId:r.id}))})(),()=>{G=!1}},[e,r?.id]);async function L(){if(!(!w.trim()||!r?.id)){f(!0),C("");try{const G=w.trim(),H=await pC(),{data:ve,error:W}=await z.from("leagues").insert({name:G,code:H}).select("id,code").single();if(W)throw W;const ae=ml(ve.id);await z.from("leagues").update({avatar:ae}).eq("id",ve.id),await z.from("league_members").insert({league_id:ve.id,user_id:r.id}),v(""),await j()}catch(G){C(G?.message??"Failed to create league.")}finally{f(!1)}}}async function R(){const G=m.trim().toUpperCase();if(!(!G||!r?.id)){C("");try{const{data:H,error:ve}=await z.from("leagues").select("id").eq("code",G).maybeSingle();if(ve)throw ve;if(!H){C("League code not found.");return}const{data:W,error:ae}=await z.from("league_members").select("user_id").eq("league_id",H.id);if(ae)throw ae;if(W&&W.length>=8){C("League is full (max 8 members).");return}await z.from("league_members").upsert({league_id:H.id,user_id:r.id},{onConflict:"league_id,user_id"}),g(""),await j()}catch(H){C(H?.message??"Failed to join league.")}}}return i.jsx("div",{className:"min-h-screen bg-slate-50",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 pb-16",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight text-slate-900",children:"Mini Leagues"}),e.length>4&&i.jsxs("button",{onClick:()=>{const G=document.getElementById("create-join-section");G&&G.scrollIntoView({behavior:"smooth",block:"start"})},className:"text-[#1C8376] font-semibold text-sm hover:text-[#1C8376] no-underline flex items-center gap-1",children:["Create League",i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),i.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600 w-full",children:"Create or join a private league and battle it out with your friends."}),y&&i.jsx("div",{className:"mt-4 rounded border border-rose-200 bg-rose-50 text-rose-700 px-3 py-2 text-sm",children:y}),i.jsx("div",{className:"mt-6",children:n||o?i.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(G=>i.jsx("div",{className:"rounded-xl border bg-white overflow-hidden shadow-sm w-full animate-pulse",style:{borderRadius:"12px"},children:i.jsx("div",{className:"p-6 bg-white relative",children:i.jsxs("div",{className:"flex items-start gap-3 relative",children:[i.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full bg-slate-200"}),i.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1",children:[i.jsx("div",{className:"h-5 w-32 bg-slate-200 rounded"}),i.jsx("div",{className:"h-3 w-20 bg-slate-200 rounded"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-4 w-4 bg-slate-200 rounded"}),i.jsx("div",{className:"h-4 w-6 bg-slate-200 rounded"}),i.jsx("div",{className:"h-4 w-4 bg-slate-200 rounded"}),i.jsx("div",{className:"h-4 w-8 bg-slate-200 rounded"})]})]}),i.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-1",children:i.jsx("div",{className:"h-6 w-6 rounded-full bg-slate-200"})})]})})},G))}):e.length===0?i.jsx("div",{className:"px-4 py-4 text-sm",children:"No leagues yet."}):i.jsx("div",{className:"space-y-3",children:e.map(G=>{const H=S[G.id],ve=H?.members||[],W=H?.userPosition,ae=N?.[G.id]??0,fe=ae>0?Math.min(ae,99):0;return i.jsx("div",{className:"rounded-xl border bg-white overflow-hidden shadow-sm w-full",style:{borderRadius:"12px"},children:i.jsxs(IA,{to:`/league/${G.code}`,className:"block p-6 !bg-white no-underline hover:text-inherit relative z-20",children:[i.jsxs("div",{className:"flex items-start gap-3 relative",children:[i.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full flex items-center justify-center overflow-hidden bg-slate-100",children:i.jsx("img",{src:Jp(G.id,96),alt:`${G.name} avatar`,className:"w-full h-full object-cover",onError:P=>{const ue=P.target,Y=Yp(G.id,96);if(ue.src!==Y)ue.src=Y;else{ue.style.display="none";const D=ue.parentElement;D&&!D.querySelector("svg")&&(D.innerHTML=`
                                  <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                  </svg>
                                `)}}})}),i.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900 truncate",children:G.name}),b[G.id]&&b[G.id].allSubmitted&&i.jsx("span",{className:"text-xs font-normal text-[#1C8376] whitespace-nowrap",children:"All Submitted"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-4 h-4 text-slate-500",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsxs("g",{clipPath:"url(#clip0_4045_135263)",children:[i.jsx("path",{d:"M14.0001 14V13.7C14.0001 13.0489 14.0001 12.7234 13.925 12.4571C13.7361 11.7874 13.2127 11.264 12.543 11.0751C12.2767 11 11.9512 11 11.3001 11H8.36675C7.71566 11 7.39011 11 7.12387 11.0751C6.45414 11.264 5.93072 11.7874 5.74184 12.4571C5.66675 12.7234 5.66675 13.0489 5.66675 13.7V14",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M2 11.6667V10.6C2 10.0422 2 9.76328 2.05526 9.53311C2.23083 8.80181 2.80181 8.23083 3.53311 8.05526C3.76328 8 4.04219 8 4.6 8H4.66667",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M12.3334 6.33333C12.3334 7.622 11.2887 8.66667 10.0001 8.66667C8.71142 8.66667 7.66675 7.622 7.66675 6.33333C7.66675 5.04467 8.71142 4 10.0001 4C11.2887 4 12.3334 5.04467 12.3334 6.33333Z",stroke:"currentColor",strokeWidth:"1.33333"}),i.jsx("path",{d:"M7.33325 2.92025C6.94237 2.36557 6.27397 2 5.51507 2C4.31009 2 3.33325 2.92165 3.33325 4.05857C3.33325 4.95488 3.94038 5.7174 4.7878 6",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round"})]}),i.jsx("defs",{children:i.jsx("clipPath",{id:"clip0_4045_135263",children:i.jsx("rect",{width:"16",height:"16",fill:"white"})})})]}),i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:ve.length})]}),W!=null?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4 text-[#1C8376]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:fC(W)}),H?.positionChange==="up"&&i.jsx("span",{className:"text-green-600 text-xs",children:""}),H?.positionChange==="down"&&i.jsx("span",{className:"text-red-600 text-xs",children:""}),H?.positionChange==="same"&&i.jsx("span",{className:"text-slate-400 text-xs",children:""})]}):i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4 text-[#1C8376]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),i.jsx("span",{className:"text-sm font-semibold text-slate-400",children:""})]})]}),i.jsxs("div",{className:"flex items-center overflow-x-hidden overflow-y-visible mt-1 py-0.5",children:[(()=>{if(o)return null;const P=S[G.id];if(!P)return null;const ue=P.members||[];if(ue.length===0)return null;const Y=P?.sortedMemberIds;if(!Y||Y.length===0){const $=[...ue].sort((Z,te)=>Z.name.localeCompare(te.name)),Q=P?.submittedMembers instanceof Set?P.submittedMembers:new Set(P?.submittedMembers??[]),K=P?.latestGwWinners instanceof Set?P.latestGwWinners:new Set(P?.latestGwWinners??[]);return $.slice(0,8).map((Z,te)=>{const se=Q.has(Z.id),He=K.has(Z.id);let We="chip-container rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 w-6 h-6";return He?We+=" bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 font-semibold relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":se?We+=" chip-green":We+=" chip-grey",te>0&&(We+=" chip-overlap"),i.jsx("div",{className:We,title:Z.name,children:bg(Z.name)},Z.id)})}const D=Y.map($=>ue.find(Q=>Q.id===$)).filter($=>$!==void 0),_=P?.submittedMembers instanceof Set?P.submittedMembers:new Set(P?.submittedMembers??[]),I=P?.latestGwWinners instanceof Set?P.latestGwWinners:new Set(P?.latestGwWinners??[]);return D.slice(0,8).map(($,Q)=>{const K=_.has($.id),Z=I.has($.id);let te="chip-container rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 w-6 h-6";return Z?te+=" bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 font-semibold relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":K?te+=" chip-green":te+=" chip-grey",Q>0&&(te+=" chip-overlap"),i.jsx("div",{className:te,title:$.name,children:bg($.name)},$.id)})})(),(()=>{const P=S[G.id];if(!P)return null;const Y=(P?.sortedMemberIds||P?.members?.map(D=>D.id)||[]).length;return Y>8&&i.jsxs("div",{className:`chip-container chip-grey rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 ${Y>1?"chip-overlap":""}`,style:{width:"24px",height:"24px"},children:["+",Y-8]})})()]})]})]}),i.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1.5 z-30",children:[fe>0&&i.jsx("span",{className:"inline-flex items-center justify-center h-6 w-6 rounded-full bg-[#1C8376] text-white text-xs font-bold",children:fe}),i.jsx("svg",{className:"w-5 h-5 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},G.id)})})}),i.jsx("div",{id:"create-join-section",className:"mt-10 mb-3 text-xl font-extrabold text-slate-900",children:"Create or Join"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"border rounded-2xl p-4 bg-white",children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Create a league"}),i.jsx("input",{className:"border rounded px-3 py-2 w-full bg-white",placeholder:"League name",value:w,onChange:G=>v(G.target.value)}),i.jsx("button",{className:"mt-3 px-3 py-2 rounded bg-slate-900 text-white disabled:opacity-50",onClick:L,disabled:d||!w.trim(),children:d?"Creating":"Create"})]}),i.jsxs("div",{className:"border rounded-2xl p-4 bg-white",children:[i.jsx("div",{className:"text-sm font-medium mb-2",children:"Join with code"}),i.jsx("input",{className:"border rounded px-3 py-2 w-full uppercase tracking-widest bg-white",placeholder:"ABCDE",value:m,onChange:G=>g(G.target.value)}),i.jsx("button",{className:"mt-3 px-3 py-2 rounded border",onClick:R,children:"Join"})]})]})]})})}async function pC(){const r="ABCDEFGHJKLMPQRSTVWXYZ23456789";for(let e=0;e<6;e++){let A="";for(let a=0;a<5;a++)A+=r[Math.floor(Math.random()*r.length)];const{data:n}=await z.from("leagues").select("id").eq("code",A).maybeSingle();if(!n)return A}return Math.random().toString(36).slice(2,7).toUpperCase()}const wC=75,x0={"Prem Predictions":0,"FC Football":0,"Easy League":0,"API Test":999,"The Bird league":7,gregVjofVcarl:8,"Let Down":8};function v0(r){if(r)return x0[r]}async function xC(r){const e=typeof r.name!="string",A=typeof r.created_at!="string",n=typeof r.start_gw>"u";if(!e&&!A&&!n)return r;const{data:a,error:o}=await z.from("leagues").select("name, start_gw, created_at").eq("id",r.id).maybeSingle();if(o&&o?.code==="42703"){const{data:c,error:d}=await z.from("leagues").select("name, created_at").eq("id",r.id).maybeSingle();if(!d&&c)return{...r,name:e?c.name:r.name,start_gw:r.start_gw,created_at:A?c.created_at:r.created_at}}return o||!a?r:{...r,name:e?a.name:r.name,start_gw:n?a.start_gw:r.start_gw,created_at:A?a.created_at:r.created_at}}async function vC(r,e){if(!r?.id)return e;const A=await xC(r),n=v0(A.name??void 0);if(typeof n=="number")return n;if(A.start_gw!==null&&A.start_gw!==void 0)return A.start_gw;if(A.created_at&&e){const a=new Date(A.created_at),{data:o}=await z.from("gw_results").select("gw").order("gw",{ascending:!0}),c=o?[...new Set(o.map(d=>d.gw))]:[];for(const d of c){const{data:f}=await z.from("fixtures").select("kickoff_time").eq("gw",d).order("kickoff_time",{ascending:!0}).limit(1).maybeSingle();if(f?.kickoff_time){const m=new Date(f.kickoff_time),g=new Date(m.getTime()-wC*60*1e3);if(a<=g)return d}}return c.length>0?Math.max(...c)+1:e}return e}function Cg(r,e,A){if(r?.name==="API Test"&&e===1)return!0;const n=v0(r?.name);if(typeof n=="number")return n===999?!1:e>=n;if(r?.start_gw!==null&&r?.start_gw!==void 0)return e>=r.start_gw;if(r?.created_at&&A.has(e)){const a=new Date(r.created_at),o=A.get(e);return a<=o}return!0}const Oo=8;function BC(r,e){if(r==="FINISHED")return"FT";if(r==="PAUSED")return"HT";if(r==="IN_PLAY"){if(e==null)return"LIVE";if(e>=1&&e<=45)return"First Half";if(e>45&&e<=50)return"45+";if(e>50)return"Second Half"}return"LIVE"}function Eg(r){const e=(r||"?").trim().split(/\s+/);return e.length?e.length===1?e[0].slice(0,1).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase():"?"}function Pu(r){return r.result==="H"||r.result==="D"||r.result==="A"?r.result:typeof r.home_goals=="number"&&typeof r.away_goals=="number"?r.home_goals>r.away_goals?"H":r.home_goals<r.away_goals?"A":"D":null}function Mo({letter:r,correct:e,unicorn:A,finished:n}){const a=e===null?"bg-slate-100 text-slate-600 border-slate-200":e&&n?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s] ring-2 ring-yellow-300/60":e&&!n?"bg-emerald-600 text-white border-emerald-600 animate-pulse shadow-lg shadow-emerald-500/50":"bg-slate-50 text-slate-400 border-slate-200";return i.jsxs("span",{className:["inline-flex items-center justify-center h-5 min-w-[18px] px-1.5","rounded-full border text-[11px] font-semibold mb-0.5","align-middle",a].join(" "),title:A?"Unicorn!":void 0,children:[r,A?i.jsx("span",{className:"ml-1",children:""}):null]})}function yC({chat:r,userId:e,nameById:A,isMember:n,newMsg:a,setNewMsg:o,onSend:c,leagueCode:d,memberCount:f,maxMembers:m,notificationStatus:g}){const w=x.useRef(null),v=x.useRef(null),y=x.useRef(null),C=x.useRef(null),[b,E]=x.useState(0),S=()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)};x.useEffect(()=>{r.length>0&&setTimeout(()=>S(),100)},[r.length]),x.useEffect(()=>{!a&&y.current&&(y.current.style.height="auto",y.current.style.height="42px")},[a]),x.useEffect(()=>{const O=window.visualViewport;if(!O)return;let j=null,L=0;const R=()=>{j&&(clearTimeout(j),j=null),j=setTimeout(()=>{const ve=window.innerHeight,W=O.height,ae=O.offsetTop+W,fe=ve-ae;Math.abs(fe-L)<10&&fe>0||(L=fe,fe>100?(E(fe),setTimeout(()=>{const P=C.current?.offsetHeight||100,ue=fe+P+20;w.current&&(w.current.style.paddingBottom=`${ue}px`,w.current.offsetHeight,requestAnimationFrame(()=>{S(),setTimeout(()=>S(),100),setTimeout(()=>S(),300),setTimeout(()=>S(),500),setTimeout(()=>S(),700)}))},100)):(E(0),w.current&&(w.current.style.paddingBottom="",w.current.offsetHeight,requestAnimationFrame(()=>{S(),setTimeout(()=>S(),50),setTimeout(()=>S(),150),setTimeout(()=>S(),300)}))))},50)};O.addEventListener("resize",R),O.addEventListener("scroll",R);const G=()=>{setTimeout(R,100),setTimeout(R,300)},H=setTimeout(()=>{y.current&&y.current.addEventListener("focus",G)},100);return R(),()=>{j&&clearTimeout(j),clearTimeout(H),O.removeEventListener("resize",R),O.removeEventListener("scroll",R),y.current&&y.current.removeEventListener("focus",G)}},[]);const k=()=>{const O=window.visualViewport;O&&setTimeout(()=>{const j=window.innerHeight,L=O.height,R=O.offsetTop+L,G=j-R;G>100&&(E(G),setTimeout(()=>{const H=C.current?.offsetHeight||100,ve=G+H+20;w.current&&(w.current.style.paddingBottom=`${ve}px`,w.current.offsetHeight,requestAnimationFrame(()=>{S(),setTimeout(()=>S(),200),setTimeout(()=>S(),400),setTimeout(()=>S(),600),setTimeout(()=>S(),800)}))},100))},100),setTimeout(()=>S(),200),setTimeout(()=>S(),400),setTimeout(()=>S(),600)},N=O=>{const j=O.target;!(j.tagName==="A"||j.tagName==="BUTTON"||j.closest("a, button"))&&y.current&&document.activeElement===y.current&&y.current.blur()};return i.jsxs("div",{className:"flex flex-col chat-container",style:{height:"100%"},children:[i.jsxs("div",{ref:w,className:"flex-1 overflow-y-auto px-3 pt-3 pb-4 min-h-0 messages-container",onClick:N,style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",marginBottom:b>0?"0":"auto",cursor:"pointer"},children:[r.map(O=>{const j=O.user_id===e,L=A.get(O.user_id)??"Unknown",R=new Date(O.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsx("div",{className:`mb-2 flex ${j?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[75%] rounded-lg px-3 py-2 text-sm ${j?"bg-[#1C8376] text-white":"bg-slate-100 text-slate-900"}`,children:[!j&&i.jsx("div",{className:"font-semibold text-xs text-slate-600 mb-1",children:L}),i.jsx("div",{className:"whitespace-pre-wrap break-words",children:O.content}),i.jsx("div",{className:`mt-1 text-[10px] ${j?"text-emerald-100":"text-slate-500"}`,children:R})]})},O.id)}),i.jsx("div",{ref:v,style:{height:"1px",width:"100%"}})]}),i.jsxs("div",{ref:C,className:"flex-shrink-0 bg-white border-t border-slate-200 px-4 py-3",style:{paddingBottom:"calc(0.75rem + env(safe-area-inset-bottom, 0px))",position:b>0?"fixed":"relative",bottom:b>0?`${b}px`:"auto",left:b>0?"0":"auto",right:b>0?"0":"auto",width:b>0?"100%":"auto",zIndex:b>0?1e3:"auto"},children:[n?i.jsxs("form",{onSubmit:O=>{O.preventDefault(),c()},className:"flex items-center gap-2",children:[i.jsx("textarea",{ref:y,value:a,onChange:O=>{o(O.target.value),y.current&&(y.current.style.height="auto",y.current.style.height=`${Math.min(y.current.scrollHeight,120)}px`)},onFocus:k,onKeyDown:O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),a.trim()&&c())},placeholder:"Start typing...",maxLength:2e3,rows:1,className:"flex-1 rounded-full border border-slate-300 px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-transparent resize-none overflow-hidden",style:{minHeight:"42px",maxHeight:"120px",lineHeight:"1.5"}}),i.jsx("button",{type:"submit",className:"flex-shrink-0 w-10 h-10 rounded-full bg-[#1C8376] text-white flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:!a.trim(),style:{backgroundColor:a.trim()?"#1C8376":"#94a3b8"},children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]}):i.jsx("div",{className:"rounded-md border border-amber-200 bg-amber-50 text-amber-800 p-3 text-sm",children:"Join this league to chat with other members."}),g&&i.jsx("div",{className:`w-full rounded px-2 py-1 text-xs mt-2 ${g.type==="success"?"bg-green-50 text-green-700 border border-green-200":g.type==="warning"?"bg-amber-50 text-amber-700 border border-amber-200":"bg-red-50 text-red-700 border border-red-200"}`,children:g.message})]})]})}function bC(){const{code:r=""}=$v(),{user:e}=or(),[A]=x.useState(()=>{const U=localStorage.getItem("oldSchoolMode");return U?JSON.parse(U):!1});x.useEffect(()=>{localStorage.setItem("oldSchoolMode",JSON.stringify(A))},[A]),x.useEffect(()=>{const U=pe=>{const ye=pe.target;(ye.tagName==="INPUT"||ye.tagName==="TEXTAREA")&&setTimeout(()=>{window.scrollTo(0,0);const _e=document.querySelector(".league-header-fixed");_e&&(_e.style.top="0")},100)},re=()=>{const pe=document.querySelector(".league-header-fixed");pe&&(pe.style.top="0")};return document.addEventListener("focusin",U),window.addEventListener("resize",re),window.addEventListener("orientationchange",re),()=>{document.removeEventListener("focusin",U),window.removeEventListener("resize",re),window.removeEventListener("orientationchange",re)}},[]);const[n,a]=x.useState(null),[o,c]=x.useState([]),[d,f]=x.useState(!0),[m,g]=x.useState("chat"),[w,v]=x.useState(!1),[y,C]=x.useState(!1),[b,E]=x.useState(!1),[S,k]=x.useState(!1),[N,O]=x.useState(null),[j,L]=x.useState(null),[R,G]=x.useState(null),[H,ve]=x.useState([]),[W,ae]=x.useState({}),fe=x.useRef(new Map),[P,ue]=x.useState(new Set),[Y,D]=x.useState(!1),[_,I]=x.useState(!1),[$,Q]=x.useState(!1),[K,Z]=x.useState(!1),[te,se]=x.useState(!1),[He,We]=x.useState(!1),[ie,he]=x.useState(!1),[Te,be]=x.useState(!1),[Ze,gt]=x.useState(!1),[Nt,rA]=x.useState(!1),[Xt,le]=x.useState(null),[et,Le]=x.useState(!1),[Ce,mt]=x.useState(!1),[pt,Ye]=x.useState(null),[rt,ze]=x.useState([]),[Qt,Kt]=x.useState(""),[vt,wt]=x.useState(null),cA=x.useMemo(()=>!!e?.id&&o.some(U=>U.id===e.id),[e?.id,o]),Ve=x.useMemo(()=>{const U=new Map;return o.forEach(re=>U.set(re.id,re.name)),U},[o]),[ct,kt]=x.useState(new Map);x.useEffect(()=>{(async()=>{const U=new Map,{data:re}=await z.from("fixtures").select("gw, kickoff_time").order("gw",{ascending:!0}),{data:pe}=await z.from("test_api_fixtures").select("test_gw, kickoff_time").eq("test_gw",1).order("fixture_index",{ascending:!0}),ye=new Map;if(re&&re.forEach(_e=>{(!ye.has(_e.gw)||_e.kickoff_time&&new Date(_e.kickoff_time)<new Date(ye.get(_e.gw)))&&_e.kickoff_time&&ye.set(_e.gw,_e.kickoff_time)}),pe&&pe.length>0){const _e=pe.find(de=>de.kickoff_time)?.kickoff_time;if(_e){const de=ye.get(1);(!de||new Date(_e)<new Date(de))&&ye.set(1,_e)}}ye.forEach((_e,de)=>{const ne=new Date(_e),we=new Date(ne.getTime()-4500*1e3);U.set(de,we)}),kt(U)})()},[]),x.useEffect(()=>{const U=re=>{const pe=re.target;Y&&!pe.closest(".gw-dropdown-container")&&D(!1)};return Y&&document.addEventListener("click",U),()=>document.removeEventListener("click",U)},[Y]),x.useEffect(()=>{let U=!0;return(async()=>{const{data:re}=await z.from("meta").select("current_gw").eq("id",1).maybeSingle();if(!U)return;O(re?.current_gw??null);const{data:pe}=await z.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1);if(!U)return;L(pe&&pe.length?pe[0].gw:null);const{data:ye}=await z.from("gw_results").select("gw").order("gw",{ascending:!1});if(!U)return;const _e=ye?[...new Set(ye.map(de=>de.gw))].sort((de,ne)=>ne-de):[];ve(_e),_e.length>0&&G(_e[0])})(),()=>{U=!1}},[]);const Pt=x.useMemo(()=>o.map(U=>U.id),[o]),[Bt,Yt]=x.useState([]),[Wt,Vt]=x.useState([]),[mA,Gt]=x.useState([]),[xe,Be]=x.useState([]),[Se,Me]=x.useState([]),[Pe,ke]=x.useState(!1);x.useEffect(()=>{let U=!0;return(async()=>{f(!0);const{data:re}=await z.from("leagues").select("id,name,code,created_at").eq("code",r).maybeSingle();if(!U)return;if(!re){a(null),c([]),f(!1);return}a(re);const{data:pe}=await z.from("league_members").select("users(id,name),created_at").eq("league_id",re.id).order("created_at",{ascending:!0}),ye=pe?.map(ne=>({id:ne.users.id,name:ne.users.name??"(no name)"}))??[],_e=[...ye].sort((ne,we)=>ne.name.localeCompare(we.name));c(_e);const de=ye[0];Ye(de),e?.id&&!ye.some(ne=>ne.id===e.id)&&We(!0),f(!1)})(),()=>{U=!1}},[r]),x.useEffect(()=>{},[n,m]),x.useEffect(()=>{if(!n?.id)return;let U=!0;const re=async()=>{const{data:de,error:ne}=await z.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",n.id).order("created_at",{ascending:!1}).limit(500);if(U)if(!ne&&de){const Ke=(de??[]).reverse();console.log("[Chat] Loaded messages:",Ke.length,"from database (most recent)"),ze(ce=>{const De=new Set(ce.map(xt=>xt.id)),Ae=Ke.filter(xt=>!De.has(xt.id));if(ce.length===0)return console.log("[Chat] Initial load, setting",Ke.length,"messages"),Ke;const je=[...ce,...Ae].sort((xt,jt)=>new Date(xt.created_at).getTime()-new Date(jt.created_at).getTime()),ft=je.length>500?je.slice(-500):je;return console.log("[Chat] Merged messages. Previous:",ce.length,"New from DB:",Ae.length,"Total:",je.length,"After limit:",ft.length),ft})}else ne&&console.error("[Chat] Error loading messages:",ne)};re();const pe=z.channel(`league-messages:${n.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${n.id}`},de=>{const ne=de.new;console.log("[Chat] Realtime message received:",ne.id,ne.content.substring(0,50)),ze(we=>{if(we.some(ce=>ce.id===ne.id))return console.log("[Chat] Message already exists, skipping"),we;const Ke=[...we,ne];return console.log("[Chat] Added realtime message. Total messages:",Ke.length),Ke})}).subscribe(),ye=()=>{!document.hidden&&n?.id&&U&&(console.log("[Chat] App became visible, refetching messages..."),re())},_e=()=>{n?.id&&U&&(console.log("[Chat] Window gained focus, refetching messages..."),re())};return document.addEventListener("visibilitychange",ye),window.addEventListener("focus",_e),()=>{U=!1,z.removeChannel(pe),document.removeEventListener("visibilitychange",ye),window.removeEventListener("focus",_e)}},[n?.id]),x.useEffect(()=>{if(m!=="chat"||!n?.id||!e?.id)return;(async()=>{const{data:pe,error:ye}=await z.from("league_messages").select("id, league_id, user_id, content, created_at").eq("league_id",n.id).order("created_at",{ascending:!1}).limit(500);if(!ye&&pe){const de=(pe??[]).reverse();ze(ne=>{const we=new Set(ne.map(Ue=>Ue.id)),Ke=de.filter(Ue=>!we.has(Ue.id)),De=[...ne,...Ke].sort((Ue,je)=>new Date(Ue.created_at).getTime()-new Date(je.created_at).getTime());return De.length>500?De.slice(-500):De})}})(),(async()=>{await z.from("league_message_reads").upsert({league_id:n.id,user_id:e.id,last_read_at:new Date().toISOString()},{onConflict:"league_id,user_id"})})()},[m,n?.id,e?.id]);async function oe(){if(!(!n||!e?.id)){k(!0);try{const{error:U}=await z.from("league_members").delete().eq("league_id",n.id).eq("user_id",e.id);if(U)throw U;window.location.href="/leagues"}catch(U){console.error("Error leaving league:",U),alert("Failed to leave league. Please try again.")}finally{k(!1),E(!1)}}}async function Xe(){if(!(!n||!e?.id)){he(!0);try{if(o.length>=Oo){alert("League is full (max 8 members)."),We(!1);return}const{error:U}=await z.from("league_members").insert({league_id:n.id,user_id:e.id});if(U)throw U;window.location.reload()}catch(U){alert(U?.message??"Failed to join league.")}finally{he(!1)}}}const dt=x.useMemo(()=>n?.created_by===e?.id||pt&&pt.id===e?.id&&!n?.created_by,[n?.created_by,e?.id,pt]),Qe=x.useMemo(()=>n?.created_by?o.find(U=>U.id===n.created_by)?.name||"Unknown":pt?pt.name:"Unknown",[n?.created_by,o,pt]);async function Ge(){if(!(!Xt||!n||!e?.id)){Le(!0);try{const{error:U}=await z.from("league_members").delete().eq("league_id",n.id).eq("user_id",Xt.id);if(U)throw U;window.location.reload()}catch(U){alert(U?.message??"Failed to remove member.")}finally{Le(!1),gt(!1),le(null)}}}async function Je(){if(!(!n||!e?.id)){mt(!0);try{const{error:U}=await z.from("league_members").delete().eq("league_id",n.id);if(U)throw U;const{error:re}=await z.from("leagues").delete().eq("id",n.id);if(re)throw re;window.location.href="/leagues"}catch(U){alert(U?.message??"Failed to end league.")}finally{mt(!1),rA(!1)}}}function $e(){if(!n)return;const U=`Join my mini league "${n.name}" on TotL!`,re=`${window.location.origin}/league/${n.code}`;navigator.share?navigator.share({title:`Join ${n.name}`,text:U,url:re}).catch(console.error):navigator.clipboard.writeText(`${U}

${re}`).then(()=>{alert("League link copied to clipboard!")}).catch(()=>{prompt("Share this league code:",n.code)})}async function Ne(){if(!n||!e?.id)return;const U=Qt.trim();if(!U)return;Kt("");const{data:re,error:pe}=await z.from("league_messages").insert({league_id:n.id,user_id:e.id,content:U}).select("id, league_id, user_id, content, created_at").single();pe?(console.error(pe),alert("Failed to send message.")):re&&ze(_e=>[..._e,re]),window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||setTimeout(async()=>{try{const _e=e.user_metadata?.display_name||e.email||"User",de=await fetch("/.netlify/functions/notifyLeagueMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:n.id,senderId:e.id,senderName:_e,content:U})}),ne=await de.json().catch(()=>({}));ne.ok===!0?ne.sent&&ne.sent>0?wt({message:` Message sent to ${ne.sent} device${ne.sent===1?"":"s"}`,type:"success"}):ne.message==="No subscribed devices"?wt({message:` No subscribed devices (${ne.eligibleRecipients||0} eligible recipient${ne.eligibleRecipients===1?"":"s"})`,type:"warning"}):ne.message==="No devices"?wt({message:` No devices registered (${ne.eligibleRecipients||0} eligible recipient${ne.eligibleRecipients===1?"":"s"})`,type:"warning"}):ne.message==="No eligible recipients"?wt({message:" All members are currently active",type:"success"}):wt({message:` ${ne.message||"Notification sent"}`,type:"success"}):ne.ok===!1||ne.error?wt({message:` Failed to send notification: ${ne.error||"Unknown error"}`,type:"error"}):de.ok||wt({message:` Notification error (HTTP ${de.status})`,type:"error"}),setTimeout(()=>wt(null),5e3)}catch(_e){console.error("[Chat] Notification exception:",_e),wt({message:" Failed to send notification",type:"error"}),setTimeout(()=>wt(null),5e3)}},100)}x.useEffect(()=>{let U=!0;return(async()=>{const re=n?.name==="API Test",pe=re&&(m==="gw"||m==="gwr");console.log("[League] Data fetch:",{isApiTestLeague:re,tab:m,useTestFixtures:pe,leagueName:n?.name});let ye=m==="gwr"?R:N;if(re&&(m==="gw"||m==="gwr")&&(ye=1),console.log("[League] gwForData:",ye,"memberIds:",Pt),!ye&&!pe){Yt([]),Vt([]),Gt([]),Be([]);return}let _e;if(pe){const{data:Ke}=await z.from("test_api_fixtures").select("id,test_gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,kickoff_time,api_match_id").eq("test_gw",1).order("fixture_index",{ascending:!0});_e=Ke?.map(ce=>({...ce,gw:ce.test_gw}))||null}else{const{data:Ke}=await z.from("fixtures").select("id,gw,fixture_index,home_team,away_team,home_code,away_code,home_name,away_name,kickoff_time,api_match_id").eq("gw",ye).order("fixture_index",{ascending:!0});_e=Ke}if(!U)return;if(Yt(_e??[]),!Pt.length){Vt([]),Gt([]),Be([]);return}let de,ne;if(pe){const{data:Ke}=await z.from("test_api_picks").select("user_id,matchday,fixture_index,pick").eq("matchday",1).in("user_id",Pt);de=Ke?.map(Ae=>({...Ae,gw:Ae.matchday}))||null;const{data:ce,error:De}=await z.from("test_api_submissions").select("user_id,matchday,submitted_at").eq("matchday",1).in("user_id",Pt);De&&console.error("Error fetching test_api_submissions:",De),ne=ce?.map(Ae=>({...Ae,gw:Ae.matchday}))||null,console.log("Test API submissions fetched:",ne)}else{const{data:Ke}=await z.from("picks").select("user_id,gw,fixture_index,pick").eq("gw",ye).in("user_id",Pt);de=Ke;const{data:ce}=await z.from("gw_submissions").select("user_id,gw,submitted_at").eq("gw",ye).in("user_id",Pt);ne=ce}if(!U)return;Vt(de??[]),Gt(ne??[]);const{data:we}=await z.from("gw_results").select("gw,fixture_index,result").eq("gw",pe?1:ye||0);U&&Be(we??[])})(),()=>{U=!1}},[m,N,j,R,Pt]);const nt=async(U,re)=>{try{console.log("[League] fetchLiveScore called for matchId:",U,"kickoffTime:",re);const{data:pe,error:ye}=await z.from("live_scores").select("*").eq("api_match_id",U).single();if(ye)return ye.code==="PGRST116"?(console.log("[League] No live score found in Supabase for match",U,"- scheduled function may not have run yet"),null):(console.error("[League] Error fetching live score from Supabase:",ye),null);if(!pe)return console.warn("[League] No live score data in Supabase"),null;console.log("[League] Live score from Supabase:",pe);const _e=pe.home_score??0,de=pe.away_score??0,ne=pe.status||"SCHEDULED";let we=pe.minute;if(we==null&&(ne==="IN_PLAY"||ne==="PAUSED")&&re)try{const ce=new Date(re),Ae=Math.floor((new Date().getTime()-ce.getTime())/(1e3*60));Ae>0&&Ae<120&&(ne==="PAUSED"?we=null:ne==="IN_PLAY"&&(Ae<=50?we=Ae:we=46+Math.max(0,Ae-50)))}catch(ce){console.warn("[League] Error calculating minute from kickoff time:",ce)}const Ke={homeScore:_e,awayScore:de,status:ne,minute:we,retryAfter:null};return console.log("[League] Returning score data from Supabase:",Ke),Ke}catch(pe){return console.error("[League] Error fetching live score from Supabase:",pe?.message||pe,pe?.stack),null}};x.useEffect(()=>{if(!Bt.length||m!=="gwr")return;const U=Bt.filter(pe=>pe.api_match_id);if(U.length===0)return;(async()=>{console.log("[League] Loading existing live scores from Supabase for",U.length,"fixtures");const pe=U.map(async _e=>{const de=await nt(_e.api_match_id,_e.kickoff_time);return de?{fixtureIndex:_e.fixture_index,scoreData:de}:null}),ye=await Promise.all(pe);ae(_e=>{const de={..._e};return ye.forEach(ne=>{ne&&(de[ne.fixtureIndex]={homeScore:ne.scoreData.homeScore,awayScore:ne.scoreData.awayScore,status:ne.scoreData.status,minute:ne.scoreData.minute??null})}),de}),console.log("[League] Loaded",ye.filter(_e=>_e!==null).length,"existing live scores")})()},[Bt.map(U=>`${U.fixture_index}-${U.api_match_id}`).join(","),m]),x.useEffect(()=>{if(!Bt.length||m!=="gwr")return;const U=Bt.slice(0,3).filter(de=>de.api_match_id&&de.kickoff_time);if(U.length===0)return;const re=new Map,pe=de=>{const ne=de.fixture_index;if(re.has(ne))return;const we=async()=>{const ce=await nt(de.api_match_id,de.kickoff_time);if(!ce)return;const De=ce.status==="FINISHED";if(ae(Ae=>({...Ae,[ne]:{homeScore:ce.homeScore,awayScore:ce.awayScore,status:ce.status,minute:ce.minute??null}})),De){const Ae=re.get(ne);Ae&&(clearInterval(Ae),re.delete(ne))}};we();const Ke=setInterval(we,10*1e3);re.set(ne,Ke)},ye=()=>{const de=new Date;U.forEach(ne=>{if(!ne.api_match_id||!ne.kickoff_time)return;const we=ne.fixture_index,ce=new Date(ne.kickoff_time).getTime()<=de.getTime(),De=re.has(we),Ue=W[we]?.status==="FINISHED";if(Ue&&De){console.log(`[League] Stopping polling for fixture ${we} (finished)`);const je=re.get(we);je&&(clearInterval(je),re.delete(we));return}ce&&!Ue&&!De&&pe(ne)})};ye();const _e=setInterval(ye,6e4);return()=>{re.forEach(clearInterval),clearInterval(_e)}},[n?.name,Bt.map(U=>U.api_match_id).join(","),m,W]),x.useEffect(()=>{if(w||!Bt.length||m!=="chat")return;const re=n?.name==="API Test"?!0:R===N||R===null;if(!re){v(!0);return}const pe=new Date,ye=Bt[0],_e=ye?.kickoff_time?new Date(ye.kickoff_time):null,de=_e&&_e<=pe,ne=Bt[Bt.length-1],we=ne?.kickoff_time?new Date(ne.kickoff_time):null,Ke=ne?.fixture_index,ce=Ke!==void 0?W[Ke]:null,De=ce?.status==="FINISHED";let Ae=!1;if(De&&we){const je=new Date(we.getTime()+72e5),ft=(pe.getTime()-je.getTime())/(1e3*60*60);Ae=ft<=12&&ft>=0}const Ue=Object.values(W).some(je=>je.status==="IN_PLAY"||je.status==="PAUSED");(de||Ae||Ue)&&(console.log("[League] Setting default tab to GW Results:",{firstGameStarted:de,lastGameFinishedWithin12Hours:Ae,hasLiveGame:Ue,lastFixtureScore:ce?.status,viewingCurrentGw:re}),g("gwr")),v(!0)},[Bt,W,w,m,N,R,n?.name]);const yt=x.useMemo(()=>{const U=new Map;return console.log("Building submittedMap from subs:",mA),mA.forEach(re=>{const pe=`${re.user_id}:${re.gw}`;console.log(`Adding submission key: ${pe}`,re),U.set(pe,!0)}),console.log("Final submittedMap:",Array.from(U.entries())),U},[mA]);x.useEffect(()=>{let U=!0;return(async()=>{if(!o.length){Me([]);return}if(n?.name==="API Test"){Me(o.map(qe=>({user_id:qe.id,name:qe.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}))),ke(!1);return}if(N===null)return;ke(!0);const{data:re}=await z.from("gw_results").select("gw,fixture_index,result"),pe=re??[],ye=new Map;if(pe.forEach(qe=>{const J=Pu(qe);J&&ye.set(`${qe.gw}:${qe.fixture_index}`,J)}),ye.size===0){Me(o.map(qe=>({user_id:qe.id,name:qe.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}))),ke(!1);return}const _e=[...new Set(Array.from(ye.keys()).map(qe=>parseInt(qe.split(":")[0],10)))].sort((qe,J)=>qe-J),de=["Prem Predictions","FC Football","Easy League"],ne=["The Bird league"],we=await vC(n,N),Ke=_e.filter(qe=>qe>=we);if(!de.includes(n?.name||"")&&!ne.includes(n?.name||"")&&Ke.length===0){Me(o.map(qe=>({user_id:qe.id,name:qe.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}))),ke(!1);return}const{data:ce}=await z.from("picks").select("user_id,gw,fixture_index,pick").in("user_id",o.map(qe=>qe.id)).in("gw",Ke),De=ce??[],Ae=new Map;Ke.forEach(qe=>{const J=new Map;o.forEach(ge=>J.set(ge.id,{user_id:ge.id,score:0,unicorns:0})),Ae.set(qe,J)}),Ke.forEach(qe=>{Array.from(ye.entries()).filter(([ge])=>parseInt(ge.split(":")[0],10)===qe).map(([ge,tt])=>({idx:parseInt(ge.split(":")[1],10),out:tt})).forEach(({idx:ge,out:tt})=>{const ot=De.filter(Lt=>Lt.gw===qe&&Lt.fixture_index===ge),nA=ot.filter(Lt=>Lt.pick===tt).map(Lt=>Lt.user_id),It=Ae.get(qe);if(ot.forEach(Lt=>{if(Lt.pick===tt){const _t=It.get(Lt.user_id);_t.score+=1}}),nA.length===1&&o.length>=3){const Lt=nA[0],_t=It.get(Lt);_t.unicorns+=1}})});const Ue=new Map,je=new Map,ft=new Map,xt=new Map,jt=new Map,zt=new Map;o.forEach(qe=>{Ue.set(qe.id,0),je.set(qe.id,0),ft.set(qe.id,0),xt.set(qe.id,0),jt.set(qe.id,0),zt.set(qe.id,[])}),Ke.forEach(qe=>{const J=Array.from(Ae.get(qe).values());if(J.forEach(ot=>{je.set(ot.user_id,(je.get(ot.user_id)??0)+ot.score),ft.set(ot.user_id,(ft.get(ot.user_id)??0)+ot.unicorns)}),J.sort((ot,nA)=>nA.score-ot.score||nA.unicorns-ot.unicorns),!J.length)return;const ge=J[0],tt=J.filter(ot=>ot.score===ge.score&&ot.unicorns===ge.unicorns);tt.length===1?(Ue.set(ge.user_id,(Ue.get(ge.user_id)??0)+3),xt.set(ge.user_id,(xt.get(ge.user_id)??0)+1),zt.get(ge.user_id).push("W"),J.slice(1).forEach(ot=>zt.get(ot.user_id).push("L"))):(tt.forEach(ot=>{Ue.set(ot.user_id,(Ue.get(ot.user_id)??0)+1),jt.set(ot.user_id,(jt.get(ot.user_id)??0)+1),zt.get(ot.user_id).push("D")}),J.filter(ot=>!tt.find(nA=>nA.user_id===ot.user_id)).forEach(ot=>zt.get(ot.user_id).push("L")))});const Rt=o.map(qe=>({user_id:qe.id,name:qe.name,mltPts:Ue.get(qe.id)??0,ocp:je.get(qe.id)??0,unicorns:ft.get(qe.id)??0,wins:xt.get(qe.id)??0,draws:jt.get(qe.id)??0,form:zt.get(qe.id)??[]}));Rt.sort((qe,J)=>J.mltPts-qe.mltPts||J.unicorns-qe.unicorns||J.ocp-qe.ocp||qe.name.localeCompare(J.name)),U&&(Me(Rt),ke(!1))})(),()=>{U=!1}},[o,n,N]);function Oe(){const U=ne=>{const we=ne.slice(-5),Ke=5-we.length;return i.jsxs("div",{className:"flex items-center justify-between w-full",children:[Array.from({length:Ke}).map((ce,De)=>i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-200"},`dot-${De}`)),we.map((ce,De)=>i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${ce==="W"?"bg-green-100 text-green-700":ce==="D"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:ce},De))]})},re=["Prem Predictions","FC Football","Easy League"],pe=["The Bird league"],ye=["gregVjofVcarl","Let Down"],_e=n&&!re.includes(n.name)&&!pe.includes(n.name)&&!ye.includes(n.name),de=Se.length?Se:o.map(ne=>({user_id:ne.id,name:ne.name,mltPts:0,ocp:0,unicorns:0,wins:0,draws:0,form:[]}));return o.length===1?i.jsxs("div",{className:"text-center p-8 bg-white rounded-xl border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Invite at least one more user to make the ML start"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Share your league code with friends to get the competition going!"}),i.jsx("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-[#1C8376] text-white font-semibold rounded-lg hover:bg-emerald-700 transition-colors",children:"Share League Code"})]}):i.jsxs("div",{className:"pt-4",children:[i.jsx("style",{children:`
          .mlt-table tbody tr:last-child {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table tbody tr:last-child td {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table tbody tr:last-child th {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table {
            border-bottom: none !important;
          }
          .mlt-table tbody {
            border-bottom: none !important;
          }
          .mlt-table-container {
            border-bottom: none !important;
          }
          .mlt-table-container table {
            border-bottom: none !important;
          }
          .mlt-table-container tbody {
            border-bottom: none !important;
          }
          .mlt-table-container tbody tr:last-child {
            border-bottom: none !important;
            border: none !important;
          }
          .mlt-table-container tbody tr:last-child td {
            border-bottom: none !important;
            border: none !important;
          }
        `}),i.jsx("div",{className:"mlt-table-container overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x bg-slate-50",style:{backgroundColor:"#f8fafc",borderBottom:"none",boxShadow:"none"},children:i.jsxs("table",{className:"mlt-table w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc",border:"none",borderBottom:"none"},children:[i.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:i.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[i.jsx("th",{className:"py-3 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),i.jsx("th",{className:"py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:"Player"}),y?i.jsx("th",{className:"px-4 py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8"},children:"Form"}):i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"W"}),i.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"D"}),i.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:_e?"CP":"OCP"}),o.length>=3&&i.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""}),i.jsx("th",{className:"py-3 text-center font-normal text-xs",style:{backgroundColor:"#f8fafc",width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"0.75rem"},children:"PTS"})]})]})}),i.jsxs("tbody",{children:[de.map((ne,we)=>{const Ke=ne.user_id===e?.id,ce=we===de.length-1;return i.jsxs("tr",{className:Ke?"flash-user-row":"",style:{position:"relative",backgroundColor:"#f8fafc",...ce?{}:{borderBottom:"1px solid #e2e8f0"}},children:[i.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:we+1}),i.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:ne.name}),y?i.jsx("td",{className:"px-4 py-4",style:{backgroundColor:"#f8fafc"},children:U(ne.form)}):i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:ne.wins}),i.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:ne.draws}),i.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:ne.ocp}),o.length>=3&&i.jsx("td",{className:"py-4 text-center tabular-nums",style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:ne.unicorns}),i.jsx("td",{className:"py-4 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:ne.mltPts})]})]},ne.user_id)}),Pe&&i.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:i.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:y?3:o.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"Calculating"})}),!Pe&&!Se.length&&i.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:i.jsx("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:y?3:o.length>=3?7:6,style:{backgroundColor:"#f8fafc"},children:"No gameweeks completed yet  this will populate after the first results are saved."})})]})]})}),i.jsx("div",{className:"mt-6 flex justify-between items-center",children:i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("div",{className:"inline-flex rounded-full bg-slate-100 p-0.5 shadow-sm border border-slate-200",children:[i.jsx("button",{onClick:()=>C(!1),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${y?"text-slate-600 hover:text-slate-900 hover:bg-white/50":"bg-[#1C8376] text-white shadow-sm"}`,children:"Points"}),i.jsx("button",{onClick:()=>C(!0),className:`px-3 py-1.5 text-xs font-semibold rounded-full transition-colors ${y?"bg-[#1C8376] text-white shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"Form"})]}),i.jsxs("button",{onClick:()=>{console.log("Button clicked, setting modal to true"),Q(!0)},className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[i.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),i.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})})]})}function me(){const U=n?.name==="API Test"?1:N;if(!U)return i.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No current game week available."});if(!Cg(n,U,ct))return i.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Predictions Available"}),i.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),i.jsxs("div",{className:"text-sm",children:["GW",U," predictions are not included in this league."]})]})});const re=new Map;xe.forEach(Ae=>{if(Ae.gw!==U)return;const Ue=Pu(Ae);Ue&&re.set(Ae.fixture_index,Ue)});const pe=x.useMemo(()=>{const Ae=ft=>{if(!ft)return"Fixtures";const xt=new Date(ft);return isNaN(xt.getTime())?"Fixtures":xt.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})},Ue=new Map;Bt.filter(ft=>ft.gw===U).forEach(ft=>{const xt=Ae(ft.kickoff_time),jt=ft.kickoff_time?new Date(ft.kickoff_time).getTime():Number.MAX_SAFE_INTEGER;Ue.has(xt)||Ue.set(xt,{label:xt,key:jt,items:[]}),Ue.get(xt).items.push(ft)});const je=Array.from(Ue.values());return je.forEach(ft=>ft.items.sort((xt,jt)=>xt.fixture_index-jt.fixture_index)),je.sort((ft,xt)=>ft.key-xt.key),je},[Bt,U]),ye=new Map;Wt.forEach(Ae=>{if(Ae.gw!==U||!yt.get(`${Ae.user_id}:${U}`))return;const je=ye.get(Ae.fixture_index)??[];je.push(Ae),ye.set(Ae.fixture_index,je)});const _e=o.length>0&&o.every(Ae=>yt.get(`${Ae.id}:${U}`)),de=j!==null&&j>=U,ne=o.filter(Ae=>!yt.get(`${Ae.id}:${U}`)).length,we=o.filter(Ae=>!yt.get(`${Ae.id}:${U}`)).map(Ae=>Ae.name),Ke=ct.get(U),ce=Ke?new Date>=Ke:!1;console.log(`GW${U} deadline check:`,{gwDeadline:Ke,now:new Date,deadlinePassed:ce,allSubmitted:_e,willShowPredictions:_e||ce});const De=n?.name==="API Test"?!_e:!_e&&!ce;return i.jsxs("div",{className:"mt-2 pt-2",children:[De?i.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-700",children:[i.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[i.jsx("div",{children:_e?i.jsxs(i.Fragment,{children:["All ",o.length," members have submitted."]}):i.jsxs(i.Fragment,{children:["Waiting for ",i.jsx("span",{className:"font-semibold",children:ne})," of ",o.length," to submit."]})}),!_e&&i.jsxs("button",{onClick:()=>{const Ae=`Game Week ${U} Predictions Reminder!

DEADLINE: THIS ${(()=>{const je=new Date(Bt.find(tt=>tt.gw===U)?.kickoff_time||""),ft=new Date(je.getTime()-4500*1e3),xt=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],jt=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],zt=xt[ft.getUTCDay()],Rt=ft.getUTCDate(),qe=jt[ft.getUTCMonth()],J=ft.getUTCHours().toString().padStart(2,"0"),ge=ft.getUTCMinutes().toString().padStart(2,"0");return`${zt} ${Rt} ${qe}, ${J}:${ge} BST`})()}

Don't forget!
playtotl.com`,Ue=`https://wa.me/?text=${encodeURIComponent(Ae)}`;try{window.open(Ue,"_blank")}catch{navigator.clipboard.writeText(Ae).then(()=>{alert("Message copied to clipboard! You can now paste it in WhatsApp or Messages.")}).catch(()=>{alert(`Unable to open WhatsApp. Please copy this message manually:

`+Ae)})}},className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"Share Reminder"]})]}),(()=>{const Ae=Bt.map(ot=>ot.kickoff_time).filter(ot=>!!ot).map(ot=>new Date(ot)).filter(ot=>!isNaN(ot.getTime()));if(Ae.length===0)return null;const Ue=new Date(Math.min(...Ae.map(ot=>ot.getTime()))),je=new Date(Ue.getTime()-4500*1e3),ft=new Date>=je,xt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],jt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zt=xt[je.getUTCDay()],Rt=je.getUTCDate(),qe=jt[je.getUTCMonth()],J=je.getUTCHours().toString().padStart(2,"0"),ge=je.getUTCMinutes().toString().padStart(2,"0"),tt=`${zt} ${Rt} ${qe}, ${J}:${ge} BST`;return i.jsxs("div",{className:`mb-3 text-sm ${ft?"text-orange-600 font-semibold":"text-slate-600"}`,children:[ft?" Deadline Passed: ":" Deadline: ",tt]})})(),i.jsx("div",{className:"overflow-hidden rounded-lg border",children:i.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 w-2/3 font-semibold text-slate-600",children:"Player"}),i.jsx("th",{className:"text-left px-4 py-3 font-semibold text-slate-600",children:"Status"})]})}),i.jsx("tbody",{children:o.slice().sort((Ae,Ue)=>Ae.name.localeCompare(Ue.name)).map(Ae=>{const Ue=`${Ae.id}:${U}`,je=!!yt.get(Ue);return Ae.name==="Jof"&&console.log(`Checking Jof submission: key=${Ue}, submitted=${je}, submittedMap has:`,yt.has(Ue),"picksGw=",U),i.jsxs("tr",{className:"border-t border-slate-200",children:[i.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 truncate whitespace-nowrap",style:{overflow:"hidden",textOverflow:"ellipsis"},children:Ae.name}),i.jsx("td",{className:"px-4 py-3",children:je?i.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-xs px-2 py-1 border border-emerald-300 font-bold shadow-sm whitespace-nowrap w-24",children:" Submitted"}):i.jsx("span",{className:"inline-flex items-center justify-center rounded-full bg-amber-50 text-amber-700 text-xs px-2 py-1 border border-amber-200 font-semibold whitespace-nowrap w-24",children:" Not yet"})})]},Ae.id)})})]})})]}):null,n?.name==="API Test"&&_e&&pe.length>0&&(()=>{const Ae=W,Ue=pe.flatMap(jt=>jt.items).slice(0,3),je=Ue.some(jt=>{const zt=Ae[jt.fixture_index];return zt&&(zt.status==="IN_PLAY"||zt.status==="PAUSED")}),ft=Ue.length>0&&Ue.every(jt=>{const zt=Ae[jt.fixture_index];return zt&&zt.status==="FINISHED"}),xt=je||ft||Ue.some(jt=>Ae[jt.fixture_index]);return i.jsx("div",{className:"mt-3 space-y-6",children:pe.map((jt,zt)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"text-slate-700 font-normal text-lg",children:jt.label}),zt===0&&i.jsxs(i.Fragment,{children:[je&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-red-600 text-white text-sm font-bold border border-red-700 shadow-sm",style:{marginTop:"-2px"},children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"LIVE"]}),ft&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),!xt&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"})]})]}),i.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:i.jsxs("ul",{children:[jt.items.map((Rt,qe)=>{try{const J=Rt.home_name||Rt.home_team||"Home",ge=Rt.away_name||Rt.away_team||"Away",tt=(Rt.home_code||Rt.home_name||Rt.home_team||"").toUpperCase(),ot=(Rt.away_code||Rt.away_name||Rt.away_team||"").toUpperCase(),It=(vA=>{if(!vA)return"";const cr=new Date(vA);if(isNaN(cr.getTime()))return"";const WA=String(cr.getUTCHours()).padStart(2,"0"),Ht=String(cr.getUTCMinutes()).padStart(2,"0");return`${WA}:${Ht}`})(Rt.kickoff_time),Lt=Rt.fixture_index,_t=ye.get(Lt)??[],St=Ae[Lt],Rr=St&&St.status==="IN_PLAY",Jr=St&&(St.status==="PAUSED"||St.status==="HALF_TIME"||St.status==="HT"),lr=St&&St.status==="FINISHED",OA=Rr||Jr,Cr=vA=>{const cr=_t.filter(ur=>ur.pick===vA);let WA=null;n?.name==="API Test"&&U===1?St&&(St.homeScore>St.awayScore?WA="H":St.awayScore>St.homeScore?WA="A":St.homeScore===St.awayScore&&(WA="D")):WA=re.get(Lt)||null;const Ht=_t.length===o.length&&cr.length===o.length,fn=4,hn=[];for(let ur=0;ur<cr.length;ur+=fn){const vs=cr.slice(ur,ur+fn);hn.push(vs)}return i.jsx("div",{className:"flex flex-col gap-1",children:hn.map((ur,vs)=>i.jsx("div",{className:"flex items-center justify-center",children:ur.map((Bs,yi)=>{const bi=o.find(_r=>_r.id===Bs.user_id),Wn=Eg(bi?.name??"?"),Er=WA&&WA===vA?!0:null;return Ht?i.jsx("span",{className:"inline-block",style:{marginLeft:yi>0?"-8px":"0",position:"relative",zIndex:yi},children:i.jsx(Mo,{letter:Wn,correct:Er,unicorn:!1,finished:lr})},Bs.user_id):i.jsx(Mo,{letter:Wn,correct:Er,unicorn:!1,finished:lr},Bs.user_id)})},vs))})};return i.jsx("li",{className:qe>0?"border-t":"",children:i.jsxs("div",{className:"p-4 bg-white relative",children:[(Rr||Jr)&&i.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-bold text-red-600",children:"LIVE"})]}),lr&&!Rr&&!Jr&&i.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"FT"})}),i.jsxs("div",{className:`grid grid-cols-3 items-center ${OA?"pt-4":""}`,children:[i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:J})}),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[tt&&i.jsx("img",{src:`/assets/badges/${tt}.png`,alt:`${J} badge`,className:"h-6 w-6 object-contain",onError:vA=>{vA.currentTarget.style.opacity="0.35"}}),i.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:St&&(Rr||Jr||lr)?i.jsxs("span",{className:"font-bold text-base text-slate-900",children:[St.homeScore," - ",St.awayScore]}):i.jsx("span",{children:It})}),ot&&i.jsx("img",{src:`/assets/badges/${ot}.png`,alt:`${ge} badge`,className:"h-6 w-6 object-contain",onError:vA=>{vA.currentTarget.style.opacity="0.35"}})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:ge})})]}),St&&(OA||lr)&&i.jsx("div",{className:"flex justify-center mt-1",children:i.jsx("span",{className:`text-[10px] font-semibold ${OA?"text-red-600":"text-slate-500"}`,children:BC(St.status,St.minute)})}),i.jsxs("div",{className:"mt-2 grid grid-cols-3",children:[i.jsx("div",{className:"relative min-h-6",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Cr("H")})}),i.jsx("div",{className:"relative min-h-6",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Cr("D")})}),i.jsx("div",{className:"relative min-h-6",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:Cr("A")})})]})]})},`${Rt.gw}-${Rt.fixture_index}`)}catch(J){return console.error("Error rendering fixture:",J,Rt),i.jsxs("li",{className:"p-4 text-red-500",children:["Error loading fixture: ",Rt.fixture_index]},`${Rt.gw}-${Rt.fixture_index}`)}}),!jt.items.length&&i.jsx("li",{className:"p-4 text-slate-500",children:"No fixtures."})]})})]},zt))})})(),pe.length>0&&n?.name!=="API Test"&&i.jsx("div",{className:"mt-3 space-y-6",children:pe.map((Ae,Ue)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"text-slate-700 font-normal text-lg",children:Ae.label}),Ue===0&&_e&&de&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1C8376]/10 text-[#1C8376]/90 text-sm font-bold border border-emerald-300 shadow-sm",style:{marginTop:"-2px"},children:"Round Complete!"}),Ue===0&&_e&&!de&&i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold border border-blue-300 shadow-sm",style:{marginTop:"-2px"},children:"All Submitted"}),Ue===0&&ce&&!_e&&i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-orange-100 text-orange-800 text-sm font-bold border border-orange-300 shadow-sm",style:{marginTop:"-2px"},children:["Deadline Passed ",we.length>0&&`(${we.join(", ")} didn't submit)`]})]}),i.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden",children:i.jsxs("ul",{children:[Ae.items.map((je,ft)=>{try{const xt=je.home_name||je.home_team||"Home",jt=je.away_name||je.away_team||"Away",zt=je.home_code||"",Rt=je.away_code||"",J=(Lt=>{if(!Lt)return"";const _t=new Date(Lt);if(isNaN(_t.getTime()))return"";const St=String(_t.getUTCHours()).padStart(2,"0"),Rr=String(_t.getUTCMinutes()).padStart(2,"0");return`${St}:${Rr}`})(je.kickoff_time),ge=je.fixture_index,tt=ye.get(ge)??[],ot=Lt=>{const _t=tt.filter(OA=>OA.pick===Lt),St=re.get(ge),Rr=tt.length===o.length&&_t.length===o.length,Jr=4,lr=[];for(let OA=0;OA<_t.length;OA+=Jr){const Cr=_t.slice(OA,OA+Jr);lr.push(Cr)}return i.jsx("div",{className:"flex flex-col gap-1",children:lr.map((OA,Cr)=>i.jsx("div",{className:"flex items-center justify-center",children:OA.map((vA,cr)=>{const WA=o.find(hn=>hn.id===vA.user_id),Ht=Eg(WA?.name??"?"),fn=St?St===Lt:null;return Rr?i.jsx("span",{className:"inline-block",style:{marginLeft:cr>0?"-8px":"0",position:"relative",zIndex:cr},children:i.jsx(Mo,{letter:Ht,correct:fn,unicorn:!1,finished:!0})},vA.user_id):i.jsx(Mo,{letter:Ht,correct:fn,unicorn:!1,finished:!0},vA.user_id)})},Cr))})},nA=`/assets/badges/${zt.toUpperCase()}.png`,It=`/assets/badges/${Rt.toUpperCase()}.png`;return i.jsx("li",{className:ft>0?"border-t":"",children:i.jsxs("div",{className:"p-4 bg-white",children:[i.jsxs("div",{className:"grid grid-cols-3 items-center",children:[i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:xt})}),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("img",{src:nA,alt:`${xt} badge`,className:"h-6 w-6"}),i.jsx("div",{className:"text-[15px] sm:text-base font-semibold text-slate-600",children:J}),i.jsx("img",{src:It,alt:`${jt} badge`,className:"h-6 w-6"})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("span",{className:"text-sm sm:text-base font-medium text-slate-900 truncate",children:jt})})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-3",children:[i.jsx("div",{className:"relative min-h-6",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:ot("H")})}),i.jsx("div",{className:"relative min-h-6",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:ot("D")})}),i.jsx("div",{className:"relative min-h-6",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:ot("A")})})]})]})},`${je.gw}-${je.fixture_index}`)}catch(xt){return console.error("Error rendering fixture:",xt,je),i.jsxs("li",{className:"p-4 text-red-500",children:["Error loading fixture: ",je.fixture_index]},`${je.gw}-${je.fixture_index}`)}}),!Ae.items.length&&i.jsx("li",{className:"p-4 text-slate-500",children:"No fixtures."})]})})]},Ue))}),!pe.length&&!De&&i.jsxs("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-500",children:["No fixtures for GW ",U,"."]})]})}function X(){const U=n?.name==="API Test"?1:R;if(!U||H.length===0&&n?.name!=="API Test")return i.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:"No game week selected."});if(!Cg(n,U,ct))return i.jsx("div",{className:"mt-3 rounded-2xl border bg-white shadow-sm p-4 text-slate-600",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-semibold mb-2",children:"No Results Available"}),i.jsx("div",{className:"text-sm",children:"This league started from a later gameweek."}),i.jsxs("div",{className:"text-sm",children:["GW",U," results are not included in this league."]})]})});const re=new Map,pe=n?.name==="API Test";pe&&U===1?Bt.slice(0,3).forEach(De=>{const Ae=W[De.fixture_index];Ae&&(Ae.status==="IN_PLAY"||Ae.status==="PAUSED"||Ae.status==="FINISHED")&&(Ae.homeScore>Ae.awayScore?re.set(De.fixture_index,"H"):Ae.awayScore>Ae.homeScore?re.set(De.fixture_index,"A"):re.set(De.fixture_index,"D"))}):xe.forEach(ce=>{if(ce.gw!==U)return;const De=Pu(ce);De&&re.set(ce.fixture_index,De)});const ye=o.map(ce=>({user_id:ce.id,name:ce.name,score:0,unicorns:0})),_e=new Map;Wt.forEach(ce=>{if(ce.gw!==U)return;const De=_e.get(ce.fixture_index)??[];De.push(ce),_e.set(ce.fixture_index,De)}),Array.from(re.entries()).forEach(([ce,De])=>{const Ue=(_e.get(ce)??[]).filter(je=>je.pick===De).map(je=>je.user_id);if(Ue.forEach(je=>{const ft=ye.find(xt=>xt.user_id===je);ft.score+=1}),Ue.length===1&&o.length>=3){const je=ye.find(ft=>ft.user_id===Ue[0]);je.unicorns+=1}}),ye.sort((ce,De)=>De.score-ce.score||De.unicorns-ce.unicorns||ce.name.localeCompare(De.name)),x.useEffect(()=>{if(ye.length===0)return;const ce=new Map;ye.forEach((Ae,Ue)=>{ce.set(Ae.user_id,Ue)});const De=new Set;if(ce.forEach((Ae,Ue)=>{const je=fe.current.get(Ue);je!==void 0&&je!==Ae&&De.add(Ue)}),fe.current=ce,De.size>0){ue(De);const Ae=setTimeout(()=>{ue(new Set)},2e3);return()=>clearTimeout(Ae)}},[ye.map(ce=>`${ce.user_id}-${ce.score}-${ce.unicorns}`).join(",")]);let de=!1,ne=!1,we=!1,Ke=!1;if(pe&&U===1){const ce=Bt.slice(0,3);if(ce.length>0&&(de=ce.every(Ae=>{const Ue=W[Ae.fixture_index];return Ue&&Ue.status==="FINISHED"}),ne=!!ce.find(Ae=>{const Ue=W[Ae.fixture_index];return Ue&&(Ue.status==="IN_PLAY"||Ue.status==="PAUSED")}),Ke=ce.some(Ae=>{const Ue=W[Ae.fixture_index];return Ue&&(Ue.status==="IN_PLAY"||Ue.status==="PAUSED"||Ue.status==="FINISHED")}),!de)){const Ae=new Date;we=ce.some(Ue=>{if(!Ue.kickoff_time)return!1;const ft=new Date(Ue.kickoff_time).getTime()-Ae.getTime(),xt=W[Ue.fixture_index];return(!xt||xt.status!=="IN_PLAY"&&xt.status!=="PAUSED"&&xt.status!=="FINISHED")&&ft>0&&ft<=1440*60*1e3})}}else{const ce=Bt.filter(De=>De.gw===U);ce.length>0&&(de=ce.every(De=>re.has(De.fixture_index)))}return i.jsxs("div",{children:[i.jsx("style",{children:`
          @keyframes flash {
            0%, 100% {
              background-color: rgb(209, 250, 229);
            }
            25% {
              background-color: rgb(167, 243, 208);
            }
            50% {
              background-color: rgb(209, 250, 229);
            }
            75% {
              background-color: rgb(167, 243, 208);
            }
          }
          @keyframes pulse-score {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.7;
            }
          }
          @keyframes position-change {
            0% {
              background-color: rgb(254, 243, 199);
            }
            50% {
              background-color: rgb(253, 230, 138);
            }
            100% {
              background-color: transparent;
            }
          }
          .flash-user-row {
            animation: flash 1.5s ease-in-out 3;
          }
          .pulse-live-score {
            animation: pulse-score 2s ease-in-out infinite;
          }
          .position-changed {
            animation: position-change 1.5s ease-out;
          }
          .full-width-header-border::after {
            content: '';
            position: absolute;
            left: -1rem;
            right: -1rem;
            bottom: 0;
            height: 1px;
            background-color: #cbd5e1;
            z-index: 1;
          }
        `}),ye.length>0&&de&&i.jsx("div",{className:"mt-4 mb-4 py-6 px-6 rounded-xl bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 shadow-2xl shadow-slate-600/50 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/40 before:to-transparent before:animate-[shimmer_2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/30 after:to-transparent after:animate-[shimmer_2.5s_ease-in-out_infinite_0.6s]",children:i.jsx("div",{className:"text-center relative z-10",children:ye[0].score===ye[1]?.score&&ye[0].unicorns===ye[1]?.unicorns?i.jsx("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:" It's a Draw!"}):i.jsxs("div",{className:"text-lg font-bold text-white break-words whitespace-normal px-2 leading-normal",children:[ye[0].name," Wins!"]})})}),i.jsx("div",{className:"overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x border-b border-slate-200 bg-slate-50 shadow-sm",style:{backgroundColor:"#f8fafc"},children:i.jsxs("table",{className:"w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc"},children:[i.jsx("thead",{className:"sticky top-0",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:i.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"none"},children:[i.jsx("th",{className:"py-4 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"30px",paddingLeft:"0.75rem",paddingRight:"0.5rem",color:"#94a3b8"},children:"#"}),i.jsx("th",{className:"py-4 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#94a3b8",paddingLeft:"0.5rem",paddingRight:"1rem"},children:i.jsxs("div",{className:"flex items-center gap-2",children:["Player",pe&&ne&&i.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-red-600 text-white shadow-md shadow-red-500/30",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),i.jsx("span",{className:"text-[10px] font-medium",children:"LIVE"})]}),pe&&!de&&we&&!ne&&i.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500 text-white shadow-md shadow-amber-500/30",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-[10px] font-medium",children:Ke?"Next Game Starting Soon":"Starting soon"})]})]})}),i.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8"},children:"Score"}),o.length>=3&&i.jsx("th",{className:"py-4 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",color:"#94a3b8",fontSize:"1rem"},children:""})]})}),i.jsxs("tbody",{children:[ye.map((ce,De)=>{const Ae=ce.user_id===e?.id,Ue=De===ye.length-1,je=P.has(ce.user_id);return i.jsxs("tr",{className:`${Ae?"flash-user-row":""} ${je?"position-changed":""}`,style:{position:"relative",backgroundColor:"#f8fafc",...Ue?{}:{borderBottom:"1px solid #e2e8f0"}},children:[i.jsx("td",{className:"py-4 text-left tabular-nums whitespace-nowrap relative",style:{paddingLeft:"0.75rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc",width:"30px"},children:De+1}),i.jsx("td",{className:"py-4 truncate whitespace-nowrap",style:{backgroundColor:"#f8fafc",paddingLeft:"0.5rem",paddingRight:"1rem",overflow:"hidden",textOverflow:"ellipsis"},children:i.jsxs("div",{className:"flex items-center gap-2",children:[pe&&ne&&i.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full animate-pulse flex-shrink-0",style:{minWidth:"8px",minHeight:"8px"}}),pe&&!ne&&we&&i.jsx("svg",{className:"w-3 h-3 text-amber-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{children:ce.name})]})}),i.jsx("td",{className:`py-4 text-center tabular-nums font-bold ${pe&&ne?"pulse-live-score":""}`,style:{width:"50px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc",color:"#1C8376"},children:ce.score}),o.length>=3&&i.jsx("td",{className:`py-4 text-center tabular-nums ${pe&&ne?"pulse-live-score":""}`,style:{width:"35px",paddingLeft:"0.25rem",paddingRight:"0.25rem",backgroundColor:"#f8fafc"},children:ce.unicorns})]},ce.user_id)}),!ye.length&&i.jsx("tr",{style:{backgroundColor:"#f8fafc"},children:i.jsxs("td",{className:"px-4 py-6 text-slate-500 text-center",colSpan:o.length>=3?4:3,style:{backgroundColor:"#f8fafc"},children:["No results recorded for GW ",U," yet."]})})]})]})}),H.length>1&&i.jsx("div",{className:"mt-6 mb-4 flex flex-col items-center gap-3 px-4",children:i.jsxs("div",{className:"flex items-center justify-center gap-3 w-full max-w-sm",children:[i.jsx("div",{className:"flex-1",children:i.jsx("select",{value:U,onChange:ce=>G(parseInt(ce.target.value,10)),className:"gw-selector w-full bg-white rounded-full border-2 border-slate-300 px-3 py-2 text-xs font-normal text-slate-600 text-center focus:outline-none focus:ring-2 focus:ring-[#1C8376] focus:border-[#1C8376] active:bg-slate-50 transition-colors",style:{fontSize:"12px",minHeight:"40px",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2.5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1em 1em",paddingRight:"2.5rem"},children:H.map(ce=>i.jsxs("option",{value:ce,style:{fontSize:"12px",padding:"0.5rem",fontWeight:"normal",color:"#64748b",textTransform:"uppercase"},children:["GAME WEEK ",ce]},ce))})}),i.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center justify-center gap-1.5 bg-white border-2 border-slate-300 hover:bg-slate-50 rounded-full text-slate-600 hover:text-slate-800 cursor-help transition-colors flex-shrink-0 px-3 py-2",children:[i.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"Rules",className:"w-4 h-4",style:{filter:"invert(40%) sepia(8%) saturate(750%) hue-rotate(180deg) brightness(95%) contrast(88%)"}}),i.jsx("span",{className:"text-sm font-medium",children:"Rules"})]})]})}),K&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>Z(!1),children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:ce=>ce.stopPropagation(),children:[i.jsx("button",{onClick:()=>Z(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsxs("div",{className:"p-6 pt-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Weekly Winner"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-[#1C8376]/10 border border-[#1C8376]/20 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-[#1C8376]/90 mb-3",children:" How to Win the Week:"}),i.jsxs("p",{className:"text-[#1C8376]/80",children:["The player with the ",i.jsx("strong",{children:"most correct predictions"})," wins that gameweek."]})]}),i.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:" Unicorn Rule"}),i.jsxs("p",{className:"text-purple-700",children:["In Mini-Leagues with ",i.jsx("strong",{children:"3 or more players"}),", if you're the ",i.jsx("strong",{children:"only person"})," to correctly predict a fixture, that's a ",i.jsx("strong",{children:" Unicorn"}),". In ties, the player with most ",i.jsx("strong",{children:" Unicorns"})," wins!"]})]})]})]})]})})]})}return x.useEffect(()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"auto"})},[m]),d?i.jsx("div",{className:"max-w-5xl mx-auto px-4 py-10",children:i.jsx("div",{className:"text-slate-500",children:"Loading"})}):!n&&!d?i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-10",children:i.jsxs("div",{className:"rounded border bg-white p-6",children:[i.jsx("div",{className:"font-semibold mb-2",children:"League not found"}),i.jsx(IA,{to:"/leagues",className:"text-slate-600 underline",children:"Back to Mini Leagues"})]})}):n?i.jsxs("div",{className:`${A?"oldschool-theme":"bg-slate-50"}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",maxHeight:"100vh",overflow:"hidden"},children:[i.jsx("style",{children:`
        .league-header-fixed {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          z-index: 50 !important;
          transform: translate3d(0, 0, 0) !important;
          -webkit-transform: translate3d(0, 0, 0) !important;
          will-change: transform !important;
          contain: layout style paint !important;
        }
        .league-header-fixed .relative {
          position: relative !important;
          z-index: 100 !important;
        }
        @supports (height: 100dvh) {
          .league-header-fixed {
            top: env(safe-area-inset-top, 0px) !important;
          }
        }
        .league-content-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
          left: 0;
          right: 0;
          bottom: 0;
          overflow-y: auto;
          overflow-x: hidden;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
          padding-bottom: 2rem;
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .league-content-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
        }
        @media (max-width: 768px) {
          .league-content-wrapper {
            top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px) + 0.5rem);
            padding-bottom: 2rem;
            padding-left: 1rem;
            padding-right: 1rem;
          }
          .league-content-wrapper.has-banner {
            top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px) + 0.5rem);
          }
        }
        /* Chat tab - full height layout */
        .chat-tab-wrapper {
          position: fixed;
          top: calc(3.5rem + 3rem + env(safe-area-inset-top, 0px));
          left: 0;
          right: 0;
          bottom: 0;
          height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          z-index: 10;
          overflow: visible;
          pointer-events: none;
        }
        .chat-tab-wrapper.has-banner {
          top: calc(3.5rem + 3rem + 3.5rem + env(safe-area-inset-top, 0px));
          height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          max-height: calc(100vh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
        }
        .chat-tab-wrapper > * {
          pointer-events: auto;
        }
        @supports (height: 100dvh) {
          .chat-tab-wrapper {
            height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - env(safe-area-inset-top, 0px));
          }
          .chat-tab-wrapper.has-banner {
            height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
            max-height: calc(100dvh - 3.5rem - 3rem - 3.5rem - env(safe-area-inset-top, 0px));
          }
        }
      `}),i.jsx("div",{className:"league-header-fixed bg-white border-b border-slate-200 shadow-sm",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[i.jsxs("div",{className:"flex items-center justify-between h-14",children:[i.jsx(IA,{to:"/leagues",className:"flex items-center text-slate-600 hover:text-slate-900 transition-colors -ml-2 px-2 py-1",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),i.jsx("h1",{className:"text-lg font-normal text-slate-900 truncate flex-1 text-left px-2",children:n.name}),i.jsx("div",{className:"relative",style:{zIndex:100},children:i.jsx("button",{onClick:()=>be(!Te),className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-slate-100 transition-colors -mr-2","aria-label":"Menu",children:i.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]}),i.jsxs("div",{className:"flex border-b border-slate-200 bg-white",children:[i.jsxs("button",{onClick:()=>{v(!0),g("chat")},className:"flex-1 px-3 sm:px-6 py-3 text-sm font-semibold transition-colors relative "+(m==="chat"?"text-[#1C8376]":"text-slate-400"),children:["Chat",m==="chat"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(H.length>0||n?.name==="API Test")&&i.jsxs("button",{onClick:()=>{v(!0),g("gwr")},className:"flex-1 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight flex items-center justify-center gap-1.5 "+(m==="gwr"?"text-[#1C8376]":"text-slate-400"),children:[(()=>{const U=n?.name==="API Test"?1:R||N,re=new Date,pe=Bt[0],ye=pe?.kickoff_time?new Date(pe.kickoff_time):null,_e=ye&&ye<=re,ne=Bt[Bt.length-1]?.fixture_index,Ke=(ne!==void 0?W[ne]:null)?.status==="FINISHED",ce=_e&&!Ke,De=ce?"Live Table":"Results";return i.jsxs(i.Fragment,{children:[ce&&i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse flex-shrink-0"}),i.jsx("span",{className:"hidden sm:inline",children:U?`GW ${U} ${De}`:`GW ${De}`}),i.jsx("span",{className:"sm:hidden whitespace-pre-line text-center",children:U?`GW${U}
${De}`:`GW
${De}`})]})})(),m==="gwr"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),(N||n?.name==="API Test")&&i.jsxs("button",{onClick:()=>{v(!0),g("gw")},className:"flex-1 px-2 sm:px-4 py-3 text-xs font-semibold transition-colors relative leading-tight "+(m==="gw"?"text-[#1C8376]":"text-slate-400"),children:[i.jsx("span",{className:"hidden sm:inline",children:n?.name==="API Test"?"GW 1 Predictions":N?`GW ${N} Predictions`:"GW Predictions"}),i.jsx("span",{className:"sm:hidden whitespace-pre-line",children:n?.name==="API Test"?`GW1
Predictions`:N?`GW${N}
Predictions`:`GW
Predictions`}),m==="gw"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]}),i.jsxs("button",{onClick:()=>{v(!0),g("mlt")},className:"flex-1 px-3 sm:px-6 py-3 text-sm font-semibold transition-colors relative "+(m==="mlt"?"text-[#1C8376]":"text-slate-400"),children:["Table",m==="mlt"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#1C8376]"})]})]})]})}),Te&&typeof document<"u"&&document.body&&OB.createPortal(i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0",onClick:()=>be(!1),style:{backgroundColor:"transparent",zIndex:99998}}),i.jsxs("div",{className:"fixed w-56 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",style:{zIndex:99999,top:"calc(3.5rem + 0.5rem + env(safe-area-inset-top, 0px))",right:"1rem"},children:[dt&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-4 py-3 border-b border-slate-100",children:[i.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Admin:"}),i.jsx("div",{className:"text-sm font-semibold text-slate-800",children:Qe})]}),i.jsx("button",{onClick:()=>{I(!0),be(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Manage"})]}),i.jsx("button",{onClick:()=>{se(!0),be(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:" Invite players"}),i.jsx("button",{onClick:()=>{$e(),be(!1)},className:"w-full text-left px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors border-b border-slate-100",children:"Share league code"}),i.jsx("button",{onClick:()=>{E(!0),be(!1)},className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Leave"})]})]}),document.body),m==="chat"?i.jsx("div",{className:"chat-tab-wrapper",children:i.jsx(yC,{chat:rt,userId:e?.id,nameById:Ve,isMember:cA,newMsg:Qt,setNewMsg:Kt,onSend:Ne,leagueCode:n?.code,memberCount:o.length,maxMembers:Oo,notificationStatus:vt})}):i.jsxs("div",{className:"league-content-wrapper",children:[i.jsxs("div",{className:"px-1 sm:px-2",children:[m==="mlt"&&i.jsx(Oe,{}),m==="gw"&&i.jsx(me,{}),m==="gwr"&&i.jsx(X,{})]}),n?.name==="API Test"&&i.jsx("div",{className:"mt-6 mb-4 px-4 py-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:i.jsxs("div",{className:"text-sm text-yellow-800",children:[i.jsx("strong",{children:" Test League:"})," This league uses test API data and starts from Test GW 1 with zero points. It does not affect your main game scores."]})})]}),dt&&_&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>I(!1),children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:U=>U.stopPropagation(),children:[i.jsx("button",{onClick:()=>I(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsxs("div",{className:"p-6 pt-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"League Management"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm text-slate-600 mb-3 font-semibold",children:"Remove Members:"}),i.jsxs("div",{className:"space-y-2",children:[o.filter(U=>U.id!==e?.id).map(U=>i.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-slate-50 rounded-lg",children:[i.jsx("span",{className:"text-sm font-medium text-slate-800",children:U.name}),i.jsx("button",{onClick:()=>{le(U),gt(!0),I(!1)},className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded-md transition-colors font-medium",children:"Remove"})]},U.id)),o.filter(U=>U.id!==e?.id).length===0&&i.jsx("div",{className:"text-sm text-slate-500 italic py-4 text-center",children:"No other members to remove"})]})]}),i.jsx("div",{className:"pt-4 border-t border-slate-200",children:i.jsx("button",{onClick:()=>{rA(!0),I(!1)},className:"w-full px-4 py-3 text-sm bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:" End League"})})]})]})]})}),$&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>Q(!1),children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative",onClick:U=>U.stopPropagation(),children:[i.jsx("button",{onClick:()=>Q(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsxs("div",{className:"p-6 pt-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"League Points"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-[#1C8376]/10 border border-[#1C8376]/20 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-[#1C8376]/90 mb-3",children:"League Points:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),i.jsxs("span",{className:"text-[#1C8376]/80",children:[i.jsx("strong",{children:"Win the week"}),"  3 points"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),i.jsxs("span",{className:"text-[#1C8376]/80",children:[i.jsx("strong",{children:"Draw"}),"  1 point"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-[#1C8376] font-bold",children:""}),i.jsxs("span",{className:"text-[#1C8376]/80",children:[i.jsx("strong",{children:"Lose"}),"  0 points"]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" Ties"}),i.jsxs("p",{className:"text-blue-700",children:["If two or more players are tied on Points, the player with the most overall ",i.jsx("strong",{children:" Unicorns"})," in the mini league is ranked higher."]})]})]}),n&&(["The Bird league"].includes(n.name)||["gregVjofVcarl","Let Down"].includes(n.name))&&i.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("p",{className:"text-blue-700 text-sm",children:[i.jsx("strong",{children:"Note:"}),' This mini league started after GW1, so the "CP" column shows correct predictions since this mini league began.']})})]})]})}),te&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Invite players"}),i.jsxs("p",{className:"text-slate-600 text-sm",children:["Share this code (up to ",Oo," members):"]}),i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx("code",{className:"font-mono text-lg font-bold",children:n.code}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(n.code)},className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Copy"}),i.jsx("button",{onClick:$e,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-slate-50",children:"Share"})]}),i.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:[o.length,"/",Oo," members"]}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{onClick:()=>se(!1),className:"px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50",children:"Close"})})]})}),b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Leave League"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:['Are you sure you want to leave "',n?.name,`"? You'll need the league code to rejoin later.`]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:S,children:"Cancel"}),i.jsx("button",{onClick:oe,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:S,children:S?"Leaving...":"Leave League"})]})]})}),He&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Join Mini League"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:["You are about to join ",i.jsxs("strong",{children:['"',n?.name,'"']}),". Are you sure?"]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>We(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:ie,children:"Cancel"}),i.jsx("button",{onClick:Xe,className:"flex-1 px-4 py-2 bg-[#1C8376] text-white rounded-md hover:bg-emerald-700 transition-colors disabled:opacity-50",disabled:ie,children:ie?"Joining...":"Join League"})]})]})}),Ze&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Remove Member"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:["Are you sure you want to remove ",i.jsxs("strong",{children:['"',Xt?.name,'"']})," from the league? They will need the league code to rejoin."]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>gt(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:et,children:"Cancel"}),i.jsx("button",{onClick:Ge,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:et,children:et?"Removing...":"Remove Member"})]})]})}),Nt&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:" End League"}),i.jsxs("p",{className:"text-slate-600 mb-4",children:["Are you absolutely sure you want to ",i.jsx("strong",{children:"permanently end"})," the league ",i.jsxs("strong",{children:['"',n?.name,'"']}),"?"]}),i.jsx("p",{className:"text-sm text-red-600 mb-6",children:"This will remove all members and delete the league forever. This action cannot be undone!"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>rA(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 transition-colors",disabled:Ce,children:"Cancel"}),i.jsx("button",{onClick:Je,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50",disabled:Ce,children:Ce?"Ending...":"Yes, End League"})]})]})})]}):null}function B0(r){return String(r||"").toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g," ").replace(/\s+/g," ").trim()}const _a={arsenal:{medium:"Arsenal",slug:"arsenal",aliases:["arsenal","ars","the arsenal"]},"aston-villa":{medium:"Villa",slug:"aston-villa",aliases:["aston villa","villa","avl"]},bournemouth:{medium:"Bournemouth",slug:"bournemouth",aliases:["bournemouth","afc bournemouth","bou"]},brentford:{medium:"Brentford",slug:"brentford",aliases:["brentford","bre"]},brighton:{medium:"Brighton",slug:"brighton",aliases:["brighton","brighton and hove albion","brighton & hove albion","bha"]},chelsea:{medium:"Chelsea",slug:"chelsea",aliases:["chelsea","che"]},"crystal-palace":{medium:"Palace",slug:"crystal-palace",aliases:["crystal palace","palace","cry"]},everton:{medium:"Everton",slug:"everton",aliases:["everton","eve"]},fulham:{medium:"Fulham",slug:"fulham",aliases:["fulham","ful"]},ipswich:{medium:"Ipswich",slug:"ipswich",aliases:["ipswich","ipswich town","ips"]},leeds:{medium:"Leeds",slug:"leeds",aliases:["leeds","leeds united","lee"]},leicester:{medium:"Leicester",slug:"leicester",aliases:["leicester","leicester city","lei"]},liverpool:{medium:"Liverpool",slug:"liverpool",aliases:["liverpool","liv"]},"man-city":{medium:"Man City",slug:"man-city",aliases:["manchester city","man city","mci","city"]},"man-united":{medium:"Man United",slug:"man-united",aliases:["manchester united","man united","man utd","mun","united"]},newcastle:{medium:"Newcastle",slug:"newcastle",aliases:["newcastle","newcastle united","new"]},"nottingham-forest":{medium:"Forest",slug:"nottingham-forest",aliases:["nottingham forest","forest","nfo","not"]},southampton:{medium:"Southampton",slug:"southampton",aliases:["southampton","sou"]},spurs:{medium:"Spurs",slug:"spurs",aliases:["tottenham","tottenham hotspur","spurs","tot"]},"west-ham":{medium:"West Ham",slug:"west-ham",aliases:["west ham","west ham united","whu"]},wolves:{medium:"Wolves",slug:"wolves",aliases:["wolves","wolverhampton wanderers","wolverhampton","wol"]},sunderland:{medium:"Sunderland",slug:"sunderland",aliases:["sunderland","sun"]},burnley:{medium:"Burnley",slug:"burnley",aliases:["burnley","bur"]}},CC=(()=>{const r={};return Object.keys(_a).forEach(e=>{_a[e].aliases.forEach(A=>{r[B0(A)]=e})}),r})();function EC(r){const e=B0(r);return e?CC[e]??null:null}function Dn(r){const e=EC(r);return e?_a[e].medium:r}Object.keys(_a).map(r=>_a[r].slug);function _g(r,e){const A=r?.[`${e}_name`],n=r?.[`${e}_team`],o=r?.[`${e}_code`]||A||n||"";return Dn(o)||(e==="home"?"Home":"Away")}function Ed(...r){return r.filter(Boolean).join(" ")}function _C(r){return r?r.result==="H"||r.result==="D"||r.result==="A"?r.result:typeof r.home_goals=="number"&&typeof r.away_goals=="number"?r.home_goals>r.away_goals?"H":r.home_goals<r.away_goals?"A":"D":null:null}function Ru({label:r,active:e,disabled:A,onClick:n}){return i.jsx("button",{type:"button",disabled:A,onClick:n,className:Ed("h-16 rounded-xl border text-sm font-medium transition-colors","flex items-center justify-center",e?"bg-emerald-600 text-white border-emerald-600":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100",A&&"opacity-60 cursor-not-allowed"),children:r})}function Ou({label:r,correct:e,isCorrectResult:A}){const n="h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center select-none",a=e===!0?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white !border-0 !border-none shadow-2xl shadow-yellow-400/40 transform scale-110 rotate-1 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":A?"bg-emerald-600 text-white border-emerald-600":e===!1?"bg-rose-100 text-rose-700 border-rose-200":"bg-slate-50 text-slate-600 border-slate-200";return i.jsx("div",{className:[n,a].join(" "),children:i.jsx("span",{className:e===!0?"font-bold":"",children:r})})}function QC(){const{user:r}=or(),[e]=x.useState(()=>{const Y=localStorage.getItem("oldSchoolMode");return Y?JSON.parse(Y):!1});x.useEffect(()=>{localStorage.setItem("oldSchoolMode",JSON.stringify(e))},[e]);const[A,n]=x.useState(null),[a,o]=x.useState([]),[c,d]=x.useState({}),[f,m]=x.useState([]),[g,w]=x.useState(!1),[v,y]=x.useState(!1),[C,b]=x.useState(!1),[E,S]=x.useState(!0),[k,N]=x.useState(""),[O,j]=x.useState(!1),[L,R]=x.useState(!1);x.useEffect(()=>{g&&window.scrollTo({top:0,behavior:"smooth"})},[g]),x.useEffect(()=>{let Y=!0;(async()=>{const _=await Qg();Y&&n(_)})();const D=async()=>{const _=await Qg();n(_)};return window.addEventListener("focus",D),()=>{Y=!1,window.removeEventListener("focus",D)}},[r?.id]),x.useEffect(()=>{let Y=!0;return(async()=>{if(S(!0),N(""),A==null){o([]),d({}),w(!1),S(!1);return}const{data:D,error:_}=await z.from("fixtures").select("gw, fixture_index, home_name, away_name, home_team, away_team, home_code, away_code, kickoff_time").eq("gw",A).order("fixture_index",{ascending:!0});if(_){Y&&(N(_.message),o([]),d({}),w(!1),S(!1));return}const I=D??[];if(!Y)return;if(o(I),I.length>0&&I[0].kickoff_time){const We=new Date(I[0].kickoff_time),ie=new Date(We.getTime()-4500*1e3);R(new Date>ie)}else R(!1);const{data:$,error:Q}=await z.from("picks").select("gw, fixture_index, pick").eq("gw",A).eq("user_id",r?.id);Q&&Y&&N(Q.message);const K={};if(I.forEach(We=>K[We.fixture_index]=null),$?.forEach(We=>{K[We.fixture_index]=We.pick}),!Y)return;d(K);const{data:Z,error:te}=await z.from("gw_submissions").select("gw, submitted_at").eq("gw",A).eq("user_id",r?.id).maybeSingle();if(te&&Y&&N(te.message),!Y)return;w(!!Z?.submitted_at);const{data:se,error:He}=await z.from("gw_results").select("gw, fixture_index, result").eq("gw",A);He&&Y&&N(He.message),Y&&m(se??[]),S(!1)})(),()=>{Y=!1}},[A,r?.id]);const G=x.useMemo(()=>{const Y=new Map;return a.forEach(_=>{const I=_.kickoff_time?new Date(_.kickoff_time):null,$=I?I.toISOString().slice(0,10):"unknown",Q=I?UC(I):"TBC";Y.has($)||Y.set($,{label:Q,items:[]}),Y.get($).items.push(_)}),[...Y.entries()].sort((_,I)=>{const $=_[1].items[0]?.fixture_index??0,Q=I[1].items[0]?.fixture_index??0;return $-Q}).map(([,_])=>_)},[a]);function H(Y,D){g||d(_=>({..._,[Y]:D}))}async function ve(){if(!(g||!r?.id)){y(!0),N("");try{const Y=Object.entries(c).filter(([,D])=>D).map(([D,_])=>({user_id:r.id,gw:A,fixture_index:Number(D),pick:_}));if(Y.length){const{error:D}=await z.from("picks").upsert(Y,{onConflict:"user_id,gw,fixture_index"});if(D)throw D}b(!0),window.setTimeout(()=>b(!1),2500)}catch(Y){N(Y?.message??"Failed to save picks.")}finally{y(!1)}}}async function W(){if(!g){if(a.length>0&&a[0].kickoff_time){const Y=new Date(a[0].kickoff_time),D=new Date(Y.getTime()-4500*1e3);if(new Date>D){const I=D.toLocaleDateString(void 0,{weekday:"short"}),$=D.toLocaleDateString(void 0,{month:"short"}),Q=D.toLocaleDateString(void 0,{day:"numeric"}),K=String(D.getUTCHours()).padStart(2,"0"),Z=String(D.getUTCMinutes()).padStart(2,"0"),te=`${I}, ${$} ${Q}, ${K}:${Z}`;N(` Too late! Submissions closed at ${te}. The deadline was 75 minutes before the first kickoff.`);return}}j(!0)}}async function ae(){if(g)return;if(a.length>0&&a[0].kickoff_time){const I=new Date(a[0].kickoff_time),$=new Date(I.getTime()-4500*1e3);if(new Date>$){const K=$.toLocaleDateString(void 0,{weekday:"short"}),Z=$.toLocaleDateString(void 0,{month:"short"}),te=$.toLocaleDateString(void 0,{day:"numeric"}),se=String($.getUTCHours()).padStart(2,"0"),He=String($.getUTCMinutes()).padStart(2,"0"),We=`${K}, ${Z} ${te}, ${se}:${He}`;N(` Too late! Submissions closed at ${We}. The deadline was 75 minutes before the first kickoff.`),j(!1);return}}await ve();const Y=a.length,D=Object.values(c).filter(Boolean).length;if(D!==Y){N(`Please make predictions for all ${Y} fixtures before submitting. You have ${D}/${Y} completed.`);return}const{error:_}=await z.from("gw_submissions").upsert([{user_id:r?.id,gw:A,submitted_at:new Date().toISOString()}],{onConflict:"user_id,gw"});_?N(_.message):(w(!0),window.dispatchEvent(new CustomEvent("predictionsSubmitted"))),j(!1)}const fe=new Map;f.forEach(Y=>{const D=_C(Y);D&&fe.set(Y.fixture_index,D)});const P=a.length>0&&fe.size>0&&fe.size===a.length,ue=Object.entries(c).reduce((Y,[D,_])=>{const I=Number(D),$=fe.get(I);return!$||!_?Y:Y+(_===$?1:0)},0);return E?i.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:i.jsx("div",{className:"text-slate-500",children:"Loading"})}):i.jsx("div",{className:`min-h-screen bg-slate-50 ${e?"oldschool-theme":""}`,children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight text-slate-900",children:"Predictions Center"}),i.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600 w-full",children:"Call every game, lock in your results, and climb the table."}),i.jsxs("div",{className:"text-slate-600 text-lg font-semibold mt-1",children:["Game Week ",Mu(A)]}),i.jsx("div",{className:"mt-3",children:P?i.jsx("div",{className:"rounded-xl border bg-gradient-to-r from-emerald-50 to-blue-50 border-emerald-200 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"text-emerald-900 font-semibold text-lg",children:["GW ",Mu(A)," Complete"]}),i.jsx("div",{className:"text-emerald-900 text-sm font-bold mt-1",children:"Your Score"})]}),i.jsx("div",{className:"text-emerald-900 text-5xl font-extrabold",children:ue})]})}):null}),k&&i.jsx("div",{className:"mt-4 rounded border border-rose-200 bg-rose-50 text-rose-700 px-3 py-2 text-sm",children:k}),!g&&a.length>0&&a[0].kickoff_time&&!L&&(()=>{const Y=new Date(a[0].kickoff_time),D=new Date(Y.getTime()-4500*1e3),_=new Date,$=(D.getTime()-_.getTime())/(1e3*60*60);if($<=2&&$>0){const Q=D.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return i.jsxs("div",{className:"mt-4 rounded border border-amber-200 bg-amber-50 text-amber-800 px-3 py-2 text-sm",children:[" ",i.jsx("strong",{children:"Deadline approaching!"})," Submissions close at ",Q," (75 minutes before first kickoff)."]})}return null})(),G.length===0?i.jsxs("div",{className:"mt-6 rounded border bg-white p-4 text-slate-600",children:["No fixtures found for GW ",Mu(A),". Add fixtures on the Admin page, then come back."]}):i.jsxs("div",{className:"mt-6 space-y-6",children:[!P&&g&&i.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-600 rounded-2xl p-6 text-center shadow-2xl shadow-emerald-500/30 transform scale-105 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-[shimmer_2s_ease-in-out_infinite]"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"text-white font-bold text-2xl mb-1",children:"Predictions Submitted!"}),i.jsxs("div",{className:"text-emerald-100 text-lg",children:["Your picks are locked in for GW ",A]}),i.jsx("div",{className:"text-emerald-200 text-sm mt-2",children:"Good luck!"})]})]}),G.map((Y,D)=>i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-3",children:Y.label}),i.jsx("div",{className:"space-y-4",children:Y.items.map(_=>{const I=_g(_,"home"),$=_g(_,"away"),Q=_.kickoff_time?FC(new Date(_.kickoff_time)):"",K=c[_.fixture_index]??null,Z=fe.get(_.fixture_index)??null;return i.jsxs("div",{className:"rounded-2xl border bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-center px-2 pt-1 pb-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-end",children:[i.jsx("div",{className:"truncate font-medium",children:I}),i.jsx("img",{src:`/assets/badges/${_.home_code?.toUpperCase()||"UNK"}.png`,alt:I,className:"w-5 h-5",onError:te=>{te.currentTarget.style.display="none"}})]}),i.jsx("div",{className:"text-slate-500 text-sm px-4",children:Q}),i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-start",children:[i.jsx("img",{src:`/assets/badges/${_.away_code?.toUpperCase()||"UNK"}.png`,alt:$,className:"w-5 h-5",onError:te=>{te.currentTarget.style.display="none"}}),i.jsx("div",{className:"truncate font-medium",children:$})]})]}),(I==="Home"||$==="Away")&&i.jsxs("div",{className:"px-2 pb-2 text-[11px] text-slate-400",children:[I==="Home"?"[no home name/code]":""," ",$==="Away"?"[no away name/code]":""]}),P?i.jsx("div",{className:"grid grid-cols-3 gap-3",children:(()=>{const te=c[_.fixture_index]??null,se=He=>te!==He||!Z?null:Z===He;return i.jsxs(i.Fragment,{children:[i.jsx(Ou,{label:"Home Win",correct:se("H"),isCorrectResult:Z==="H"}),i.jsx(Ou,{label:"Draw",correct:se("D"),isCorrectResult:Z==="D"}),i.jsx(Ou,{label:"Away Win",correct:se("A"),isCorrectResult:Z==="A"})]})})()}):i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsx(Ru,{label:"Home Win",active:K==="H",onClick:()=>H(_.fixture_index,"H"),disabled:g}),i.jsx(Ru,{label:"Draw",active:K==="D",onClick:()=>H(_.fixture_index,"D"),disabled:g}),i.jsx(Ru,{label:"Away Win",active:K==="A",onClick:()=>H(_.fixture_index,"A"),disabled:g})]})]},_.fixture_index)})})]},D))]}),!P&&!g&&a.length>0&&i.jsxs("div",{className:"mt-6",children:[C&&i.jsx("div",{className:"mb-3 text-center",children:i.jsx("span",{"aria-live":"polite",className:"text-sm rounded border border-emerald-200 bg-emerald-50 text-emerald-900 px-3 py-2 inline-block",children:"Saved  don't forget to submit before the deadline."})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:ve,disabled:v,className:Ed("flex-1 px-4 py-3 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors",v&&"opacity-50 cursor-not-allowed"),children:v?"Saving":C?"Saved":"Save GW"}),i.jsx("button",{onClick:W,disabled:L||Object.values(c).filter(Boolean).length!==a.length,className:Ed("flex-1 px-4 py-3 rounded-md text-white font-semibold transition-colors",L?"bg-red-500 cursor-not-allowed":Object.values(c).filter(Boolean).length===a.length?"bg-emerald-600 hover:bg-emerald-700":"bg-gray-400 cursor-not-allowed"),title:L?" Submissions closed - deadline has passed":Object.values(c).filter(Boolean).length===a.length?"Submitting locks your picks for this GW.":`Complete all ${a.length} predictions before submitting`,children:L?" Deadline Passed":"Submit GW"})]}),i.jsx("div",{className:"mt-2 text-center",children:i.jsx("span",{className:"text-xs text-slate-500",children:"Submitting locks your picks for this GW."})})]}),O&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Confirm Submission"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"Are you sure you want to submit your predictions? Once submitted, they'll be locked for this Gameweek."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:ae,className:"flex-1 px-4 py-2 rounded-md bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-colors",children:"Submit GW"})]})]})})]})})}async function Qg(){const{data:r}=await z.from("meta").select("current_gw").eq("id",1).single();return r?.current_gw??null}function Mu(r,e=1){return typeof r=="number"&&r>0?r:e}function UC(r){return r.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})}function FC(r){const e=String(r.getUTCHours()).padStart(2,"0"),A=String(r.getUTCMinutes()).padStart(2,"0");return`${e}:${A}`}function Ug(r){return r?r.toUpperCase():"???"}function SC(r){if(!r)return null;let e=r.match(/^[A-Za-z]{3}\s+(\d{1,2}):(\d{2})\s+[A-Za-z]{3}\s+(\d{1,2})(?:st|nd|rd|th)?\s+([A-Za-z]{3})/);if(e){const[,A,n,a,o]=e,d={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[o];if(!d)return null;const f=new Date().getFullYear(),m=a.padStart(2,"0");return`${f}-${d}-${m}T${A}:${n}:00`}if(e=r.match(/^[A-Za-z]{3}\s+(\d{1,2})\s+([A-Za-z]{3})/),e){const[,A,n]=e,o={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[n];if(!o)return null;const c=new Date().getFullYear(),d=A.padStart(2,"0");return`${c}-${o}-${d}T15:00:00`}return null}function kC(r){if(!r)return"";const e=new Date(r);if(isNaN(e.valueOf()))return"";const A=e.toLocaleDateString(void 0,{weekday:"short"}),n=String(e.getUTCHours()).padStart(2,"0"),a=String(e.getUTCMinutes()).padStart(2,"0");return`${A} ${n}:${a}`}function NC(){const{user:r,session:e}=or(),[A,n]=x.useState(1),[a,o]=x.useState(""),[c,d]=x.useState([]),[f,m]=x.useState({}),[g,w]=x.useState(!1),[v,y]=x.useState(""),[C,b]=x.useState(""),[E,S]=x.useState(!1),[k,N]=x.useState(null),[O,j]=x.useState(!1),[L,R]=x.useState("fixtures"),G=c.length>0,[H,ve]=x.useState(null),[W,ae]=x.useState(null),[fe,P]=x.useState(!1),[ue,Y]=x.useState(!1),[D,_]=x.useState(null),I=r?.id==="4542c037-5b38-40d0-b189-847b8f17c222"||r?.id==="36f31625-6d6c-4aa4-815a-1493a812841b";x.useEffect(()=>{let ie=!0;return(async()=>{try{const{data:he,error:Te}=await z.from("meta").select("current_gw").eq("id",1).single();if(Te)return;const be=he?.current_gw;ie&&Number.isFinite(be)&&(N(be??null),be&&n(be))}catch{}})(),()=>{ie=!1}},[]),x.useEffect(()=>{let ie=!0;return(async()=>{y(""),b("");const{data:he,error:Te}=await z.from("fixtures").select("*").eq("gw",A).order("fixture_index",{ascending:!0});if(Te){ie&&y(Te.message);return}if(!ie)return;d(he??[]),j(!1);const{data:be,error:Ze}=await z.from("gw_results").select("fixture_index, result").eq("gw",A);Ze&&console.warn("[Admin] load gw_results error:",Ze);const gt={};(be??[]).forEach(Nt=>{gt[Number(Nt.fixture_index)]=Nt.result??null}),j((be??[]).length>0),ie&&m(gt)})(),()=>{ie=!1}},[A]);const $=x.useMemo(()=>c.reduce((ie,he)=>ie+(f[he.fixture_index]?1:0),0),[c,f]),Q=c.length>0&&$===c.length,K=Math.max(0,c.length-$);async function Z(){w(!0),y(""),b("");try{const he=a.split(`
`).map(Ze=>Ze.trim()).filter(Boolean).map((Ze,gt)=>{const[Nt,...rA]=Ze.split(/\s{2,}|\t/),Xt=Nt.split(/\s+/),le=(Xt[0]??"").toUpperCase(),et=(Xt[2]??"").toUpperCase(),Le=rA.join(" ").trim(),Ce=SC(Le);return{gw:A,fixture_index:gt,home_team:le,away_team:et,home_code:le,away_code:et,kickoff_time:Ce}}),{error:Te}=await z.from("fixtures").upsert(he,{onConflict:"gw,fixture_index"});if(Te)throw Te;o("");const{data:be}=await z.from("fixtures").select("*").eq("gw",A).order("fixture_index");d(be??[]),be&&d(be),b("Fixtures saved!")}catch(ie){y(ie.message??"Failed to save fixtures.")}finally{w(!1)}}async function te(){if(!E){S(!0);return}w(!0),y(""),b("");try{const{error:ie}=await z.from("meta").update({current_gw:A}).eq("id",1);if(ie)throw ie;b(`Gameweek ${A} activated successfully!`),N(A),window.dispatchEvent(new CustomEvent("fixturesPublished"));try{const he=await fetch("/.netlify/functions/sendPushAll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:`GW${A} Published`,message:`Game Week ${A} fixtures are live. Make your predictions!`,data:{type:"fixtures_published",gw:A}})}),Te=await he.json().catch(()=>({}));if(he.ok&&Te.ok){const be=Te.sentTo||0,Ze=Te.checked||0;be>0?(console.log(`[Admin] Push notification sent to ${be} subscribed devices (checked ${Ze} total)`),b(`Gameweek ${A} activated! Push notification sent to ${be} devices.`)):Te.warning&&(console.warn(`[Admin] Push notification warning: ${Te.warning}`),b(`Gameweek ${A} activated! (No subscribed devices found for push notifications)`))}else{console.error("[Admin] Push notification failed:",Te);const be=Te.oneSignalErrors?`OneSignal Error: ${JSON.stringify(Te.oneSignalErrors)}`:Te.error||"Failed to send push notification";y(`Gameweek activated, but push notification failed: ${be}`)}}catch(he){console.error("[Admin] Push notification error:",he),y(`Gameweek activated, but push notification failed: ${he.message||"Network error"}`)}}catch(ie){y(ie.message??"Failed to activate gameweek.")}finally{w(!1),S(!1)}}async function se(){w(!0),y(""),b("");try{const{error:ie}=await z.from("fixtures").delete().eq("gw",A);if(ie)throw ie;d([]),b(`Gameweek ${A} upload cancelled.`)}catch(ie){y(ie.message??"Failed to cancel gameweek.")}finally{w(!1)}}async function He(){w(!0),y(""),b("");try{if(!window.confirm(" This will publish and score all results for this Gameweek. Are you sure?")){w(!1);return}if(!Q)throw new Error("Please pick a result (H/D/A/Cancelled) for every fixture before publishing.");const he=c.map(be=>({gw:A,fixture_index:be.fixture_index,result:f[be.fixture_index],decided_at:new Date().toISOString()})),{error:Te}=await z.from("gw_results").upsert(he,{onConflict:"gw,fixture_index"});if(Te)throw Te;b(`GW ${A} results published!`),window.dispatchEvent(new CustomEvent("resultsPublished",{detail:{gw:A}}));try{const be=await fetch("/.netlify/functions/sendPushAll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:`GW${A} Results`,message:`Results for Game Week ${A} are published. See how you scored!`,data:{type:"results_published",gw:A}})}),Ze=await be.json().catch(()=>({}));if(be.ok&&Ze.ok){const gt=Ze.sentTo||0,Nt=Ze.checked||0;gt>0?(console.log(`[Admin] Push notification sent to ${gt} subscribed devices (checked ${Nt} total)`),b(`GW ${A} results published! Push notification sent to ${gt} devices.`)):Ze.warning&&(console.warn(`[Admin] Push notification warning: ${Ze.warning}`),b(`GW ${A} results published! (No subscribed devices found for push notifications)`))}else{console.error("[Admin] Push notification failed:",Ze);const gt=Ze.oneSignalErrors?`OneSignal Error: ${JSON.stringify(Ze.oneSignalErrors)}`:Ze.error||"Failed to send push notification";y(`Results published, but push notification failed: ${gt}`)}}catch(be){console.error("[Admin] Push notification error:",be),y(`Results published, but push notification failed: ${be.message||"Network error"}`)}}catch(ie){y(ie.message??"Failed to save results.")}finally{w(!1)}}async function We(){w(!0),y(""),b("");try{const{error:ie}=await z.from("gw_results").delete().eq("gw",A);if(ie)throw ie;m({}),b(`GW ${A} results recalled (deleted).`)}catch(ie){y(ie.message??"Failed to recall results.")}finally{w(!1)}}return i.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-10",children:[i.jsx("h1",{className:"mb-6 text-2xl font-semibold",children:" Admin"}),I&&i.jsx("div",{className:"mb-6 rounded border bg-white p-4",children:i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"OneSignal Player ID (native)"}),i.jsx("div",{className:"text-sm text-slate-600",children:"Works only inside the Despia native wrapper"}),H&&i.jsx("div",{className:"mt-1 text-sm font-mono break-all",children:H}),W!=null&&i.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["nativePushEnabled: ",String(W)]}),D&&i.jsx("div",{className:`mt-1 text-xs ${D.includes("Success")?"text-green-600":"text-red-600"}`,children:D})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:async()=>{P(!0),ve(null),ae(null);try{const ie=globalThis;if(ie&&ie.despia){const he=ie.despia,Te=he?.onesignalplayerid||null;ve(Te);try{const be=typeof he=="function"?he("checkNativePushPermissions://",["nativePushEnabled"]):null;be&&typeof be=="object"&&"nativePushEnabled"in be&&ae(!!be.nativePushEnabled)}catch{}}else try{const be=(await import("despia-native"))?.default,Ze=be?.onesignalplayerid||null;ve(Ze);try{const gt=typeof be=="function"?be("checkNativePushPermissions://",["nativePushEnabled"]):null;gt&&typeof gt=="object"&&"nativePushEnabled"in gt&&ae(!!gt.nativePushEnabled)}catch{}}catch{ve(null)}}finally{P(!1)}},className:"rounded bg-slate-900 px-3 py-2 text-white disabled:opacity-50 text-sm",disabled:fe,children:fe?"Checking":"Show Player ID"}),i.jsx("button",{onClick:async()=>{if(!H){_("Please check Player ID first");return}Y(!0),_(null);try{if(!r||!e?.access_token){_("Error: Not signed in");return}const ie=await fetch("/.netlify/functions/registerPlayer",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.access_token}`},body:JSON.stringify({playerId:H,platform:"ios"})}),he=await ie.json();ie.ok?_(`Success! Registered ${H.slice(0,8)}`):_(`Error: ${he.error||"Unknown error"}`)}catch(ie){_(`Error: ${ie.message||"Failed to register"}`)}finally{Y(!1)}},className:"rounded bg-emerald-600 px-3 py-2 text-white disabled:opacity-50 text-sm",disabled:ue||!H,children:ue?"Registering":"Register Device"})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"mr-2",children:"GW"}),i.jsx("select",{value:A,onChange:ie=>n(parseInt(ie.target.value,10)),className:"rounded border px-2 py-1",children:Array.from({length:38},(ie,he)=>he+1).map(ie=>i.jsx("option",{value:ie,children:ie},ie))})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"inline-flex rounded-full bg-slate-100 p-1 text-sm",children:[i.jsx("button",{type:"button",onClick:()=>R("fixtures"),className:`px-3 py-1 rounded-full transition ${L==="fixtures"?"bg-white shadow font-semibold text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:"Fixtures"}),i.jsx("button",{type:"button",onClick:()=>R("results"),className:`ml-1 px-3 py-1 rounded-full transition ${L==="results"?"bg-white shadow font-semibold text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:"Results"})]})}),v&&i.jsx("div",{className:"mb-4 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:v}),C&&i.jsx("div",{className:"mb-4 rounded border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-800",children:C}),L==="fixtures"&&i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Review Fixtures"}),c.length===0?i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"mb-3 text-slate-500",children:["No fixtures uploaded for GW ",A," yet."]}),i.jsx("h3",{className:"mb-2 text-base font-semibold",children:"Add Fixtures"}),i.jsx("textarea",{value:a,onChange:ie=>o(ie.target.value),rows:8,className:"w-full rounded border p-2 font-mono text-sm",placeholder:`BRE v MUN	Sat 12:30 Sat 28th Sep
CHE v BHA	Sat 15:00 Sat 28th Sep`}),i.jsx("button",{onClick:Z,disabled:g,className:"mt-2 rounded bg-slate-900 px-3 py-2 text-white disabled:opacity-50",children:g?"Saving":"Save Fixtures"})]}):i.jsxs(i.Fragment,{children:[i.jsx("ul",{className:"mb-2",children:c.map(ie=>i.jsxs("li",{className:"py-1",children:[i.jsx("span",{className:"font-semibold",children:Dn(ie.home_code||ie.home_team||"HOME")})," ",i.jsx("span",{className:"text-slate-400",children:"v"})," ",i.jsx("span",{className:"font-semibold",children:Dn(ie.away_code||ie.away_team||"AWAY")}),i.jsx("span",{className:"ml-2 text-slate-500",children:ie.kickoff_time?kC(ie.kickoff_time):"TBD"})]},ie.fixture_index))}),i.jsxs("div",{className:"mt-6 flex gap-4",children:[i.jsx("button",{onClick:te,disabled:g||!G||k===A,className:`rounded px-4 py-3 font-semibold text-white ${g||!G||k===A?"bg-emerald-300 cursor-not-allowed":"bg-emerald-700 hover:bg-emerald-800"}`,title:G?k===A?"This gameweek is already active":"Activate this gameweek":"Add fixtures first",children:E?"Are you sure? Click again to confirm.":`Activate Gameweek ${A}`}),i.jsx("button",{onClick:se,disabled:g,className:"rounded bg-rose-600 px-4 py-3 text-white font-semibold hover:bg-rose-700",children:"Cancel Upload"})]})]})]}),L==="results"&&i.jsxs("div",{children:[i.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Enter Results"}),c.length===0?i.jsxs("p",{className:"text-slate-500",children:["No fixtures yet for GW ",A,"."]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-2 text-xs text-slate-500",children:Q?"All fixtures selected (H/D/A/Cancelled).":`Pick results for ${K} more fixture${K===1?"":"s"} (H/D/A/Cancelled).`}),i.jsxs("table",{className:"w-full border text-sm",children:[i.jsx("thead",{className:"bg-slate-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-2 py-1 text-left",children:"Fixture"}),i.jsx("th",{className:"px-2 py-1",children:"Home Win"}),i.jsx("th",{className:"px-2 py-1",children:"Draw"}),i.jsx("th",{className:"px-2 py-1",children:"Away Win"}),i.jsx("th",{className:"px-2 py-1",children:"Cancelled"})]})}),i.jsx("tbody",{children:c.map(ie=>{const he=Ug(ie.home_code||ie.home_team),Te=Ug(ie.away_code||ie.away_team);return i.jsxs("tr",{className:"border-t",children:[i.jsxs("td",{className:"px-2 py-1",children:[he," ",i.jsx("span",{className:"text-slate-400",children:"v"})," ",Te]}),i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{type:"button",onClick:()=>m(be=>({...be,[ie.fixture_index]:"H"})),className:`w-12 h-8 rounded-md font-semibold text-sm transition-colors ${(f[ie.fixture_index]??null)==="H"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"H"})}),i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{type:"button",onClick:()=>m(be=>({...be,[ie.fixture_index]:"D"})),className:`w-12 h-8 rounded-md font-semibold text-sm transition-colors ${(f[ie.fixture_index]??null)==="D"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"D"})}),i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{type:"button",onClick:()=>m(be=>({...be,[ie.fixture_index]:"A"})),className:`w-12 h-8 rounded-md font-semibold text-sm transition-colors ${(f[ie.fixture_index]??null)==="A"?"bg-emerald-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"A"})}),i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{type:"button",onClick:()=>m(be=>({...be,[ie.fixture_index]:"N"})),className:`w-8 h-6 rounded text-xs transition-colors ${(f[ie.fixture_index]??null)==="N"?"bg-red-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:"N"})})]},ie.fixture_index)})})]}),i.jsxs("div",{className:"mt-3 flex gap-3",children:[i.jsx("button",{onClick:He,disabled:g||!Q||O,className:`rounded px-3 py-2 text-white ${O?"bg-gray-300 cursor-not-allowed text-gray-700":"bg-red-600"} disabled:opacity-50`,title:O?"Results already published for this GW":Q?"Publish gameweek results":"Pick a result for every fixture",children:g?"Publishing":"Publish GW"}),i.jsx("button",{onClick:We,disabled:g||!O,className:`rounded px-3 py-2 ${O?"bg-gray-300 text-gray-900 hover:bg-gray-400":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,title:O?"Delete published results for this GW":"No published results to recall",children:"Recall GW"})]})]})]})]})}function IC(){const[r,e]=x.useState(!1),[A,n]=x.useState(!1),[a,o]=x.useState(!1),[c,d]=x.useState(!1),[f,m]=x.useState(!1);x.useEffect(()=>{localStorage.getItem("whatsappBannerSeen")||e(!0)},[]),x.useEffect(()=>{if(!r)return;n(!0);const y=setTimeout(()=>{o(!0)},400),C=setTimeout(()=>{d(!0)},800),b=setTimeout(()=>{m(!0)},2e3);return()=>{clearTimeout(y),clearTimeout(C),clearTimeout(b)}},[r]);const g=()=>{window.open("https://chat.whatsapp.com/G2siRAr22kR2tOAcYAkLTp","_blank"),localStorage.setItem("whatsappBannerSeen","true"),e(!1)},w=()=>{e(!1)},v=()=>{localStorage.setItem("whatsappBannerSeen","true"),e(!1)};return r?i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        @keyframes bounceIn {
          0% {
            transform: scale(0.3);
            opacity: 0;
          }
          50% {
            transform: scale(1.1);
            opacity: 0.8;
          }
          70% {
            transform: scale(0.9);
            opacity: 0.9;
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        .animate-bounce-in {
          animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
        }
        .animate-bounce-in-delayed {
          animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both;
        }
        .animate-bounce-in-button {
          animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.8s both;
        }
      `}),i.jsx("div",{className:"p-4 mb-4 rounded-lg shadow-lg h-[220px]",style:{backgroundColor:"#1C8376"},children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-2 min-h-[60px]",children:[i.jsx("div",{className:"flex justify-start",children:A&&i.jsx("div",{className:"bg-white rounded-2xl rounded-bl-md px-4 py-2 shadow-sm max-w-xs animate-bounce-in",children:i.jsx("h3",{className:"text-gray-800 font-medium text-sm",children:" We're on WhatsApp!  "})})}),i.jsx("div",{className:"flex justify-end",children:a&&i.jsx("div",{className:"bg-white rounded-2xl rounded-br-md px-4 py-2 shadow-sm animate-bounce-in-delayed",children:i.jsxs("h3",{className:"text-gray-800 font-medium text-sm",children:["Never miss a Game Week - join for",i.jsx("br",{className:"sm:hidden"})," instant alerts   "]})})})]}),c&&i.jsx("div",{className:"flex justify-center animate-bounce-in-button",children:i.jsxs("button",{onClick:g,className:"bg-white hover:bg-gray-100 px-6 py-3 rounded-full text-sm font-semibold transition-colors shadow-md flex items-center gap-2",style:{color:"#1C8376"},children:[i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488",fill:"#25D366"})}),"Get Alerts"]})}),f&&i.jsxs("div",{className:"flex items-center justify-center gap-4 pb-4",children:[i.jsx("button",{onClick:w,className:"text-white/80 hover:text-white text-xs transition-colors underline",children:"Maybe Later"}),i.jsx("button",{onClick:v,className:"text-white/80 hover:text-white text-xs transition-colors underline",title:"Don't show again",children:"Don't show again"})]})]})})]}):null}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _d=function(r,e){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(A[a]=n[a])},_d(r,e)};function Pr(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_d(r,e);function A(){this.constructor=r}r.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var Qd=function(){return Qd=Object.assign||function(e){for(var A,n=1,a=arguments.length;n<a;n++){A=arguments[n];for(var o in A)Object.prototype.hasOwnProperty.call(A,o)&&(e[o]=A[o])}return e},Qd.apply(this,arguments)};function $A(r,e,A,n){function a(o){return o instanceof A?o:new A(function(c){c(o)})}return new(A||(A=Promise))(function(o,c){function d(g){try{m(n.next(g))}catch(w){c(w)}}function f(g){try{m(n.throw(g))}catch(w){c(w)}}function m(g){g.done?o(g.value):a(g.value).then(d,f)}m((n=n.apply(r,[])).next())})}function PA(r,e){var A={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(m){return function(g){return f([m,g])}}function f(m){if(n)throw new TypeError("Generator is already executing.");for(;A;)try{if(n=1,a&&(o=m[0]&2?a.return:m[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,m[1])).done)return o;switch(a=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return A.label++,{value:m[1],done:!1};case 5:A.label++,a=m[1],m=[0];continue;case 7:m=A.ops.pop(),A.trys.pop();continue;default:if(o=A.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){A=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){A.label=m[1];break}if(m[0]===6&&A.label<o[1]){A.label=o[1],o=m;break}if(o&&A.label<o[2]){A.label=o[2],A.ops.push(m);break}o[2]&&A.ops.pop(),A.trys.pop();continue}m=e.call(r,A)}catch(g){m=[6,g],a=0}finally{n=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function Ko(r,e,A){if(arguments.length===2)for(var n=0,a=e.length,o;n<a;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||e)}var dn=(function(){function r(e,A,n,a){this.left=e,this.top=A,this.width=n,this.height=a}return r.prototype.add=function(e,A,n,a){return new r(this.left+e,this.top+A,this.width+n,this.height+a)},r.fromClientRect=function(e,A){return new r(A.left+e.windowBounds.left,A.top+e.windowBounds.top,A.width,A.height)},r.fromDOMRectList=function(e,A){var n=Array.from(A).find(function(a){return a.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Rl=function(r,e){return dn.fromClientRect(r,e.getBoundingClientRect())},jC=function(r){var e=r.body,A=r.documentElement;if(!e||!A)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,A.scrollWidth),Math.max(e.offsetWidth,A.offsetWidth),Math.max(e.clientWidth,A.clientWidth)),a=Math.max(Math.max(e.scrollHeight,A.scrollHeight),Math.max(e.offsetHeight,A.offsetHeight),Math.max(e.clientHeight,A.clientHeight));return new dn(0,0,n,a)},Ol=function(r){for(var e=[],A=0,n=r.length;A<n;){var a=r.charCodeAt(A++);if(a>=55296&&a<=56319&&A<n){var o=r.charCodeAt(A++);(o&64512)===56320?e.push(((a&1023)<<10)+(o&1023)+65536):(e.push(a),A--)}else e.push(a)}return e},hA=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var A=r.length;if(!A)return"";for(var n=[],a=-1,o="";++a<A;){var c=r[a];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(a+1===A||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},Fg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Go=0;Go<Fg.length;Go++)TC[Fg.charCodeAt(Go)]=Go;var Sg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oa=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $o=0;$o<Sg.length;$o++)oa[Sg.charCodeAt($o)]=$o;var LC=function(r){var e=r.length*.75,A=r.length,n,a=0,o,c,d,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(m)?m:new Uint8Array(m);for(n=0;n<A;n+=4)o=oa[r.charCodeAt(n)],c=oa[r.charCodeAt(n+1)],d=oa[r.charCodeAt(n+2)],f=oa[r.charCodeAt(n+3)],g[a++]=o<<2|c>>4,g[a++]=(c&15)<<4|d>>2,g[a++]=(d&3)<<6|f&63;return m},HC=function(r){for(var e=r.length,A=[],n=0;n<e;n+=2)A.push(r[n+1]<<8|r[n]);return A},DC=function(r){for(var e=r.length,A=[],n=0;n<e;n+=4)A.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return A},gs=5,cf=11,Ku=2,PC=cf-gs,y0=65536>>gs,RC=1<<gs,Gu=RC-1,OC=1024>>gs,MC=y0+OC,KC=MC,GC=32,$C=KC+GC,WC=65536>>cf,VC=1<<PC,zC=VC-1,kg=function(r,e,A){return r.slice?r.slice(e,A):new Uint16Array(Array.prototype.slice.call(r,e,A))},JC=function(r,e,A){return r.slice?r.slice(e,A):new Uint32Array(Array.prototype.slice.call(r,e,A))},YC=function(r,e){var A=LC(r),n=Array.isArray(A)?DC(A):new Uint32Array(A),a=Array.isArray(A)?HC(A):new Uint16Array(A),o=24,c=kg(a,o/2,n[4]/2),d=n[5]===2?kg(a,(o+n[4])/2):JC(n,Math.ceil((o+n[4])/4));return new XC(n[0],n[1],n[2],n[3],c,d)},XC=(function(){function r(e,A,n,a,o,c){this.initialValue=e,this.errorValue=A,this.highStart=n,this.highValueIndex=a,this.index=o,this.data=c}return r.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>gs],A=(A<<Ku)+(e&Gu),this.data[A];if(e<=65535)return A=this.index[y0+(e-55296>>gs)],A=(A<<Ku)+(e&Gu),this.data[A];if(e<this.highStart)return A=$C-WC+(e>>cf),A=this.index[A],A+=e>>gs&zC,A=this.index[A],A=(A<<Ku)+(e&Gu),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),Ng="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wo=0;Wo<Ng.length;Wo++)qC[Ng.charCodeAt(Wo)]=Wo;var ZC="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ig=50,e1=1,b0=2,C0=3,t1=4,A1=5,jg=7,E0=8,Tg=9,Pn=10,Ud=11,Lg=12,Fd=13,r1=14,la=15,Sd=16,Vo=17,ra=18,n1=19,Hg=20,kd=21,na=22,$u=23,ti=24,ir=25,ca=26,ua=27,Ai=28,s1=29,fs=30,i1=31,zo=32,Jo=33,Nd=34,Id=35,jd=36,Qa=37,Td=38,gl=39,pl=40,Wu=41,_0=42,a1=43,o1=[9001,65288],Q0="!",Dt="",Yo="",Ld=YC(ZC),nn=[fs,jd],Hd=[e1,b0,C0,A1],U0=[Pn,E0],Dg=[ua,ca],l1=Hd.concat(U0),Pg=[Td,gl,pl,Nd,Id],c1=[la,Fd],u1=function(r,e){e===void 0&&(e="strict");var A=[],n=[],a=[];return r.forEach(function(o,c){var d=Ld.get(o);if(d>Ig?(a.push(!0),d-=Ig):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(o)!==-1)return n.push(c),A.push(Sd);if(d===t1||d===Ud){if(c===0)return n.push(c),A.push(fs);var f=A[c-1];return l1.indexOf(f)===-1?(n.push(n[c-1]),A.push(f)):(n.push(c),A.push(fs))}if(n.push(c),d===i1)return A.push(e==="strict"?kd:Qa);if(d===_0||d===s1)return A.push(fs);if(d===a1)return o>=131072&&o<=196605||o>=196608&&o<=262141?A.push(Qa):A.push(fs);A.push(d)}),[n,A,a]},Vu=function(r,e,A,n){var a=n[A];if(Array.isArray(r)?r.indexOf(a)!==-1:r===a)for(var o=A;o<=n.length;){o++;var c=n[o];if(c===e)return!0;if(c!==Pn)break}if(a===Pn)for(var o=A;o>0;){o--;var d=n[o];if(Array.isArray(r)?r.indexOf(d)!==-1:r===d)for(var f=A;f<=n.length;){f++;var c=n[f];if(c===e)return!0;if(c!==Pn)break}if(d!==Pn)break}return!1},Rg=function(r,e){for(var A=r;A>=0;){var n=e[A];if(n===Pn)A--;else return n}return 0},d1=function(r,e,A,n,a){if(A[n]===0)return Dt;var o=n-1;if(Array.isArray(a)&&a[o]===!0)return Dt;var c=o-1,d=o+1,f=e[o],m=c>=0?e[c]:0,g=e[d];if(f===b0&&g===C0)return Dt;if(Hd.indexOf(f)!==-1)return Q0;if(Hd.indexOf(g)!==-1||U0.indexOf(g)!==-1)return Dt;if(Rg(o,e)===E0)return Yo;if(Ld.get(r[o])===Ud||(f===zo||f===Jo)&&Ld.get(r[d])===Ud||f===jg||g===jg||f===Tg||[Pn,Fd,la].indexOf(f)===-1&&g===Tg||[Vo,ra,n1,ti,Ai].indexOf(g)!==-1||Rg(o,e)===na||Vu($u,na,o,e)||Vu([Vo,ra],kd,o,e)||Vu(Lg,Lg,o,e))return Dt;if(f===Pn)return Yo;if(f===$u||g===$u)return Dt;if(g===Sd||f===Sd)return Yo;if([Fd,la,kd].indexOf(g)!==-1||f===r1||m===jd&&c1.indexOf(f)!==-1||f===Ai&&g===jd||g===Hg||nn.indexOf(g)!==-1&&f===ir||nn.indexOf(f)!==-1&&g===ir||f===ua&&[Qa,zo,Jo].indexOf(g)!==-1||[Qa,zo,Jo].indexOf(f)!==-1&&g===ca||nn.indexOf(f)!==-1&&Dg.indexOf(g)!==-1||Dg.indexOf(f)!==-1&&nn.indexOf(g)!==-1||[ua,ca].indexOf(f)!==-1&&(g===ir||[na,la].indexOf(g)!==-1&&e[d+1]===ir)||[na,la].indexOf(f)!==-1&&g===ir||f===ir&&[ir,Ai,ti].indexOf(g)!==-1)return Dt;if([ir,Ai,ti,Vo,ra].indexOf(g)!==-1)for(var w=o;w>=0;){var v=e[w];if(v===ir)return Dt;if([Ai,ti].indexOf(v)!==-1)w--;else break}if([ua,ca].indexOf(g)!==-1)for(var w=[Vo,ra].indexOf(f)!==-1?c:o;w>=0;){var v=e[w];if(v===ir)return Dt;if([Ai,ti].indexOf(v)!==-1)w--;else break}if(Td===f&&[Td,gl,Nd,Id].indexOf(g)!==-1||[gl,Nd].indexOf(f)!==-1&&[gl,pl].indexOf(g)!==-1||[pl,Id].indexOf(f)!==-1&&g===pl||Pg.indexOf(f)!==-1&&[Hg,ca].indexOf(g)!==-1||Pg.indexOf(g)!==-1&&f===ua||nn.indexOf(f)!==-1&&nn.indexOf(g)!==-1||f===ti&&nn.indexOf(g)!==-1||nn.concat(ir).indexOf(f)!==-1&&g===na&&o1.indexOf(r[d])===-1||nn.concat(ir).indexOf(g)!==-1&&f===ra)return Dt;if(f===Wu&&g===Wu){for(var y=A[o],C=1;y>0&&(y--,e[y]===Wu);)C++;if(C%2!==0)return Dt}return f===zo&&g===Jo?Dt:Yo},f1=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var A=u1(r,e.lineBreak),n=A[0],a=A[1],o=A[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(d){return[ir,fs,_0].indexOf(d)!==-1?Qa:d}));var c=e.wordBreak==="keep-all"?o.map(function(d,f){return d&&r[f]>=19968&&r[f]<=40959}):void 0;return[n,a,c]},h1=(function(){function r(e,A,n,a){this.codePoints=e,this.required=A===Q0,this.start=n,this.end=a}return r.prototype.slice=function(){return hA.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),m1=function(r,e){var A=Ol(r),n=f1(A,e),a=n[0],o=n[1],c=n[2],d=A.length,f=0,m=0;return{next:function(){if(m>=d)return{done:!0,value:null};for(var g=Dt;m<d&&(g=d1(A,o,a,++m,c))===Dt;);if(g!==Dt||m===d){var w=new h1(A,g,f,m);return f=m,{value:w,done:!1}}return{done:!0,value:null}}}},g1=1,p1=2,Ia=4,Og=8,_l=10,Mg=47,wa=92,w1=9,x1=32,Xo=34,sa=61,v1=35,B1=36,y1=37,qo=39,Zo=40,ia=41,b1=95,tr=45,C1=33,E1=60,_1=62,Q1=64,U1=91,F1=93,S1=61,k1=123,el=63,N1=125,Kg=124,I1=126,j1=128,Gg=65533,zu=42,ms=43,T1=44,L1=58,H1=59,Ua=46,D1=0,P1=8,R1=11,O1=14,M1=31,K1=127,$r=-1,F0=48,S0=97,k0=101,G1=102,$1=117,W1=122,N0=65,I0=69,j0=70,V1=85,z1=90,RA=function(r){return r>=F0&&r<=57},J1=function(r){return r>=55296&&r<=57343},ri=function(r){return RA(r)||r>=N0&&r<=j0||r>=S0&&r<=G1},Y1=function(r){return r>=S0&&r<=W1},X1=function(r){return r>=N0&&r<=z1},q1=function(r){return Y1(r)||X1(r)},Z1=function(r){return r>=j1},tl=function(r){return r===_l||r===w1||r===x1},Ql=function(r){return q1(r)||Z1(r)||r===b1},$g=function(r){return Ql(r)||RA(r)||r===tr},eE=function(r){return r>=D1&&r<=P1||r===R1||r>=O1&&r<=M1||r===K1},Ln=function(r,e){return r!==wa?!1:e!==_l},Al=function(r,e,A){return r===tr?Ql(e)||Ln(e,A):Ql(r)?!0:!!(r===wa&&Ln(r,e))},Ju=function(r,e,A){return r===ms||r===tr?RA(e)?!0:e===Ua&&RA(A):RA(r===Ua?e:r)},tE=function(r){var e=0,A=1;(r[e]===ms||r[e]===tr)&&(r[e]===tr&&(A=-1),e++);for(var n=[];RA(r[e]);)n.push(r[e++]);var a=n.length?parseInt(hA.apply(void 0,n),10):0;r[e]===Ua&&e++;for(var o=[];RA(r[e]);)o.push(r[e++]);var c=o.length,d=c?parseInt(hA.apply(void 0,o),10):0;(r[e]===I0||r[e]===k0)&&e++;var f=1;(r[e]===ms||r[e]===tr)&&(r[e]===tr&&(f=-1),e++);for(var m=[];RA(r[e]);)m.push(r[e++]);var g=m.length?parseInt(hA.apply(void 0,m),10):0;return A*(a+d*Math.pow(10,-c))*Math.pow(10,f*g)},AE={type:2},rE={type:3},nE={type:4},sE={type:13},iE={type:8},aE={type:21},oE={type:9},lE={type:10},cE={type:11},uE={type:12},dE={type:14},rl={type:23},fE={type:1},hE={type:25},mE={type:24},gE={type:26},pE={type:27},wE={type:28},xE={type:29},vE={type:31},Dd={type:32},T0=(function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Ol(e))},r.prototype.read=function(){for(var e=[],A=this.consumeToken();A!==Dd;)e.push(A),A=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Xo:return this.consumeStringToken(Xo);case v1:var A=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if($g(A)||Ln(n,a)){var o=Al(A,n,a)?p1:g1,c=this.consumeName();return{type:5,value:c,flags:o}}break;case B1:if(this.peekCodePoint(0)===sa)return this.consumeCodePoint(),sE;break;case qo:return this.consumeStringToken(qo);case Zo:return AE;case ia:return rE;case zu:if(this.peekCodePoint(0)===sa)return this.consumeCodePoint(),dE;break;case ms:if(Ju(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case T1:return nE;case tr:var d=e,f=this.peekCodePoint(0),m=this.peekCodePoint(1);if(Ju(d,f,m))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Al(d,f,m))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(f===tr&&m===_1)return this.consumeCodePoint(),this.consumeCodePoint(),mE;break;case Ua:if(Ju(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Mg:if(this.peekCodePoint(0)===zu)for(this.consumeCodePoint();;){var g=this.consumeCodePoint();if(g===zu&&(g=this.consumeCodePoint(),g===Mg))return this.consumeToken();if(g===$r)return this.consumeToken()}break;case L1:return gE;case H1:return pE;case E1:if(this.peekCodePoint(0)===C1&&this.peekCodePoint(1)===tr&&this.peekCodePoint(2)===tr)return this.consumeCodePoint(),this.consumeCodePoint(),hE;break;case Q1:var w=this.peekCodePoint(0),v=this.peekCodePoint(1),y=this.peekCodePoint(2);if(Al(w,v,y)){var c=this.consumeName();return{type:7,value:c}}break;case U1:return wE;case wa:if(Ln(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case F1:return xE;case S1:if(this.peekCodePoint(0)===sa)return this.consumeCodePoint(),iE;break;case k1:return cE;case N1:return uE;case $1:case V1:var C=this.peekCodePoint(0),b=this.peekCodePoint(1);return C===ms&&(ri(b)||b===el)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Kg:if(this.peekCodePoint(0)===sa)return this.consumeCodePoint(),oE;if(this.peekCodePoint(0)===Kg)return this.consumeCodePoint(),aE;break;case I1:if(this.peekCodePoint(0)===sa)return this.consumeCodePoint(),lE;break;case $r:return Dd}return tl(e)?(this.consumeWhiteSpace(),vE):RA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Ql(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:hA(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],A=this.consumeCodePoint();ri(A)&&e.length<6;)e.push(A),A=this.consumeCodePoint();for(var n=!1;A===el&&e.length<6;)e.push(A),A=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(hA.apply(void 0,e.map(function(f){return f===el?F0:f})),16),o=parseInt(hA.apply(void 0,e.map(function(f){return f===el?j0:f})),16);return{type:30,start:a,end:o}}var c=parseInt(hA.apply(void 0,e),16);if(this.peekCodePoint(0)===tr&&ri(this.peekCodePoint(1))){this.consumeCodePoint(),A=this.consumeCodePoint();for(var d=[];ri(A)&&d.length<6;)d.push(A),A=this.consumeCodePoint();var o=parseInt(hA.apply(void 0,d),16);return{type:30,start:c,end:o}}else return{type:30,start:c,end:c}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Zo?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Zo?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===$r)return{type:22,value:""};var A=this.peekCodePoint(0);if(A===qo||A===Xo){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===$r||this.peekCodePoint(0)===ia)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),rl)}for(;;){var a=this.consumeCodePoint();if(a===$r||a===ia)return{type:22,value:hA.apply(void 0,e)};if(tl(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===$r||this.peekCodePoint(0)===ia?(this.consumeCodePoint(),{type:22,value:hA.apply(void 0,e)}):(this.consumeBadUrlRemnants(),rl);if(a===Xo||a===qo||a===Zo||eE(a))return this.consumeBadUrlRemnants(),rl;if(a===wa)if(Ln(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),rl;else e.push(a)}},r.prototype.consumeWhiteSpace=function(){for(;tl(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ia||e===$r)return;Ln(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var A=5e4,n="";e>0;){var a=Math.min(A,e);n+=hA.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var A="",n=0;do{var a=this._value[n];if(a===$r||a===void 0||a===e)return A+=this.consumeStringSlice(n),{type:0,value:A};if(a===_l)return this._value.splice(0,n),fE;if(a===wa){var o=this._value[n+1];o!==$r&&o!==void 0&&(o===_l?(A+=this.consumeStringSlice(n),n=-1,this._value.shift()):Ln(a,o)&&(A+=this.consumeStringSlice(n),A+=hA(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],A=Ia,n=this.peekCodePoint(0);for((n===ms||n===tr)&&e.push(this.consumeCodePoint());RA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Ua&&RA(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Og;RA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((n===I0||n===k0)&&((a===ms||a===tr)&&RA(o)||RA(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),A=Og;RA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[tE(e),A]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),A=e[0],n=e[1],a=this.peekCodePoint(0),o=this.peekCodePoint(1),c=this.peekCodePoint(2);if(Al(a,o,c)){var d=this.consumeName();return{type:15,number:A,flags:n,unit:d}}return a===y1?(this.consumeCodePoint(),{type:16,number:A,flags:n}):{type:17,number:A,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ri(e)){for(var A=hA(e);ri(this.peekCodePoint(0))&&A.length<6;)A+=hA(this.consumeCodePoint());tl(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(A,16);return n===0||J1(n)||n>1114111?Gg:n}return e===$r?Gg:e},r.prototype.consumeName=function(){for(var e="";;){var A=this.consumeCodePoint();if($g(A))e+=hA(A);else if(Ln(A,this.peekCodePoint(0)))e+=hA(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(A),e}},r})(),L0=(function(){function r(e){this._tokens=e}return r.create=function(e){var A=new T0;return A.write(e),new r(A.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var A=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return A;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var A=this.consumeComponentValue();if(A.type===32)return e;e.push(A),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var A={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||yE(n,e))return A;this.reconsumeToken(n),A.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var A={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return A;this.reconsumeToken(n),A.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Dd:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r})(),ja=function(r){return r.type===15},Bi=function(r){return r.type===17},Jt=function(r){return r.type===20},BE=function(r){return r.type===0},Pd=function(r,e){return Jt(r)&&r.value===e},H0=function(r){return r.type!==31},gi=function(r){return r.type!==31&&r.type!==4},Vr=function(r){var e=[],A=[];return r.forEach(function(n){if(n.type===4){if(A.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(A),A=[];return}n.type!==31&&A.push(n)}),A.length&&e.push(A),e},yE=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},Gn=function(r){return r.type===17||r.type===15},xA=function(r){return r.type===16||Gn(r)},D0=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},jA={type:17,number:0,flags:Ia},uf={type:16,number:50,flags:Ia},Rn={type:16,number:100,flags:Ia},da=function(r,e,A){var n=r[0],a=r[1];return[eA(n,e),eA(typeof a<"u"?a:n,A)]},eA=function(r,e){if(r.type===16)return r.number/100*e;if(ja(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},P0="deg",R0="grad",O0="rad",M0="turn",Ml={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case P0:return Math.PI*e.number/180;case R0:return Math.PI/200*e.number;case O0:return e.number;case M0:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},K0=function(r){return r.type===15&&(r.unit===P0||r.unit===R0||r.unit===O0||r.unit===M0)},G0=function(r){var e=r.filter(Jt).map(function(A){return A.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[jA,jA];case"to top":case"bottom":return Br(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[jA,Rn];case"to right":case"left":return Br(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Rn,Rn];case"to bottom":case"top":return Br(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Rn,jA];case"to left":case"right":return Br(270)}return 0},Br=function(r){return Math.PI*r/180},Mn={name:"color",parse:function(r,e){if(e.type===18){var A=bE[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return A(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),o=e.value.substring(2,3);return On(parseInt(n+n,16),parseInt(a+a,16),parseInt(o+o,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),o=e.value.substring(2,3),c=e.value.substring(3,4);return On(parseInt(n+n,16),parseInt(a+a,16),parseInt(o+o,16),parseInt(c+c,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),o=e.value.substring(4,6);return On(parseInt(n,16),parseInt(a,16),parseInt(o,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),o=e.value.substring(4,6),c=e.value.substring(6,8);return On(parseInt(n,16),parseInt(a,16),parseInt(o,16),parseInt(c,16)/255)}}if(e.type===20){var d=cn[e.value.toUpperCase()];if(typeof d<"u")return d}return cn.TRANSPARENT}},Kn=function(r){return(255&r)===0},FA=function(r){var e=255&r,A=255&r>>8,n=255&r>>16,a=255&r>>24;return e<255?"rgba("+a+","+n+","+A+","+e/255+")":"rgb("+a+","+n+","+A+")"},On=function(r,e,A,n){return(r<<24|e<<16|A<<8|Math.round(n*255)<<0)>>>0},Wg=function(r,e){if(r.type===17)return r.number;if(r.type===16){var A=e===3?1:255;return e===3?r.number/100*A:Math.round(r.number/100*A)}return 0},Vg=function(r,e){var A=e.filter(gi);if(A.length===3){var n=A.map(Wg),a=n[0],o=n[1],c=n[2];return On(a,o,c,1)}if(A.length===4){var d=A.map(Wg),a=d[0],o=d[1],c=d[2],f=d[3];return On(a,o,c,f)}return 0};function Yu(r,e,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(e-r)*A*6+r:A<1/2?e:A<2/3?(e-r)*6*(2/3-A)+r:r}var zg=function(r,e){var A=e.filter(gi),n=A[0],a=A[1],o=A[2],c=A[3],d=(n.type===17?Br(n.number):Ml.parse(r,n))/(Math.PI*2),f=xA(a)?a.number/100:0,m=xA(o)?o.number/100:0,g=typeof c<"u"&&xA(c)?eA(c,1):1;if(f===0)return On(m*255,m*255,m*255,1);var w=m<=.5?m*(f+1):m+f-m*f,v=m*2-w,y=Yu(v,w,d+1/3),C=Yu(v,w,d),b=Yu(v,w,d-1/3);return On(y*255,C*255,b*255,g)},bE={hsl:zg,hsla:zg,rgb:Vg,rgba:Vg},xa=function(r,e){return Mn.parse(r,L0.create(e).parseComponentValue())},cn={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},CE={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(A){if(Jt(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},EE={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Kl=function(r,e){var A=Mn.parse(r,e[0]),n=e[1];return n&&xA(n)?{color:A,stop:n}:{color:A,stop:null}},Jg=function(r,e){var A=r[0],n=r[r.length-1];A.stop===null&&(A.stop=jA),n.stop===null&&(n.stop=Rn);for(var a=[],o=0,c=0;c<r.length;c++){var d=r[c].stop;if(d!==null){var f=eA(d,e);f>o?a.push(f):a.push(o),o=f}else a.push(null)}for(var m=null,c=0;c<a.length;c++){var g=a[c];if(g===null)m===null&&(m=c);else if(m!==null){for(var w=c-m,v=a[m-1],y=(g-v)/(w+1),C=1;C<=w;C++)a[m+C-1]=y*C;m=null}}return r.map(function(b,E){var S=b.color;return{color:S,stop:Math.max(Math.min(1,a[E]/e),0)}})},_E=function(r,e,A){var n=e/2,a=A/2,o=eA(r[0],e)-n,c=a-eA(r[1],A);return(Math.atan2(c,o)+Math.PI*2)%(Math.PI*2)},QE=function(r,e,A){var n=typeof r=="number"?r:_E(r,e,A),a=Math.abs(e*Math.sin(n))+Math.abs(A*Math.cos(n)),o=e/2,c=A/2,d=a/2,f=Math.sin(n-Math.PI/2)*d,m=Math.cos(n-Math.PI/2)*d;return[a,o-m,o+m,c-f,c+f]},jr=function(r,e){return Math.sqrt(r*r+e*e)},Yg=function(r,e,A,n,a){var o=[[0,0],[0,e],[r,0],[r,e]];return o.reduce(function(c,d){var f=d[0],m=d[1],g=jr(A-f,n-m);return(a?g<c.optimumDistance:g>c.optimumDistance)?{optimumCorner:d,optimumDistance:g}:c},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},UE=function(r,e,A,n,a){var o=0,c=0;switch(r.size){case 0:r.shape===0?o=c=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(A),Math.abs(A-a)):r.shape===1&&(o=Math.min(Math.abs(e),Math.abs(e-n)),c=Math.min(Math.abs(A),Math.abs(A-a)));break;case 2:if(r.shape===0)o=c=Math.min(jr(e,A),jr(e,A-a),jr(e-n,A),jr(e-n,A-a));else if(r.shape===1){var d=Math.min(Math.abs(A),Math.abs(A-a))/Math.min(Math.abs(e),Math.abs(e-n)),f=Yg(n,a,e,A,!0),m=f[0],g=f[1];o=jr(m-e,(g-A)/d),c=d*o}break;case 1:r.shape===0?o=c=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(A),Math.abs(A-a)):r.shape===1&&(o=Math.max(Math.abs(e),Math.abs(e-n)),c=Math.max(Math.abs(A),Math.abs(A-a)));break;case 3:if(r.shape===0)o=c=Math.max(jr(e,A),jr(e,A-a),jr(e-n,A),jr(e-n,A-a));else if(r.shape===1){var d=Math.max(Math.abs(A),Math.abs(A-a))/Math.max(Math.abs(e),Math.abs(e-n)),w=Yg(n,a,e,A,!1),m=w[0],g=w[1];o=jr(m-e,(g-A)/d),c=d*o}break}return Array.isArray(r.size)&&(o=eA(r.size[0],n),c=r.size.length===2?eA(r.size[1],a):o),[o,c]},FE=function(r,e){var A=Br(180),n=[];return Vr(e).forEach(function(a,o){if(o===0){var c=a[0];if(c.type===20&&c.value==="to"){A=G0(a);return}else if(K0(c)){A=Ml.parse(r,c);return}}var d=Kl(r,a);n.push(d)}),{angle:A,stops:n,type:1}},nl=function(r,e){var A=Br(180),n=[];return Vr(e).forEach(function(a,o){if(o===0){var c=a[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){A=G0(a);return}else if(K0(c)){A=(Ml.parse(r,c)+Br(270))%Br(360);return}}var d=Kl(r,a);n.push(d)}),{angle:A,stops:n,type:1}},SE=function(r,e){var A=Br(180),n=[],a=1,o=0,c=3,d=[];return Vr(e).forEach(function(f,m){var g=f[0];if(m===0){if(Jt(g)&&g.value==="linear"){a=1;return}else if(Jt(g)&&g.value==="radial"){a=2;return}}if(g.type===18){if(g.name==="from"){var w=Mn.parse(r,g.values[0]);n.push({stop:jA,color:w})}else if(g.name==="to"){var w=Mn.parse(r,g.values[0]);n.push({stop:Rn,color:w})}else if(g.name==="color-stop"){var v=g.values.filter(gi);if(v.length===2){var w=Mn.parse(r,v[1]),y=v[0];Bi(y)&&n.push({stop:{type:16,number:y.number*100,flags:y.flags},color:w})}}}}),a===1?{angle:(A+Br(180))%Br(360),stops:n,type:a}:{size:c,shape:o,stops:n,position:d,type:a}},$0="closest-side",W0="farthest-side",V0="closest-corner",z0="farthest-corner",J0="circle",Y0="ellipse",X0="cover",q0="contain",kE=function(r,e){var A=0,n=3,a=[],o=[];return Vr(e).forEach(function(c,d){var f=!0;if(d===0){var m=!1;f=c.reduce(function(w,v){if(m)if(Jt(v))switch(v.value){case"center":return o.push(uf),w;case"top":case"left":return o.push(jA),w;case"right":case"bottom":return o.push(Rn),w}else(xA(v)||Gn(v))&&o.push(v);else if(Jt(v))switch(v.value){case J0:return A=0,!1;case Y0:return A=1,!1;case"at":return m=!0,!1;case $0:return n=0,!1;case X0:case W0:return n=1,!1;case q0:case V0:return n=2,!1;case z0:return n=3,!1}else if(Gn(v)||xA(v))return Array.isArray(n)||(n=[]),n.push(v),!1;return w},f)}if(f){var g=Kl(r,c);a.push(g)}}),{size:n,shape:A,stops:a,position:o,type:2}},sl=function(r,e){var A=0,n=3,a=[],o=[];return Vr(e).forEach(function(c,d){var f=!0;if(d===0?f=c.reduce(function(g,w){if(Jt(w))switch(w.value){case"center":return o.push(uf),!1;case"top":case"left":return o.push(jA),!1;case"right":case"bottom":return o.push(Rn),!1}else if(xA(w)||Gn(w))return o.push(w),!1;return g},f):d===1&&(f=c.reduce(function(g,w){if(Jt(w))switch(w.value){case J0:return A=0,!1;case Y0:return A=1,!1;case q0:case $0:return n=0,!1;case W0:return n=1,!1;case V0:return n=2,!1;case X0:case z0:return n=3,!1}else if(Gn(w)||xA(w))return Array.isArray(n)||(n=[]),n.push(w),!1;return g},f)),f){var m=Kl(r,c);a.push(m)}}),{size:n,shape:A,stops:a,position:o,type:2}},NE=function(r){return r.type===1},IE=function(r){return r.type===2},df={name:"image",parse:function(r,e){if(e.type===22){var A={url:e.value,type:0};return r.cache.addImage(e.value),A}if(e.type===18){var n=Z0[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function jE(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!Z0[r.name])}var Z0={"linear-gradient":FE,"-moz-linear-gradient":nl,"-ms-linear-gradient":nl,"-o-linear-gradient":nl,"-webkit-linear-gradient":nl,"radial-gradient":kE,"-moz-radial-gradient":sl,"-ms-radial-gradient":sl,"-o-radial-gradient":sl,"-webkit-radial-gradient":sl,"-webkit-gradient":SE},TE={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e.filter(function(n){return gi(n)&&jE(n)}).map(function(n){return df.parse(r,n)})}},LE={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(A){if(Jt(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},HE={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return Vr(e).map(function(A){return A.filter(xA)}).map(D0)}},DE={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return Vr(e).map(function(A){return A.filter(Jt).map(function(n){return n.value}).join(" ")}).map(PE)}},PE=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},hi;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(hi||(hi={}));var RE={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return Vr(e).map(function(A){return A.filter(OE)})}},OE=function(r){return Jt(r)||xA(r)},Gl=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ME=Gl("top"),KE=Gl("right"),GE=Gl("bottom"),$E=Gl("left"),$l=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,A){return D0(A.filter(xA))}}},WE=$l("top-left"),VE=$l("top-right"),zE=$l("bottom-right"),JE=$l("bottom-left"),Wl=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,A){switch(A){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},YE=Wl("top"),XE=Wl("right"),qE=Wl("bottom"),ZE=Wl("left"),Vl=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return ja(A)?A.number:0}}},e_=Vl("top"),t_=Vl("right"),A_=Vl("bottom"),r_=Vl("left"),n_={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},s_={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},i_={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Jt).reduce(function(A,n){return A|a_(n.value)},0)}},a_=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},o_={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},l_={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Ul;(function(r){r.NORMAL="normal",r.STRICT="strict"})(Ul||(Ul={}));var c_={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return Ul.STRICT;case"normal":default:return Ul.NORMAL}}},u_={name:"line-height",initialValue:"normal",prefix:!1,type:4},Xg=function(r,e){return Jt(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:xA(r)?eA(r,e):e},d_={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:df.parse(r,e)}},f_={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Rd={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},zl=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},h_=zl("top"),m_=zl("right"),g_=zl("bottom"),p_=zl("left"),w_={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Jt).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},x_={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Jl=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},v_=Jl("top"),B_=Jl("right"),y_=Jl("bottom"),b_=Jl("left"),C_={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},E_={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},__={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Pd(e[0],"none")?[]:Vr(e).map(function(A){for(var n={color:cn.TRANSPARENT,offsetX:jA,offsetY:jA,blur:jA},a=0,o=0;o<A.length;o++){var c=A[o];Gn(c)?(a===0?n.offsetX=c:a===1?n.offsetY=c:n.blur=c,a++):n.color=Mn.parse(r,c)}return n})}},Q_={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},U_={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var A=k_[e.name];if(typeof A>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return A(e.values)}return null}},F_=function(r){var e=r.filter(function(A){return A.type===17}).map(function(A){return A.number});return e.length===6?e:null},S_=function(r){var e=r.filter(function(f){return f.type===17}).map(function(f){return f.number}),A=e[0],n=e[1];e[2],e[3];var a=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var c=e[12],d=e[13];return e[14],e[15],e.length===16?[A,n,a,o,c,d]:null},k_={matrix:F_,matrix3d:S_},qg={type:16,number:50,flags:Ia},N_=[qg,qg],I_={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var A=e.filter(xA);return A.length!==2?N_:[A[0],A[1]]}},j_={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},va;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(va||(va={}));var T_={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return va.BREAK_ALL;case"keep-all":return va.KEEP_ALL;case"normal":default:return va.NORMAL}}},L_={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(Bi(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ew={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},H_={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return Bi(e)?e.number:1}},D_={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},P_={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Jt).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return A!==0})}},R_={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var A=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:A.push(a.value);break;case 17:A.push(a.number.toString());break;case 4:n.push(A.join(" ")),A.length=0;break}}),A.length&&n.push(A.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},O_={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},M_={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(Bi(e))return e.number;if(Jt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},K_={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Jt).map(function(A){return A.value})}},G_={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},CA=function(r,e){return(r&e)!==0},$_={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var A=e[0];return A.type===20&&A.value==="none"?[]:e}},W_={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;for(var n=[],a=e.filter(H0),o=0;o<a.length;o++){var c=a[o],d=a[o+1];if(c.type===20){var f=d&&Bi(d)?d.number:1;n.push({counter:c.value,increment:f})}}return n}},V_={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var A=[],n=e.filter(H0),a=0;a<n.length;a++){var o=n[a],c=n[a+1];if(Jt(o)&&o.value!=="none"){var d=c&&Bi(c)?c.number:0;A.push({counter:o.value,reset:d})}}return A}},z_={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(ja).map(function(A){return ew.parse(r,A)})}},J_={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var A=e[0];if(A.type===20&&A.value==="none")return null;var n=[],a=e.filter(BE);if(a.length%2!==0)return null;for(var o=0;o<a.length;o+=2){var c=a[o].value,d=a[o+1].value;n.push({open:c,close:d})}return n}},Zg=function(r,e,A){if(!r)return"";var n=r[Math.min(e,r.length-1)];return n?A?n.open:n.close:""},Y_={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Pd(e[0],"none")?[]:Vr(e).map(function(A){for(var n={color:255,offsetX:jA,offsetY:jA,blur:jA,spread:jA,inset:!1},a=0,o=0;o<A.length;o++){var c=A[o];Pd(c,"inset")?n.inset=!0:Gn(c)?(a===0?n.offsetX=c:a===1?n.offsetY=c:a===2?n.blur=c:n.spread=c,a++):n.color=Mn.parse(r,c)}return n})}},X_={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var A=[0,1,2],n=[];return e.filter(Jt).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),A.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},q_={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Z_={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return ja(e)?e.number:0}},eQ=(function(){function r(e,A){var n,a;this.animationDuration=it(e,z_,A.animationDuration),this.backgroundClip=it(e,CE,A.backgroundClip),this.backgroundColor=it(e,EE,A.backgroundColor),this.backgroundImage=it(e,TE,A.backgroundImage),this.backgroundOrigin=it(e,LE,A.backgroundOrigin),this.backgroundPosition=it(e,HE,A.backgroundPosition),this.backgroundRepeat=it(e,DE,A.backgroundRepeat),this.backgroundSize=it(e,RE,A.backgroundSize),this.borderTopColor=it(e,ME,A.borderTopColor),this.borderRightColor=it(e,KE,A.borderRightColor),this.borderBottomColor=it(e,GE,A.borderBottomColor),this.borderLeftColor=it(e,$E,A.borderLeftColor),this.borderTopLeftRadius=it(e,WE,A.borderTopLeftRadius),this.borderTopRightRadius=it(e,VE,A.borderTopRightRadius),this.borderBottomRightRadius=it(e,zE,A.borderBottomRightRadius),this.borderBottomLeftRadius=it(e,JE,A.borderBottomLeftRadius),this.borderTopStyle=it(e,YE,A.borderTopStyle),this.borderRightStyle=it(e,XE,A.borderRightStyle),this.borderBottomStyle=it(e,qE,A.borderBottomStyle),this.borderLeftStyle=it(e,ZE,A.borderLeftStyle),this.borderTopWidth=it(e,e_,A.borderTopWidth),this.borderRightWidth=it(e,t_,A.borderRightWidth),this.borderBottomWidth=it(e,A_,A.borderBottomWidth),this.borderLeftWidth=it(e,r_,A.borderLeftWidth),this.boxShadow=it(e,Y_,A.boxShadow),this.color=it(e,n_,A.color),this.direction=it(e,s_,A.direction),this.display=it(e,i_,A.display),this.float=it(e,o_,A.cssFloat),this.fontFamily=it(e,R_,A.fontFamily),this.fontSize=it(e,O_,A.fontSize),this.fontStyle=it(e,G_,A.fontStyle),this.fontVariant=it(e,K_,A.fontVariant),this.fontWeight=it(e,M_,A.fontWeight),this.letterSpacing=it(e,l_,A.letterSpacing),this.lineBreak=it(e,c_,A.lineBreak),this.lineHeight=it(e,u_,A.lineHeight),this.listStyleImage=it(e,d_,A.listStyleImage),this.listStylePosition=it(e,f_,A.listStylePosition),this.listStyleType=it(e,Rd,A.listStyleType),this.marginTop=it(e,h_,A.marginTop),this.marginRight=it(e,m_,A.marginRight),this.marginBottom=it(e,g_,A.marginBottom),this.marginLeft=it(e,p_,A.marginLeft),this.opacity=it(e,H_,A.opacity);var o=it(e,w_,A.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=it(e,x_,A.overflowWrap),this.paddingTop=it(e,v_,A.paddingTop),this.paddingRight=it(e,B_,A.paddingRight),this.paddingBottom=it(e,y_,A.paddingBottom),this.paddingLeft=it(e,b_,A.paddingLeft),this.paintOrder=it(e,X_,A.paintOrder),this.position=it(e,E_,A.position),this.textAlign=it(e,C_,A.textAlign),this.textDecorationColor=it(e,D_,(n=A.textDecorationColor)!==null&&n!==void 0?n:A.color),this.textDecorationLine=it(e,P_,(a=A.textDecorationLine)!==null&&a!==void 0?a:A.textDecoration),this.textShadow=it(e,__,A.textShadow),this.textTransform=it(e,Q_,A.textTransform),this.transform=it(e,U_,A.transform),this.transformOrigin=it(e,I_,A.transformOrigin),this.visibility=it(e,j_,A.visibility),this.webkitTextStrokeColor=it(e,q_,A.webkitTextStrokeColor),this.webkitTextStrokeWidth=it(e,Z_,A.webkitTextStrokeWidth),this.wordBreak=it(e,T_,A.wordBreak),this.zIndex=it(e,L_,A.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return Kn(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return CA(this.display,4)||CA(this.display,33554432)||CA(this.display,268435456)||CA(this.display,536870912)||CA(this.display,67108864)||CA(this.display,134217728)},r})(),tQ=(function(){function r(e,A){this.content=it(e,$_,A.content),this.quotes=it(e,J_,A.quotes)}return r})(),ep=(function(){function r(e,A){this.counterIncrement=it(e,W_,A.counterIncrement),this.counterReset=it(e,V_,A.counterReset)}return r})(),it=function(r,e,A){var n=new T0,a=A!==null&&typeof A<"u"?A.toString():e.initialValue;n.write(a);var o=new L0(n.read());switch(e.type){case 2:var c=o.parseComponentValue();return e.parse(r,Jt(c)?c.value:e.initialValue);case 0:return e.parse(r,o.parseComponentValue());case 1:return e.parse(r,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return Ml.parse(r,o.parseComponentValue());case"color":return Mn.parse(r,o.parseComponentValue());case"image":return df.parse(r,o.parseComponentValue());case"length":var d=o.parseComponentValue();return Gn(d)?d:jA;case"length-percentage":var f=o.parseComponentValue();return xA(f)?f:jA;case"time":return ew.parse(r,o.parseComponentValue())}break}},AQ="data-html2canvas-debug",rQ=function(r){var e=r.getAttribute(AQ);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Od=function(r,e){var A=rQ(r);return A===1||e===A},zr=(function(){function r(e,A){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Od(A,3))debugger;this.styles=new eQ(e,window.getComputedStyle(A,null)),Gd(A)&&(this.styles.animationDuration.some(function(n){return n>0})&&(A.style.animationDuration="0s"),this.styles.transform!==null&&(A.style.transform="none")),this.bounds=Rl(this.context,A),Od(A,4)&&(this.flags|=16)}return r})(),nQ="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fa=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var il=0;il<tp.length;il++)fa[tp.charCodeAt(il)]=il;var sQ=function(r){var e=r.length*.75,A=r.length,n,a=0,o,c,d,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(m)?m:new Uint8Array(m);for(n=0;n<A;n+=4)o=fa[r.charCodeAt(n)],c=fa[r.charCodeAt(n+1)],d=fa[r.charCodeAt(n+2)],f=fa[r.charCodeAt(n+3)],g[a++]=o<<2|c>>4,g[a++]=(c&15)<<4|d>>2,g[a++]=(d&3)<<6|f&63;return m},iQ=function(r){for(var e=r.length,A=[],n=0;n<e;n+=2)A.push(r[n+1]<<8|r[n]);return A},aQ=function(r){for(var e=r.length,A=[],n=0;n<e;n+=4)A.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return A},ps=5,ff=11,Xu=2,oQ=ff-ps,tw=65536>>ps,lQ=1<<ps,qu=lQ-1,cQ=1024>>ps,uQ=tw+cQ,dQ=uQ,fQ=32,hQ=dQ+fQ,mQ=65536>>ff,gQ=1<<oQ,pQ=gQ-1,Ap=function(r,e,A){return r.slice?r.slice(e,A):new Uint16Array(Array.prototype.slice.call(r,e,A))},wQ=function(r,e,A){return r.slice?r.slice(e,A):new Uint32Array(Array.prototype.slice.call(r,e,A))},xQ=function(r,e){var A=sQ(r),n=Array.isArray(A)?aQ(A):new Uint32Array(A),a=Array.isArray(A)?iQ(A):new Uint16Array(A),o=24,c=Ap(a,o/2,n[4]/2),d=n[5]===2?Ap(a,(o+n[4])/2):wQ(n,Math.ceil((o+n[4])/4));return new vQ(n[0],n[1],n[2],n[3],c,d)},vQ=(function(){function r(e,A,n,a,o,c){this.initialValue=e,this.errorValue=A,this.highStart=n,this.highValueIndex=a,this.index=o,this.data=c}return r.prototype.get=function(e){var A;if(e>=0){if(e<55296||e>56319&&e<=65535)return A=this.index[e>>ps],A=(A<<Xu)+(e&qu),this.data[A];if(e<=65535)return A=this.index[tw+(e-55296>>ps)],A=(A<<Xu)+(e&qu),this.data[A];if(e<this.highStart)return A=hQ-mQ+(e>>ff),A=this.index[A],A+=e>>ps&pQ,A=this.index[A],A=(A<<Xu)+(e&qu),this.data[A];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),rp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BQ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var al=0;al<rp.length;al++)BQ[rp.charCodeAt(al)]=al;var yQ=1,Zu=2,ed=3,np=4,sp=5,bQ=7,ip=8,td=9,Ad=10,ap=11,op=12,lp=13,cp=14,rd=15,CQ=function(r){for(var e=[],A=0,n=r.length;A<n;){var a=r.charCodeAt(A++);if(a>=55296&&a<=56319&&A<n){var o=r.charCodeAt(A++);(o&64512)===56320?e.push(((a&1023)<<10)+(o&1023)+65536):(e.push(a),A--)}else e.push(a)}return e},EQ=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var A=r.length;if(!A)return"";for(var n=[],a=-1,o="";++a<A;){var c=r[a];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(a+1===A||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},_Q=xQ(nQ),xr="",nd="",QQ=function(r){return _Q.get(r)},UQ=function(r,e,A){var n=A-2,a=e[n],o=e[A-1],c=e[A];if(o===Zu&&c===ed)return xr;if(o===Zu||o===ed||o===np||c===Zu||c===ed||c===np)return nd;if(o===ip&&[ip,td,ap,op].indexOf(c)!==-1||(o===ap||o===td)&&(c===td||c===Ad)||(o===op||o===Ad)&&c===Ad||c===lp||c===sp||c===bQ||o===yQ)return xr;if(o===lp&&c===cp){for(;a===sp;)a=e[--n];if(a===cp)return xr}if(o===rd&&c===rd){for(var d=0;a===rd;)d++,a=e[--n];if(d%2===0)return xr}return nd},FQ=function(r){var e=CQ(r),A=e.length,n=0,a=0,o=e.map(QQ);return{next:function(){if(n>=A)return{done:!0,value:null};for(var c=xr;n<A&&(c=UQ(e,o,++n))===xr;);if(c!==xr||n===A){var d=EQ.apply(null,e.slice(a,n));return a=n,{value:d,done:!1}}return{done:!0,value:null}}}},SQ=function(r){for(var e=FQ(r),A=[],n;!(n=e.next()).done;)n.value&&A.push(n.value.slice());return A},kQ=function(r){var e=123;if(r.createRange){var A=r.createRange();if(A.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),A.selectNode(n);var a=A.getBoundingClientRect(),o=Math.round(a.height);if(r.body.removeChild(n),o===e)return!0}}return!1},NQ=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var A=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Ol(n.data).map(function(f){return hA(f)}),o=0,c={},d=a.every(function(f,m){A.setStart(n,o),A.setEnd(n,o+f.length);var g=A.getBoundingClientRect();o+=f.length;var w=g.x>c.x||g.y>c.y;return c=g,m===0?!0:w});return r.body.removeChild(e),d},IQ=function(){return typeof new Image().crossOrigin<"u"},jQ=function(){return typeof new XMLHttpRequest().responseType=="string"},TQ=function(r){var e=new Image,A=r.createElement("canvas"),n=A.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),A.toDataURL()}catch{return!1}return!0},up=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},LQ=function(r){var e=r.createElement("canvas"),A=100;e.width=A,e.height=A;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,A,A);var a=new Image,o=e.toDataURL();a.src=o;var c=Md(A,A,0,0,a);return n.fillStyle="red",n.fillRect(0,0,A,A),dp(c).then(function(d){n.drawImage(d,0,0);var f=n.getImageData(0,0,A,A).data;n.fillStyle="red",n.fillRect(0,0,A,A);var m=r.createElement("div");return m.style.backgroundImage="url("+o+")",m.style.height=A+"px",up(f)?dp(Md(A,A,0,0,m)):Promise.reject(!1)}).then(function(d){return n.drawImage(d,0,0),up(n.getImageData(0,0,A,A).data)}).catch(function(){return!1})},Md=function(r,e,A,n,a){var o="http://www.w3.org/2000/svg",c=document.createElementNS(o,"svg"),d=document.createElementNS(o,"foreignObject");return c.setAttributeNS(null,"width",r.toString()),c.setAttributeNS(null,"height",e.toString()),d.setAttributeNS(null,"width","100%"),d.setAttributeNS(null,"height","100%"),d.setAttributeNS(null,"x",A.toString()),d.setAttributeNS(null,"y",n.toString()),d.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(d),d.appendChild(a),c},dp=function(r){return new Promise(function(e,A){var n=new Image;n.onload=function(){return e(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},NA={get SUPPORT_RANGE_BOUNDS(){var r=kQ(document);return Object.defineProperty(NA,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=NA.SUPPORT_RANGE_BOUNDS&&NQ(document);return Object.defineProperty(NA,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=TQ(document);return Object.defineProperty(NA,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?LQ(document):Promise.resolve(!1);return Object.defineProperty(NA,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=IQ();return Object.defineProperty(NA,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=jQ();return Object.defineProperty(NA,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(NA,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(NA,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Ba=(function(){function r(e,A){this.text=e,this.bounds=A}return r})(),HQ=function(r,e,A,n){var a=RQ(e,A),o=[],c=0;return a.forEach(function(d){if(A.textDecorationLine.length||d.trim().length>0)if(NA.SUPPORT_RANGE_BOUNDS){var f=fp(n,c,d.length).getClientRects();if(f.length>1){var m=hf(d),g=0;m.forEach(function(v){o.push(new Ba(v,dn.fromDOMRectList(r,fp(n,g+c,v.length).getClientRects()))),g+=v.length})}else o.push(new Ba(d,dn.fromDOMRectList(r,f)))}else{var w=n.splitText(d.length);o.push(new Ba(d,DQ(r,n))),n=w}else NA.SUPPORT_RANGE_BOUNDS||(n=n.splitText(d.length));c+=d.length}),o},DQ=function(r,e){var A=e.ownerDocument;if(A){var n=A.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var o=Rl(r,n);return n.firstChild&&a.replaceChild(n.firstChild,n),o}}return dn.EMPTY},fp=function(r,e,A){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(r,e),a.setEnd(r,e+A),a},hf=function(r){if(NA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(A){return A.segment})}return SQ(r)},PQ=function(r,e){if(NA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(r)).map(function(n){return n.segment})}return MQ(r,e)},RQ=function(r,e){return e.letterSpacing!==0?hf(r):PQ(r,e)},OQ=[32,160,4961,65792,65793,4153,4241],MQ=function(r,e){for(var A=m1(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,o=function(){if(a.value){var c=a.value.slice(),d=Ol(c),f="";d.forEach(function(m){OQ.indexOf(m)===-1?f+=hA(m):(f.length&&n.push(f),n.push(hA(m)),f="")}),f.length&&n.push(f)}};!(a=A.next()).done;)o();return n},KQ=(function(){function r(e,A,n){this.text=GQ(A.data,n.textTransform),this.textBounds=HQ(e,this.text,n,A)}return r})(),GQ=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace($Q,WQ);case 2:return r.toUpperCase();default:return r}},$Q=/(^|\s|:|-|\(|\))([a-z])/g,WQ=function(r,e,A){return r.length>0?e+A.toUpperCase():r},Aw=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e})(zr),rw=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e})(zr),nw=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this,o=new XMLSerializer,c=Rl(A,n);return n.setAttribute("width",c.width+"px"),n.setAttribute("height",c.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e})(zr),sw=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;return a.value=n.value,a}return e})(zr),Kd=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e})(zr),VQ=[{type:15,flags:0,unit:"px",number:3}],zQ=[{type:16,flags:0,number:50}],JQ=function(r){return r.width>r.height?new dn(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new dn(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},YQ=function(r){var e=r.type===XQ?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},Fl="checkbox",Sl="radio",XQ="password",hp=707406591,mf=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=YQ(n),(a.type===Fl||a.type===Sl)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=JQ(a.bounds)),a.type){case Fl:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=VQ;break;case Sl:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=zQ;break}return a}return e})(zr),iw=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this,o=n.options[n.selectedIndex||0];return a.value=o&&o.text||"",a}return e})(zr),aw=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;return a.value=n.value,a}return e})(zr),ow=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=cw(A,n.contentWindow.document.documentElement);var o=n.contentWindow.document.documentElement?xa(A,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):cn.TRANSPARENT,c=n.contentWindow.document.body?xa(A,getComputedStyle(n.contentWindow.document.body).backgroundColor):cn.TRANSPARENT;a.backgroundColor=Kn(o)?Kn(c)?a.styles.backgroundColor:c:o}}catch{}return a}return e})(zr),qQ=["OL","UL","MENU"],wl=function(r,e,A,n){for(var a=e.firstChild,o=void 0;a;a=o)if(o=a.nextSibling,uw(a)&&a.data.trim().length>0)A.textNodes.push(new KQ(r,a,A.styles));else if(di(a))if(mw(a)&&a.assignedNodes)a.assignedNodes().forEach(function(d){return wl(r,d,A,n)});else{var c=lw(r,a);c.styles.isVisible()&&(ZQ(a,c,n)?c.flags|=4:eU(c.styles)&&(c.flags|=2),qQ.indexOf(a.tagName)!==-1&&(c.flags|=8),A.elements.push(c),a.slot,a.shadowRoot?wl(r,a.shadowRoot,c,n):!kl(a)&&!dw(a)&&!Nl(a)&&wl(r,a,c,n))}},lw=function(r,e){return $d(e)?new Aw(r,e):fw(e)?new rw(r,e):dw(e)?new nw(r,e):tU(e)?new sw(r,e):AU(e)?new Kd(r,e):rU(e)?new mf(r,e):Nl(e)?new iw(r,e):kl(e)?new aw(r,e):hw(e)?new ow(r,e):new zr(r,e)},cw=function(r,e){var A=lw(r,e);return A.flags|=4,wl(r,e,A,A),A},ZQ=function(r,e,A){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||gf(r)&&A.styles.isTransparent()},eU=function(r){return r.isPositioned()||r.isFloating()},uw=function(r){return r.nodeType===Node.TEXT_NODE},di=function(r){return r.nodeType===Node.ELEMENT_NODE},Gd=function(r){return di(r)&&typeof r.style<"u"&&!xl(r)},xl=function(r){return typeof r.className=="object"},tU=function(r){return r.tagName==="LI"},AU=function(r){return r.tagName==="OL"},rU=function(r){return r.tagName==="INPUT"},nU=function(r){return r.tagName==="HTML"},dw=function(r){return r.tagName==="svg"},gf=function(r){return r.tagName==="BODY"},fw=function(r){return r.tagName==="CANVAS"},mp=function(r){return r.tagName==="VIDEO"},$d=function(r){return r.tagName==="IMG"},hw=function(r){return r.tagName==="IFRAME"},gp=function(r){return r.tagName==="STYLE"},sU=function(r){return r.tagName==="SCRIPT"},kl=function(r){return r.tagName==="TEXTAREA"},Nl=function(r){return r.tagName==="SELECT"},mw=function(r){return r.tagName==="SLOT"},pp=function(r){return r.tagName.indexOf("-")>0},iU=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var A=this.counters[e];return A&&A.length?A[A.length-1]:1},r.prototype.getCounterValues=function(e){var A=this.counters[e];return A||[]},r.prototype.pop=function(e){var A=this;e.forEach(function(n){return A.counters[n].pop()})},r.prototype.parse=function(e){var A=this,n=e.counterIncrement,a=e.counterReset,o=!0;n!==null&&n.forEach(function(d){var f=A.counters[d.counter];f&&d.increment!==0&&(o=!1,f.length||f.push(1),f[Math.max(0,f.length-1)]+=d.increment)});var c=[];return o&&a.forEach(function(d){var f=A.counters[d.counter];c.push(d.counter),f||(f=A.counters[d.counter]=[]),f.push(d.reset)}),c},r})(),wp={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xp={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ni=function(r,e,A,n,a,o){return r<e||r>A?Fa(r,a,o.length>0):n.integers.reduce(function(c,d,f){for(;r>=d;)r-=d,c+=n.values[f];return c},"")+o},gw=function(r,e,A,n){var a="";do A||r--,a=n(r)+a,r/=e;while(r*e>=e);return a},fA=function(r,e,A,n,a){var o=A-e+1;return(r<0?"-":"")+(gw(Math.abs(r),o,n,function(c){return hA(Math.floor(c%o)+e)})+a)},as=function(r,e,A){A===void 0&&(A=". ");var n=e.length;return gw(Math.abs(r),n,!1,function(a){return e[Math.floor(a%n)]})+A},ci=1,jn=2,Tn=4,ha=8,sn=function(r,e,A,n,a,o){if(r<-9999||r>9999)return Fa(r,4,a.length>0);var c=Math.abs(r),d=a;if(c===0)return e[0]+d;for(var f=0;c>0&&f<=4;f++){var m=c%10;m===0&&CA(o,ci)&&d!==""?d=e[m]+d:m>1||m===1&&f===0||m===1&&f===1&&CA(o,jn)||m===1&&f===1&&CA(o,Tn)&&r>100||m===1&&f>1&&CA(o,ha)?d=e[m]+(f>0?A[f-1]:"")+d:m===1&&f>0&&(d=A[f-1]+d),c=Math.floor(c/10)}return(r<0?n:"")+d},vp="",Bp="",yp="",sd="",Fa=function(r,e,A){var n=A?". ":"",a=A?"":"",o=A?", ":"",c=A?" ":"";switch(e){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var d=fA(r,48,57,!0,n);return d.length<4?"0"+d:d;case 4:return as(r,"",a);case 6:return ni(r,1,3999,wp,3,n).toLowerCase();case 7:return ni(r,1,3999,wp,3,n);case 8:return fA(r,945,969,!1,n);case 9:return fA(r,97,122,!1,n);case 10:return fA(r,65,90,!1,n);case 11:return fA(r,1632,1641,!0,n);case 12:case 49:return ni(r,1,9999,xp,3,n);case 35:return ni(r,1,9999,xp,3,n).toLowerCase();case 13:return fA(r,2534,2543,!0,n);case 14:case 30:return fA(r,6112,6121,!0,n);case 15:return as(r,"",a);case 16:return as(r,"",a);case 17:case 48:return sn(r,"",vp,"",a,jn|Tn|ha);case 47:return sn(r,"",Bp,"",a,ci|jn|Tn|ha);case 42:return sn(r,"",vp,"",a,jn|Tn|ha);case 41:return sn(r,"",Bp,"",a,ci|jn|Tn|ha);case 26:return sn(r,"","",yp,a,0);case 25:return sn(r,"","",yp,a,ci|jn|Tn);case 31:return sn(r,"","",sd,o,ci|jn|Tn);case 33:return sn(r,"","",sd,o,0);case 32:return sn(r,"","",sd,o,ci|jn|Tn);case 18:return fA(r,2406,2415,!0,n);case 20:return ni(r,1,19999,oU,3,n);case 21:return fA(r,2790,2799,!0,n);case 22:return fA(r,2662,2671,!0,n);case 22:return ni(r,1,10999,aU,3,n);case 23:return as(r,"");case 24:return as(r,"");case 27:return fA(r,3302,3311,!0,n);case 28:return as(r,"",a);case 29:return as(r,"",a);case 34:return fA(r,3792,3801,!0,n);case 37:return fA(r,6160,6169,!0,n);case 38:return fA(r,4160,4169,!0,n);case 39:return fA(r,2918,2927,!0,n);case 40:return fA(r,1776,1785,!0,n);case 43:return fA(r,3046,3055,!0,n);case 44:return fA(r,3174,3183,!0,n);case 45:return fA(r,3664,3673,!0,n);case 46:return fA(r,3872,3881,!0,n);case 3:default:return fA(r,48,57,!0,n)}},pw="data-html2canvas-ignore",bp=(function(){function r(e,A,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=A,this.counters=new iU,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,A){var n=this,a=lU(e,A);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var o=e.defaultView.pageXOffset,c=e.defaultView.pageYOffset,d=a.contentWindow,f=d.document,m=dU(a).then(function(){return $A(n,void 0,void 0,function(){var g,w;return PA(this,function(v){switch(v.label){case 0:return this.scrolledElements.forEach(gU),d&&(d.scrollTo(A.left,A.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(d.scrollY!==A.top||d.scrollX!==A.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(d.scrollX-A.left,d.scrollY-A.top,0,0))),g=this.options.onclone,w=this.clonedReferenceElement,typeof w>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:f.fonts&&f.fonts.ready?[4,f.fonts.ready]:[3,2];case 1:v.sent(),v.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,uU(f)]:[3,4];case 3:v.sent(),v.label=4;case 4:return typeof g=="function"?[2,Promise.resolve().then(function(){return g(f,w)}).then(function(){return a})]:[2,a]}})})});return f.open(),f.write(hU(document.doctype)+"<html></html>"),mU(this.referenceElement.ownerDocument,o,c),f.replaceChild(f.adoptNode(this.documentElement),f.documentElement),f.close(),m},r.prototype.createElementClone=function(e){if(Od(e,2))debugger;if(fw(e))return this.createCanvasClone(e);if(mp(e))return this.createVideoClone(e);if(gp(e))return this.createStyleClone(e);var A=e.cloneNode(!1);return $d(A)&&($d(e)&&e.currentSrc&&e.currentSrc!==e.src&&(A.src=e.currentSrc,A.srcset=""),A.loading==="lazy"&&(A.loading="eager")),pp(A)?this.createCustomElementClone(A):A},r.prototype.createCustomElementClone=function(e){var A=document.createElement("html2canvascustomelement");return id(e.style,A),A},r.prototype.createStyleClone=function(e){try{var A=e.sheet;if(A&&A.cssRules){var n=[].slice.call(A.cssRules,0).reduce(function(o,c){return c&&typeof c.cssText=="string"?o+c.cssText:o},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),o.name!=="SecurityError")throw o}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var o=e.getContext("2d"),c=a.getContext("2d");if(c)if(!this.options.allowTaint&&o)c.putImageData(o.getImageData(0,0,e.width,e.height),0,0);else{var d=(A=e.getContext("webgl2"))!==null&&A!==void 0?A:e.getContext("webgl");if(d){var f=d.getContextAttributes();f?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}c.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},r.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var n=A.getContext("2d");try{return n&&(n.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||n.getImageData(0,0,A.width,A.height)),A}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},r.prototype.appendChildNode=function(e,A,n){(!di(A)||!sU(A)&&!A.hasAttribute(pw)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(A)))&&(!this.options.copyStyles||!di(A)||!gp(A))&&e.appendChild(this.cloneNode(A,n))},r.prototype.cloneChildNodes=function(e,A,n){for(var a=this,o=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;o;o=o.nextSibling)if(di(o)&&mw(o)&&typeof o.assignedNodes=="function"){var c=o.assignedNodes();c.length&&c.forEach(function(d){return a.appendChildNode(A,d,n)})}else this.appendChildNode(A,o,n)},r.prototype.cloneNode=function(e,A){if(uw(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&di(e)&&(Gd(e)||xl(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var o=n.getComputedStyle(e),c=n.getComputedStyle(e,":before"),d=n.getComputedStyle(e,":after");this.referenceElement===e&&Gd(a)&&(this.clonedReferenceElement=a),gf(a)&&xU(a);var f=this.counters.parse(new ep(this.context,o)),m=this.resolvePseudoContent(e,a,c,ya.BEFORE);pp(e)&&(A=!0),mp(e)||this.cloneChildNodes(e,a,A),m&&a.insertBefore(m,a.firstChild);var g=this.resolvePseudoContent(e,a,d,ya.AFTER);return g&&a.appendChild(g),this.counters.pop(f),(o&&(this.options.copyStyles||xl(e))&&!hw(e)||A)&&id(o,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(kl(e)||Nl(e))&&(kl(a)||Nl(a))&&(a.value=e.value),a}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,A,n,a){var o=this;if(n){var c=n.content,d=A.ownerDocument;if(!(!d||!c||c==="none"||c==="-moz-alt-content"||n.display==="none")){this.counters.parse(new ep(this.context,n));var f=new tQ(this.context,n),m=d.createElement("html2canvaspseudoelement");id(n,m),f.content.forEach(function(w){if(w.type===0)m.appendChild(d.createTextNode(w.value));else if(w.type===22){var v=d.createElement("img");v.src=w.value,v.style.opacity="1",m.appendChild(v)}else if(w.type===18){if(w.name==="attr"){var y=w.values.filter(Jt);y.length&&m.appendChild(d.createTextNode(e.getAttribute(y[0].value)||""))}else if(w.name==="counter"){var C=w.values.filter(gi),b=C[0],E=C[1];if(b&&Jt(b)){var S=o.counters.getCounterValue(b.value),k=E&&Jt(E)?Rd.parse(o.context,E.value):3;m.appendChild(d.createTextNode(Fa(S,k,!1)))}}else if(w.name==="counters"){var N=w.values.filter(gi),b=N[0],O=N[1],E=N[2];if(b&&Jt(b)){var j=o.counters.getCounterValues(b.value),L=E&&Jt(E)?Rd.parse(o.context,E.value):3,R=O&&O.type===0?O.value:"",G=j.map(function(W){return Fa(W,L,!1)}).join(R);m.appendChild(d.createTextNode(G))}}}else if(w.type===20)switch(w.value){case"open-quote":m.appendChild(d.createTextNode(Zg(f.quotes,o.quoteDepth++,!0)));break;case"close-quote":m.appendChild(d.createTextNode(Zg(f.quotes,--o.quoteDepth,!1)));break;default:m.appendChild(d.createTextNode(w.value))}}),m.className=Wd+" "+Vd;var g=a===ya.BEFORE?" "+Wd:" "+Vd;return xl(A)?A.className.baseValue+=g:A.className+=g,m}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r})(),ya;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(ya||(ya={}));var lU=function(r,e){var A=r.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=e.width.toString(),A.height=e.height.toString(),A.scrolling="no",A.setAttribute(pw,"true"),r.body.appendChild(A),A},cU=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},uU=function(r){return Promise.all([].slice.call(r.images,0).map(cU))},dU=function(r){return new Promise(function(e,A){var n=r.contentWindow;if(!n)return A("No window assigned for iframe");var a=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var o=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(o),e(r))},50)}})},fU=["all","d","content"],id=function(r,e){for(var A=r.length-1;A>=0;A--){var n=r.item(A);fU.indexOf(n)===-1&&e.style.setProperty(n,r.getPropertyValue(n))}return e},hU=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},mU=function(r,e,A){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||A!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,A)},gU=function(r){var e=r[0],A=r[1],n=r[2];e.scrollLeft=A,e.scrollTop=n},pU=":before",wU=":after",Wd="___html2canvas___pseudoelement_before",Vd="___html2canvas___pseudoelement_after",Cp=`{
    content: "" !important;
    display: none !important;
}`,xU=function(r){vU(r,"."+Wd+pU+Cp+`
         .`+Vd+wU+Cp)},vU=function(r,e){var A=r.ownerDocument;if(A){var n=A.createElement("style");n.textContent=e,r.appendChild(n)}},ww=(function(){function r(){}return r.getOrigin=function(e){var A=r._link;return A?(A.href=e,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r})(),BU=(function(){function r(e,A){this.context=e,this._options=A,this._cache={}}return r.prototype.addImage=function(e){var A=Promise.resolve();return this.has(e)||(od(e)||EU(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),A},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return $A(this,void 0,void 0,function(){var A,n,a,o,c=this;return PA(this,function(d){switch(d.label){case 0:return A=ww.isSameOrigin(e),n=!ad(e)&&this._options.useCORS===!0&&NA.SUPPORT_CORS_IMAGES&&!A,a=!ad(e)&&!A&&!od(e)&&typeof this._options.proxy=="string"&&NA.SUPPORT_CORS_XHR&&!n,!A&&this._options.allowTaint===!1&&!ad(e)&&!od(e)&&!a&&!n?[2]:(o=e,a?[4,this.proxy(o)]:[3,2]);case 1:o=d.sent(),d.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(f,m){var g=new Image;g.onload=function(){return f(g)},g.onerror=m,(_U(o)||n)&&(g.crossOrigin="anonymous"),g.src=o,g.complete===!0&&setTimeout(function(){return f(g)},500),c._options.imageTimeout>0&&setTimeout(function(){return m("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,d.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var A=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(o,c){var d=NA.SUPPORT_RESPONSE_TYPE?"blob":"text",f=new XMLHttpRequest;f.onload=function(){if(f.status===200)if(d==="text")o(f.response);else{var w=new FileReader;w.addEventListener("load",function(){return o(w.result)},!1),w.addEventListener("error",function(v){return c(v)},!1),w.readAsDataURL(f.response)}else c("Failed to proxy resource "+a+" with status code "+f.status)},f.onerror=c;var m=n.indexOf("?")>-1?"&":"?";if(f.open("GET",""+n+m+"url="+encodeURIComponent(e)+"&responseType="+d),d!=="text"&&f instanceof XMLHttpRequest&&(f.responseType=d),A._options.imageTimeout){var g=A._options.imageTimeout;f.timeout=g,f.ontimeout=function(){return c("Timed out ("+g+"ms) proxying "+a)}}f.send()})},r})(),yU=/^data:image\/svg\+xml/i,bU=/^data:image\/.*;base64,/i,CU=/^data:image\/.*/i,EU=function(r){return NA.SUPPORT_SVG_DRAWING||!QU(r)},ad=function(r){return CU.test(r)},_U=function(r){return bU.test(r)},od=function(r){return r.substr(0,4)==="blob"},QU=function(r){return r.substr(-3).toLowerCase()==="svg"||yU.test(r)},At=(function(){function r(e,A){this.type=0,this.x=e,this.y=A}return r.prototype.add=function(e,A){return new r(this.x+e,this.y+A)},r})(),si=function(r,e,A){return new At(r.x+(e.x-r.x)*A,r.y+(e.y-r.y)*A)},ol=(function(){function r(e,A,n,a){this.type=1,this.start=e,this.startControl=A,this.endControl=n,this.end=a}return r.prototype.subdivide=function(e,A){var n=si(this.start,this.startControl,e),a=si(this.startControl,this.endControl,e),o=si(this.endControl,this.end,e),c=si(n,a,e),d=si(a,o,e),f=si(c,d,e);return A?new r(this.start,n,c,f):new r(f,d,o,this.end)},r.prototype.add=function(e,A){return new r(this.start.add(e,A),this.startControl.add(e,A),this.endControl.add(e,A),this.end.add(e,A))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),vr=function(r){return r.type===1},UU=(function(){function r(e){var A=e.styles,n=e.bounds,a=da(A.borderTopLeftRadius,n.width,n.height),o=a[0],c=a[1],d=da(A.borderTopRightRadius,n.width,n.height),f=d[0],m=d[1],g=da(A.borderBottomRightRadius,n.width,n.height),w=g[0],v=g[1],y=da(A.borderBottomLeftRadius,n.width,n.height),C=y[0],b=y[1],E=[];E.push((o+f)/n.width),E.push((C+w)/n.width),E.push((c+b)/n.height),E.push((m+v)/n.height);var S=Math.max.apply(Math,E);S>1&&(o/=S,c/=S,f/=S,m/=S,w/=S,v/=S,C/=S,b/=S);var k=n.width-f,N=n.height-v,O=n.width-w,j=n.height-b,L=A.borderTopWidth,R=A.borderRightWidth,G=A.borderBottomWidth,H=A.borderLeftWidth,ve=eA(A.paddingTop,e.bounds.width),W=eA(A.paddingRight,e.bounds.width),ae=eA(A.paddingBottom,e.bounds.width),fe=eA(A.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||c>0?iA(n.left+H/3,n.top+L/3,o-H/3,c-L/3,$t.TOP_LEFT):new At(n.left+H/3,n.top+L/3),this.topRightBorderDoubleOuterBox=o>0||c>0?iA(n.left+k,n.top+L/3,f-R/3,m-L/3,$t.TOP_RIGHT):new At(n.left+n.width-R/3,n.top+L/3),this.bottomRightBorderDoubleOuterBox=w>0||v>0?iA(n.left+O,n.top+N,w-R/3,v-G/3,$t.BOTTOM_RIGHT):new At(n.left+n.width-R/3,n.top+n.height-G/3),this.bottomLeftBorderDoubleOuterBox=C>0||b>0?iA(n.left+H/3,n.top+j,C-H/3,b-G/3,$t.BOTTOM_LEFT):new At(n.left+H/3,n.top+n.height-G/3),this.topLeftBorderDoubleInnerBox=o>0||c>0?iA(n.left+H*2/3,n.top+L*2/3,o-H*2/3,c-L*2/3,$t.TOP_LEFT):new At(n.left+H*2/3,n.top+L*2/3),this.topRightBorderDoubleInnerBox=o>0||c>0?iA(n.left+k,n.top+L*2/3,f-R*2/3,m-L*2/3,$t.TOP_RIGHT):new At(n.left+n.width-R*2/3,n.top+L*2/3),this.bottomRightBorderDoubleInnerBox=w>0||v>0?iA(n.left+O,n.top+N,w-R*2/3,v-G*2/3,$t.BOTTOM_RIGHT):new At(n.left+n.width-R*2/3,n.top+n.height-G*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||b>0?iA(n.left+H*2/3,n.top+j,C-H*2/3,b-G*2/3,$t.BOTTOM_LEFT):new At(n.left+H*2/3,n.top+n.height-G*2/3),this.topLeftBorderStroke=o>0||c>0?iA(n.left+H/2,n.top+L/2,o-H/2,c-L/2,$t.TOP_LEFT):new At(n.left+H/2,n.top+L/2),this.topRightBorderStroke=o>0||c>0?iA(n.left+k,n.top+L/2,f-R/2,m-L/2,$t.TOP_RIGHT):new At(n.left+n.width-R/2,n.top+L/2),this.bottomRightBorderStroke=w>0||v>0?iA(n.left+O,n.top+N,w-R/2,v-G/2,$t.BOTTOM_RIGHT):new At(n.left+n.width-R/2,n.top+n.height-G/2),this.bottomLeftBorderStroke=C>0||b>0?iA(n.left+H/2,n.top+j,C-H/2,b-G/2,$t.BOTTOM_LEFT):new At(n.left+H/2,n.top+n.height-G/2),this.topLeftBorderBox=o>0||c>0?iA(n.left,n.top,o,c,$t.TOP_LEFT):new At(n.left,n.top),this.topRightBorderBox=f>0||m>0?iA(n.left+k,n.top,f,m,$t.TOP_RIGHT):new At(n.left+n.width,n.top),this.bottomRightBorderBox=w>0||v>0?iA(n.left+O,n.top+N,w,v,$t.BOTTOM_RIGHT):new At(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=C>0||b>0?iA(n.left,n.top+j,C,b,$t.BOTTOM_LEFT):new At(n.left,n.top+n.height),this.topLeftPaddingBox=o>0||c>0?iA(n.left+H,n.top+L,Math.max(0,o-H),Math.max(0,c-L),$t.TOP_LEFT):new At(n.left+H,n.top+L),this.topRightPaddingBox=f>0||m>0?iA(n.left+Math.min(k,n.width-R),n.top+L,k>n.width+R?0:Math.max(0,f-R),Math.max(0,m-L),$t.TOP_RIGHT):new At(n.left+n.width-R,n.top+L),this.bottomRightPaddingBox=w>0||v>0?iA(n.left+Math.min(O,n.width-H),n.top+Math.min(N,n.height-G),Math.max(0,w-R),Math.max(0,v-G),$t.BOTTOM_RIGHT):new At(n.left+n.width-R,n.top+n.height-G),this.bottomLeftPaddingBox=C>0||b>0?iA(n.left+H,n.top+Math.min(j,n.height-G),Math.max(0,C-H),Math.max(0,b-G),$t.BOTTOM_LEFT):new At(n.left+H,n.top+n.height-G),this.topLeftContentBox=o>0||c>0?iA(n.left+H+fe,n.top+L+ve,Math.max(0,o-(H+fe)),Math.max(0,c-(L+ve)),$t.TOP_LEFT):new At(n.left+H+fe,n.top+L+ve),this.topRightContentBox=f>0||m>0?iA(n.left+Math.min(k,n.width+H+fe),n.top+L+ve,k>n.width+H+fe?0:f-H+fe,m-(L+ve),$t.TOP_RIGHT):new At(n.left+n.width-(R+W),n.top+L+ve),this.bottomRightContentBox=w>0||v>0?iA(n.left+Math.min(O,n.width-(H+fe)),n.top+Math.min(N,n.height+L+ve),Math.max(0,w-(R+W)),v-(G+ae),$t.BOTTOM_RIGHT):new At(n.left+n.width-(R+W),n.top+n.height-(G+ae)),this.bottomLeftContentBox=C>0||b>0?iA(n.left+H+fe,n.top+j,Math.max(0,C-(H+fe)),b-(G+ae),$t.BOTTOM_LEFT):new At(n.left+H+fe,n.top+n.height-(G+ae))}return r})(),$t;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})($t||($t={}));var iA=function(r,e,A,n,a){var o=4*((Math.sqrt(2)-1)/3),c=A*o,d=n*o,f=r+A,m=e+n;switch(a){case $t.TOP_LEFT:return new ol(new At(r,m),new At(r,m-d),new At(f-c,e),new At(f,e));case $t.TOP_RIGHT:return new ol(new At(r,e),new At(r+c,e),new At(f,m-d),new At(f,m));case $t.BOTTOM_RIGHT:return new ol(new At(f,e),new At(f,e+d),new At(r+c,m),new At(r,m));case $t.BOTTOM_LEFT:default:return new ol(new At(f,m),new At(f-c,m),new At(r,e+d),new At(r,e))}},Il=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},FU=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},jl=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},SU=(function(){function r(e,A,n){this.offsetX=e,this.offsetY=A,this.matrix=n,this.type=0,this.target=6}return r})(),ll=(function(){function r(e,A){this.path=e,this.target=A,this.type=1}return r})(),kU=(function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r})(),NU=function(r){return r.type===0},xw=function(r){return r.type===1},IU=function(r){return r.type===2},Ep=function(r,e){return r.length===e.length?r.some(function(A,n){return A===e[n]}):!1},jU=function(r,e,A,n,a){return r.map(function(o,c){switch(c){case 0:return o.add(e,A);case 1:return o.add(e+n,A);case 2:return o.add(e+n,A+a);case 3:return o.add(e,A+a)}return o})},vw=(function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),Bw=(function(){function r(e,A){if(this.container=e,this.parent=A,this.effects=[],this.curves=new UU(this.container),this.container.styles.opacity<1&&this.effects.push(new kU(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new SU(n,a,o))}if(this.container.styles.overflowX!==0){var c=Il(this.curves),d=jl(this.curves);Ep(c,d)?this.effects.push(new ll(c,6)):(this.effects.push(new ll(c,2)),this.effects.push(new ll(d,4)))}}return r.prototype.getEffects=function(e){for(var A=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var o=n.effects.filter(function(f){return!xw(f)});if(A||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,o),A=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var c=Il(n.curves),d=jl(n.curves);Ep(c,d)||a.unshift(new ll(d,6))}}else a.unshift.apply(a,o);n=n.parent}return a.filter(function(f){return CA(f.target,e)})},r})(),zd=function(r,e,A,n){r.container.elements.forEach(function(a){var o=CA(a.flags,4),c=CA(a.flags,2),d=new Bw(a,r);CA(a.styles.display,2048)&&n.push(d);var f=CA(a.flags,8)?[]:n;if(o||c){var m=o||a.styles.isPositioned()?A:e,g=new vw(d);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var w=a.styles.zIndex.order;if(w<0){var v=0;m.negativeZIndex.some(function(C,b){return w>C.element.container.styles.zIndex.order?(v=b,!1):v>0}),m.negativeZIndex.splice(v,0,g)}else if(w>0){var y=0;m.positiveZIndex.some(function(C,b){return w>=C.element.container.styles.zIndex.order?(y=b+1,!1):y>0}),m.positiveZIndex.splice(y,0,g)}else m.zeroOrAutoZIndexOrTransformedOrOpacity.push(g)}else a.styles.isFloating()?m.nonPositionedFloats.push(g):m.nonPositionedInlineLevel.push(g);zd(d,g,o?g:A,f)}else a.styles.isInlineLevel()?e.inlineLevel.push(d):e.nonInlineLevel.push(d),zd(d,e,A,f);CA(a.flags,8)&&yw(a,f)})},yw=function(r,e){for(var A=r instanceof Kd?r.start:1,n=r instanceof Kd?r.reversed:!1,a=0;a<e.length;a++){var o=e[a];o.container instanceof sw&&typeof o.container.value=="number"&&o.container.value!==0&&(A=o.container.value),o.listValue=Fa(A,o.container.styles.listStyleType,!0),A+=n?-1:1}},TU=function(r){var e=new Bw(r,null),A=new vw(e),n=[];return zd(e,A,A,n),yw(e.container,n),A},_p=function(r,e){switch(e){case 0:return yr(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return yr(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return yr(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return yr(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},LU=function(r,e){switch(e){case 0:return yr(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return yr(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return yr(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return yr(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},HU=function(r,e){switch(e){case 0:return yr(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return yr(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return yr(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return yr(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},DU=function(r,e){switch(e){case 0:return cl(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return cl(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return cl(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return cl(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},cl=function(r,e){var A=[];return vr(r)?A.push(r.subdivide(.5,!1)):A.push(r),vr(e)?A.push(e.subdivide(.5,!0)):A.push(e),A},yr=function(r,e,A,n){var a=[];return vr(r)?a.push(r.subdivide(.5,!1)):a.push(r),vr(A)?a.push(A.subdivide(.5,!0)):a.push(A),vr(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),vr(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},bw=function(r){var e=r.bounds,A=r.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},Tl=function(r){var e=r.styles,A=r.bounds,n=eA(e.paddingLeft,A.width),a=eA(e.paddingRight,A.width),o=eA(e.paddingTop,A.width),c=eA(e.paddingBottom,A.width);return A.add(n+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+o+c))},PU=function(r,e){return r===0?e.bounds:r===2?Tl(e):bw(e)},RU=function(r,e){return r===0?e.bounds:r===2?Tl(e):bw(e)},ld=function(r,e,A){var n=PU(ui(r.styles.backgroundOrigin,e),r),a=RU(ui(r.styles.backgroundClip,e),r),o=OU(ui(r.styles.backgroundSize,e),A,n),c=o[0],d=o[1],f=da(ui(r.styles.backgroundPosition,e),n.width-c,n.height-d),m=MU(ui(r.styles.backgroundRepeat,e),f,o,n,a),g=Math.round(n.left+f[0]),w=Math.round(n.top+f[1]);return[m,g,w,c,d]},ii=function(r){return Jt(r)&&r.value===hi.AUTO},ul=function(r){return typeof r=="number"},OU=function(r,e,A){var n=e[0],a=e[1],o=e[2],c=r[0],d=r[1];if(!c)return[0,0];if(xA(c)&&d&&xA(d))return[eA(c,A.width),eA(d,A.height)];var f=ul(o);if(Jt(c)&&(c.value===hi.CONTAIN||c.value===hi.COVER)){if(ul(o)){var m=A.width/A.height;return m<o!=(c.value===hi.COVER)?[A.width,A.width/o]:[A.height*o,A.height]}return[A.width,A.height]}var g=ul(n),w=ul(a),v=g||w;if(ii(c)&&(!d||ii(d))){if(g&&w)return[n,a];if(!f&&!v)return[A.width,A.height];if(v&&f){var y=g?n:a*o,C=w?a:n/o;return[y,C]}var b=g?n:A.width,E=w?a:A.height;return[b,E]}if(f){var S=0,k=0;return xA(c)?S=eA(c,A.width):xA(d)&&(k=eA(d,A.height)),ii(c)?S=k*o:(!d||ii(d))&&(k=S/o),[S,k]}var N=null,O=null;if(xA(c)?N=eA(c,A.width):d&&xA(d)&&(O=eA(d,A.height)),N!==null&&(!d||ii(d))&&(O=g&&w?N/n*a:A.height),O!==null&&ii(c)&&(N=g&&w?O/a*n:A.width),N!==null&&O!==null)return[N,O];throw new Error("Unable to calculate background-size for element")},ui=function(r,e){var A=r[e];return typeof A>"u"?r[0]:A},MU=function(r,e,A,n,a){var o=e[0],c=e[1],d=A[0],f=A[1];switch(r){case 2:return[new At(Math.round(n.left),Math.round(n.top+c)),new At(Math.round(n.left+n.width),Math.round(n.top+c)),new At(Math.round(n.left+n.width),Math.round(f+n.top+c)),new At(Math.round(n.left),Math.round(f+n.top+c))];case 3:return[new At(Math.round(n.left+o),Math.round(n.top)),new At(Math.round(n.left+o+d),Math.round(n.top)),new At(Math.round(n.left+o+d),Math.round(n.height+n.top)),new At(Math.round(n.left+o),Math.round(n.height+n.top))];case 1:return[new At(Math.round(n.left+o),Math.round(n.top+c)),new At(Math.round(n.left+o+d),Math.round(n.top+c)),new At(Math.round(n.left+o+d),Math.round(n.top+c+f)),new At(Math.round(n.left+o),Math.round(n.top+c+f))];default:return[new At(Math.round(a.left),Math.round(a.top)),new At(Math.round(a.left+a.width),Math.round(a.top)),new At(Math.round(a.left+a.width),Math.round(a.height+a.top)),new At(Math.round(a.left),Math.round(a.height+a.top))]}},KU="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Qp="Hidden Text",GU=(function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,A){var n=this._document.createElement("div"),a=this._document.createElement("img"),o=this._document.createElement("span"),c=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=A,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",c.appendChild(n),a.src=KU,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",o.style.fontFamily=e,o.style.fontSize=A,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(Qp)),n.appendChild(o),n.appendChild(a);var d=a.offsetTop-o.offsetTop+2;n.removeChild(o),n.appendChild(this._document.createTextNode(Qp)),n.style.lineHeight="normal",a.style.verticalAlign="super";var f=a.offsetTop-n.offsetTop+2;return c.removeChild(n),{baseline:d,middle:f}},r.prototype.getMetrics=function(e,A){var n=e+" "+A;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,A)),this._data[n]},r})(),Cw=(function(){function r(e,A){this.context=e,this.options=A}return r})(),$U=1e4,WU=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new GU(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(A){for(var n=this;this._activeEffects.length;)this.popEffect();A.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(A){this.ctx.save(),IU(A)&&(this.ctx.globalAlpha=A.opacity),NU(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),xw(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return $A(this,void 0,void 0,function(){var n;return PA(this,function(a){switch(a.label){case 0:return n=A.element.container.styles,n.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(A){return $A(this,void 0,void 0,function(){return PA(this,function(n){switch(n.label){case 0:if(CA(A.container.flags,16))debugger;return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(A)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(A,n,a){var o=this;if(n===0)this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+a);else{var c=hf(A.text);c.reduce(function(d,f){return o.ctx.fillText(f,d,A.bounds.top+a),d+o.ctx.measureText(f).width},A.bounds.left)}},e.prototype.createFontStyle=function(A){var n=A.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),a=XU(A.fontFamily).join(", "),o=ja(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,n,A.fontWeight,o,a].join(" "),a,o]},e.prototype.renderTextNode=function(A,n){return $A(this,void 0,void 0,function(){var a,o,c,d,f,m,g,w,v=this;return PA(this,function(y){return a=this.createFontStyle(n),o=a[0],c=a[1],d=a[2],this.ctx.font=o,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",f=this.fontMetrics.getMetrics(c,d),m=f.baseline,g=f.middle,w=n.paintOrder,A.textBounds.forEach(function(C){w.forEach(function(b){switch(b){case 0:v.ctx.fillStyle=FA(n.color),v.renderTextWithLetterSpacing(C,n.letterSpacing,m);var E=n.textShadow;E.length&&C.text.trim().length&&(E.slice(0).reverse().forEach(function(S){v.ctx.shadowColor=FA(S.color),v.ctx.shadowOffsetX=S.offsetX.number*v.options.scale,v.ctx.shadowOffsetY=S.offsetY.number*v.options.scale,v.ctx.shadowBlur=S.blur.number,v.renderTextWithLetterSpacing(C,n.letterSpacing,m)}),v.ctx.shadowColor="",v.ctx.shadowOffsetX=0,v.ctx.shadowOffsetY=0,v.ctx.shadowBlur=0),n.textDecorationLine.length&&(v.ctx.fillStyle=FA(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(S){switch(S){case 1:v.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+m),C.bounds.width,1);break;case 2:v.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:v.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+g),C.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&C.text.trim().length&&(v.ctx.strokeStyle=FA(n.webkitTextStrokeColor),v.ctx.lineWidth=n.webkitTextStrokeWidth,v.ctx.lineJoin=window.chrome?"miter":"round",v.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+m)),v.ctx.strokeStyle="",v.ctx.lineWidth=0,v.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(A,n,a){if(a&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var o=Tl(A),c=jl(n);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,A.intrinsicWidth,A.intrinsicHeight,o.left,o.top,o.width,o.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return $A(this,void 0,void 0,function(){var n,a,o,c,d,f,k,k,m,g,w,v,O,y,C,j,b,E,S,k,N,O,j;return PA(this,function(L){switch(L.label){case 0:this.applyEffects(A.getEffects(4)),n=A.container,a=A.curves,o=n.styles,c=0,d=n.textNodes,L.label=1;case 1:return c<d.length?(f=d[c],[4,this.renderTextNode(f,o)]):[3,4];case 2:L.sent(),L.label=3;case 3:return c++,[3,1];case 4:if(!(n instanceof Aw))return[3,8];L.label=5;case 5:return L.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return k=L.sent(),this.renderReplacedElement(n,a,k),[3,8];case 7:return L.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof rw&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof nw))return[3,12];L.label=9;case 9:return L.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return k=L.sent(),this.renderReplacedElement(n,a,k),[3,12];case 11:return L.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof ow&&n.tree?(m=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,m.render(n.tree)]):[3,14];case 13:g=L.sent(),n.width&&n.height&&this.ctx.drawImage(g,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),L.label=14;case 14:if(n instanceof mf&&(w=Math.min(n.bounds.width,n.bounds.height),n.type===Fl?n.checked&&(this.ctx.save(),this.path([new At(n.bounds.left+w*.39363,n.bounds.top+w*.79),new At(n.bounds.left+w*.16,n.bounds.top+w*.5549),new At(n.bounds.left+w*.27347,n.bounds.top+w*.44071),new At(n.bounds.left+w*.39694,n.bounds.top+w*.5649),new At(n.bounds.left+w*.72983,n.bounds.top+w*.23),new At(n.bounds.left+w*.84,n.bounds.top+w*.34085),new At(n.bounds.left+w*.39363,n.bounds.top+w*.79)]),this.ctx.fillStyle=FA(hp),this.ctx.fill(),this.ctx.restore()):n.type===Sl&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+w/2,n.bounds.top+w/2,w/4,0,Math.PI*2,!0),this.ctx.fillStyle=FA(hp),this.ctx.fill(),this.ctx.restore())),VU(n)&&n.value.length){switch(v=this.createFontStyle(o),O=v[0],y=v[1],C=this.fontMetrics.getMetrics(O,y).baseline,this.ctx.font=O,this.ctx.fillStyle=FA(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=JU(n.styles.textAlign),j=Tl(n),b=0,n.styles.textAlign){case 1:b+=j.width/2;break;case 2:b+=j.width;break}E=j.add(b,0,0,-j.height/2+1),this.ctx.save(),this.path([new At(j.left,j.top),new At(j.left+j.width,j.top),new At(j.left+j.width,j.top+j.height),new At(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ba(n.value,E),o.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!CA(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(S=n.styles.listStyleImage,S.type!==0)return[3,18];k=void 0,N=S.url,L.label=15;case 15:return L.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return k=L.sent(),this.ctx.drawImage(k,n.bounds.left-(k.width+10),n.bounds.top),[3,18];case 17:return L.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:A.listValue&&n.styles.listStyleType!==-1&&(O=this.createFontStyle(o)[0],this.ctx.font=O,this.ctx.fillStyle=FA(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new dn(n.bounds.left,n.bounds.top+eA(n.styles.paddingTop,n.bounds.width),n.bounds.width,Xg(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ba(A.listValue,j),o.letterSpacing,Xg(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),L.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(A){return $A(this,void 0,void 0,function(){var n,a,S,o,c,S,d,f,S,m,g,S,w,v,S,y,C,S,b,E,S;return PA(this,function(k){switch(k.label){case 0:if(CA(A.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:k.sent(),n=0,a=A.negativeZIndex,k.label=2;case 2:return n<a.length?(S=a[n],[4,this.renderStack(S)]):[3,5];case 3:k.sent(),k.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:k.sent(),o=0,c=A.nonInlineLevel,k.label=7;case 7:return o<c.length?(S=c[o],[4,this.renderNode(S)]):[3,10];case 8:k.sent(),k.label=9;case 9:return o++,[3,7];case 10:d=0,f=A.nonPositionedFloats,k.label=11;case 11:return d<f.length?(S=f[d],[4,this.renderStack(S)]):[3,14];case 12:k.sent(),k.label=13;case 13:return d++,[3,11];case 14:m=0,g=A.nonPositionedInlineLevel,k.label=15;case 15:return m<g.length?(S=g[m],[4,this.renderStack(S)]):[3,18];case 16:k.sent(),k.label=17;case 17:return m++,[3,15];case 18:w=0,v=A.inlineLevel,k.label=19;case 19:return w<v.length?(S=v[w],[4,this.renderNode(S)]):[3,22];case 20:k.sent(),k.label=21;case 21:return w++,[3,19];case 22:y=0,C=A.zeroOrAutoZIndexOrTransformedOrOpacity,k.label=23;case 23:return y<C.length?(S=C[y],[4,this.renderStack(S)]):[3,26];case 24:k.sent(),k.label=25;case 25:return y++,[3,23];case 26:b=0,E=A.positiveZIndex,k.label=27;case 27:return b<E.length?(S=E[b],[4,this.renderStack(S)]):[3,30];case 28:k.sent(),k.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var n=this;A.forEach(function(a,o){var c=vr(a)?a.start:a;o===0?n.ctx.moveTo(c.x,c.y):n.ctx.lineTo(c.x,c.y),vr(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(A,n,a,o){this.path(A),this.ctx.fillStyle=n,this.ctx.translate(a,o),this.ctx.fill(),this.ctx.translate(-a,-o)},e.prototype.resizeImage=function(A,n,a){var o;if(A.width===n&&A.height===a)return A;var c=(o=this.canvas.ownerDocument)!==null&&o!==void 0?o:document,d=c.createElement("canvas");d.width=Math.max(1,n),d.height=Math.max(1,a);var f=d.getContext("2d");return f.drawImage(A,0,0,A.width,A.height,0,0,n,a),d},e.prototype.renderBackgroundImage=function(A){return $A(this,void 0,void 0,function(){var n,a,o,c,d,f;return PA(this,function(m){switch(m.label){case 0:n=A.styles.backgroundImage.length-1,a=function(g){var w,v,y,ve,Y,D,fe,P,G,C,ve,Y,D,fe,P,b,E,S,k,N,O,j,L,R,G,H,ve,W,ae,fe,P,ue,Y,D,_,I,$,Q,K,Z,te,se;return PA(this,function(He){switch(He.label){case 0:if(g.type!==0)return[3,5];w=void 0,v=g.url,He.label=1;case 1:return He.trys.push([1,3,,4]),[4,o.context.cache.match(v)];case 2:return w=He.sent(),[3,4];case 3:return He.sent(),o.context.logger.error("Error loading background-image "+v),[3,4];case 4:return w&&(y=ld(A,n,[w.width,w.height,w.width/w.height]),ve=y[0],Y=y[1],D=y[2],fe=y[3],P=y[4],G=o.ctx.createPattern(o.resizeImage(w,fe,P),"repeat"),o.renderRepeat(ve,G,Y,D)),[3,6];case 5:NE(g)?(C=ld(A,n,[null,null,null]),ve=C[0],Y=C[1],D=C[2],fe=C[3],P=C[4],b=QE(g.angle,fe,P),E=b[0],S=b[1],k=b[2],N=b[3],O=b[4],j=document.createElement("canvas"),j.width=fe,j.height=P,L=j.getContext("2d"),R=L.createLinearGradient(S,N,k,O),Jg(g.stops,E).forEach(function(We){return R.addColorStop(We.stop,FA(We.color))}),L.fillStyle=R,L.fillRect(0,0,fe,P),fe>0&&P>0&&(G=o.ctx.createPattern(j,"repeat"),o.renderRepeat(ve,G,Y,D))):IE(g)&&(H=ld(A,n,[null,null,null]),ve=H[0],W=H[1],ae=H[2],fe=H[3],P=H[4],ue=g.position.length===0?[uf]:g.position,Y=eA(ue[0],fe),D=eA(ue[ue.length-1],P),_=UE(g,Y,D,fe,P),I=_[0],$=_[1],I>0&&$>0&&(Q=o.ctx.createRadialGradient(W+Y,ae+D,0,W+Y,ae+D,I),Jg(g.stops,I*2).forEach(function(We){return Q.addColorStop(We.stop,FA(We.color))}),o.path(ve),o.ctx.fillStyle=Q,I!==$?(K=A.bounds.left+.5*A.bounds.width,Z=A.bounds.top+.5*A.bounds.height,te=$/I,se=1/te,o.ctx.save(),o.ctx.translate(K,Z),o.ctx.transform(1,0,0,te,0,0),o.ctx.translate(-K,-Z),o.ctx.fillRect(W,se*(ae-Z)+Z,fe,P*se),o.ctx.restore()):o.ctx.fill())),He.label=6;case 6:return n--,[2]}})},o=this,c=0,d=A.styles.backgroundImage.slice(0).reverse(),m.label=1;case 1:return c<d.length?(f=d[c],[5,a(f)]):[3,4];case 2:m.sent(),m.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(A,n,a){return $A(this,void 0,void 0,function(){return PA(this,function(o){return this.path(_p(a,n)),this.ctx.fillStyle=FA(A),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(A,n,a,o){return $A(this,void 0,void 0,function(){var c,d;return PA(this,function(f){switch(f.label){case 0:return n<3?[4,this.renderSolidBorder(A,a,o)]:[3,2];case 1:return f.sent(),[2];case 2:return c=LU(o,a),this.path(c),this.ctx.fillStyle=FA(A),this.ctx.fill(),d=HU(o,a),this.path(d),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(A){return $A(this,void 0,void 0,function(){var n,a,o,c,d,f,m,g,w=this;return PA(this,function(v){switch(v.label){case 0:return this.applyEffects(A.getEffects(2)),n=A.container.styles,a=!Kn(n.backgroundColor)||n.backgroundImage.length,o=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],c=zU(ui(n.backgroundClip,0),A.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),Kn(n.backgroundColor)||(this.ctx.fillStyle=FA(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:v.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(y){w.ctx.save();var C=Il(A.curves),b=y.inset?0:$U,E=jU(C,-b+(y.inset?1:-1)*y.spread.number,(y.inset?1:-1)*y.spread.number,y.spread.number*(y.inset?-2:2),y.spread.number*(y.inset?-2:2));y.inset?(w.path(C),w.ctx.clip(),w.mask(E)):(w.mask(C),w.ctx.clip(),w.path(E)),w.ctx.shadowOffsetX=y.offsetX.number+b,w.ctx.shadowOffsetY=y.offsetY.number,w.ctx.shadowColor=FA(y.color),w.ctx.shadowBlur=y.blur.number,w.ctx.fillStyle=y.inset?FA(y.color):"rgba(0,0,0,1)",w.ctx.fill(),w.ctx.restore()}),v.label=2;case 2:d=0,f=0,m=o,v.label=3;case 3:return f<m.length?(g=m[f],g.style!==0&&!Kn(g.color)&&g.width>0?g.style!==2?[3,5]:[4,this.renderDashedDottedBorder(g.color,g.width,d,A.curves,2)]:[3,11]):[3,13];case 4:return v.sent(),[3,11];case 5:return g.style!==3?[3,7]:[4,this.renderDashedDottedBorder(g.color,g.width,d,A.curves,3)];case 6:return v.sent(),[3,11];case 7:return g.style!==4?[3,9]:[4,this.renderDoubleBorder(g.color,g.width,d,A.curves)];case 8:return v.sent(),[3,11];case 9:return[4,this.renderSolidBorder(g.color,d,A.curves)];case 10:v.sent(),v.label=11;case 11:d++,v.label=12;case 12:return f++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(A,n,a,o,c){return $A(this,void 0,void 0,function(){var d,f,m,g,w,v,y,C,b,E,S,k,N,O,j,L,j,L;return PA(this,function(R){return this.ctx.save(),d=DU(o,a),f=_p(o,a),c===2&&(this.path(f),this.ctx.clip()),vr(f[0])?(m=f[0].start.x,g=f[0].start.y):(m=f[0].x,g=f[0].y),vr(f[1])?(w=f[1].end.x,v=f[1].end.y):(w=f[1].x,v=f[1].y),a===0||a===2?y=Math.abs(m-w):y=Math.abs(g-v),this.ctx.beginPath(),c===3?this.formatPath(d):this.formatPath(f.slice(0,2)),C=n<3?n*3:n*2,b=n<3?n*2:n,c===3&&(C=n,b=n),E=!0,y<=C*2?E=!1:y<=C*2+b?(S=y/(2*C+b),C*=S,b*=S):(k=Math.floor((y+b)/(C+b)),N=(y-k*C)/(k-1),O=(y-(k+1)*C)/k,b=O<=0||Math.abs(b-N)<Math.abs(b-O)?N:O),E&&(c===3?this.ctx.setLineDash([0,C+b]):this.ctx.setLineDash([C,b])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=FA(A),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(vr(f[0])&&(j=f[3],L=f[0],this.ctx.beginPath(),this.formatPath([new At(j.end.x,j.end.y),new At(L.start.x,L.start.y)]),this.ctx.stroke()),vr(f[1])&&(j=f[1],L=f[2],this.ctx.beginPath(),this.formatPath([new At(j.end.x,j.end.y),new At(L.start.x,L.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(A){return $A(this,void 0,void 0,function(){var n;return PA(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=FA(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=TU(A),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(Cw),VU=function(r){return r instanceof aw||r instanceof iw?!0:r instanceof mf&&r.type!==Sl&&r.type!==Fl},zU=function(r,e){switch(r){case 0:return Il(e);case 2:return FU(e);case 1:default:return jl(e)}},JU=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},YU=["-apple-system","system-ui"],XU=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return YU.indexOf(e)===-1}):r},qU=(function(r){Pr(e,r);function e(A,n){var a=r.call(this,A,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(A){return $A(this,void 0,void 0,function(){var n,a;return PA(this,function(o){switch(o.label){case 0:return n=Md(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,ZU(n)];case 1:return a=o.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=FA(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(Cw),ZU=function(r){return new Promise(function(e,A){var n=new Image;n.onload=function(){e(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},eF=(function(){function r(e){var A=e.id,n=e.enabled;this.id=A,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ko([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ko([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ko([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ko([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r})(),tF=(function(){function r(e,A){var n;this.windowBounds=A,this.instanceName="#"+r.instanceCount++,this.logger=new eF({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new BU(this,e)}return r.instanceCount=1,r})(),AF=function(r,e){return e===void 0&&(e={}),rF(r,e)};typeof window<"u"&&ww.setContext(window);var rF=function(r,e){return $A(void 0,void 0,void 0,function(){var A,n,a,o,c,d,f,m,g,w,v,y,C,b,E,S,k,N,O,j,R,L,R,G,H,ve,W,ae,fe,P,ue,Y,D,_,I,$,Q,K,Z,te;return PA(this,function(se){switch(se.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(A=r.ownerDocument,!A)throw new Error("Element is not attached to a Document");if(n=A.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(G=e.allowTaint)!==null&&G!==void 0?G:!1,imageTimeout:(H=e.imageTimeout)!==null&&H!==void 0?H:15e3,proxy:e.proxy,useCORS:(ve=e.useCORS)!==null&&ve!==void 0?ve:!1},o=Qd({logging:(W=e.logging)!==null&&W!==void 0?W:!0,cache:e.cache},a),c={windowWidth:(ae=e.windowWidth)!==null&&ae!==void 0?ae:n.innerWidth,windowHeight:(fe=e.windowHeight)!==null&&fe!==void 0?fe:n.innerHeight,scrollX:(P=e.scrollX)!==null&&P!==void 0?P:n.pageXOffset,scrollY:(ue=e.scrollY)!==null&&ue!==void 0?ue:n.pageYOffset},d=new dn(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),f=new tF(o,d),m=(Y=e.foreignObjectRendering)!==null&&Y!==void 0?Y:!1,g={allowTaint:(D=e.allowTaint)!==null&&D!==void 0?D:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:m,copyStyles:m},f.logger.debug("Starting document clone with size "+d.width+"x"+d.height+" scrolled to "+-d.left+","+-d.top),w=new bp(f,r,g),v=w.clonedReferenceElement,v?[4,w.toIFrame(A,d)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return y=se.sent(),C=gf(v)||nU(v)?jC(v.ownerDocument):Rl(f,v),b=C.width,E=C.height,S=C.left,k=C.top,N=nF(f,v,e.backgroundColor),O={canvas:e.canvas,backgroundColor:N,scale:(I=(_=e.scale)!==null&&_!==void 0?_:n.devicePixelRatio)!==null&&I!==void 0?I:1,x:(($=e.x)!==null&&$!==void 0?$:0)+S,y:((Q=e.y)!==null&&Q!==void 0?Q:0)+k,width:(K=e.width)!==null&&K!==void 0?K:Math.ceil(b),height:(Z=e.height)!==null&&Z!==void 0?Z:Math.ceil(E)},m?(f.logger.debug("Document cloned, using foreign object rendering"),R=new qU(f,O),[4,R.render(v)]):[3,3];case 2:return j=se.sent(),[3,5];case 3:return f.logger.debug("Document cloned, element located at "+S+","+k+" with size "+b+"x"+E+" using computed rendering"),f.logger.debug("Starting DOM parsing"),L=cw(f,v),N===L.styles.backgroundColor&&(L.styles.backgroundColor=cn.TRANSPARENT),f.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),R=new WU(f,O),[4,R.render(L)];case 4:j=se.sent(),se.label=5;case 5:return(!((te=e.removeContainer)!==null&&te!==void 0)||te)&&(bp.destroy(y)||f.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),f.logger.debug("Finished rendering"),[2,j]}})})},nF=function(r,e,A){var n=e.ownerDocument,a=n.documentElement?xa(r,getComputedStyle(n.documentElement).backgroundColor):cn.TRANSPARENT,o=n.body?xa(r,getComputedStyle(n.body).backgroundColor):cn.TRANSPARENT,c=typeof A=="string"?xa(r,A):A===null?cn.TRANSPARENT:4294967295;return e===n.documentElement?Kn(a)?Kn(o)?c:o:a:c};function sF({onRefresh:r,enabled:e=!0,threshold:A=80,maxPullDistance:n=120,enableMouse:a=!1}){const[o,c]=x.useState({isPulling:!1,pullDistance:0,isRefreshing:!1}),d=x.useRef(null),f=x.useRef(null),m=x.useRef(0),g=x.useRef(null),w=x.useRef(!1),v=x.useCallback(async()=>{if(!w.current){w.current=!0,c(E=>({...E,isRefreshing:!0,pullDistance:0}));try{await r()}finally{setTimeout(()=>{w.current=!1,c(E=>({...E,isRefreshing:!1,isPulling:!1,pullDistance:0}))},300)}}},[r]);x.useEffect(()=>{if(!e)return;const E=g.current;if(!E)return;const S=()=>typeof window<"u"?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||E.scrollTop||0:E.scrollTop||0,k=W=>{if(w.current||W.touches.length!==1)return;m.current=S();const ae=W.target,fe=E.contains(ae)||E===ae;m.current<=5&&fe&&(d.current=W.touches[0].clientY,f.current=W.touches[0].clientX,c(P=>({...P,isPulling:!0})))},N=W=>{if(w.current||d.current===null||W.touches.length!==1)return;const ae=W.touches[0].clientY,fe=W.touches[0].clientX,P=ae-d.current,ue=f.current!==null?Math.abs(fe-f.current):0;if(m.current=S(),m.current<=5&&P>0&&P>Math.abs(ue)*.5){P>10&&(W.preventDefault(),W.stopPropagation());const _=Math.min(P*.5,n);c(I=>({...I,pullDistance:_}))}else(P<=0||m.current>5)&&(d.current=null,f.current=null,c(Y=>({...Y,isPulling:!1,pullDistance:0})))},O=()=>{w.current||(d.current!==null&&o.pullDistance>=A?v():c(W=>({...W,isPulling:!1,pullDistance:0})),d.current=null,f.current=null)},j=W=>{const ae=W.target;(E.contains(ae)||E===ae)&&k(W)},L=W=>{d.current!==null&&N(W)},R=W=>{a&&(E.contains(W.target)||E===W.target)&&(m.current=S(),m.current<=0&&(d.current=W.clientY,c(ae=>({...ae,isPulling:!0}))))},G=W=>{if(!a||d.current===null)return;const fe=W.clientY-d.current;if(m.current=S(),m.current<=0&&fe>0){W.preventDefault();const Y=Math.min(fe*.5,n);c(D=>({...D,pullDistance:Y}))}else(fe<=0||m.current>0)&&(d.current=null,f.current=null,c(P=>({...P,isPulling:!1,pullDistance:0})))},H=()=>{a&&(d.current!==null&&o.pullDistance>=A?v():c(W=>({...W,isPulling:!1,pullDistance:0})),d.current=null,f.current=null)};return typeof window<"u"&&(window.navigator?.userAgent?.includes("Mobile")||!!window.despia||!!window.__DESPIA__)?(document.addEventListener("touchstart",j,{passive:!1}),document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",O,{passive:!0}),document.addEventListener("touchcancel",O,{passive:!0})):(E.addEventListener("touchstart",j,{passive:!1}),E.addEventListener("touchmove",L,{passive:!1}),E.addEventListener("touchend",O,{passive:!0}),E.addEventListener("touchcancel",O,{passive:!0})),a&&(E.addEventListener("mousedown",R),E.addEventListener("mousemove",G),E.addEventListener("mouseup",H),E.addEventListener("mouseleave",H)),()=>{typeof window<"u"&&(window.navigator?.userAgent?.includes("Mobile")||!!window.despia||!!window.__DESPIA__)?(document.removeEventListener("touchstart",j),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",O),document.removeEventListener("touchcancel",O)):(E.removeEventListener("touchstart",j),E.removeEventListener("touchmove",L),E.removeEventListener("touchend",O),E.removeEventListener("touchcancel",O)),a&&(E.removeEventListener("mousedown",R),E.removeEventListener("mousemove",G),E.removeEventListener("mouseup",H),E.removeEventListener("mouseleave",H))}},[e,o.pullDistance,A,n,v]);const y=Math.min(o.pullDistance/A,1),C=y*360,b=Math.min(y*2,1);return{containerRef:g,pullDistance:o.pullDistance,isPulling:o.isPulling,isRefreshing:o.isRefreshing,pullProgress:y,spinnerRotation:C,spinnerOpacity:b,shouldShowIndicator:o.pullDistance>10}}var vl={exports:{}},iF=vl.exports,Up;function aF(){return Up||(Up=1,(function(r){(function(e,A){r.exports?r.exports=A():e.despia=A()})(typeof self<"u"?self:iF,function(){const e=[];let A=!1;function n(){if(A||e.length===0)return;A=!0;const{command:g}=e.shift();try{window.despia=g}catch(w){console.error("Despia command failed:",w)}setTimeout(()=>{A=!1,n()},1)}function a(g){typeof window<"u"&&(e.push({command:g}),n())}function o(g,w,v=5e3){const y=Date.now();function C(){window[g]!==void 0?w(window[g]):Date.now()-y<v?setTimeout(C,100):console.error(`Despia timeout: ${g} was not set within ${v} ms`)}C()}class c{constructor(w,v){this.variables=w,this.onReady=v,this.triggered=!1,this.processing=!1,this.tracker=document.createElement("div"),this.tracker.style.display="none",document.body.appendChild(this.tracker);let y;this.observer=new MutationObserver(()=>{clearTimeout(y),y=setTimeout(()=>this.check(),100)}),this.observer.observe(this.tracker,{attributes:!0}),this.check(),this.interval=setInterval(()=>this.check(),1e3)}check(){if(!(this.processing||this.triggered)){this.processing=!0;try{const w={};this.variables.every(y=>{const C=window[y];return C===void 0||C==="n/a"||C===null?!1:(w[y]=C,!0)})&&!this.triggered&&(this.triggered=!0,this.cleanup(),this.onReady(w))}catch(w){console.error("Error during check:",w)}this.processing=!1}}cleanup(){this.observer.disconnect(),clearInterval(this.interval),this.tracker.remove()}}function d(g,w){return!g||g.length===0?Promise.resolve({}):g.length===1?new Promise(v=>{o(g[0],y=>{v({[g[0]]:y})},5e3)}):new Promise(v=>{const y=new c(g,v);setTimeout(()=>{y.triggered||(y.cleanup(),v({}))},3e5)})}function f(g,w=[]){return a(g),!w||w.length===0?Promise.resolve():d(w)}return new Proxy(f,{get(g,w){if(w in g||w==="then"||typeof w=="symbol")return g[w];if(typeof window<"u"&&w in window)return window[w]},apply(g,w,v){return g(...v)}})})})(vl)),vl.exports}var Ew=aF();const _w=Ll(Ew),Jd=sv({__proto__:null,default:_w},[Ew]);function pf(r,e,A,n){try{const a=n||window.location.origin;_w(`sendlocalpushmsg://push.send?s=${r}=msg!${A}&!#${e}&!#${a}`)}catch(a){console.error("[Notifications] Error sending local notification:",a)}}function oF(r,e,A=2){const n=new Date(r),a=new Date(n.getTime()-A*60*60*1e3),o=new Date,c=Math.max(0,Math.floor((a.getTime()-o.getTime())/1e3));c>0&&c<10080*60&&pf(c,`GW${e} Deadline Reminder`,`Don't forget to submit your predictions! Deadline in ${A} hour${A>1?"s":""}.`,`${window.location.origin}/test-api-predictions`)}function lF(r,e){const A=new Date(r),n=new Date(A.getTime()-600*1e3),a=new Date,o=Math.max(0,Math.floor((n.getTime()-a.getTime())/1e3));o>0&&o<10080*60&&pf(o,`Gameweek ${e} Starting Soon! `,"The action begins in 10 minutes! Get ready for some football magic! ",`${window.location.origin}/league/api-test`)}const Fp="scheduled_game_notification_";function cF(r,e,A){const n=`${r}-${e}-${A}`,a=`${Fp}${n}`,o=Date.now();try{const f=localStorage.getItem(a);if(f){const m=parseInt(f,10);if(m&&o-m<1440*60*1e3){console.log('[Notifications] Skipping duplicate "Game Starting Now" notification (from localStorage):',{homeTeam:e,awayTeam:A,kickoffTime:r,timeSinceLastScheduled:Math.floor((o-m)/1e3),seconds:"seconds"});return}}}catch{console.warn("[Notifications] localStorage not available, using in-memory check only")}const c=new Date(r),d=Math.max(0,Math.floor((c.getTime()-o)/1e3));if(d>0&&d<10080*60){console.log('[Notifications] Scheduling "Game Starting Now" notification:',{homeTeam:e,awayTeam:A,kickoffTime:r,secondsUntilKickoff:d,scheduledAt:new Date().toISOString()}),pf(d,"Game Starting Now!",`${e} vs ${A} is kicking off now!`,`${window.location.origin}/league/api-test`);try{localStorage.setItem(a,o.toString());const f=o-10080*60*1e3;for(let m=0;m<localStorage.length;m++){const g=localStorage.key(m);if(g&&g.startsWith(Fp)){const w=localStorage.getItem(g);w&&parseInt(w,10)<f&&localStorage.removeItem(g)}}}catch(f){console.warn("[Notifications] Could not save to localStorage:",f)}}}function os(r){const e=(r||"?").trim().split(/\s+/);return e.length?e.length===1?e[0].slice(0,1).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase():"?"}function cd(r){return r.result==="H"||r.result==="D"||r.result==="A"?r.result:typeof r.home_goals=="number"&&typeof r.away_goals=="number"?r.home_goals>r.away_goals?"H":r.home_goals<r.away_goals?"A":"D":null}function uF(r,e){if(r==="FINISHED")return"FT";if(r==="PAUSED")return"HT";if(r==="IN_PLAY"){if(e==null)return"LIVE";if(e>=1&&e<=45)return"First Half";if(e>45&&e<=50)return"45+";if(e>50)return"Second Half"}return"LIVE"}function dF(){const{user:r}=or(),[e]=x.useState(()=>{const xe=localStorage.getItem("oldSchoolMode");return xe?JSON.parse(xe):!1});x.useEffect(()=>{localStorage.setItem("oldSchoolMode",JSON.stringify(e))},[e]);const[A,n]=x.useState([]),[a,o]=x.useState({}),[c,d]=x.useState([]),[f,m]=x.useState(1),[g,w]=x.useState(!1),[v,y]=x.useState(null),[C,b]=x.useState({}),[E,S]=x.useState({}),[k,N]=x.useState(!0),[O,j]=x.useState(!0),[L,R]=x.useState(null),[G,H]=x.useState(null),[ve,W]=x.useState(null),[ae,fe]=x.useState(null),[P,ue]=x.useState(null),[Y,D]=x.useState(null),[_,I]=x.useState(null),[$,Q]=x.useState([]),[K,Z]=x.useState(null),[te,se]=x.useState(null),[He,We]=x.useState(null),[ie,he]=x.useState(null),[Te,be]=x.useState({}),[Ze,gt]=x.useState({}),Nt=x.useRef(new Set),rA=x.useRef(!0),Xt=x.useRef(0),[le,et]=x.useState({}),Le=x.useRef({}),Ce=x.useRef(!1),mt=x.useRef({}),[pt,Ye]=x.useState({}),[rt,ze]=x.useState(!1),[Qt,Kt]=x.useState(!1),vt=async(xe,Be)=>{try{console.log("[Home] fetchLiveScore called for matchId:",xe,"kickoffTime:",Be);const{data:Se,error:Me}=await z.from("live_scores").select("*").eq("api_match_id",xe).single();if(Me)return Me.code==="PGRST116"?(console.log("[Home] No live score found in Supabase for match",xe,"- scheduled function may not have run yet"),null):(console.error("[Home] Error fetching live score from Supabase:",Me),null);if(!Se)return console.warn("[Home] No live score data in Supabase"),null;console.log("[Home] Live score from Supabase:",Se);const Pe=Se.home_score??0,ke=Se.away_score??0,oe=Se.status||"SCHEDULED";let Xe=Se.minute;if(Xe==null&&(oe==="IN_PLAY"||oe==="PAUSED")&&Be)try{const Qe=new Date(Be),Je=Math.floor((new Date().getTime()-Qe.getTime())/(1e3*60));Je>0&&Je<120&&(oe==="PAUSED"?Xe=null:oe==="IN_PLAY"&&(Je<=50?Xe=Je:Xe=46+Math.max(0,Je-50)))}catch(Qe){console.warn("[Home] Error calculating minute from kickoff time:",Qe)}const dt={homeScore:Pe,awayScore:ke,status:oe,minute:Xe,retryAfter:null};return console.log("[Home] Returning score data from Supabase:",dt),dt}catch(Se){return console.error("[Home] Error fetching live score from Supabase:",Se?.message||Se,Se?.stack),null}},wt=x.useCallback(async(xe=!0)=>{if(!r?.id){N(!1);return}let Be=!0;xe&&N(!0);try{console.log("[Home] Starting data fetch for user:",r.id);const[Se,Me]=await Promise.all([z.from("meta").select("current_gw").eq("id",1).maybeSingle(),z.from("league_members").select("leagues(id,name,code,created_at)").eq("user_id",r.id)]);console.log("[Home] Query results:",{currentGwError:Se.error,currentGwData:Se.data,leaguesError:Me.error,leaguesDataLength:Me.data?.length,leaguesData:Me.data});const Pe=Se.data?.current_gw??1,ke=(Me.data??[]).map(we=>we.leagues).filter(Boolean);console.log("[Home] Processed leagues:",ke.length),ke.length>0?console.log("[Home] League names:",ke.map(we=>we.name)):console.warn("[Home] NO LEAGUES FOUND! Raw data:",Me.data);const oe=ke.map(we=>({...we,avatar:ml(we.id)})),Xe=ke.some(we=>we.name==="API Test");Be&&(n(oe),m(Pe),ze(Xe),Nt.current=new Set(oe.map(we=>we.id)));let dt,Qe,Ge,Je,$e,Ne,nt,yt;Xe?([dt,Qe,Ge,Je]=await Promise.all([z.from("test_api_fixtures").select("id,test_gw,fixture_index,api_match_id,home_code,away_code,home_team,away_team,home_name,away_name,kickoff_time").eq("test_gw",1).order("fixture_index",{ascending:!0}),z.from("test_api_picks").select("user_id,matchday,fixture_index,pick").eq("user_id",r.id).eq("matchday",1),z.from("gw_results").select("gw,fixture_index,result").eq("gw",1),z.from("test_api_submissions").select("submitted_at").eq("user_id",r.id).eq("matchday",1).maybeSingle()]),$e=(dt.data??[]).map(ce=>({...ce,gw:ce.test_gw})),Ne=(Qe.data??[]).map(ce=>({...ce,gw:ce.matchday})),nt=Ge.data??[],yt=!!Je.data?.submitted_at):([dt,Qe,Ge,Je]=await Promise.all([z.from("fixtures").select("id,gw,fixture_index,home_code,away_code,home_team,away_team,home_name,away_name,kickoff_time").eq("gw",Pe).order("fixture_index",{ascending:!0}),z.from("picks").select("user_id,gw,fixture_index,pick").eq("user_id",r.id).eq("gw",Pe),z.from("gw_results").select("gw,fixture_index,result").eq("gw",Pe),z.from("gw_submissions").select("submitted_at").eq("user_id",r.id).eq("gw",Pe).maybeSingle()]),$e=dt.data??[],Ne=Qe.data??[],nt=Ge.data??[],yt=!!Je.data?.submitted_at);const Oe=new Map;nt.forEach(we=>{const Ke=cd(we);Ke&&Oe.set(we.fixture_index,Ke)});const me={};Oe.forEach((we,Ke)=>{me[Ke]=we});let X=null;if(Oe.size>0){let we=0;Ne.forEach(Ke=>{const ce=Oe.get(Ke.fixture_index);ce&&ce===Ke.pick&&(we+=1)}),X=we}const U={};Ne.forEach(we=>{U[we.fixture_index]=we.pick,console.log("[Home] Pick loaded:",{fixture_index:we.fixture_index,pick:we.pick,user_id:we.user_id})}),console.log("[Home] Picks map:",U),console.log("[Home] Fixtures:",$e.map(we=>({fixture_index:we.fixture_index,home:we.home_name||we.home_team,away:we.away_name||we.away_team})));const re=oe.map(we=>we.id),[pe,ye]=await Promise.all([z.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1),re.length>0?z.from("league_message_reads").select("league_id,last_read_at").eq("user_id",r.id):Promise.resolve({data:[],error:null})]),_e=Array.isArray(pe.data)&&pe.data.length?pe.data[0].gw:null,de={};if(re.length>0&&ye.data){const we=new Map;ye.data.forEach(De=>we.set(De.league_id,De.last_read_at));const Ke=re.map(async De=>{const Ae=we.get(De)??"1970-01-01T00:00:00Z",{data:Ue,count:je}=await z.from("league_messages").select("id",{count:"exact"}).eq("league_id",De).gte("created_at",Ae);return[De,typeof je=="number"?je:Ue?.length??0]});(await Promise.all(Ke)).forEach(([De,Ae])=>{de[De]=Ae})}const ne={};if(re.length>0){const we=await z.from("league_members").select("league_id,user_id").in("league_id",re),Ke={};re.forEach(Ue=>Ke[Ue]=[]),(we.data??[]).forEach(Ue=>{Ke[Ue.league_id]||(Ke[Ue.league_id]=[]),Ke[Ue.league_id].push(Ue.user_id)});const ce=Array.from(new Set(Object.values(Ke).flat())),{data:De}=ce.length>0?await z.from("gw_submissions").select("user_id").eq("gw",Pe).in("user_id",ce):{data:[]},Ae=new Set((De??[]).map(Ue=>Ue.user_id));Object.entries(Ke).forEach(([Ue,je])=>{const ft=je.length,xt=je.filter(jt=>Ae.has(jt)).length;ne[Ue]={allSubmitted:xt===ft&&ft>0,submittedCount:xt,totalCount:ft}})}if(_e!==null&&_e!==Pe){const[we,Ke]=await Promise.all([z.from("gw_results").select("fixture_index,result").eq("gw",_e),z.from("picks").select("fixture_index,pick").eq("gw",_e).eq("user_id",r.id)]),ce=we.data??[],De=Ke.data??[],Ae=new Map;ce.forEach(je=>{const ft=cd(je);ft&&Ae.set(je.fixture_index,ft)});let Ue=0;De.forEach(je=>{const ft=Ae.get(je.fixture_index);ft&&ft===je.pick&&(Ue+=1)}),Be&&(D(_e),ue(Ue))}else Be&&(D(null),ue(null));fe(null),Be&&(w(yt),y(X),S(me),d($e),b(U),be(de),o(ne),setTimeout(()=>{Be&&N(!1)},0))}catch(Se){console.error("[Home] Error loading home page data:",Se),N(!1),d([]),w(!1),y(null)}},[r?.id]),{containerRef:cA,pullDistance:Ve,isRefreshing:ct,spinnerRotation:kt,spinnerOpacity:Pt,shouldShowIndicator:Bt}=sF({onRefresh:async()=>{rA.current=!0,await wt(!0)},enabled:!!r?.id&&!k&&!rA.current,enableMouse:!0}),Yt=x.useMemo(()=>c.map(xe=>`${xe.fixture_index}-${xe.api_match_id}`).join(","),[c]);x.useEffect(()=>{if(!rt||!c.length)return;const xe=c.slice(0,3).filter(ke=>ke.api_match_id&&ke.kickoff_time);if(xe.length===0)return;const Be=new Map,Se=ke=>{const oe=ke.fixture_index;if(Be.has(oe)){console.log("[Home] Already polling fixture",oe);return}console.log("[Home] Starting polling for fixture",oe,"api_match_id:",ke.api_match_id);const Xe=async()=>{console.log("[Home] Polling fixture",oe,"from Supabase at",new Date().toISOString());const Qe=await vt(ke.api_match_id,ke.kickoff_time);if(!Qe){console.log(`[Home] No score data in Supabase for fixture ${oe} - scheduled function may not have updated yet`);return}console.log("[Home] Got score data for fixture",oe,":",Qe);const Ge=Qe.status==="FINISHED";if(console.log("[Home] Updating liveScores for fixture",oe),et(Je=>({...Je,[oe]:{homeScore:Qe.homeScore,awayScore:Qe.awayScore,status:Qe.status,minute:Qe.minute??null}})),Le.current[oe],Le.current[oe]={homeScore:Qe.homeScore,awayScore:Qe.awayScore},Ge){console.log(`[Home] Game ${oe} finished - stopping polling`);const Je=Be.get(oe);Je&&(clearInterval(Je),Be.delete(oe))}},dt=setInterval(Xe,10*1e3);Be.set(oe,dt),Xe()},Me=()=>{const ke=new Date;xe.forEach(oe=>{if(!oe.api_match_id||!oe.kickoff_time)return;const Xe=oe.fixture_index,Qe=new Date(oe.kickoff_time).getTime()<=ke.getTime(),Ge=Be.has(Xe),$e=le[Xe]?.status==="FINISHED";if($e&&Ge){console.log(`[Home] Stopping polling for fixture ${Xe} (finished)`);const Ne=Be.get(Xe);Ne&&(clearInterval(Ne),Be.delete(Xe));return}Qe&&!$e&&!Ge&&Se(oe)})};Me();const Pe=setInterval(Me,6e4);return xe.forEach(ke=>{if(!ke.api_match_id||!ke.kickoff_time)return;const oe=new Date(ke.kickoff_time),Xe=new Date,dt=ke.fixture_index;if(oe>Xe){const Qe=ke.home_name||ke.home_team||"Home",Ge=ke.away_name||ke.away_team||"Away";cF(ke.kickoff_time,Qe,Ge)}if(dt===0&&ke.kickoff_time){const Qe=new Date(ke.kickoff_time),Ge=new Date(Qe.getTime()-4500*1e3);oF(Ge.toISOString(),1,2),Ce.current||(lF(ke.kickoff_time,1),Ce.current=!0)}}),()=>{Be.forEach(clearInterval),clearInterval(Pe)}},[rt,c.length,Yt]),x.useEffect(()=>{if(!r?.id){N(!1);return}Xt.current+=1,wt(rA.current)},[r?.id,wt]),x.useEffect(()=>{if(!A.length||!r?.id||!f){console.log("Skipping position calculation:",{leaguesLength:A.length,userId:r?.id,gw:f}),j(!1);return}console.log("Starting position calculation for",A.length,"leagues"),j(!0);let xe=!0;return(async()=>{try{const{data:Be}=await z.from("meta").select("current_gw").eq("id",1).maybeSingle(),Se=Be?.current_gw??f,[Me,Pe]=await Promise.all([z.from("gw_results").select("gw,fixture_index,result"),z.from("league_members").select("league_id,user_id,users(id,name)").in("league_id",A.map(me=>me.id))]),ke=Me.data??[],oe={};A.forEach(me=>oe[me.id]=[]),(Pe.data??[]).forEach(me=>{const X=me.league_id;oe[X]||(oe[X]=[]),oe[X].push({id:me.user_id,name:me.users?.name||"Unknown"})});const Xe=new Map;ke.forEach(me=>{const X=cd(me);X&&Xe.set(`${me.gw}:${me.fixture_index}`,X)});const dt=[...new Set(Array.from(Xe.keys()).map(me=>parseInt(me.split(":")[0],10)))].sort((me,X)=>me-X),{data:Qe}=await z.from("fixtures").select("gw,kickoff_time").in("gw",dt.length>0?dt:[1]),Ge=new Map;(Qe??[]).forEach(me=>{if(me.kickoff_time&&me.gw){const X=new Date(me.kickoff_time),U=new Date(X.getTime()-4500*1e3);(!Ge.has(me.gw)||U<Ge.get(me.gw))&&Ge.set(me.gw,U)}});const Je=new Map;A.forEach(me=>{const X=me.name&&x0[me.name];if(typeof X=="number"){Je.set(me.id,X);return}if(me.start_gw!==null&&me.start_gw!==void 0){Je.set(me.id,me.start_gw);return}if(me.created_at){const U=new Date(me.created_at);for(const re of dt){const pe=Ge.get(re);if(pe&&U<=pe){Je.set(me.id,re);return}}if(dt.length>0){Je.set(me.id,Math.max(...dt)+1);return}}Je.set(me.id,Se)});const $e=new Map;for(const me of A){const X=oe[me.id]??[];if(X.length===0){$e.set(me.id,[]);continue}const U=Je.get(me.id)??Se,re=dt.filter(_e=>_e>=U);if(re.length===0){$e.set(me.id,[]);continue}const pe=X.map(_e=>_e.id),{data:ye}=await z.from("picks").select("user_id,gw,fixture_index,pick").in("user_id",pe).in("gw",re);$e.set(me.id,ye??[])}const Ne=new Set;Object.values(oe).forEach(me=>{me.forEach(X=>Ne.add(X.id))});const{data:nt}=Ne.size>0?await z.from("gw_submissions").select("user_id").eq("gw",Se).in("user_id",Array.from(Ne)):{data:[]},yt=new Set((nt??[]).map(me=>me.user_id)),Oe={};for(let me=0;me<A.length;me++){const X=A[me];try{const U=(oe[X.id]??[]).filter(J=>J.name!=="Unknown");if(U.length===0){Oe[X.id]={id:X.id,members:[],userPosition:null,positionChange:null,sortedMemberIds:[],latestGwWinners:[]};continue}if(Xe.size===0){const J=U.sort((ge,tt)=>ge.name.localeCompare(tt.name)).map(ge=>ge.id);Oe[X.id]={id:X.id,members:U.sort((ge,tt)=>ge.name.localeCompare(tt.name)),userPosition:null,positionChange:null,sortedMemberIds:J,latestGwWinners:[]};continue}const re=Je.get(X.id)??Se,pe=dt.filter(J=>J>=re);if(X.name==="Prem Predictions"&&console.error(` PREM PREDICTIONS - leagueStartGw: ${re}, relevantGws:`,pe,"gwsWithResults:",dt),pe.length===0){const J=U.sort((ge,tt)=>ge.name.localeCompare(tt.name)).map(ge=>ge.id);Oe[X.id]={id:X.id,members:U.sort((ge,tt)=>ge.name.localeCompare(tt.name)),userPosition:null,positionChange:null,sortedMemberIds:J,latestGwWinners:[]};continue}const ye=$e.get(X.id)??[],_e=U.map(J=>J.id);if(X.name?.toLowerCase().includes("forget")){const J=ye.reduce((ge,tt)=>(ge[tt.user_id]||(ge[tt.user_id]=[]),ge[tt.user_id].push(`${tt.gw}:${tt.fixture_index}`),ge),{});console.error(`[${X.name}] PICKS DATA:`,{totalPicks:ye.length,picksByUser:Object.keys(J).map(ge=>({userId:ge,userName:U.find(tt=>tt.id===ge)?.name,pickCount:J[ge].length,picks:J[ge].slice(0,5)}))})}const de=new Map,ne=new Map;pe.forEach(J=>{const ge=new Map;U.forEach(tt=>ge.set(tt.id,{user_id:tt.id,score:0,unicorns:0})),de.set(J,ge)}),pe.forEach(J=>{Array.from(Xe.entries()).filter(([tt])=>parseInt(tt.split(":")[0],10)===J).map(([tt,ot])=>({idx:parseInt(tt.split(":")[1],10),out:ot})).forEach(({idx:tt,out:ot})=>{const nA=ye.filter(_t=>_t.gw===J&&_t.fixture_index===tt),It=nA.filter(_t=>_t.pick===ot).map(_t=>_t.user_id);X.name==="Easy League"&&J===11&&console.log(` Easy League GW 11 - Fixture ${tt}:`,{outcome:ot,picksCount:nA.length,picks:nA.map(_t=>({user_id:_t.user_id,name:U.find(St=>St.id===_t.user_id)?.name||"unknown",pick:_t.pick})),correctUsers:It.map(_t=>U.find(St=>St.id===_t)?.name||_t)});const Lt=de.get(J);if(nA.forEach(_t=>{if(_t.pick===ot){const St=Lt.get(_t.user_id);St.score+=1}}),It.length===1&&U.length>=3){const _t=It[0],St=Lt.get(_t);St.unicorns+=1}})});const we=new Map,Ke=new Map,ce=new Map;U.forEach(J=>{we.set(J.id,0),Ke.set(J.id,0),ce.set(J.id,0)}),pe.forEach(J=>{const ge=Array.from(de.get(J).values());if(ge.forEach(It=>{Ke.set(It.user_id,(Ke.get(It.user_id)??0)+It.score),ce.set(It.user_id,(ce.get(It.user_id)??0)+It.unicorns)}),ge.sort((It,Lt)=>Lt.score-It.score||Lt.unicorns-It.unicorns),!ge.length)return;const tt=ge[0],ot=ge.filter(It=>It.score===tt.score&&It.unicorns===tt.unicorns),nA=new Set(ot.map(It=>It.user_id));if(X.name==="Easy League"&&J===11){console.log(" EASY LEAGUE GW 11 CALCULATION ");const It=ge.map(_t=>({user_id:_t.user_id,name:U.find(St=>St.id===_t.user_id)?.name||"unknown",score:_t.score,unicorns:_t.unicorns}));console.log(`All gwRows (${ge.length} players):`,It),console.log("Top player:",{user_id:tt.user_id,name:U.find(_t=>_t.id===tt.user_id)?.name||"unknown",score:tt.score,unicorns:tt.unicorns});const Lt=ot.map(_t=>({user_id:_t.user_id,name:U.find(St=>St.id===_t.user_id)?.name||"unknown",score:_t.score,unicorns:_t.unicorns}));console.log(`coTop (filtered, ${ot.length} players):`,Lt),console.log(`winners Set (${nA.size} winners):`,Array.from(nA)),console.log(" END EASY LEAGUE GW 11 CALCULATION ")}ot.length>1?(console.log(`[Home] GW ${J} has ${ot.length} co-winners (tie):`,Array.from(nA)),console.log(`[Home] GW ${J} co-winners details:`,ot.map(It=>({user_id:It.user_id,name:U.find(Lt=>Lt.id===It.user_id)?.name||"unknown",score:It.score,unicorns:It.unicorns})))):console.log(`[Home] GW ${J} single winner:`,tt.user_id,`score: ${tt.score}, unicorns: ${tt.unicorns}`),ot.length!==nA.size&&console.error(`[Home] GW ${J} ERROR: coTop length (${ot.length}) doesn't match winners Set size (${nA.size})!`),ne.set(J,nA),ot.length===1?we.set(tt.user_id,(we.get(tt.user_id)??0)+3):ot.forEach(It=>{we.set(It.user_id,(we.get(It.user_id)??0)+1)})});const De=U.map(J=>({user_id:J.id,name:J.name,mltPts:we.get(J.id)??0,unicorns:ce.get(J.id)??0,ocp:Ke.get(J.id)??0}));X.name==="Prem Predictions"&&console.error(" PREM PREDICTIONS STATS BEFORE SORT:",De.map(J=>({name:J.name,mltPts:J.mltPts,unicorns:J.unicorns,ocp:J.ocp,userId:J.user_id}))),X.name?.toLowerCase().includes("forget")&&(console.error(`[${X.name}] === BEFORE SORT ===`),De.forEach((J,ge)=>{console.error(`${ge+1}. ${J.name}: mltPts=${J.mltPts}, unicorns=${J.unicorns}, ocp=${J.ocp}`)}));const Ae=[...De].sort((J,ge)=>ge.mltPts-J.mltPts||ge.unicorns-J.unicorns||ge.ocp-J.ocp||J.name.localeCompare(ge.name));let Ue=Ae.findIndex(J=>J.user_id===r.id);if(Ue===-1){const J=U.findIndex(ge=>ge.id===r.id);J!==-1&&(console.warn(`[${X.name}] User ${r.id} found in members but not in mltRows - adding with 0 stats`),Ae.push({user_id:r.id,name:U[J].name,mltPts:0,unicorns:0,ocp:0}),Ae.sort((ge,tt)=>tt.mltPts-ge.mltPts||tt.unicorns-ge.unicorns||tt.ocp-ge.ocp||ge.name.localeCompare(tt.name)),Ue=Ae.findIndex(ge=>ge.user_id===r.id))}const je=Ae.map(J=>J.user_id);(X.name?.toLowerCase().includes("forget")||X.name?.toLowerCase().includes("prem"))&&(console.error(`[${X.name}] === AFTER SORT ===`),console.error(`[${X.name}] leagueStartGw:`,re),console.error(`[${X.name}] relevantGws:`,Array.from(pe)),console.error(`[${X.name}] picksAll count:`,ye.length),console.error(`[${X.name}] picksAll by GW:`,Array.from(new Set(ye.map(J=>J.gw))).sort()),console.error(`[${X.name}] === BEFORE SORT (mltRows) ===`),De.forEach((J,ge)=>{console.error(`${ge+1}. ${J.name}: mltPts=${J.mltPts}, unicorns=${J.unicorns}, ocp=${J.ocp}, user_id=${J.user_id}`)}),console.error(`[${X.name}] === AFTER SORT (sortedMltRows) ===`),Ae.forEach((J,ge)=>{console.error(`${ge+1}. ${J.name}: mltPts=${J.mltPts}, unicorns=${J.unicorns}, ocp=${J.ocp}, user_id=${J.user_id}`)}),console.error(`[${X.name}] sortedMemberIds:`,je),console.error(`[${X.name}] sortedMemberNames:`,je.map(J=>U.find(ge=>ge.id===J)?.name||J)),console.error(`[${X.name}] sortedMemberInitials:`,je.map(J=>{const ge=U.find(tt=>tt.id===J);return ge?os(ge.name):"?"}))),X.name==="Prem Predictions"&&(console.error(" PREM PREDICTIONS CALCULATED ORDER "),console.error("sortedMemberIds:",je),console.error("sortedMemberNames:",je.map(J=>U.find(ge=>ge.id===J)?.name||J)),console.error("sortedMemberInitials:",je.map(J=>{const ge=U.find(tt=>tt.id===J);return ge?os(ge.name):"?"})),console.error("sortedMltRows (with positions):",Ae.map((J,ge)=>({position:ge+1,name:J.name,userId:J.user_id,mltPts:J.mltPts,unicorns:J.unicorns,ocp:J.ocp,initials:os(J.name)}))),console.error(" PREM PREDICTIONS CURRENT STANDINGS:"),Ae.forEach((J,ge)=>{console.error(`${ge+1}. ${J.name} (${os(J.name)}) - ID: ${J.user_id} - MLT Pts: ${J.mltPts}, Unicorns: ${J.unicorns}, OCP: ${J.ocp}`)})),console.log(`[${X.name}] Position calculation:`,{userId:r.id,userIndex:Ue,userPosition:Ue!==-1?Ue+1:null,rowsCount:Ae.length,rows:Ae.map((J,ge)=>({index:ge+1,name:J.name,userId:J.user_id,mltPts:J.mltPts,unicorns:J.unicorns,ocp:J.ocp})),sortedMemberIds:je,memberIds:U.map(J=>J.id),userInMembers:U.some(J=>J.id===r.id),userInRows:Ae.some(J=>J.user_id===r.id),leagueStartGw:re,relevantGws:pe,picksCount:ye.length,currentGw:Se});const ft=Ue!==-1?Ue+1:null,xt=pe.length?Math.max(...pe):null,jt=xt!==null?ne.get(xt)??new Set:new Set,zt=Array.from(ne.entries()).map(([J,ge])=>({gw:J,winners:Array.from(ge),winnerNames:Array.from(ge).map(tt=>U.find(ot=>ot.id===tt)?.name||tt),isLatest:J===xt}));console.log(`[${X.name}] All GW winners:`,zt),X.name==="Easy League"&&console.log(`[Easy League] DETAILED - Latest GW: ${xt}, All GWs with winners:`,zt),jt.size>0?console.log(`[${X.name}] Latest GW ${xt} winners:`,Array.from(jt),"Names:",Array.from(jt).map(J=>U.find(ge=>ge.id===J)?.name||J)):xt!==null&&console.warn(`[${X.name}] Latest GW ${xt} has NO winners! gwWinners map:`,Array.from(ne.entries()).map(([J,ge])=>({gw:J,winners:Array.from(ge)})));const Rt=new Set;_e.forEach(J=>{yt.has(J)&&Rt.add(J)});const qe={id:X.id,members:U.sort((J,ge)=>J.name.localeCompare(ge.name)),userPosition:ft,positionChange:null,submittedMembers:Array.from(Rt),sortedMemberIds:[...je],latestGwWinners:Array.from(jt)};X.name==="Prem Predictions"&&(console.error(" PREM PREDICTIONS STORING DATA "),console.error("storedData.sortedMemberIds:",qe.sortedMemberIds),console.error("storedData.sortedMemberIds length:",qe.sortedMemberIds?.length??0),console.error("storedData.members length:",qe.members.length),console.error("storedData.sortedMemberIds initials:",(qe.sortedMemberIds||[]).map(J=>{const ge=qe.members.find(tt=>tt.id===J);return ge?os(ge.name):"?"}))),Oe[X.id]=qe}catch(U){console.error(`Error loading data for league ${X.id} (${X.name}):`,U),console.error("Error details:",U instanceof Error?U.message:U),Oe[X.id]={id:X.id,members:[],userPosition:null,positionChange:null,sortedMemberIds:[],latestGwWinners:[]}}}if(xe){console.log("Setting leagueData:",Object.keys(Oe).map(U=>{const re=Oe[U];return{id:U,userPosition:re.userPosition,membersCount:re.members.length,hasSortedMemberIds:!!re.sortedMemberIds}}));const me=A.find(U=>U.name?.toLowerCase().includes("forget"));me&&Oe[me.id]?console.error("[forget it] SETTING leagueData - Found in leagueDataMap:",{leagueId:me.id,leagueName:me.name,data:Oe[me.id],sortedMemberIds:Oe[me.id].sortedMemberIds,membersCount:Oe[me.id].members.length}):me&&console.error("[forget it] SETTING leagueData - NOT FOUND in leagueDataMap!",{leagueId:me.id,leagueName:me.name,leagueDataMapKeys:Object.keys(Oe)});const X=Object.fromEntries(Object.entries(Oe).map(([U,re])=>[U,{...re,sortedMemberIds:[...re.sortedMemberIds||[]],latestGwWinners:[...re.latestGwWinners||[]],members:[...re.members||[]]}]));gt(X),j(!1),console.log("[Home] Final leagueData set:",Object.keys(Oe).map(U=>{const re=Oe[U];return{leagueName:A.find(ye=>ye.id===U)?.name||U,sortedMemberIds:re.sortedMemberIds,latestGwWinners:re.latestGwWinners}}))}else j(!1)}catch(Be){console.error("[Home] Error calculating league data:",Be),xe&&j(!1)}})(),()=>{xe=!1}},[A,r?.id,f]),x.useEffect(()=>{let xe=!0;return(async()=>{try{let Be=!1;try{const{count:Se}=await z.from("users").select("id",{count:"exact",head:!0});xe&&typeof Se=="number"&&(R(Se),Be=!0)}catch{}if(!Be)try{const{count:Se}=await z.from("picks").select("user_id",{count:"exact",head:!0});xe&&typeof Se=="number"&&R(Se)}catch{}try{const{data:Se}=await z.from("v_ocp_overall").select("user_id, ocp").order("ocp",{ascending:!1});if(xe&&Array.isArray(Se)&&Se.length){const Me=Se.findIndex(Pe=>Pe.user_id===r?.id);if(Me!==-1){console.log("Using v_ocp_overall (same as Global page):",Me+1,"from",Se.length,"players"),H(Me+1);try{const{data:Pe}=await z.from("v_gw_points").select("user_id, gw, points");if(Pe&&Pe.length>0){const ke=Math.max(...Pe.map(Qe=>Qe.gw)),oe=new Map;Pe.forEach(Qe=>{Qe.gw<ke&&oe.set(Qe.user_id,(oe.get(Qe.user_id)||0)+(Qe.points||0))});const dt=Array.from(oe.entries()).sort((Qe,Ge)=>Ge[1]-Qe[1]||Qe[0].localeCompare(Ge[0])).findIndex(([Qe])=>Qe===r?.id);dt!==-1&&(console.log("Previous rank from v_gw_points:",dt+1),xe&&W(dt+1))}}catch(Pe){console.log("Could not calculate previous rank:",Pe)}return}}}catch{}try{const[{data:Se},{data:Me},{data:Pe}]=await Promise.all([z.from("gw_results").select("gw,fixture_index,result"),z.from("picks").select("user_id,gw,fixture_index,pick"),z.from("gw_submissions").select("user_id,gw,submitted_at")]),ke=Se||[],oe=Me||[],Xe=Pe||[],dt=new Map;Xe.forEach(Ne=>{Ne.submitted_at&&dt.set(`${Ne.user_id}:${Ne.gw}`,!0)});const Qe=new Map;ke.forEach(Ne=>{(Ne.result==="H"||Ne.result==="D"||Ne.result==="A")&&Qe.set(`${Ne.gw}:${Ne.fixture_index}`,Ne.result)});const Ge=Math.max(...ke.map(Ne=>Ne.gw)),Je=new Map;oe.forEach(Ne=>{if(!dt.get(`${Ne.user_id}:${Ne.gw}`))return;const nt=Qe.get(`${Ne.gw}:${Ne.fixture_index}`);nt&&(Ne.pick===nt?Je.set(Ne.user_id,(Je.get(Ne.user_id)||0)+1):Je.has(Ne.user_id)||Je.set(Ne.user_id,0))});const $e=new Map;if(oe.forEach(Ne=>{if(Ne.gw>=Ge||!dt.get(`${Ne.user_id}:${Ne.gw}`))return;const nt=Qe.get(`${Ne.gw}:${Ne.fixture_index}`);nt&&(Ne.pick===nt?$e.set(Ne.user_id,($e.get(Ne.user_id)||0)+1):$e.has(Ne.user_id)||$e.set(Ne.user_id,0))}),Je.size){const Ne=Array.from(Je.entries()).sort((yt,Oe)=>Oe[1]-yt[1]||yt[0].localeCompare(Oe[0])),nt=Ne.findIndex(([yt])=>yt===r?.id);if(xe&&nt!==-1&&(console.log("Current rank calculation:",{myIndex:nt,rank:nt+1,myScore:Je.get(r?.id??""),ordered:Ne.slice(0,5).map(([yt,Oe])=>({uid:yt.slice(0,8),score:Oe}))}),H(nt+1)),console.log("Previous scores debug:",{prevScoresSize:$e.size,latestGw:Ge,hasUserInPrevScores:$e.has(r?.id??""),userPrevScore:$e.get(r?.id??"")}),$e.size>0){const yt=Array.from($e.entries()).sort((me,X)=>X[1]-me[1]||me[0].localeCompare(X[0])),Oe=yt.findIndex(([me])=>me===r?.id);console.log("Previous rank calculation:",{prevMyIndex:Oe,prevRank:Oe!==-1?Oe+1:"not found",prevScore:$e.get(r?.id??""),prevOrdered:yt.slice(0,5).map(([me,X])=>({uid:me.slice(0,8),score:X}))}),xe&&Oe!==-1&&W(Oe+1)}else console.log("No previous scores found - prevScores is empty")}}catch{}}finally{}})(),()=>{xe=!1}},[r?.id]),x.useEffect(()=>{if(!r?.id)return;let xe=!0;return(async()=>{try{const{data:Be,error:Se}=await z.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle();if(Se)throw Se;const Me=Be?.gw??null;if(!Me)return;const{data:Pe}=await z.from("fixtures").select("fixture_index").eq("gw",Me),ke=Pe?[...new Set(Pe.map($e=>$e.fixture_index))].length:10,[{data:oe},{data:Xe}]=await Promise.all([z.from("v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0}),z.from("v_ocp_overall").select("user_id, name, ocp")]),dt=oe||[],Qe=Xe||[],Ge=new Map(Qe.map($e=>[$e.user_id,$e.name??"User"]));if(xe&&(Q(dt),dt.length>0)){const $e=Math.max(...dt.map(Ne=>Ne.gw));I($e)}const Je=dt.filter($e=>$e.gw===Me);if(Je.length>0&&xe){const $e=Je.map(Oe=>({user_id:Oe.user_id,name:Ge.get(Oe.user_id)??"User",points:Oe.points??0})).sort((Oe,me)=>me.points-Oe.points||Oe.name.localeCompare(me.name));let Ne=1;const nt=$e.map((Oe,me)=>(me>0&&$e[me-1].points!==Oe.points&&(Ne=me+1),{...Oe,rank:Ne})),yt=nt.find(Oe=>Oe.user_id===r.id);if(yt){const me=nt.filter(X=>X.rank===yt.rank).length>1;Z({rank:yt.rank,total:Je.length,score:yt.points,gw:Me,totalFixtures:ke,isTied:me})}}if(Me>=5){const $e=Me-4,Ne=dt.filter(X=>X.gw>=$e&&X.gw<=Me),nt=new Map;Qe.forEach(X=>{nt.set(X.user_id,{user_id:X.user_id,name:X.name??"User",formPoints:0,weeksPlayed:new Set})}),Ne.forEach(X=>{const U=nt.get(X.user_id);U?(U.formPoints+=X.points??0,U.weeksPlayed.add(X.gw)):nt.set(X.user_id,{user_id:X.user_id,name:"User",formPoints:X.points??0,weeksPlayed:new Set([X.gw])})});const yt=Array.from(nt.values()).filter(X=>{for(let U=$e;U<=Me;U++)if(!X.weeksPlayed.has(U))return!1;return!0}).sort((X,U)=>U.formPoints-X.formPoints||X.name.localeCompare(U.name));let Oe=1;const me=yt.map((X,U)=>(U>0&&yt[U-1].formPoints!==X.formPoints&&(Oe=U+1),{...X,rank:Oe}));if(me.length>0&&xe){const X=me.find(U=>U.user_id===r.id);if(X){const re=me.filter(pe=>pe.rank===X.rank).length>1;se({rank:X.rank,total:me.length,isTied:re})}}}if(Me>=10){const $e=Me-9,Ne=dt.filter(X=>X.gw>=$e&&X.gw<=Me),nt=new Map;Qe.forEach(X=>{nt.set(X.user_id,{user_id:X.user_id,name:X.name??"User",formPoints:0,weeksPlayed:new Set})}),Ne.forEach(X=>{const U=nt.get(X.user_id);U?(U.formPoints+=X.points??0,U.weeksPlayed.add(X.gw)):nt.set(X.user_id,{user_id:X.user_id,name:"User",formPoints:X.points??0,weeksPlayed:new Set([X.gw])})});const yt=Array.from(nt.values()).filter(X=>{for(let U=$e;U<=Me;U++)if(!X.weeksPlayed.has(U))return!1;return!0}).sort((X,U)=>U.formPoints-X.formPoints||X.name.localeCompare(U.name));let Oe=1;const me=yt.map((X,U)=>(U>0&&yt[U-1].formPoints!==X.formPoints&&(Oe=U+1),{...X,rank:Oe}));if(me.length>0&&xe){const X=me.find(U=>U.user_id===r.id);if(X){const re=me.filter(pe=>pe.rank===X.rank).length>1;We({rank:X.rank,total:me.length,isTied:re})}}}if(Qe.length>0&&xe){const $e=[...Qe].sort((Oe,me)=>(me.ocp??0)-(Oe.ocp??0)||(Oe.name??"User").localeCompare(me.name??"User"));let Ne=1;const nt=$e.map((Oe,me)=>(me>0&&($e[me-1].ocp??0)!==(Oe.ocp??0)&&(Ne=me+1),{...Oe,rank:Ne})),yt=nt.find(Oe=>Oe.user_id===r.id);if(yt){const me=nt.filter(X=>X.rank===yt.rank).length>1;he({rank:yt.rank,total:Qe.length,isTied:me})}}}catch(Be){console.error("Error calculating leaderboard rankings:",Be)}})(),()=>{xe=!1}},[r?.id]);const Wt=x.useMemo(()=>{if(!r?.id||!_)return null;const xe=$.filter(oe=>oe.user_id===r.id).sort((oe,Xe)=>Xe.gw-oe.gw);if(xe.length===0)return null;let Be=0,Se=_;const Me=new Set(xe.map(oe=>oe.gw));for(;Se>=1&&Me.has(Se);)Be++,Se--;const Pe=[],ke=Math.max(1,_-9);for(let oe=_;oe>=ke;oe--){const Xe=xe.find(dt=>dt.gw===oe);Pe.push({gw:oe,score:Xe?Xe.points:null})}return{streak:Be,last10GwScores:Pe.reverse()}},[r?.id,$,_]);x.useEffect(()=>{const xe=z.channel(`home-unreads:${r?.id??"anon"}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages"},Be=>{try{const Se=Be?.new?.league_id,Me=Be?.new?.user_id;if(!Se||!Nt.current.has(Se)||Me&&Me===r?.id)return;be(Pe=>({...Pe,[Se]:(Pe?.[Se]??0)+1}))}catch{}}).subscribe();return()=>{z.removeChannel(xe)}},[r?.id]),x.useEffect(()=>{const xe=async()=>{try{const{data:Be}=await z.from("league_message_reads").select("league_id,last_read_at").eq("user_id",r?.id),Se=new Map;(Be??[]).forEach(Pe=>Se.set(Pe.league_id,Pe.last_read_at));const Me={};for(const Pe of Nt.current){const ke=Se.get(Pe)??"1970-01-01T00:00:00Z",{data:oe,count:Xe}=await z.from("league_messages").select("id",{count:"exact"}).eq("league_id",Pe).gte("created_at",ke);Me[Pe]=typeof Xe=="number"?Xe:oe?.length??0}be(Me)}catch{}};return window.addEventListener("focus",xe),()=>window.removeEventListener("focus",xe)},[r?.id]);const Vt=({title:xe,subtitle:Be,headerRight:Se,className:Me,boxed:Pe=!0,icon:ke,children:oe})=>i.jsxs("section",{className:Me??"",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-base font-medium text-slate-500 uppercase tracking-wide",children:xe}),i.jsx("div",{className:"w-4 h-4 rounded-full border border-slate-400 flex items-center justify-center",children:i.jsx("span",{className:"text-[10px] text-slate-500 font-bold",children:"i"})})]}),Se&&i.jsx("div",{children:Se})]}),Be&&i.jsx("div",{className:"mt-1 text-sm text-slate-500",children:Be}),Pe?i.jsx("div",{className:"mt-3 rounded-2xl border bg-slate-50 overflow-hidden",children:oe}):i.jsx("div",{className:"mt-3",children:oe})]}),mA=async()=>{if(!(!c.length||v===null))try{let xe=0;c.forEach(Qe=>{const Ge=C[Qe.fixture_index],Je=E[Qe.fixture_index];Ge&&Je&&Ge===Je&&xe++});const Be=document.createElement("div");Be.style.position="absolute",Be.style.left="-9999px",Be.style.width="1080px",Be.style.height="1080px",Be.style.backgroundColor="#1C8376",Be.style.padding="40px",Be.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',Be.style.display="flex",Be.style.flexDirection="column",Be.style.boxSizing="border-box",document.body.appendChild(Be);const Se=document.createElement("div");Se.style.display="flex",Se.style.flexDirection="column",Se.style.alignItems="center",Se.style.marginBottom="30px",Se.style.flexShrink="0";const Me=document.createElement("img");Me.crossOrigin="anonymous",Me.style.width="200px",Me.style.height="auto",Me.style.marginBottom="20px",Me.style.filter="brightness(0) invert(1)",Se.appendChild(Me),await new Promise(Qe=>{Me.onload=()=>Qe(),Me.onerror=()=>Qe(),Me.src="/assets/badges/totl-logo1.svg"});const Pe=document.createElement("div");Pe.style.textAlign="center",Pe.style.color="#ffffff",Pe.innerHTML=`
        <div style="font-size: 36px; font-weight: 700; margin-bottom: 8px; opacity: 0.95;">Game Week ${f}</div>
        <div style="font-size: 96px; font-weight: 800; margin-bottom: 4px; line-height: 1;">${xe}<span style="font-size: 64px; opacity: 0.8;">/${c.length}</span></div>
        <div style="font-size: 24px; font-weight: 600; opacity: 0.9;">Score</div>
      `,Se.appendChild(Pe),Be.appendChild(Se);const ke=document.createElement("div");ke.style.display="grid",ke.style.gridTemplateColumns="repeat(5, 1fr)",ke.style.gridTemplateRows="repeat(2, 1fr)",ke.style.gap="12px",ke.style.flex="1",ke.style.minHeight="0";const oe=[...c].sort((Qe,Ge)=>Qe.fixture_index-Ge.fixture_index),Xe=oe.map(Qe=>{const Ge=(Qe.home_code||Qe.home_name||Qe.home_team||"").toUpperCase(),Je=(Qe.away_code||Qe.away_name||Qe.away_team||"").toUpperCase();return Promise.all([new Promise($e=>{const Ne=new Image;Ne.crossOrigin="anonymous",Ne.onload=()=>$e(Ne),Ne.onerror=()=>$e(Ne),Ne.src=`/assets/badges/${Ge}.png`}),new Promise($e=>{const Ne=new Image;Ne.crossOrigin="anonymous",Ne.onload=()=>$e(Ne),Ne.onerror=()=>$e(Ne),Ne.src=`/assets/badges/${Je}.png`})])});await Promise.all(Xe),oe.forEach((Qe,Ge)=>{const Je=C[Qe.fixture_index],$e=E[Qe.fixture_index],Ne=(Qe.home_code||Qe.home_name||Qe.home_team||"").toUpperCase(),nt=(Qe.away_code||Qe.away_name||Qe.away_team||"").toUpperCase(),yt=Dn(Ne),Oe=Dn(nt),me=Je&&$e&&Je===$e,X=document.createElement("div");X.style.backgroundColor="#ffffff",X.style.borderRadius="16px",X.style.padding="16px",X.style.display="flex",X.style.flexDirection="column",X.style.alignItems="center",X.style.justifyContent="center",X.style.gap="10px",X.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)";const U=document.createElement("div");U.style.display="flex",U.style.flexDirection="column",U.style.alignItems="center",U.style.gap="8px",U.style.width="100%";const re=document.createElement("div");re.style.display="flex",re.style.flexDirection="column",re.style.alignItems="center",re.style.gap="4px";const pe=document.createElement("img");pe.src=`/assets/badges/${Ne}.png`,pe.style.width="40px",pe.style.height="40px",pe.style.objectFit="contain",pe.onerror=()=>{pe.style.display="none"};const ye=document.createElement("div");ye.textContent=yt,ye.style.fontSize="14px",ye.style.fontWeight="600",ye.style.color="#0f172a",ye.style.textAlign="center",ye.style.lineHeight="1.2",re.appendChild(pe),re.appendChild(ye),U.appendChild(re);const _e=document.createElement("div");_e.textContent="vs",_e.style.fontSize="12px",_e.style.color="#64748b",_e.style.fontWeight="500",U.appendChild(_e);const de=document.createElement("div");de.style.display="flex",de.style.flexDirection="column",de.style.alignItems="center",de.style.gap="4px";const ne=document.createElement("img");ne.src=`/assets/badges/${nt}.png`,ne.style.width="40px",ne.style.height="40px",ne.style.objectFit="contain",ne.onerror=()=>{ne.style.display="none"};const we=document.createElement("div");we.textContent=Oe,we.style.fontSize="14px",we.style.fontWeight="600",we.style.color="#0f172a",we.style.textAlign="center",we.style.lineHeight="1.2",de.appendChild(ne),de.appendChild(we),U.appendChild(de),X.appendChild(U);const Ke=document.createElement("div");Ke.style.display="flex",Ke.style.justifyContent="center",Ke.style.gap="8px",Ke.style.marginTop="4px",["H","D","A"].forEach(ce=>{const De=document.createElement("div");De.style.width="24px",De.style.height="24px",De.style.borderRadius="50%",De.style.border="2px solid #ffffff",Je===ce?me?(De.style.background="linear-gradient(135deg, #fbbf24, #f97316, #ec4899, #9333ea)",De.style.boxShadow="0 2px 8px rgba(251, 191, 36, 0.5)"):De.style.backgroundColor="#ef4444":$e===ce?De.style.backgroundColor="#d1d5db":(De.style.backgroundColor="transparent",De.style.border="2px solid #e2e8f0"),Ke.appendChild(De)}),X.appendChild(Ke),ke.appendChild(X)}),Be.appendChild(ke),await new Promise(Qe=>setTimeout(Qe,1500)),(await AF(Be,{width:1080,height:1080,scale:1,backgroundColor:"#1C8376",useCORS:!0,logging:!1,allowTaint:!1})).toBlob(async Qe=>{if(!Qe){document.body.removeChild(Be);return}const Ge=new File([Qe],`gw${f}-predictions.png`,{type:"image/png"});if(navigator.share&&/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))try{if(navigator.canShare&&navigator.canShare({files:[Ge]})){await navigator.share({files:[Ge],title:`Game Week ${f} Predictions`,text:`My Game Week ${f} predictions: ${xe}/${c.length}`}),document.body.removeChild(Be);return}await navigator.share({files:[Ge],title:`Game Week ${f} Predictions`,text:`My Game Week ${f} predictions: ${xe}/${c.length}`}),document.body.removeChild(Be);return}catch(nt){if(nt.name==="AbortError"||nt.message?.includes("cancel")){document.body.removeChild(Be);return}console.log("File sharing not supported, falling back to download")}const Je=URL.createObjectURL(Qe),$e=document.createElement("a");$e.href=Je,$e.download=`gw${f}-predictions.png`,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(Je),document.body.removeChild(Be)},"image/png")}catch(xe){console.error("Error sharing predictions:",xe),alert("Failed to generate shareable image. Please try again.")}},Gt=()=>i.jsxs(i.Fragment,{children:[i.jsx(Vt,{title:"Leaderboards",boxed:!1,children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"h-full rounded-3xl border-2 border-slate-200 bg-slate-50/80 p-4 sm:p-6 animate-pulse",children:[i.jsx("div",{className:"flex items-start gap-3",children:i.jsx("div",{className:"h-12 w-12 sm:h-14 sm:w-14 rounded-full bg-slate-200 flex-shrink-0"})}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"h-6 w-32 bg-slate-200 rounded mb-2"}),i.jsx("div",{className:"h-4 w-24 bg-slate-200 rounded"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsx("div",{className:"h-5 w-16 bg-slate-200 rounded"}),i.jsx("div",{className:"h-5 w-12 bg-slate-200 rounded"})]})]}),i.jsxs("div",{className:"h-full rounded-3xl border-2 border-slate-200 bg-amber-50/60 p-4 sm:p-6 animate-pulse relative",children:[i.jsx("div",{className:"absolute top-4 left-4 h-4 w-12 bg-slate-200 rounded"}),i.jsx("div",{className:"absolute bottom-4 left-4 h-4 w-32 bg-slate-200 rounded"}),i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"h-16 w-16 bg-slate-200 rounded"})})]})]})}),i.jsxs("section",{className:"mt-8",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx("div",{className:"h-8 w-48 bg-slate-200 rounded animate-pulse"})}),i.jsx("div",{className:"overflow-x-auto -mx-4 px-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:i.jsx("div",{className:"flex gap-2",style:{width:"max-content"},children:[1,2,3].map(xe=>i.jsx("div",{className:"flex flex-col gap-2",children:[1,2,3].map(Be=>i.jsx("div",{className:"rounded-xl border bg-white overflow-hidden shadow-sm w-[320px] animate-pulse",style:{borderRadius:"12px"},children:i.jsx("div",{className:"p-4 bg-white relative",children:i.jsxs("div",{className:"flex items-start gap-3 relative",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-slate-200"}),i.jsx("div",{className:"flex-1 min-w-0 h-12 flex flex-col justify-between",children:i.jsx("div",{className:"h-5 w-32 bg-slate-200 rounded -mt-0.5"})}),i.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-1",children:i.jsx("div",{className:"h-6 w-6 rounded-full bg-slate-200"})})]})})},Be))},xe))})})]}),i.jsxs("section",{className:"mt-8",children:[i.jsx("div",{className:"h-8 w-32 bg-slate-200 rounded animate-pulse mb-3"}),i.jsx("div",{className:"rounded-2xl border bg-slate-50 overflow-hidden p-4",children:i.jsx("div",{className:"space-y-3",children:[1,2,3].map(xe=>i.jsx("div",{className:"h-16 bg-white rounded-lg border border-slate-200 animate-pulse"},xe))})})]})]});return i.jsxs("div",{ref:cA,className:`max-w-6xl mx-auto px-4 py-4 min-h-screen relative ${e?"oldschool-theme":""}`,children:[Bt&&i.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-center z-50 pointer-events-none",style:{transform:`translateY(${Math.max(0,Ve-40)}px)`,opacity:Pt,transition:ct?"opacity 0.3s":"none"},children:i.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-slate-400 border-t-transparent",style:{transform:`rotate(${ct?kt+360:kt}deg)`,transition:ct?"transform 0.5s linear infinite":"none"}})}),i.jsx(IC,{}),(k||O)&&rA.current?i.jsx(Gt,{}):i.jsxs(i.Fragment,{children:[i.jsx(Vt,{title:"Leaderboards",boxed:!1,children:i.jsxs("div",{className:"overflow-x-auto -mx-4 px-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch",overscrollBehaviorX:"contain",touchAction:"pan-x pinch-zoom"},children:[i.jsx("style",{children:`
                .scrollbar-hide::-webkit-scrollbar {
                  display: none;
                }
              `}),i.jsxs("div",{className:"flex gap-2",style:{width:"max-content",minWidth:"100%"},children:[i.jsx(IA,{to:"/global?tab=lastgw",className:"flex-shrink-0 w-[148px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden cursor-pointer block",children:i.jsxs("div",{className:"p-3 h-full flex flex-col relative",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("div",{className:"flex items-baseline gap-[3px]",style:{marginTop:"-4px"},children:K?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-[#1C8376]",style:{fontSize:"38px",fontWeight:"normal",lineHeight:"1"},children:K.score}),i.jsxs("div",{className:"flex items-baseline gap-[4px]",children:[i.jsx("span",{className:"text-slate-500",style:{fontSize:"18px",fontWeight:"normal",lineHeight:"1"},children:"/"}),i.jsx("span",{className:"text-slate-500",style:{fontSize:"18px",fontWeight:"normal",lineHeight:"1"},children:K.totalFixtures})]})]}):i.jsx("span",{className:"leading-none text-slate-900",children:""})}),i.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),i.jsxs("div",{className:"mt-auto",children:[i.jsxs("div",{className:"text-xs text-slate-500 mb-2",children:["GAME WEEK ",K?.gw??""]}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("span",{className:"text-xs font-semibold text-slate-900",children:K&&K.total>0?`TOP ${Math.round(K.rank/K.total*100)}%`:""})})]})]})}),i.jsx(IA,{to:"/global?tab=form5",className:"flex-shrink-0 w-[148px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden cursor-pointer block",children:i.jsxs("div",{className:"p-3 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("img",{src:"/assets/5-week-form-badge.png",alt:"5-Week Form Badge",className:"w-[32px] h-[32px]"}),i.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),i.jsxs("div",{className:"mt-auto",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"5-WEEK FORM"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("span",{className:"text-xs font-semibold text-slate-900",children:te&&te.total>0?`TOP ${Math.round(te.rank/te.total*100)}%`:""})})]})]})}),i.jsx(IA,{to:"/global?tab=form10",className:"flex-shrink-0 w-[148px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden cursor-pointer block",children:i.jsxs("div",{className:"p-3 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("img",{src:"/assets/10-week-form-badge.png",alt:"10-Week Form Badge",className:"w-[32px] h-[32px]"}),i.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),i.jsxs("div",{className:"mt-auto",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"10-WEEK FORM"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("span",{className:"text-xs font-semibold text-slate-900",children:He&&He.total>0?`TOP ${Math.round(He.rank/He.total*100)}%`:""})})]})]})}),i.jsx(IA,{to:"/global?tab=overall",className:"flex-shrink-0 w-[148px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden cursor-pointer block",children:i.jsxs("div",{className:"p-3 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("img",{src:"/assets/season-rank-badge.png",alt:"Season Rank Badge",className:"w-[32px] h-[32px]"}),i.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),i.jsxs("div",{className:"mt-auto",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-2",children:"SEASON RANK"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx("span",{className:"text-xs font-semibold text-slate-900",children:ie&&ie.total>0?`TOP ${Math.round(ie.rank/ie.total*100)}%`:""})})]})]})}),Wt&&i.jsx("div",{className:"flex-shrink-0 w-[340px] sm:w-[400px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden hover:shadow-md transition-shadow relative",children:i.jsxs("div",{className:"p-3 h-full flex flex-col",children:[i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:"mb-2 relative",style:{height:"70px"},children:(()=>{const xe=Wt.last10GwScores,Be=xe.filter(oe=>oe.score!==null),Se=Be.length>0?Math.max(...Be.map(oe=>oe.score)):10,Me=0,Pe=Se-Me||1,ke=60;return i.jsx("div",{className:"relative h-full",children:i.jsx("div",{className:"flex items-end justify-between gap-1 h-full px-1",children:xe.map((oe,Xe)=>{const dt=oe.score!==null,Qe=oe.gw===_,Ge=oe.score??0,Je=dt?(Ge-Me)/Pe*ke:0;return i.jsxs("div",{className:"flex flex-col items-center justify-end gap-1 flex-1 relative min-w-0",children:[dt&&i.jsx("div",{className:`text-xs font-bold mb-0.5 leading-none ${Qe?"text-[#1C8376]":"text-slate-700"}`,children:Ge}),i.jsx("div",{className:`w-full rounded-t transition-all ${dt?Qe?"bg-[#1C8376]":"bg-slate-400":"bg-slate-200"}`,style:{height:`${Je}px`,minHeight:dt?"4px":"0"},title:dt?`GW${oe.gw}: ${Ge}`:`GW${oe.gw}: Not played`}),i.jsxs("div",{className:`text-[10px] font-medium leading-tight ${dt?Qe?"text-[#1C8376] font-bold":"text-slate-700":"text-slate-400"}`,children:["GW",oe.gw]})]},oe.gw)})})})})()}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-3 h-3 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2}),i.jsx("circle",{cx:"12",cy:"12",r:"6",strokeWidth:2}),i.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]}),i.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Your Streak"," ",i.jsx("span",{className:"font-bold text-orange-500",children:Wt.streak>0?`${Wt.streak} ${Wt.streak===1?"Week":"Weeks"}`:"Start your streak!"})]})]}),i.jsx("span",{className:"text-[10px] font-medium text-slate-400",children:"Last 10"})]})]})})]})]},`leaderboard-scroll-${Xt.current}`)}),i.jsxs("section",{className:"mt-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-base font-medium text-slate-500 uppercase tracking-wide",children:"Mini Leagues"}),i.jsx("div",{className:"w-4 h-4 rounded-full border border-slate-400 flex items-center justify-center",children:i.jsx("span",{className:"text-[10px] text-slate-500 font-bold",children:"i"})})]})}),i.jsxs("div",{children:[(console.log("[Home] Mini Leagues render check:",{loading:k,isInitialMount:rA.current,leaguesLength:A.length}),null),(k||O)&&rA.current&&A.length===0?i.jsxs("div",{className:"overflow-x-auto -mx-4 px-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch",overscrollBehaviorX:"contain"},children:[i.jsx("style",{children:`
                .scrollbar-hide::-webkit-scrollbar {
                  display: none;
                }
              `}),i.jsx("div",{className:"flex gap-2",style:{width:"max-content",minWidth:"100%"},children:[1,2,3].map(xe=>i.jsx("div",{className:"flex flex-col gap-2",children:[1,2,3].map(Be=>i.jsx("div",{className:"rounded-xl border bg-white overflow-hidden shadow-sm w-[320px] animate-pulse",style:{borderRadius:"12px"},children:i.jsx("div",{className:"p-4 bg-white relative",children:i.jsxs("div",{className:"flex items-start gap-3 relative",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-slate-200"}),i.jsx("div",{className:"flex-1 min-w-0 h-12 flex flex-col justify-between",children:i.jsx("div",{className:"h-5 w-32 bg-slate-200 rounded -mt-0.5"})}),i.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-1",children:i.jsx("div",{className:"h-6 w-6 rounded-full bg-slate-200"})})]})})},Be))},xe))})]}):(k||O)&&rA.current&&A.length>0?i.jsxs("div",{className:"overflow-x-auto -mx-4 px-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch",overscrollBehaviorX:"contain"},children:[i.jsx("style",{children:`
                .scrollbar-hide::-webkit-scrollbar {
                  display: none;
                }
              `}),i.jsx("div",{className:"flex gap-2",style:{width:"max-content",minWidth:"100%"},children:[1,2,3].map(xe=>i.jsx("div",{className:"flex flex-col gap-2",children:[1,2,3].map(Be=>i.jsx("div",{className:"rounded-xl border bg-white overflow-hidden shadow-sm w-[320px] animate-pulse",style:{borderRadius:"12px"},children:i.jsx("div",{className:"p-4 bg-white relative",children:i.jsxs("div",{className:"flex items-start gap-3 relative",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-slate-200"}),i.jsx("div",{className:"flex-1 min-w-0 h-12 flex flex-col justify-between",children:i.jsx("div",{className:"h-5 w-32 bg-slate-200 rounded -mt-0.5"})}),i.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-1",children:i.jsx("div",{className:"h-6 w-6 rounded-full bg-slate-200"})})]})})},Be))},xe))})]}):!k&&A.length===0?i.jsxs("div",{className:"p-6 bg-white rounded-lg border border-slate-200 text-center",children:[i.jsx("div",{className:"text-slate-600 mb-3",children:"You don't have any mini leagues yet."}),i.jsx(IA,{to:"/leagues",className:"inline-block px-4 py-2 bg-[#1C8376] text-white font-semibold rounded-lg hover:bg-[#1C8376]/80 transition-colors no-underline",children:"Create one now!"})]}):i.jsxs("div",{className:"overflow-x-auto -mx-4 px-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch",overscrollBehaviorX:"contain",overscrollBehaviorY:"auto",touchAction:"pan-x pan-y pinch-zoom"},children:[i.jsx("style",{children:`
                .scrollbar-hide::-webkit-scrollbar {
                  display: none;
                }
              `}),i.jsx("div",{className:"flex gap-2",style:{width:"max-content",minWidth:"100%"},children:(()=>{const xe=[...A].sort((Be,Se)=>{const Me=Te?.[Be.id]??0,Pe=Te?.[Se.id]??0;return Me>0&&Pe===0?-1:Me===0&&Pe>0?1:Be.name.localeCompare(Se.name)});return Array.from({length:Math.ceil(xe.length/3)}).map((Be,Se)=>{const Me=Se*3,Pe=xe.slice(Me,Me+3);return i.jsx("div",{className:"flex flex-col rounded-xl border bg-white overflow-hidden shadow-sm w-[320px]",children:Pe.map((ke,oe)=>{const Xe=ke.id,dt=Te?.[ke.id]??0,Qe=dt>0?Math.min(dt,99):0;return i.jsxs("div",{className:oe<Pe.length-1?"relative":"",children:[oe<Pe.length-1&&i.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-px bg-slate-200 z-10 pointer-events-none"}),i.jsxs(IA,{to:`/league/${ke.code}`,className:"block p-4 !bg-white no-underline hover:text-inherit relative z-20",style:{cursor:"pointer",position:"relative",WebkitTapHighlightColor:"transparent"},children:[i.jsxs("div",{className:"flex items-start gap-3 relative",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center overflow-hidden bg-slate-100",children:i.jsx("img",{src:Jp(ke.id,96),alt:`${ke.name} avatar`,className:"w-full h-full object-cover",onError:Ge=>{const Je=Ge.target,$e=Yp(ke.id,96);if(Je.src!==$e)Je.src=$e;else{Je.style.display="none";const Ne=Je.parentElement;Ne&&!Ne.querySelector("svg")&&(Ne.innerHTML=`
                                            <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                            </svg>
                                          `)}}})}),i.jsxs("div",{className:"flex-1 min-w-0 h-12 flex flex-col justify-between",children:[i.jsx("div",{className:"text-base font-semibold text-slate-900 truncate -mt-0.5",children:ke.name}),i.jsxs("div",{className:"flex items-center overflow-x-hidden mt-1 py-0.5",children:[(()=>{if(O)return null;const Ge=Ze[ke.id];if(!Ge)return null;const Je=Ge.members||[];if(Je.length===0)return null;const $e=Ge?.sortedMemberIds;if(!$e||$e.length===0){const Oe=[...Je].sort((U,re)=>U.name.localeCompare(re.name)),me=Ge?.submittedMembers instanceof Set?Ge.submittedMembers:new Set(Ge?.submittedMembers??[]),X=Ge?.latestGwWinners instanceof Set?Ge.latestGwWinners:new Set(Ge?.latestGwWinners??[]);return Oe.slice(0,8).map((U,re)=>{const pe=me.has(U.id),ye=X.has(U.id);let _e="chip-container rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 w-6 h-6";return ye?_e+=" bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 font-semibold relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":pe?_e+=" chip-green":_e+=" chip-grey",re>0&&(_e+=" chip-overlap"),i.jsx("div",{className:_e,title:U.name,children:os(U.name)},U.id)})}const Ne=$e.map(Oe=>Je.find(me=>me.id===Oe)).filter(Oe=>Oe!==void 0),nt=Ge?.submittedMembers instanceof Set?Ge.submittedMembers:new Set(Ge?.submittedMembers??[]),yt=Ge?.latestGwWinners instanceof Set?Ge.latestGwWinners:new Set(Ge?.latestGwWinners??[]);return Ne.slice(0,8).map((Oe,me)=>{const X=nt.has(Oe.id),U=yt.has(Oe.id);let re="chip-container rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 w-6 h-6";return U?re+=" bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 font-semibold relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":X?re+=" chip-green":re+=" chip-grey",me>0&&(re+=" chip-overlap"),i.jsx("div",{className:re,title:Oe.name,children:os(Oe.name)},Oe.id)})})(),(()=>{const Ge=Ze[ke.id];if(!Ge)return null;const $e=(Ge?.sortedMemberIds||Ge?.members?.map(Ne=>Ne.id)||[]).length;return $e>8&&i.jsxs("div",{className:`chip-container chip-grey rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 ${$e>1?"chip-overlap":""}`,style:{width:"24px",height:"24px"},children:["+",$e-8]})})()]})]})]}),i.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1.5 z-30 pointer-events-none",children:[Qe>0&&i.jsx("span",{className:"inline-flex items-center justify-center h-6 w-6 rounded-full bg-[#1C8376] text-white text-xs font-bold pointer-events-none",children:Qe}),i.jsx("svg",{className:"w-5 h-5 text-slate-400 flex-shrink-0 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},Xe)})},Se)})})()})]},`ml-scroll-${Xt.current}-${A.length}`)]})]}),i.jsxs("section",{className:"mt-[45px]",children:[i.jsxs("div",{className:"relative flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-base font-medium text-slate-500 uppercase tracking-wide",children:"Games"}),i.jsx("div",{className:"w-4 h-4 rounded-full border border-slate-400 flex items-center justify-center",children:i.jsx("span",{className:"text-[10px] text-slate-500 font-bold",children:"i"})})]}),(rt?c.slice(0,3):c).some(Se=>{const Me=le[Se.fixture_index];return Me&&(Me.status==="IN_PLAY"||Me.status==="PAUSED")})?i.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2",children:[i.jsx("span",{className:`text-[10px] font-medium transition-colors ${Qt?"text-slate-400":"text-slate-700"}`,children:"ALL"}),i.jsx("button",{onClick:()=>Kt(!Qt),className:"relative inline-flex items-center rounded-full transition-colors focus:outline-none",style:{backgroundColor:Qt?"#dc2626":"#cbd5e1",width:"48px",height:"24px",border:"none"},children:i.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-sm transform transition-transform duration-200 ease-in-out ${Qt?"translate-x-6":"translate-x-0.5"}`})}),i.jsx("span",{className:`text-[10px] font-medium transition-colors ${Qt?"text-slate-700":"text-slate-400"}`,children:"LIVE"})]}):null,i.jsx("div",{className:"flex items-center gap-2",children:(()=>{let xe=0,Be=0,Se=0,Me=0,Pe=[];rt&&c.length>0&&(Pe=c.slice(0,3),Pe.forEach(oe=>{const Xe=le[oe.fixture_index],dt=Xe&&(Xe.status==="IN_PLAY"||Xe.status==="PAUSED"),Qe=Xe&&Xe.status==="FINISHED";if(Xe&&(dt||Qe)){dt&&Be++,Qe&&Me++;const Ge=C[oe.fixture_index];if(Ge){let Je=!1;(Ge==="H"&&Xe.homeScore>Xe.awayScore||Ge==="A"&&Xe.awayScore>Xe.homeScore||Ge==="D"&&Xe.homeScore===Xe.awayScore)&&(Je=!0),Je&&(xe++,Qe&&Se++)}}}));const ke=Pe.length>0&&Pe.every(oe=>{const Xe=le[oe.fixture_index];return Xe&&Xe.status==="FINISHED"});return rt&&Pe.length>0&&Pe.some(oe=>{const Xe=le[oe.fixture_index];return Xe&&(Xe.status==="IN_PLAY"||Xe.status==="PAUSED"||Xe.status==="FINISHED")})?Be===0&&Me>0&&!ke?i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-white shadow-lg bg-slate-600 shadow-slate-500/30",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"Score"}),i.jsxs("span",{className:"flex items-baseline gap-0.5",children:[i.jsx("span",{className:"text-lg sm:text-xl font-extrabold",children:Se}),i.jsx("span",{className:"text-sm sm:text-base font-medium opacity-90",children:"/"}),i.jsx("span",{className:"text-base sm:text-lg font-semibold opacity-80",children:Me})]})]}):i.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-white shadow-lg ${ke?"bg-slate-600 shadow-slate-500/30":"bg-red-600 shadow-red-500/30"}`,children:[!ke&&Be>0&&i.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),ke&&i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),i.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:ke?"Score":"Live"}),i.jsxs("span",{className:"flex items-baseline gap-0.5",children:[i.jsx("span",{className:"text-lg sm:text-xl font-extrabold",children:xe}),i.jsx("span",{className:"text-sm sm:text-base font-medium opacity-90",children:"/"}),i.jsx("span",{className:"text-base sm:text-lg font-semibold opacity-80",children:Pe.length})]})]}):v!==null&&Object.keys(E).length>0&&Object.keys(E).length===c.length?i.jsxs("button",{onClick:mA,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-emerald-600 text-white shadow-lg shadow-emerald-500/30 hover:bg-emerald-700 transition-all cursor-pointer",title:"Share your predictions",children:[i.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:"Score"}),i.jsxs("span",{className:"flex items-baseline gap-0.5",children:[i.jsx("span",{className:"text-lg sm:text-xl font-extrabold",children:v}),i.jsx("span",{className:"text-sm sm:text-base font-medium opacity-90",children:"/"}),i.jsx("span",{className:"text-base sm:text-lg font-semibold opacity-80",children:c.length})]}),i.jsx("svg",{className:"w-4 h-4 ml-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})]}):c.length>0&&!g&&v===null?i.jsx(IA,{to:"/new-predictions",className:"inline-block px-3 py-1 bg-blue-600 text-white text-sm font-semibold rounded-md hover:bg-blue-700 transition-colors no-underline",children:"Make your predictions"}):null})()})]}),ae?i.jsx("div",{className:"mb-2",children:i.jsxs("span",{className:"text-slate-600 font-semibold",children:["GW",ae," coming soon"]})}):null,k?i.jsx("div",{className:"p-4 text-slate-500",children:"Loading fixtures..."}):c.length===0?i.jsx("div",{className:"p-4 text-slate-500",children:"No fixtures yet."}):i.jsx("div",{className:"mt-6",children:(()=>{let xe=rt?c.slice(0,3):c;Qt&&(xe=xe.filter(Pe=>{const ke=le[Pe.fixture_index];return ke&&(ke.status==="IN_PLAY"||ke.status==="PAUSED")}));const Be=[],Se=new Map;return xe.forEach(Pe=>{const ke=Pe.kickoff_time?new Date(Pe.kickoff_time):null,oe=ke?ke.toISOString().slice(0,10):"unknown";Se.has(oe)||Se.set(oe,[]),Se.get(oe).push(Pe)}),[...Se.keys()].sort((Pe,ke)=>Pe==="unknown"?1:ke==="unknown"?-1:Pe.localeCompare(ke)).forEach(Pe=>{const ke=Se.get(Pe),oe=ke[0]?.kickoff_time?new Date(ke[0].kickoff_time):null,Xe=oe?oe.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}):"TBC";Be.push({label:Xe,items:ke})}),Be.map((Pe,ke)=>i.jsxs("div",{className:ke>0?"mt-6":"",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-3 px-1",children:Pe.label}),i.jsx("div",{className:"flex flex-col rounded-xl border bg-white overflow-hidden shadow-sm",children:Pe.items.map((oe,Xe)=>{const dt=C[oe.fixture_index];console.log("[Home] Rendering fixture:",{fixture_index:oe.fixture_index,pick:dt,home:oe.home_name,away:oe.away_name});const Qe=oe.home_name||oe.home_team||oe.home_code||"",Ge=oe.away_name||oe.away_team||oe.away_code||"",Je=Dn(Qe),$e=Dn(Ge),Ne=oe.kickoff_time?(()=>{const de=new Date(oe.kickoff_time),ne=String(de.getUTCHours()).padStart(2,"0"),we=String(de.getUTCMinutes()).padStart(2,"0");return`${ne}:${we}`})():"",nt=le[oe.fixture_index],yt=nt&&nt.status==="IN_PLAY",Oe=nt&&(nt.status==="PAUSED"||nt.status==="HALF_TIME"||nt.status==="HT"),me=nt&&nt.status==="FINISHED",X=yt||Oe,U=de=>{const ne=dt===de;let we=!1;return nt&&(de==="H"&&nt.homeScore>nt.awayScore||de==="A"&&nt.awayScore>nt.homeScore||de==="D"&&nt.homeScore===nt.awayScore)&&(we=!0),{isPicked:ne,isCorrectResult:we,isCorrect:ne&&we,isWrong:ne&&(X||me)&&!we}},re=U("H"),pe=U("D"),ye=U("A"),_e=de=>{const ne="h-16 rounded-xl border text-sm font-medium transition-all flex items-center justify-center select-none",we=yt&&de.isCorrectResult;return de.isCorrect&&me?`${ne} bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white !border-0 !border-none shadow-2xl shadow-yellow-400/40 transform scale-110 rotate-1 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]`:de.isCorrect&&yt?`${ne} bg-emerald-600 text-white border-emerald-600 animate-pulse shadow-lg shadow-emerald-500/50`:de.isCorrectResult?`${ne} bg-emerald-600 text-white border-emerald-600 ${we?"animate-pulse shadow-lg shadow-emerald-500/50":""}`:de.isWrong&&me?`${ne} bg-slate-50 text-slate-600 border-4 animate-[flash-border_1s_ease-in-out_infinite]`:de.isWrong&&(yt||Oe)?`${ne} bg-slate-50 text-slate-600 border-4 animate-[flash-border_1s_ease-in-out_infinite]`:de.isPicked?`${ne} bg-[#1C8376] text-white border-[#1C8376]`:`${ne} bg-slate-50 text-slate-600 border-slate-200`};return i.jsxs("div",{className:Xe<xe.length-1?"relative":"",children:[Xe<xe.length-1&&i.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-px bg-slate-200 z-10"}),i.jsxs("div",{className:"p-4 !bg-white relative z-0",children:[(yt||Oe)&&i.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-bold text-red-600",children:"LIVE"})]}),me&&!yt&&!Oe&&i.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"FT"})}),i.jsxs("div",{className:`flex flex-col px-2 pb-3 ${X?"pt-4":"pt-1"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-end",children:[i.jsx("div",{className:"font-medium break-words",children:Je}),i.jsx("img",{src:`/assets/badges/${(oe.home_code||Qe).toUpperCase()}.png`,alt:Je,className:"w-5 h-5",onError:de=>{de.currentTarget.style.opacity="0.35"}})]}),i.jsx("div",{className:"px-4 flex items-center",children:nt&&(X||me)?i.jsxs("span",{className:"font-bold text-base text-slate-900",children:[nt.homeScore," - ",nt.awayScore]}):i.jsx("span",{className:"text-slate-500 text-sm",children:Ne})}),i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-start",children:[i.jsx("img",{src:`/assets/badges/${(oe.away_code||Ge).toUpperCase()}.png`,alt:$e,className:"w-5 h-5",onError:de=>{de.currentTarget.style.opacity="0.35"}}),i.jsx("div",{className:"font-medium break-words",children:$e})]})]}),nt&&(X||me)&&i.jsx("div",{className:"flex justify-center mt-1",children:i.jsx("span",{className:`text-[10px] font-semibold ${X?"text-red-600":"text-slate-500"}`,children:uF(nt.status,nt.minute)})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 relative",children:[i.jsx("div",{className:`${_e(re)} flex items-center justify-center`,children:i.jsx("span",{className:`${re.isCorrect?"font-bold":""} ${re.isWrong&&me?"line-through decoration-2 decoration-red-200":""}`,children:"Home Win"})}),i.jsx("div",{className:`${_e(pe)} flex items-center justify-center`,children:i.jsx("span",{className:`${pe.isCorrect?"font-bold":""} ${pe.isWrong&&me?"line-through decoration-2 decoration-red-200":""}`,children:"Draw"})}),i.jsx("div",{className:`${_e(ye)} flex items-center justify-center`,children:i.jsx("span",{className:`${ye.isCorrect?"font-bold":""} ${ye.isWrong&&me?"line-through decoration-2 decoration-red-200":""}`,children:"Away Win"})})]}),rt&&mt.current[oe.fixture_index]&&mt.current[oe.fixture_index].length>0&&i.jsxs("div",{className:"mt-3 border-t border-slate-200 pt-3",children:[i.jsxs("button",{onClick:()=>Ye(de=>({...de,[oe.fixture_index]:!de[oe.fixture_index]})),className:"w-full flex items-center justify-between text-xs text-slate-500 hover:text-slate-700 py-1",children:[i.jsx("span",{children:" API Pull History"}),i.jsx("svg",{className:`w-4 h-4 transition-transform ${pt[oe.fixture_index]?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),pt[oe.fixture_index]&&i.jsx("div",{className:"mt-2 space-y-1 max-h-60 overflow-y-auto",children:mt.current[oe.fixture_index].slice().reverse().map((de,ne)=>i.jsx("div",{className:"text-[10px] font-mono bg-slate-50 p-2 rounded border border-slate-200",children:i.jsx("div",{className:"flex justify-between items-start gap-2",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-slate-600 font-semibold",children:de.timestamp.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["Status: ",i.jsx("span",{className:"font-semibold",children:de.status})]}),i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["Score: ",i.jsxs("span",{className:"font-semibold",children:[de.homeScore," - ",de.awayScore]})]}),i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["Calculated Min: ",i.jsx("span",{className:"font-semibold",children:de.minute!==null?`${de.minute}'`:"null"})]}),de.apiMinute!==null&&de.apiMinute!==void 0&&i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["API Min: ",i.jsxs("span",{className:"font-semibold",children:[de.apiMinute,"'"]})]}),de.diffMinutes!==null&&i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["Time since KO: ",i.jsxs("span",{className:"font-semibold",children:[de.diffMinutes," min"]})]}),de.halftimeEndTime&&i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["HT End: ",i.jsx("span",{className:"font-semibold",children:new Date(de.halftimeEndTime).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),de.halftimeEndMinute!==null&&i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["HT End Min: ",i.jsxs("span",{className:"font-semibold",children:[de.halftimeEndMinute,"'"]})]}),de.minutesSinceHalftimeEnd!==null&&i.jsxs("div",{className:"text-slate-500 mt-0.5",children:["Min since HT: ",i.jsxs("span",{className:"font-semibold",children:[de.minutesSinceHalftimeEnd," min"]})]}),de.kickoffTime&&i.jsxs("div",{className:"text-slate-400 mt-0.5 text-[9px]",children:["KO: ",new Date(de.kickoffTime).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})})},ne))})]})]})]},oe.id)})})]},ke))})()})]})]})]})}function fF(){const{user:r}=or(),[e,A]=TB(),n=x.useRef(null),a=x.useRef(null),o=e.get("tab"),c=o==="form5"||o==="form10"||o==="lastgw"||o==="overall"?o:"lastgw",[d,f]=x.useState(!0),[m,g]=x.useState(""),[w,v]=x.useState(null),[y,C]=x.useState([]),[b,E]=x.useState([]),[S,k]=x.useState({}),[N,O]=x.useState(c);x.useEffect(()=>{o||A({tab:"lastgw"},{replace:!0}),c!==N&&O(c)},[c,o,N,A]);const j=P=>{O(P),A({tab:P})};x.useEffect(()=>{let P=!0;return(async()=>{try{f(!0),g("");const{data:ue,error:Y}=await z.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle();if(Y)throw Y;const D=ue?.gw??1;P&&v(D);const{data:_,error:I}=await z.from("v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0});if(I)throw I;const{data:$,error:Q}=await z.from("v_ocp_overall").select("user_id, name, ocp");if(Q)throw Q;if(!P)return;if(E(_??[]),C($??[]),D&&D>1){const K=_?.filter(te=>te.gw<D)??[],Z={};K.forEach(te=>{Z[te.user_id]=(Z[te.user_id]??0)+(te.points??0)}),P&&k(Z)}else P&&k({})}catch(ue){P&&g(ue?.message??"Failed to load leaderboard.")}finally{P&&f(!1)}})(),()=>{P=!1}},[]);function L(P){const ue=Object.keys(P);ue.sort((D,_)=>(P[_]??0)-(P[D]??0)||D.localeCompare(_));const Y={};return ue.forEach((D,_)=>Y[D]=_+1),Y}const R=x.useMemo(()=>{const P={};return y.forEach(ue=>{P[ue.user_id]=ue.ocp??0}),b.forEach(ue=>{ue.user_id in P||(P[ue.user_id]=ue.points??0)}),L(P)},[y,b]),G=x.useMemo(()=>L(S),[S]),H=x.useMemo(()=>P=>{if(!w||w<P)return[];const ue=w-P+1,Y=b.filter(I=>I.gw>=ue&&I.gw<=w),D=new Map;return y.forEach(I=>{D.set(I.user_id,{user_id:I.user_id,name:I.name??"User",formPoints:0,weeksPlayed:new Set})}),Y.forEach(I=>{const $=D.get(I.user_id);$?($.formPoints+=I.points,$.weeksPlayed.add(I.gw)):D.set(I.user_id,{user_id:I.user_id,name:"User",formPoints:I.points,weeksPlayed:new Set([I.gw])})}),Array.from(D.values()).filter(I=>{for(let $=ue;$<=w;$++)if(!I.weeksPlayed.has($))return!1;return!0}).map(I=>({user_id:I.user_id,name:I.name,formPoints:I.formPoints,gamesPlayed:P})).sort((I,$)=>$.formPoints-I.formPoints||I.name.localeCompare($.name))},[y,b,w]),ve=x.useMemo(()=>H(5),[H]),W=x.useMemo(()=>H(10),[H]),ae=x.useMemo(()=>{if(!w)return[];const P=b.filter(_=>_.gw===w),ue=new Map(y.map(_=>[_.user_id,_.name??"User"])),Y=P.map(_=>({user_id:_.user_id,name:ue.get(_.user_id)??"User",points:_.points})).sort((_,I)=>I.points-_.points||_.name.localeCompare(I.name));let D=1;return Y.map((_,I)=>(I>0&&Y[I-1].points!==_.points&&(D=I+1),{..._,rank:D}))},[b,w,y]),fe=x.useMemo(()=>{const P=b.filter(D=>D.gw===w),ue=new Map;P.forEach(D=>ue.set(D.user_id,D.points));const Y=y.map(D=>({user_id:D.user_id,name:D.name??"User",this_gw:ue.get(D.user_id)??0,ocp:D.ocp??0}));return P.forEach(D=>{Y.find(_=>_.user_id===D.user_id)||Y.push({user_id:D.user_id,name:"User",this_gw:D.points,ocp:D.points})}),Y.sort((D,_)=>_.ocp-D.ocp||D.name.localeCompare(_.name)),Y},[y,b,w]);return x.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),x.useEffect(()=>{n.current&&(n.current.scrollTop=0)},[N]),x.useEffect(()=>{const P=n.current;if(!P)return;const ue=()=>{P.scrollTop<0&&(P.scrollTop=0),requestAnimationFrame(()=>{P.scrollTop<0&&(P.scrollTop=0)})};P.addEventListener("scroll",ue,{passive:!1}),P.addEventListener("touchmove",ue,{passive:!1});const Y=_=>{P.scrollTop<=0&&_.deltaY<0&&(_.preventDefault(),_.stopPropagation(),P.scrollTop=0)};P.addEventListener("wheel",Y,{passive:!1});const D=_=>{if(P.scrollTop<=0){const I=_.touches[0];if(I){const $=I.clientY,Q=K=>{const Z=K.touches[0];Z&&Z.clientY<$&&K.preventDefault()};P.addEventListener("touchmove",Q,{passive:!1}),P.addEventListener("touchend",()=>{P.removeEventListener("touchmove",Q)},{once:!0})}}};return P.addEventListener("touchstart",D,{passive:!1}),()=>{P.removeEventListener("scroll",ue),P.removeEventListener("touchmove",ue),P.removeEventListener("wheel",Y),P.removeEventListener("touchstart",D)}},[]),x.useEffect(()=>{if(!d&&r?.id&&n.current&&a.current){const P=N==="overall"?fe:N==="form5"?ve:N==="form10"?W:ae,ue=P.findIndex(_=>_.user_id===r.id),Y=ue>=0?P[ue].rank||ue+1:null;if(Y!==null&&Y<=8)return;n.current&&(n.current.scrollTop=0);const D=setTimeout(()=>{const _=n.current,I=a.current;_&&I&&setTimeout(()=>{if(_&&I){const $=I.offsetTop,Q=_.clientHeight,K=I.offsetHeight,Z=$-Q/2+K/2;_.style.scrollBehavior="smooth",_.scrollTop=Z,setTimeout(()=>{_&&(_.style.scrollBehavior="auto")},1e3)}},500)},150);return()=>clearTimeout(D)}},[d,r?.id,N,fe,ve,W,ae]),i.jsxs("div",{className:"fixed inset-0 bg-slate-50 overflow-hidden flex flex-col",children:[i.jsx("style",{children:`
        @keyframes sparkle {
          0%, 100% {
            opacity: 1;
            transform: scale(1) rotate(0deg);
          }
          25% {
            opacity: 0.8;
            transform: scale(1.1) rotate(-5deg);
          }
          50% {
            opacity: 1;
            transform: scale(1.15) rotate(5deg);
          }
          75% {
            opacity: 0.9;
            transform: scale(1.05) rotate(-3deg);
          }
        }
        .sparkle-trophy {
          animation: sparkle 2s ease-in-out infinite;
          filter: drop-shadow(0 0 4px rgba(251, 191, 36, 0.6));
        }
        .sparkle-trophy svg {
          filter: drop-shadow(0 0 2px rgba(251, 191, 36, 0.8));
        }
        @keyframes flash {
          0%, 100% {
            background-color: rgb(209, 250, 229);
          }
          25% {
            background-color: rgb(167, 243, 208);
          }
          50% {
            background-color: rgb(209, 250, 229);
          }
          75% {
            background-color: rgb(167, 243, 208);
          }
        }
        .flash-you-badge {
          animation: flash 1.5s ease-in-out 3;
        }
        .full-width-header-border::after {
          content: '';
          position: absolute;
          left: -1rem;
          right: -1rem;
          bottom: 0;
          height: 1px;
          background-color: #cbd5e1;
          z-index: 1;
        }
      `}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 pb-0 flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex-shrink-0 bg-slate-50 py-4",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight text-slate-900",children:"Leaderboard"}),i.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600 w-full",children:"See how you rank against every TotL player in the world."}),i.jsx("div",{className:"flex justify-center mb-6",children:i.jsxs("div",{className:"flex rounded-full bg-slate-100 p-1.5 border border-slate-200 shadow-sm w-full max-w-md",children:[i.jsx("button",{onClick:()=>j("lastgw"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all ${N==="lastgw"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"GW"}),i.jsx("button",{onClick:()=>j("form5"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all ${N==="form5"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"5"}),i.jsx("button",{onClick:()=>j("form10"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all ${N==="form10"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"10"}),i.jsx("button",{onClick:()=>j("overall"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all flex items-center justify-center ${N==="overall"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-5 h-5",children:i.jsx("g",{children:i.jsx("path",{fill:"currentColor",d:"M16 3c1.1046 0 2 0.89543 2 2h2c1.1046 0 2 0.89543 2 2v1c0 2.695 -2.1323 4.89 -4.8018 4.9941 -0.8777 1.5207 -2.4019 2.6195 -4.1982 2.9209V19h3c0.5523 0 1 0.4477 1 1s-0.4477 1 -1 1H8c-0.55228 0 -1 -0.4477 -1 -1s0.44772 -1 1 -1h3v-3.085c-1.7965 -0.3015 -3.32148 -1.4 -4.19922 -2.9209C4.13175 12.8895 2 10.6947 2 8V7c0 -1.10457 0.89543 -2 2 -2h2c0 -1.10457 0.89543 -2 2 -2zm-8 7c0 2.2091 1.79086 4 4 4 2.2091 0 4 -1.7909 4 -4V5H8zM4 8c0 1.32848 0.86419 2.4532 2.06055 2.8477C6.02137 10.5707 6 10.2878 6 10V7H4zm14 2c0 0.2878 -0.0223 0.5706 -0.0615 0.8477C19.1353 10.4535 20 9.32881 20 8V7h-2z",strokeWidth:"1"})})})})]})}),N==="overall"&&i.jsx("div",{className:"text-center mb-2",children:i.jsx("div",{className:"text-sm text-slate-600",children:"All players overall"})}),N==="form5"&&i.jsx("div",{className:"text-center mb-2",children:w&&w>=5?i.jsx("div",{className:"text-sm text-slate-600",children:"Completed the last 5 Rounds"}):i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Watch this space! Complete 5 GW in a row to see the 5 Week Form Leaderboard."})}),N==="form10"&&i.jsx("div",{className:"text-center mb-2",children:w&&w>=10?i.jsx("div",{className:"text-sm text-slate-600",children:"Completed the last 10 Rounds"}):i.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Watch this space! Complete 10 GW in a row to see the 10 Week Form Leaderboard."})}),N==="lastgw"&&i.jsx("div",{className:"text-center mb-2",children:i.jsxs("div",{className:"text-sm text-slate-600",children:["Players who completed GW",w]})})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[m&&i.jsx("div",{className:"mb-6 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700 flex-shrink-0",children:m}),d?i.jsx("div",{className:"text-slate-500",children:"Loading"}):N==="form5"&&w&&w<5?i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[i.jsx("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:"5 Week Form Leaderboard Coming Soon"}),i.jsx("div",{className:"text-slate-600",children:"Complete 5 game weeks in a row to unlock the 5 Week Form Leaderboard and see who's in the best form!"})]}):N==="form10"&&w&&w<10?i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[i.jsx("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:"10 Week Form Leaderboard Coming Soon"}),i.jsx("div",{className:"text-slate-600",children:"Complete 10 game weeks in a row to unlock the 10 Week Form Leaderboard and see who's in the best form!"})]}):(N==="overall"?fe:N==="form5"?ve:N==="form10"?W:ae).length===0?i.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 text-slate-600",children:"No leaderboard data yet."}):i.jsx("div",{ref:n,className:"flex-1 overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x border-b border-slate-200 bg-slate-50 shadow-sm",style:{overscrollBehavior:"contain",WebkitOverflowScrolling:"touch",minHeight:0,paddingBottom:"100px",paddingLeft:"1rem",paddingRight:"1rem",backgroundColor:"#f8fafc",touchAction:"pan-y"},children:i.jsxs("table",{className:"w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc"},children:[i.jsx("thead",{className:"sticky top-0 full-width-header-border",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:i.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"1px solid #cbd5e1"},children:[i.jsx("th",{className:"py-3 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"45px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:"#"}),i.jsx("th",{className:"px-4 py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#64748b"},children:"Player"}),N==="overall"&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"px-4 py-3 text-center font-semibold",style:{backgroundColor:"#f8fafc",width:"40px",borderTop:"none",paddingLeft:"0.5rem",paddingRight:"0.5rem"}}),i.jsxs("th",{className:"px-1 py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"55px",color:"#64748b",paddingLeft:"0.5rem",paddingRight:"0.5rem"},children:["GW",w||"?"]}),i.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:"OCP"})]}),(N==="form5"||N==="form10")&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"px-4 py-3 text-center font-semibold",style:{backgroundColor:"#f8fafc",width:"40px",borderTop:"none",paddingLeft:"0.5rem",paddingRight:"0.5rem"}}),i.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:"PTS"})]}),N==="lastgw"&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"px-4 py-3 text-center font-semibold",style:{backgroundColor:"#f8fafc",width:"40px",borderTop:"none",paddingLeft:"0.5rem",paddingRight:"0.5rem"}}),i.jsxs("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:["GW",w||"?"]})]})]})}),i.jsx("tbody",{children:(N==="overall"?fe:N==="form5"?ve:N==="form10"?W:ae).map((P,ue,Y)=>{const D=P.user_id===r?.id,_="rank"in P?P.rank:ue+1,$=Y.filter((te,se)=>("rank"in te?te.rank:se+1)===_).length>1,Q=_===1;let K="",Z="bg-gray-300";if(N==="overall"){const te=G[P.user_id],se=R[P.user_id];se&&te?se<te?(K="",Z="bg-green-500 text-white"):se>te?(K="",Z="bg-red-500 text-white"):(K="",Z="bg-gray-500 text-white"):se&&!te&&(K="",Z="bg-gray-400")}return i.jsxs("tr",{ref:D?a:null,className:"",style:{...ue>0?{borderTop:"1px solid #e2e8f0",position:"relative",backgroundColor:"#f8fafc"}:{position:"relative",backgroundColor:"#f8fafc"}},children:[i.jsx("td",{className:"py-3 text-left tabular-nums whitespace-nowrap relative",style:{width:"45px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:i.jsxs("span",{children:[_,$?"=":""]})}),i.jsx("td",{className:"px-4 py-3",style:{backgroundColor:"#f8fafc"},children:i.jsxs("div",{className:"flex items-center gap-2",children:[(K||Z)&&N==="overall"&&i.jsx("span",{className:`inline-flex items-center justify-center w-4 h-4 rounded-full text-xs font-bold ${Z} align-middle flex-shrink-0`,"aria-hidden":!0,children:K}),Q&&i.jsx("span",{className:"inline-flex items-center sparkle-trophy flex-shrink-0",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-4 h-4 text-yellow-500",children:i.jsx("g",{children:i.jsx("path",{fill:"currentColor",d:"M16 3c1.1046 0 2 0.89543 2 2h2c1.1046 0 2 0.89543 2 2v1c0 2.695 -2.1323 4.89 -4.8018 4.9941 -0.8777 1.5207 -2.4019 2.6195 -4.1982 2.9209V19h3c0.5523 0 1 0.4477 1 1s-0.4477 1 -1 1H8c-0.55228 0 -1 -0.4477 -1 -1s0.44772 -1 1 -1h3v-3.085c-1.7965 -0.3015 -3.32148 -1.4 -4.19922 -2.9209C4.13175 12.8895 2 10.6947 2 8V7c0 -1.10457 0.89543 -2 2 -2h2c0 -1.10457 0.89543 -2 2 -2zm-8 7c0 2.2091 1.79086 4 4 4 2.2091 0 4 -1.7909 4 -4V5H8zM4 8c0 1.32848 0.86419 2.4532 2.06055 2.8477C6.02137 10.5707 6 10.2878 6 10V7H4zm14 2c0 0.2878 -0.0223 0.5706 -0.0615 0.8477C19.1353 10.4535 20 9.32881 20 8V7h-2z",strokeWidth:"1"})})})}),i.jsx("span",{className:"font-normal text-sm truncate min-w-0 whitespace-nowrap",style:{color:"rgb(0, 0, 0)",overflow:"hidden",textOverflow:"ellipsis"},children:P.name}),D&&i.jsx("span",{className:"ml-2 rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-800 flex-shrink-0 flash-you-badge",children:"you"})]})}),N==="overall"&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"}}),i.jsx("td",{className:"px-1 py-3 text-center tabular-nums font-bold",style:{width:"55px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"this_gw"in P?P.this_gw:0}),i.jsx("td",{className:"py-3 text-center tabular-nums font-bold",style:{width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"ocp"in P?P.ocp:0})]}),(N==="form5"||N==="form10")&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"}}),i.jsx("td",{className:"py-3 text-center tabular-nums font-bold",style:{width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"formPoints"in P?P.formPoints:0})]}),N==="lastgw"&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"px-4 py-3 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"}}),i.jsx("td",{className:"py-3 text-center tabular-nums font-bold",style:{width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"points"in P?P.points:0})]})]},P.user_id)})})]})})]})]})]})}function hF(){return i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-10",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Create a mini league"}),i.jsx("p",{className:"mt-2 text-slate-600",children:"Quick form to create/invite coming next."})]})}function mF(){const[r,e]=x.useState({predictions:!0,leaderboard:!1,form:!1,"mini-leagues":!1,unicorns:!1,summary:!1}),A=a=>{e(o=>({...o,[a]:!o[a]}))},n=({id:a,title:o,icon:c,children:d})=>{const f=r[a];return i.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white shadow-sm",children:[i.jsx("button",{onClick:()=>A(a),className:"w-full px-6 py-4 text-left bg-gradient-to-r from-slate-50 to-slate-100 hover:from-slate-100 hover:to-slate-200 transition-colors border-b border-slate-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:c}),i.jsx("h2",{className:"text-lg font-bold text-slate-800",children:o})]}),i.jsx("svg",{className:`w-5 h-5 text-slate-600 transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),f&&i.jsx("div",{className:"px-6 py-4 text-slate-700",children:d})]})};return i.jsx("div",{className:"min-h-screen bg-slate-50",children:i.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-4 pb-16",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight text-slate-900",children:"How To Play"}),i.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600 w-full",children:"Welcome to TOTL (Top of the League)  the game of quick Predictions and friendly rivalries. Here's how it all works."}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(n,{id:"predictions",title:"Predictions Centre",icon:"",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-base leading-relaxed",children:["Before each Premier League Gameweek, head to the ",i.jsx("strong",{children:"Predictions Centre"})," and make your picks for every match  ",i.jsx("strong",{children:"Home Win"}),", ",i.jsx("strong",{children:"Draw"}),", or ",i.jsx("strong",{children:"Away Win"}),"."]}),i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-amber-800 mb-2",children:" Important"}),i.jsx("p",{className:"text-amber-700",children:"Once the first match kicks off, predictions are locked, so make sure you get them in before the deadline."})]}),i.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:" Scoring"}),i.jsxs("p",{className:"text-emerald-700",children:["Each correct Prediction adds ",i.jsx("strong",{children:"1"})," to your ",i.jsx("strong",{children:"Overall Correct Predictions (OCP)"}),"  that's your running total for the season."]})]})]})}),i.jsx(n,{id:"mini-leagues",title:"Mini-Leagues",icon:"",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-base leading-relaxed",children:["Want to play with your friends? Create a ",i.jsx("strong",{children:"Mini-League"})," and invite up to ",i.jsx("strong",{children:"8 players"})," to join. Share your league code, get everyone predicting, and battle it out week by week."]}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:"How it works:"}),i.jsxs("p",{className:"text-slate-700",children:["Each Gameweek, whoever gets the ",i.jsx("strong",{children:"most correct Predictions"})," wins that week."]})]}),i.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-emerald-800 mb-3",children:"League Points:"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-emerald-600 font-bold",children:""}),i.jsxs("span",{className:"text-emerald-700",children:[i.jsx("strong",{children:"Win the week"}),"  3 points"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-emerald-600 font-bold",children:""}),i.jsxs("span",{className:"text-emerald-700",children:[i.jsx("strong",{children:"Draw"}),"  1 point"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-emerald-600 font-bold",children:""}),i.jsxs("span",{className:"text-emerald-700",children:[i.jsx("strong",{children:"Lose"}),"  0 points"]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" Ties"}),i.jsxs("p",{className:"text-blue-700",children:["If two or more players finish with the same number of correct Predictions, the player with the most ",i.jsx("strong",{children:"Unicorns"})," wins the week. Still tied? It's a draw."]})]})]})}),i.jsx(n,{id:"unicorns",title:"Unicorns",icon:"",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-base leading-relaxed",children:["In Mini-Leagues with ",i.jsx("strong",{children:"3 or more players"}),", if you're the ",i.jsx("strong",{children:"only person"})," to correctly predict a fixture, that's a ",i.jsx("strong",{children:"Unicorn"}),"."]}),i.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:" Strategy Tip"}),i.jsx("p",{className:"text-purple-700",children:"They can make all the difference in tight weeks  so sometimes it's worth backing the surprise result nobody else will."})]})]})}),i.jsx(n,{id:"leaderboard",title:"Leaderboard",icon:"",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-base leading-relaxed",children:["The ",i.jsx("strong",{children:"Leaderboard"})," shows how you stack up against everyone else playing TOTL."]}),i.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:" Simple Rules"}),i.jsxs("p",{className:"text-emerald-700",children:["The more correct Predictions you make, the higher you climb. ",i.jsx("strong",{children:"No extra points, no ties"}),"  just football instincts and consistency."]})]})]})}),i.jsx(n,{id:"form",title:"Form Leaderboards",icon:"",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-base leading-relaxed",children:[i.jsx("strong",{children:"Form Leaderboards"})," focus on how you're performing ",i.jsx("strong",{children:"right now"}),", not over the whole season."]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" 5-Week Form Table"}),i.jsxs("p",{className:"text-blue-700",children:["Your short-term ",i.jsx("strong",{children:'"hot streak"'}),"  great for spotting who's on fire lately."]})]}),i.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:" 10-Week Form Table"}),i.jsxs("p",{className:"text-purple-700",children:["The standard rolling form that rewards ",i.jsx("strong",{children:"consistency and momentum"}),"."]})]})]}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:" How They Work"}),i.jsxs("p",{className:"text-slate-700",children:["Both update each week and show the players in top form. To appear on the ",i.jsx("strong",{children:"10-Week Form Table"}),", make sure you've played 10 Gameweeks in a row  ",i.jsx("strong",{children:"consistency is key"}),"!"]})]}),i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-amber-800 mb-2",children:" Don't worry if you joined TOTL late"}),i.jsx("p",{className:"text-amber-700",children:"Once you've played enough weeks, you'll automatically show up in these tables."})]})]})}),i.jsx(n,{id:"summary",title:"That's It",icon:"",children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 border border-emerald-200 rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold text-emerald-800 mb-2",children:" Your Mission"}),i.jsxs("p",{className:"text-emerald-700",children:["Predict each week. Beat your mates. Climb the Leaderboard  or rise up the Form Tables. Stay sharp and see who's truly ",i.jsx("strong",{children:"Top of the League"}),"."]})]})})})]}),i.jsx("div",{className:"mt-12 text-center",children:i.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Ready to Start Playing?"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Head to the Predictions page and make your first picks!"}),i.jsxs("a",{href:"/predictions",className:"inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors",children:[i.jsx("span",{children:""}),"Make Predictions"]})]})})]})})}function Sp(r,e){const A=r?.[`${e}_name`],n=r?.[`${e}_team`],o=r?.[`${e}_code`]||A||n||"";return Dn(o)||(e==="home"?"Home":"Away")}function gF(){const{user:r}=or(),[e,A]=x.useState(null),[n,a]=x.useState([]),[o,c]=x.useState(new Map),[d,f]=x.useState(new Map),[m,g]=x.useState(!0),[w,v]=x.useState(""),[y,C]=x.useState(!1),[b,E]=x.useState(!1),[S,k]=x.useState(!1),[N,O]=x.useState(!1),[j,L]=x.useState("saved"),[R,G]=x.useState(!1),[H,ve]=x.useState(null),[W,ae]=x.useState(null),[fe,P]=x.useState(!1),[ue,Y]=x.useState(null);return x.useEffect(()=>{console.log("isPastDeadline state changed to:",R)},[R]),x.useEffect(()=>{if(d.size>0&&o.size>0){let D=0;o.forEach(_=>{const I=d.get(_.fixture_index);I&&I===_.pick&&D++}),ve(D),console.log("Calculated score:",D),(async()=>{if(e){const{data:_}=await z.from("picks").select("user_id, fixture_index, pick").eq("gw",e);if(_){const I=new Map;_.forEach(te=>{const se=d.get(te.fixture_index),He=I.get(te.user_id)||0;se&&se===te.pick?I.set(te.user_id,He+1):I.set(te.user_id,He)});const $=Array.from(I.values()).sort((te,se)=>se-te),Q=$.filter(te=>te>=D).length,K=$.length,Z=Math.round(Q/K*100);ae(Z),console.log("Top percent:",Z)}}})()}},[d,o,e]),x.useEffect(()=>{let D=!0;return(async()=>{try{let _=!1;if(r?.id)try{const{data:be,error:Ze}=await z.from("league_members").select("leagues(id,name)").eq("user_id",r.id);Ze?(console.warn("[NewPredictionsCentre] Error checking leagues (non-fatal):",Ze),_=!1):be&&(_=be.some(gt=>gt.leagues?.name==="API Test"))}catch(be){console.error("[NewPredictionsCentre] Error checking API Test membership:",be),_=!1}D&&P(_);const{data:I,error:$}=await z.from("meta").select("current_gw").eq("id",1).maybeSingle();if($){console.error("[NewPredictionsCentre] Error fetching current GW:",$),D&&(v(`Failed to load gameweek: ${$.message||"Unknown error"}`),g(!1));return}const Q=I?.current_gw??1;let K,Z=Q;if(_)try{const be=await z.from("test_api_fixtures").select("id,test_gw as gw,fixture_index,home_name,away_name,home_team,away_team,home_code,away_code,kickoff_time").eq("test_gw",1).order("fixture_index",{ascending:!0});if(be.error){const Ze=be.error?.code,gt=be.error.message||"";if(Ze==="PGRST116"||gt.includes("404")||gt.includes("does not exist"))console.log("[NewPredictionsCentre] Test fixtures table not found, using regular fixtures"),K=await z.from("fixtures").select("id,gw,fixture_index,home_name,away_name,home_team,away_team,home_code,away_code,kickoff_time").eq("gw",Q).order("fixture_index",{ascending:!0});else throw console.error("[NewPredictionsCentre] Error fetching test fixtures:",be.error),be.error}else be.data&&be.data.length>0?(K={data:be.data,error:null},Z=1,console.log("[NewPredictionsCentre] Using test fixtures for GW 1:",be.data.length,"fixtures")):(console.log("[NewPredictionsCentre] No test fixtures found, using regular fixtures"),K=await z.from("fixtures").select("id,gw,fixture_index,home_name,away_name,home_team,away_team,home_code,away_code,kickoff_time").eq("gw",Q).order("fixture_index",{ascending:!0}))}catch(be){console.error("[NewPredictionsCentre] Error fetching test fixtures, falling back to regular:",be),K=await z.from("fixtures").select("id,gw,fixture_index,home_name,away_name,home_team,away_team,home_code,away_code,kickoff_time").eq("gw",Q).order("fixture_index",{ascending:!0})}else K=await z.from("fixtures").select("id,gw,fixture_index,home_name,away_name,home_team,away_team,home_code,away_code,kickoff_time").eq("gw",Q).order("fixture_index",{ascending:!0});const{data:te,error:se}=K;if(se){console.error("Error fetching fixtures:",se),D&&(g(!1),v(`Failed to load fixtures: ${se.message||"Unknown error"}`));return}const He=te??[];if(D&&(a(He),A(Z),D&&Y(Z),console.log("Loaded",He.length,"fixtures for GW",Z,_&&Z===1?"(Test GW 1)":""),He.length>0&&He[0].kickoff_time)){const be=He.reduce((Ze,gt)=>{if(!gt.kickoff_time)return Ze;const Nt=new Date(gt.kickoff_time);return!Ze||Nt<Ze?Nt:Ze},null);if(be){const Ze=new Date(be.getTime()-45e5),gt=new Date,Nt=gt.getTime()>Ze.getTime();console.log("Earliest kickoff:",be.toISOString()),console.log("Deadline time:",Ze.toISOString()),console.log("Current time:",gt.toISOString()),console.log("Is past deadline?",Nt),G(Nt)}}const We=_&&Z===1?1:Q;if(r?.id){const{data:be,error:Ze}=await z.from("picks").select("gw,fixture_index,pick").eq("gw",We).eq("user_id",r.id);Ze&&console.error("Error fetching picks:",Ze);const gt=new Map;be?.forEach(Nt=>{gt.set(Nt.fixture_index,{fixture_index:Nt.fixture_index,pick:Nt.pick,gw:Nt.gw})}),D&&(c(gt),console.log("Loaded",gt.size,"user picks for GW",Q))}if(r?.id){const{data:be}=await z.from("gw_submissions").select("submitted_at").eq("gw",We).eq("user_id",r.id).maybeSingle();D&&(C(!!be?.submitted_at),console.log("Submission status:",be?.submitted_at?"confirmed":"not confirmed"))}const ie=_&&Z===1?1:Q,{data:he,error:Te}=await z.from("gw_results").select("gw,fixture_index,result").eq("gw",ie);if(!Te&&he){const be=new Map;he.forEach(Ze=>{(Ze.result==="H"||Ze.result==="D"||Ze.result==="A")&&be.set(Ze.fixture_index,Ze.result)}),D&&(f(be),console.log("Loaded",be.size,"results for GW",Q))}}catch(_){if(console.error("Error loading GW data:",_),D){g(!1);let I="Unknown error";_?.message?I=_.message:typeof _=="string"?I=_:_?.toString&&(I=_.toString()),(I.includes("Unexpected token")||I.includes("is not valid JSON"))&&(I="Server returned invalid response. Please check your connection and try again."),v(`Failed to load matches: ${I}`)}}finally{D&&g(!1)}})(),()=>{D=!1}},[r?.id]),w?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[i.jsx("div",{className:"text-red-600 font-semibold text-lg mb-2",children:"Failed to Load Matches"}),i.jsx("div",{className:"text-slate-600 text-sm mb-4",children:w}),i.jsx("button",{onClick:()=>{v(""),g(!0),window.location.reload()},className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Retry"})]})}):m||!e||n.length===0?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:i.jsx("div",{className:"text-slate-600",children:"Loading fixtures..."})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex flex-col",children:[i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight text-slate-900",children:"Predictions Centre"}),i.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600 w-full",children:"Call every game, lock in your results, and climb the table."})]}),e&&i.jsx("div",{className:"mt-2 mb-3",children:y?i.jsx("div",{className:"rounded-xl border bg-gradient-to-br from-[#1C8376]/5 to-blue-50/50 shadow-sm px-6 py-5",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-bold text-slate-900 text-xl mb-3",children:["Game Week ",e]}),H!==null&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[i.jsxs("div",{className:"text-4xl font-extrabold text-[#1C8376]",children:[H,"/",n.length]}),W!==null&&i.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-yellow-100 to-orange-100 border border-yellow-300",children:i.jsxs("span",{className:"text-sm font-bold text-orange-700",children:["Top ",W,"%"]})})]}),i.jsx("div",{className:"mb-3 bg-slate-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-[#1C8376] to-blue-500 transition-all duration-500",style:{width:`${H/n.length*100}%`}})})]})]})}):i.jsx("div",{className:"rounded-xl border bg-gradient-to-r from-[#1C8376]/10 to-blue-50 border-[#1C8376]/20 px-6 py-4",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-[#1C8376] text-lg",children:["Gameweek ",e]}),i.jsx("div",{className:"text-sm text-slate-600",children:"Make your predictions below"})]})})}),i.jsx("div",{className:"space-y-4",children:n.map(D=>{const _=o.get(D.fixture_index),I=d.get(D.fixture_index),$=D.kickoff_time?(()=>{const Z=new Date(D.kickoff_time),te=String(Z.getUTCHours()).padStart(2,"0"),se=String(Z.getUTCMinutes()).padStart(2,"0");return`${te}:${se}`})():"",Q=Sp(D,"home"),K=Sp(D,"away");return i.jsxs("div",{className:"rounded-2xl border bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-center px-2 pt-1 pb-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-end",children:[i.jsx("div",{className:"truncate font-medium",children:Q}),i.jsx("img",{src:`/assets/badges/${D.home_code?.toUpperCase()||"UNK"}.png`,alt:Q,className:"w-5 h-5",onError:Z=>{Z.currentTarget.style.display="none"}})]}),i.jsx("div",{className:"text-slate-500 text-sm px-4",children:$}),i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-start",children:[i.jsx("img",{src:`/assets/badges/${D.away_code?.toUpperCase()||"UNK"}.png`,alt:K,className:"w-5 h-5",onError:Z=>{Z.currentTarget.style.display="none"}}),i.jsx("div",{className:"truncate font-medium",children:K})]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:y?i.jsxs(i.Fragment,{children:[(()=>{const Z=I&&_?.pick===I,te=I&&_?.pick!==I;return i.jsx("div",{className:`h-16 rounded-xl border text-sm font-medium flex items-center justify-center relative overflow-hidden ${_?.pick==="H"?Z?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white border-yellow-300 shadow-xl shadow-gray-400/40 before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s] ring-2 ring-yellow-300/60":te&&I==="H"?"bg-red-500 text-white border-red-400":"bg-[#1C8376] text-white border-[#1C8376]":I==="H"?"bg-gray-300 text-slate-700 border-gray-400":"bg-slate-50 text-slate-400 border-slate-200"}`,children:"Home Win"})})(),(()=>{const Z=I&&_?.pick===I,te=I&&_?.pick!==I;return i.jsx("div",{className:`h-16 rounded-xl border text-sm font-medium flex items-center justify-center relative overflow-hidden ${_?.pick==="D"?Z?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white border-yellow-300 shadow-xl shadow-gray-400/40 before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s] ring-2 ring-yellow-300/60":te&&I==="D"?"bg-red-500 text-white border-red-400":"bg-[#1C8376] text-white border-[#1C8376]":I==="D"?"bg-gray-300 text-slate-700 border-gray-400":"bg-slate-50 text-slate-400 border-slate-200"}`,children:"Draw"})})(),(()=>{const Z=I&&_?.pick===I,te=I&&_?.pick!==I;return i.jsx("div",{className:`h-16 rounded-xl border text-sm font-medium flex items-center justify-center relative overflow-hidden ${_?.pick==="A"?Z?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white border-yellow-300 shadow-xl shadow-gray-400/40 before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s] ring-2 ring-yellow-300/60":te&&I==="A"?"bg-red-500 text-white border-red-400":"bg-[#1C8376] text-white border-[#1C8376]":I==="A"?"bg-gray-300 text-slate-700 border-gray-400":"bg-slate-50 text-slate-400 border-slate-200"}`,children:"Away Win"})})()]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{if(R)return;const Z=new Map(o);Z.set(D.fixture_index,{fixture_index:D.fixture_index,pick:"H",gw:e}),c(Z)},disabled:R,className:`h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center ${_?.pick==="H"?"bg-[#1C8376] text-white border-[#1C8376]":R?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:"Home Win"}),i.jsx("button",{onClick:()=>{if(R)return;const Z=new Map(o);Z.set(D.fixture_index,{fixture_index:D.fixture_index,pick:"D",gw:e}),c(Z)},disabled:R,className:`h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center ${_?.pick==="D"?"bg-[#1C8376] text-white border-[#1C8376]":R?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:"Draw"}),i.jsx("button",{onClick:()=>{if(R)return;const Z=new Map(o);Z.set(D.fixture_index,{fixture_index:D.fixture_index,pick:"A",gw:e}),c(Z)},disabled:R,className:`h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center ${_?.pick==="A"?"bg-[#1C8376] text-white border-[#1C8376]":R?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:"Away Win"})]})})]},D.id)})})]})}),i.jsx("div",{className:"p-6 bg-white shadow-lg",children:i.jsxs("div",{className:"max-w-2xl mx-auto space-y-3",children:[n.length>0&&(()=>{const D=n.reduce((_,I)=>{if(!I.kickoff_time)return _;const $=new Date(I.kickoff_time);return!_||$<_?$:_},null);return D&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Deadline"}),i.jsx("div",{className:"text-sm font-bold text-slate-700",children:(()=>{const _=new Date(D.getTime()-45e5),I=_.toLocaleDateString(void 0,{weekday:"short"}),$=_.toLocaleDateString(void 0,{month:"short"}),Q=_.toLocaleDateString(void 0,{day:"numeric"}),K=_.getUTCHours().toString().padStart(2,"0"),Z=_.getUTCMinutes().toString().padStart(2,"0");return`${I}, ${$} ${Q}, ${K}:${Z}`})()}),i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"(75 minutes before first kickoff)"})]})})(),!y&&!R&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{if(R){alert(" Too late! Predictions are now closed. The deadline was 75 minutes before the first kickoff.");return}E(!0)},className:"w-full py-4 bg-slate-600 text-white rounded-2xl font-bold hover:bg-slate-700 transition-colors",children:"Save Predictions"}),i.jsx("button",{onClick:()=>{if(R){alert(" Too late! Predictions are now closed. The deadline was 75 minutes before the first kickoff.");return}n.every(_=>o.has(_.fixture_index))?k(!0):alert("Please make all predictions before confirming")},className:"w-full py-4 bg-green-600 text-white rounded-2xl font-bold hover:bg-green-700 transition-colors",children:"Confirm Predictions"})]}),R&&!y&&i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"text-lg font-bold text-red-600 mb-2",children:" Deadline Passed"}),i.jsx("div",{className:"text-sm text-slate-600",children:"Predictions are now closed. The deadline was 75 minutes before the first kickoff."})]}),y&&i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"text-lg font-bold text-green-600 mb-2",children:" Predictions Submitted!"}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Your predictions for Gameweek ",e," have been confirmed and locked."]})]})]})}),b&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Save Predictions?"}),i.jsxs("div",{className:"text-slate-600 mb-6",children:["Your predictions will be saved but you can still change them before confirming.",n.length>0&&(()=>{const D=n.reduce((_,I)=>{if(!I.kickoff_time)return _;const $=new Date(I.kickoff_time);return!_||$<_?$:_},null);return D&&i.jsxs("div",{className:"mt-3 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[i.jsx("div",{className:"text-sm font-medium text-amber-800 mb-1",children:"Deadline Reminder"}),i.jsx("div",{className:"text-xs text-amber-700",children:(()=>{const _=new Date(D.getTime()-45e5),I=_.toLocaleDateString(void 0,{weekday:"short"}),$=_.toLocaleDateString(void 0,{month:"short"}),Q=_.toLocaleDateString(void 0,{day:"numeric"}),K=_.getUTCHours().toString().padStart(2,"0"),Z=_.getUTCMinutes().toString().padStart(2,"0");return`${I}, ${$} ${Q}, ${K}:${Z}`})()}),i.jsx("div",{className:"text-xs text-amber-600 mt-1",children:"(75 minutes before first kickoff)"})]})})()]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-3 bg-slate-200 text-slate-800 rounded-xl font-bold hover:bg-slate-300 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:async()=>{try{const D=Array.from(o.values()).map(Q=>fe&&ue===1?{user_id:r?.id,matchday:1,fixture_index:Q.fixture_index,pick:Q.pick}:{user_id:r?.id,gw:Q.gw,fixture_index:Q.fixture_index,pick:Q.pick}),_=fe&&ue===1?"test_api_picks":"picks",I=fe&&ue===1?"user_id,matchday,fixture_index":"user_id,gw,fixture_index",{error:$}=await z.from(_).upsert(D,{onConflict:I,ignoreDuplicates:!1});if($){console.error("Error saving picks:",$),alert("Failed to save predictions. Please try again.");return}console.log("Successfully saved picks:",D),E(!1),L("saved"),O(!0)}catch(D){console.error("Error saving picks:",D),alert("Failed to save predictions. Please try again.")}},className:"flex-1 py-3 bg-slate-600 text-white rounded-xl font-bold hover:bg-slate-700 transition-colors",children:"Save"})]})]})})}),S&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Are You Sure?"}),i.jsx("div",{className:"text-slate-600 mb-6",children:"Once confirmed, you cannot change your predictions. Make sure you're happy with all your picks!"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-3 bg-slate-200 text-slate-800 rounded-xl font-bold hover:bg-slate-300 transition-colors",children:"Go Back"}),i.jsx("button",{onClick:async()=>{try{const D=Array.from(o.values()).map(se=>fe&&ue===1?{user_id:r?.id,matchday:1,fixture_index:se.fixture_index,pick:se.pick}:{user_id:r?.id,gw:se.gw,fixture_index:se.fixture_index,pick:se.pick}),_=fe&&ue===1?"test_api_picks":"picks",I=fe&&ue===1?"user_id,matchday,fixture_index":"user_id,gw,fixture_index",{error:$}=await z.from(_).upsert(D,{onConflict:I,ignoreDuplicates:!1});if($){console.error("Error confirming picks:",$),alert("Failed to confirm predictions. Please try again.");return}const Q=fe&&ue===1?"test_api_submissions":"gw_submissions",K=fe&&ue===1?{user_id:r?.id,matchday:1,submitted_at:new Date().toISOString()}:{user_id:r?.id,gw:e??1,submitted_at:new Date().toISOString()},Z=fe&&ue===1?"user_id,matchday":"user_id,gw",{error:te}=await z.from(Q).upsert(K,{onConflict:Z});if(te){console.error("Error recording submission:",te),alert("Failed to record submission. Please try again.");return}console.log("Successfully confirmed picks:",D),C(!0),k(!1),L("confirmed"),O(!0),window.dispatchEvent(new CustomEvent("predictionsSubmitted"))}catch(D){console.error("Error confirming picks:",D),alert("Failed to confirm predictions. Please try again.")}},className:"flex-1 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors",children:"Confirm"})]})]})})}),N&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:i.jsxs("div",{className:"text-center",children:[j==="saved"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:"Predictions Saved!"}),i.jsx("div",{className:"text-slate-600 mb-4",children:"Your predictions have been saved as a draft. You can still edit them until you confirm."}),i.jsxs("div",{className:"text-sm text-amber-700 bg-amber-50 rounded-lg p-3 mb-6 border border-amber-200",children:[" ",i.jsx("strong",{children:"Important:"})," Don't forget to come back and publish your predictions before the deadline to make them final!"]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:"Predictions Confirmed!"}),i.jsx("div",{className:"text-slate-600 mb-6",children:"Your predictions have been published and locked. Good luck!"})]}),i.jsx("button",{onClick:()=>O(!1),className:"w-full py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors",children:"Done"})]})})})]})}function pF({code:r,size:e=22,className:A="",rounded:n=!1}){const a=`/assets/badges/${r}.png`,o=`${r} badge`;return i.jsx("img",{src:a,alt:o,width:e,height:e,className:`${n?"rounded-full":"rounded"} object-contain inline-block align-middle select-none ${A}`,loading:"lazy",onError:c=>{c.currentTarget.style.opacity="0.35"}})}function wF(r){let e=0;for(let o=0;o<r.length;o++)e=r.charCodeAt(o)+((e<<5)-e);const A=Math.abs(e%360),n=60+Math.abs(e)%20,a=45+Math.abs(e)%15;return`hsl(${A}, ${n}%, ${a}%)`}function dl(r,e){return r&&kp[r]?kp[r].primary:wF(r||e||"default")}function xF(r,e){if(r==="FINISHED")return"FT";if(r==="PAUSED")return"HT";if(r==="IN_PLAY"){if(e==null)return"LIVE";if(e>=1&&e<=45)return"First Half";if(e>45&&e<=50)return"45+";if(e>50)return"Second Half"}return"LIVE"}function ai({code:r,crest:e,size:A=22,className:n=""}){const[a,o]=x.useState(!1);return e&&!a?i.jsx("img",{src:e,alt:`${r||"Team"} badge`,width:A,height:A,className:`rounded object-contain inline-block align-middle select-none ${n}`,loading:"lazy",onError:()=>{o(!0)}}):r?i.jsx(pF,{code:r,size:A,className:n}):i.jsx("div",{className:`rounded bg-slate-200 ${n}`,style:{width:A,height:A}})}const kp={ARS:{primary:"#EF0107",secondary:"#023474"},AVL:{primary:"#95BFE5",secondary:"#670E36"},BOU:{primary:"#DA291C",secondary:"#000000"},BRE:{primary:"#E30613",secondary:"#FBB800"},BHA:{primary:"#0057B8",secondary:"#FFCD00"},CHE:{primary:"#034694",secondary:"#034694"},CRY:{primary:"#1B458F",secondary:"#C4122E"},EVE:{primary:"#003399",secondary:"#003399"},FUL:{primary:"#FFFFFF",secondary:"#000000"},LIV:{primary:"#C8102E",secondary:"#00B2A9"},MCI:{primary:"#6CABDD",secondary:"#1C2C5B"},MUN:{primary:"#DA291C",secondary:"#FBE122"},NEW:{primary:"#241F20",secondary:"#FFFFFF"},NFO:{primary:"#DD0000",secondary:"#FFFFFF"},TOT:{primary:"#132257",secondary:"#FFFFFF"},WHU:{primary:"#7A263A",secondary:"#1BB1E7"},WOL:{primary:"#FDB913",secondary:"#231F20"},SUN:{primary:"#EB172B",secondary:"#211E1F"},LEE:{primary:"#FFCD00",secondary:"#1D428A"}};function vF(){const{user:r}=or(),e=ws(),[A,n]=x.useState(null),[a,o]=x.useState([]),[c,d]=x.useState(new Map),[f,m]=x.useState(new Map),[g,w]=x.useState(0),[v,y]=x.useState("cards"),[C,b]=x.useState({x:0,y:0,rotation:0,opacity:1,scale:1}),[E,S]=x.useState(!1),[k,N]=x.useState(!1),[O,j]=x.useState(null),[L,R]=x.useState(!1),[G,H]=x.useState(null),[ve,W]=x.useState(!0),[ae,fe]=x.useState(!1),[P,ue]=x.useState(!1),[Y,D]=x.useState({}),_=x.useRef({});x.useEffect(()=>{const le=g>=a.length;if(!(v==="cards"&&!le)){const vt=document.documentElement,wt=document.body,cA=document.getElementById("root");vt.style.removeProperty("overflow"),wt.style.removeProperty("overflow"),wt.style.removeProperty("position"),wt.style.removeProperty("width"),wt.style.removeProperty("height"),cA&&cA.style.removeProperty("overflow");return}window.scrollTo({top:0,behavior:"auto"});const Le=document.documentElement,Ce=document.body,mt=document.getElementById("root"),pt=Le.style.overflow,Ye=Ce.style.overflow,rt=Ce.style.position,ze=mt?.style.overflow;Le.style.setProperty("overflow","hidden","important"),Ce.style.setProperty("overflow","hidden","important"),Ce.style.setProperty("position","fixed","important"),Ce.style.setProperty("width","100%","important"),Ce.style.setProperty("height","100%","important"),mt&&mt.style.setProperty("overflow","hidden","important");const Qt=vt=>{vt.preventDefault()},Kt=vt=>{vt.target.closest('[style*="aspectRatio"]')||vt.preventDefault()};return window.addEventListener("wheel",Qt,{passive:!1}),document.addEventListener("touchmove",Kt,{passive:!1}),()=>{Le.style.overflow=pt,Ce.style.overflow=Ye,Ce.style.position=rt,Ce.style.width="",Ce.style.height="",mt&&(mt.style.overflow=ze||""),window.removeEventListener("wheel",Qt),document.removeEventListener("touchmove",Kt)}},[v,g,a.length]);const I=x.useMemo(()=>a.length===0?!1:a.every(le=>c.has(le.fixture_index)),[a,c]),$=x.useRef(null),Q=x.useRef({x:0,y:0}),K=x.useRef(!1);x.useEffect(()=>{let le=!0;return(async()=>{try{W(!0);const{data:et}=await z.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle(),Le=et?.current_test_gw??1;n(Le);const{data:Ce,error:mt}=await z.from("test_api_fixtures").select("*").eq("test_gw",Le).order("fixture_index",{ascending:!0});if(mt)throw new Error(`Failed to load test fixtures: ${mt.message}`);if(!Ce||Ce.length===0){le&&(o([]),W(!1));return}const pt=Ce.map(ze=>({id:String(ze.api_match_id),gw:Le,fixture_index:ze.fixture_index,home_team:ze.home_team,away_team:ze.away_team,home_code:ze.home_code,away_code:ze.away_code,home_name:ze.home_name,away_name:ze.away_name,home_crest:ze.home_crest||null,away_crest:ze.away_crest||null,kickoff_time:ze.kickoff_time,api_match_id:ze.api_match_id||null}));if(le){if(o(pt),pt.length>0&&pt[0].kickoff_time){const ze=pt.reduce((Qt,Kt)=>{if(!Kt.kickoff_time)return Qt;const vt=new Date(Kt.kickoff_time);return!Qt||vt<Qt?vt:Qt},null);if(ze){const Qt=new Date(ze.getTime()-45e5);ue(new Date().getTime()>Qt.getTime())}}m(new Map)}let Ye=!1;if(r?.id){const{data:ze,error:Qt}=await z.from("test_api_picks").select("matchday,fixture_index,pick").eq("matchday",Le).eq("user_id",r.id);if(!Qt&&ze){const Kt=new Map;ze.forEach(vt=>{Kt.set(vt.fixture_index,{fixture_index:vt.fixture_index,pick:vt.pick,matchday:vt.matchday})}),le&&(d(Kt),Ye=Kt.size>0)}}let rt=!1;if(r?.id){const{data:ze}=await z.from("test_api_submissions").select("submitted_at").eq("matchday",Le).eq("user_id",r.id).maybeSingle();le&&(rt=!!ze?.submitted_at,fe(rt))}le&&pt.length>0&&Ye&&!rt&&w(pt.length)}catch(et){console.error("Error loading test API data:",et)}finally{le&&W(!1)}})(),()=>{le=!1}},[r?.id]);const Z=async(le,et)=>{try{console.log("[TestApiPredictions] fetchLiveScore called for matchId:",le,"kickoffTime:",et);const{data:Le,error:Ce}=await z.from("live_scores").select("*").eq("api_match_id",le).single();if(Ce)return Ce.code==="PGRST116"?(console.log("[TestApiPredictions] No live score found in Supabase for match",le,"- scheduled function may not have run yet"),null):(console.error("[TestApiPredictions] Error fetching live score from Supabase:",Ce),null);if(!Le)return console.warn("[TestApiPredictions] No live score data in Supabase"),null;console.log("[TestApiPredictions] Live score from Supabase:",Le);const mt=Le.home_score??0,pt=Le.away_score??0,Ye=Le.status||"SCHEDULED";let rt=Le.minute;if(rt==null&&(Ye==="IN_PLAY"||Ye==="PAUSED")&&et)try{const Qt=new Date(et),vt=Math.floor((new Date().getTime()-Qt.getTime())/(1e3*60));vt>0&&vt<120&&(Ye==="PAUSED"?rt=null:Ye==="IN_PLAY"&&(vt<=50?rt=vt:rt=46+Math.max(0,vt-50)))}catch(Qt){console.warn("[TestApiPredictions] Error calculating minute from kickoff time:",Qt)}const ze={homeScore:mt,awayScore:pt,status:Ye,minute:rt,retryAfter:null};return console.log("[TestApiPredictions] Returning score data from Supabase:",ze),ze}catch(Le){return console.error("[TestApiPredictions] Error fetching live score from Supabase:",Le?.message||Le,Le?.stack),null}};x.useEffect(()=>{if(!a.length)return;const le=a.slice(0,3).filter(Ce=>Ce.api_match_id&&Ce.kickoff_time);if(le.length===0)return;const et=new Map,Le=[];return le.forEach(Ce=>{if(!Ce.api_match_id||!Ce.kickoff_time)return;const mt=new Date(Ce.kickoff_time),pt=new Date,Ye=Ce.fixture_index,rt=()=>{const ze=Y[Ye];if(ze&&ze.status==="FINISHED")return;const Qt=new Map,Kt=async()=>{const wt=await Z(Ce.api_match_id,Ce.kickoff_time);if(wt){const cA=wt.status==="IN_PLAY"||wt.status==="PAUSED",Ve=wt.status==="HALF_TIME"||wt.status==="HT",ct=wt.status==="FINISHED";console.log("[TestApiPredictions] Poll result for fixture",Ye,":",{status:wt.status,isLive:cA,isHalfTime:Ve,isFinished:ct,homeScore:wt.homeScore,awayScore:wt.awayScore,minute:wt.minute,apiMatchId:Ce.api_match_id}),!cA&&!ct&&!Ve&&console.warn("[TestApiPredictions] Game",Ye,"has status",wt.status,"but is not detected as live"),Y[Ye]?.status==="PAUSED"&&wt.status==="IN_PLAY"&&(_.current[Ce.api_match_id]=new Date,console.log("[TestApiPredictions] Halftime ended for fixture",Ye,"match",Ce.api_match_id));let Pt=wt.minute;const Bt=_.current[Ce.api_match_id];if(wt.status==="IN_PLAY"&&Bt){const Wt=Math.floor((new Date().getTime()-Bt.getTime())/(1e3*60));Pt=46+Wt,console.log("[TestApiPredictions] Recalculated minute from halftime end:",{fixtureIndex:Ye,apiMatchId:Ce.api_match_id,originalMinute:wt.minute,finalMinute:Pt,minutesSinceHalftimeEnd:Wt})}if(D(Yt=>({...Yt,[Ye]:{homeScore:wt.homeScore,awayScore:wt.awayScore,status:wt.status,minute:Pt??null}})),ct){console.log("[TestApiPredictions] Game",Ye,"finished, stopping polling");const Yt=et.get(Ye);Yt&&(clearInterval(Yt),et.delete(Ye));const Wt=Qt.get(Ye);Wt&&(clearTimeout(Wt),Qt.delete(Ye))}else if(Ve){console.log("[TestApiPredictions] Game",Ye,"at half-time, stopping polling, will resume in 15 minutes");const Yt=et.get(Ye);Yt&&(clearInterval(Yt),et.delete(Ye));const Wt=Qt.get(Ye);Wt&&clearTimeout(Wt);const Vt=setTimeout(()=>{console.log("[TestApiPredictions] Resuming polling for fixture",Ye,"after half-time");const mA=async()=>{const xe=await Z(Ce.api_match_id);if(xe){const Be=xe.status==="FINISHED",Se=xe.status==="IN_PLAY"||xe.status==="PAUSED",Me=xe.status==="HALF_TIME"||xe.status==="HT";if(D(Pe=>({...Pe,[Ye]:{homeScore:xe.homeScore,awayScore:xe.awayScore,status:xe.status,minute:xe.minute??null}})),Be){console.log("[TestApiPredictions] Game",Ye,"finished, stopping polling");const Pe=et.get(Ye);Pe&&(clearInterval(Pe),et.delete(Ye)),Qt.delete(Ye)}else Se?console.log("[TestApiPredictions] Game",Ye,"second half started - status:",xe.status,"minute:",xe.minute):Me&&console.log("[TestApiPredictions] Game",Ye,"still at half-time, continuing to poll...")}};mA();const Gt=setInterval(mA,60*1e3);et.set(Ye,Gt),Qt.delete(Ye)},900*1e3);Qt.set(Ye,Vt)}else cA&&console.log("[TestApiPredictions] Game",Ye,"is LIVE - status:",wt.status,"minute:",wt.minute)}};Kt();const vt=setInterval(Kt,60*1e3);et.set(Ye,vt)};if(mt>pt){const ze=mt.getTime()-pt.getTime(),Qt=setTimeout(rt,ze);Le.push(Qt)}else rt()}),()=>{console.log("[TestApiPredictions] Cleaning up polling intervals and timeouts"),et.forEach(clearInterval),Le.forEach(clearTimeout)}},[a.map(le=>le.api_match_id).join(",")]),x.useEffect(()=>{const le=new Map;a.slice(0,3).forEach(Le=>{const Ce=Y[Le.fixture_index];Ce&&(Ce.status==="IN_PLAY"||Ce.status==="PAUSED"||Ce.status==="FINISHED")&&(Ce.homeScore>Ce.awayScore?le.set(Le.fixture_index,"H"):Ce.awayScore>Ce.homeScore?le.set(Le.fixture_index,"A"):le.set(Le.fixture_index,"D"))}),m(le)},[Y,a]);const te=a[g],se=x.useMemo(()=>{let le=0;return a.forEach(et=>{const Le=f.get(et.fixture_index),Ce=c.get(et.fixture_index);Le&&Ce&&Ce.pick===Le&&(le+=1)}),le},[a,f,c]),He=(le,et)=>{k||P||ae||(S(!0),Q.current={x:le,y:et},j(null))},We=(le,et)=>{if(!E||k||P||ae)return;const Le=le-Q.current.x,Ce=et-Q.current.y,mt=Le*.1;b({x:Le,y:Ce,rotation:mt,opacity:1,scale:1}),Math.abs(Le)>50&&Math.abs(Le)>Math.abs(Ce)?j(Le>0?"away":"home"):Ce>50&&Ce>Math.abs(Le)?j("draw"):j(null)},ie=()=>{if(!E||k||P||ae)return;S(!1);const{x:le,y:et}=C,Le=100;let Ce=null;Math.abs(le)>Le&&Math.abs(le)>Math.abs(et)?Ce=le>0?"A":"H":et>Le&&et>Math.abs(le)&&(Ce="D"),Ce?Ze(Ce):(b({x:0,y:0,rotation:0,opacity:1,scale:1}),j(null))},he=le=>{le.touches.length===1&&He(le.touches[0].clientX,le.touches[0].clientY)},Te=le=>{le.touches.length===1&&E&&(le.preventDefault(),We(le.touches[0].clientX,le.touches[0].clientY))},be=le=>{le.touches.length>0||(le.preventDefault(),ie())},Ze=async le=>{N(!0),j(null);const et=le==="H"?-1:le==="A"?1:0,Le=et*window.innerWidth,Ce=le==="D"?window.innerHeight:0;b({x:Le,y:Ce,rotation:et*30,opacity:0,scale:.8}),await Nt(le),setTimeout(()=>{K.current=!0,L?(w(a.length),R(!1)):w(g+1),b({x:0,y:0,rotation:0,opacity:1,scale:1}),requestAnimationFrame(()=>{K.current=!1,N(!1)})},300)},gt=le=>{!k&&!P&&!ae&&Ze(le)},Nt=async le=>{if(!te||!r?.id||!A)return;const et=new Map(c);et.set(te.fixture_index,{fixture_index:te.fixture_index,pick:le,matchday:A}),d(et);try{const{error:Le}=await z.from("test_api_picks").upsert({user_id:r.id,matchday:A,fixture_index:te.fixture_index,pick:le},{onConflict:"user_id,matchday,fixture_index",ignoreDuplicates:!1});Le&&console.error("Error saving test pick:",Le)}catch(Le){console.error("Error saving test pick:",Le)}},rA=async()=>{if(!(!r?.id||!A)){d(new Map),w(0),fe(!1);try{await z.from("test_api_picks").delete().eq("user_id",r.id).eq("matchday",A),await z.from("test_api_submissions").delete().eq("user_id",r.id).eq("matchday",A)}catch(le){console.error("Error resetting picks:",le)}}},Xt=async()=>{if(!I){H({success:!1,message:"You still have fixtures to call!"}),setTimeout(()=>H(null),2200);return}if(!(!r?.id||!A))try{const le=Array.from(c.values()).map(Ce=>({user_id:r.id,matchday:Ce.matchday,fixture_index:Ce.fixture_index,pick:Ce.pick})),{error:et}=await z.from("test_api_picks").upsert(le,{onConflict:"user_id,matchday,fixture_index",ignoreDuplicates:!1});if(et)throw et;const{error:Le}=await z.from("test_api_submissions").upsert({user_id:r.id,matchday:A,submitted_at:new Date().toISOString()},{onConflict:"user_id,matchday"});if(Le)throw Le;fe(!0),H({success:!0,message:"Your test predictions are locked in. Good luck!"}),setTimeout(()=>{H(null)},2500)}catch(le){console.error("Error confirming test picks:",le),H({success:!1,message:"Failed to confirm predictions. Please try again."}),setTimeout(()=>H(null),2200)}};if(ve||!A)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:i.jsx("div",{className:"text-slate-600",children:"Loading test fixtures..."})});if(a.length===0)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center px-4 max-w-md",children:[i.jsx("div",{className:"text-red-600 font-semibold mb-2",children:"No Test Fixtures Found"}),i.jsx("div",{className:"text-sm text-slate-600 mb-4",children:"Please create a test gameweek in the Test API Admin page first."}),i.jsx("button",{onClick:()=>e("/test-admin-api"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Test API Admin"})]})});if(ae){let le=0,et=0;const Le=a.slice(0,3);return Le.forEach(Ce=>{const mt=Y[Ce.fixture_index],pt=mt&&(mt.status==="IN_PLAY"||mt.status==="PAUSED"),Ye=mt&&mt.status==="FINISHED";if(pt&&et++,mt&&(pt||Ye)){const rt=c.get(Ce.fixture_index);if(rt){let ze=!1;(rt.pick==="H"&&mt.homeScore>mt.awayScore||rt.pick==="A"&&mt.awayScore>mt.homeScore||rt.pick==="D"&&mt.homeScore===mt.awayScore)&&(ze=!0),ze&&le++}}}),i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex flex-col",children:[i.jsx("div",{className:"p-4",children:i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsxs("div",{className:"relative flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-800",children:[i.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Back"]}),i.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 text-lg font-extrabold text-slate-700",children:"Confirmed Predictions"})]})})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-4",children:i.jsx("div",{className:"max-w-2xl mx-auto space-y-6 [&>div:first-child]:mt-0",children:(()=>{const Ce=[];let mt="",pt=[];return a.forEach(Ye=>{const rt=Ye.kickoff_time?new Date(Ye.kickoff_time).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}):"No date";rt!==mt?(pt.length>0&&Ce.push({label:mt,items:pt}),mt=rt,pt=[Ye]):pt.push(Ye)}),pt.length>0&&Ce.push({label:mt,items:pt}),Ce.map((Ye,rt)=>i.jsxs("div",{className:rt===0?"-mt-2":"",children:[i.jsxs("div",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center justify-between",children:[i.jsx("span",{children:Ye.label}),rt===0&&Le.length>0&&Le.some(ze=>{const Qt=Y[ze.fixture_index];return Qt&&(Qt.status==="IN_PLAY"||Qt.status==="PAUSED"||Qt.status==="FINISHED")})&&(()=>{const ze=Le.every(Qt=>{const Kt=Y[Qt.fixture_index];return Kt&&Kt.status==="FINISHED"});return i.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-white shadow-lg ${ze?"bg-slate-600 shadow-slate-500/30":"bg-red-600 shadow-red-500/30"}`,children:[!ze&&et>0&&i.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),ze&&i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),i.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:ze?"Score":"Live"}),i.jsxs("span",{className:"flex items-baseline gap-0.5",children:[i.jsx("span",{className:"text-lg sm:text-xl font-extrabold",children:le}),i.jsx("span",{className:"text-sm sm:text-base font-medium opacity-90",children:"/"}),i.jsx("span",{className:"text-base sm:text-lg font-semibold opacity-80",children:Le.length})]})]})})()]}),i.jsx("div",{className:"flex flex-col rounded-xl border bg-white overflow-hidden shadow-sm",children:Ye.items.map((ze,Qt)=>{const Kt=c.get(ze.fixture_index),vt=Y[ze.fixture_index],wt=vt&&vt.status==="IN_PLAY",cA=vt&&(vt.status==="PAUSED"||vt.status==="HALF_TIME"||vt.status==="HT"),Ve=ze.home_name||ze.home_team||"",ct=ze.away_name||ze.away_team||"",kt=ze.kickoff_time?(()=>{const Gt=new Date(ze.kickoff_time),xe=String(Gt.getUTCHours()).padStart(2,"0"),Be=String(Gt.getUTCMinutes()).padStart(2,"0");return`${xe}:${Be}`})():"",Pt=vt&&vt.status==="FINISHED",Bt=Gt=>{const xe=Kt?.pick===Gt;let Be=!1;return vt&&(Gt==="H"&&vt.homeScore>vt.awayScore||Gt==="A"&&vt.awayScore>vt.homeScore||Gt==="D"&&vt.homeScore===vt.awayScore)&&(Be=!0),{isPicked:xe,isCorrectResult:Be,isCorrect:xe&&Be,isWrong:xe&&(wt||Pt)&&!Be}},Yt=Bt("H"),Wt=Bt("D"),Vt=Bt("A"),mA=Gt=>{const xe="h-16 rounded-xl border text-sm font-medium transition-all flex items-center justify-center select-none",Be=wt&&Gt.isCorrectResult;return Gt.isCorrect&&Pt?`${xe} bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white !border-0 !border-none shadow-2xl shadow-yellow-400/40 transform scale-110 rotate-1 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]`:Gt.isCorrect&&wt?`${xe} bg-emerald-600 text-white border-emerald-600 animate-pulse shadow-lg shadow-emerald-500/50`:Gt.isCorrectResult?`${xe} bg-emerald-600 text-white border-emerald-600 ${Be?"animate-pulse shadow-lg shadow-emerald-500/50":""}`:Gt.isWrong&&Pt?`${xe} bg-slate-50 text-slate-600 border-4 animate-[flash-border_1s_ease-in-out_infinite]`:Gt.isWrong&&wt?`${xe} bg-slate-50 text-slate-600 border-4 animate-[flash-border_1s_ease-in-out_infinite]`:Gt.isPicked?`${xe} bg-[#1C8376] text-white border-[#1C8376]`:`${xe} bg-slate-50 text-slate-600 border-slate-200`};return i.jsxs("div",{className:Qt<Ye.items.length-1?"relative":"",children:[Qt<Ye.items.length-1&&i.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-px bg-slate-200 z-10"}),i.jsxs("div",{className:"p-4 !bg-white relative z-0",children:[(wt||cA)&&i.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-bold text-red-600",children:"LIVE"})]}),Pt&&!wt&&!cA&&i.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:i.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"FT"})}),i.jsxs("div",{className:`flex flex-col px-2 pb-3 ${wt?"pt-4":"pt-1"}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-end",children:[i.jsx("div",{className:"font-medium break-words",children:Ve}),i.jsx("img",{src:`/assets/badges/${(ze.home_code||Ve).toUpperCase()}.png`,alt:Ve,className:"w-5 h-5",onError:Gt=>{Gt.currentTarget.style.display="none"}})]}),i.jsx("div",{className:"px-4 flex items-center",children:vt&&(wt||Pt)?i.jsxs("span",{className:"font-bold text-base text-slate-900",children:[vt.homeScore," - ",vt.awayScore]}):i.jsx("span",{className:"text-slate-500 text-sm",children:kt})}),i.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-start",children:[i.jsx("img",{src:`/assets/badges/${(ze.away_code||ct).toUpperCase()}.png`,alt:ct,className:"w-5 h-5",onError:Gt=>{Gt.currentTarget.style.display="none"}}),i.jsx("div",{className:"font-medium break-words",children:ct})]})]}),vt&&(wt||Pt)&&i.jsx("div",{className:"flex justify-center mt-1",children:i.jsx("span",{className:`text-[10px] font-semibold ${wt?"text-red-600":"text-slate-500"}`,children:xF(vt.status,vt.minute)})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 relative",children:[i.jsx("div",{className:`${mA(Yt)} flex items-center justify-center`,children:i.jsx("span",{className:`${Yt.isCorrect?"font-bold":""} ${Yt.isWrong&&Pt?"line-through decoration-2 decoration-red-200":""}`,children:"Home Win"})}),i.jsx("div",{className:`${mA(Wt)} flex items-center justify-center`,children:i.jsx("span",{className:`${Wt.isCorrect?"font-bold":""} ${Wt.isWrong&&Pt?"line-through decoration-2 decoration-red-200":""}`,children:"Draw"})}),i.jsx("div",{className:`${mA(Vt)} flex items-center justify-center`,children:i.jsx("span",{className:`${Vt.isCorrect?"font-bold":""} ${Vt.isWrong&&Pt?"line-through decoration-2 decoration-red-200":""}`,children:"Away Win"})})]})]})]},ze.id)})})]},rt))})()})}),i.jsx("div",{className:"p-6 bg-white shadow-lg",children:i.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[i.jsx("div",{className:"text-lg font-bold text-green-600 mb-2",children:" Predictions Submitted! (TEST)"}),i.jsxs("div",{className:"text-sm text-slate-600 mb-4",children:["Your test predictions for Test GW ",A," have been confirmed."]}),se>0&&i.jsxs("div",{className:"mt-4 text-3xl font-bold text-purple-700",children:[se,"/",a.length]})]})})]})}return g>=a.length?i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex flex-col",children:[G&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-white px-10 py-8 text-center shadow-2xl max-w-sm mx-4",children:[i.jsx("div",{className:"absolute -top-16 -left-10 h-32 w-32 rounded-full bg-emerald-200/40 blur-2xl"}),i.jsx("div",{className:"absolute -bottom-14 -right-12 h-32 w-32 rounded-full bg-cyan-200/40 blur-2xl"}),i.jsxs("div",{className:"relative z-10 space-y-4",children:[i.jsx("div",{className:"text-5xl",children:G.success?"":""}),i.jsx("div",{className:`text-2xl font-extrabold ${G.success?"text-emerald-700":"text-amber-600"}`,children:G.success?"Good Luck!":"Not Quite Yet!"}),i.jsx("p",{className:"text-sm text-slate-600",children:G.message})]})]})}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"relative flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>w(0),className:"inline-flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-slate-800",children:[i.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Back"]}),i.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 text-lg font-extrabold text-slate-700",children:"Review Mode"}),I&&!ae?i.jsx("button",{onClick:Xt,className:"inline-flex items-center gap-2 rounded-full bg-emerald-500 px-3 py-1.5 text-sm font-semibold text-white shadow hover:bg-emerald-600",children:"Confirm"}):ae?i.jsx("span",{className:"text-sm text-green-600 font-semibold",children:" Submitted"}):c.size>0?i.jsx("button",{onClick:Xt,className:"inline-flex items-center gap-2 rounded-full bg-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-500 shadow-inner",children:"Confirm"}):i.jsx("button",{onClick:()=>w(0),className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-emerald-700 px-3 py-1.5 text-xs font-semibold text-white shadow-md transition hover:shadow-lg hover:from-emerald-600 hover:via-emerald-700 hover:to-emerald-800",children:"Swipe View"})]}),i.jsx("div",{className:"mt-4 flex items-center justify-center",children:i.jsxs("div",{className:"relative rounded-3xl border border-emerald-100 bg-white px-5 py-3 shadow-sm max-w-md w-full flex items-center gap-3 text-left",children:[i.jsx("div",{className:"flex h-8 w-8 items-center justify-center text-emerald-700",children:i.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),i.jsx("div",{className:"text-sm text-slate-600",children:ae?"Your predictions are locked in. This is a TEST game and does not affect the main game.":"Need to tweak something? Tap a prediction to adjust it. Everything locks in once you hit confirm."})]})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-4",children:i.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:(()=>{const le=[];let et="",Le=[];return a.forEach(Ce=>{const mt=Ce.kickoff_time?new Date(Ce.kickoff_time).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}):"No date";mt!==et?(Le.length>0&&le.push({label:et,items:Le}),et=mt,Le=[Ce]):Le.push(Ce)}),Le.length>0&&le.push({label:et,items:Le}),le.map((Ce,mt)=>i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold text-slate-800 mb-4",children:Ce.label}),i.jsx("div",{className:"space-y-4",children:Ce.items.map(pt=>{const Ye=c.get(pt.fixture_index),rt=f.get(pt.fixture_index);return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[i.jsx("div",{className:"flex-1 min-w-0 text-right",children:i.jsx("span",{className:"text-sm font-semibold text-slate-800 truncate inline-block",children:pt.home_name||pt.home_team})}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsx(ai,{code:pt.home_code,crest:pt.home_crest,size:28}),i.jsx("div",{className:"text-slate-400 font-medium text-sm",children:pt.kickoff_time?new Date(pt.kickoff_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):""}),i.jsx(ai,{code:pt.away_code,crest:pt.away_crest,size:28})]}),i.jsx("div",{className:"flex-1 min-w-0 text-left",children:i.jsx("span",{className:"text-sm font-semibold text-slate-800 truncate inline-block",children:pt.away_name||pt.away_team})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsx("button",{onClick:()=>{if(P||ae)return;const ze=new Map(c);ze.set(pt.fixture_index,{fixture_index:pt.fixture_index,pick:"H",matchday:A}),d(ze),Nt("H")},disabled:P||ae,className:`h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center ${Ye?.pick==="H"?rt&&rt==="H"&&Ye.pick===rt?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white border-yellow-300 shadow-xl":rt&&(rt==="D"||rt==="A")?"bg-red-500 text-white border-red-400":"bg-purple-600 text-white border-purple-600":rt==="H"?"bg-gray-300 text-slate-700 border-gray-400":P||ae?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:"Home Win"}),i.jsx("button",{onClick:()=>{if(P||ae)return;const ze=new Map(c);ze.set(pt.fixture_index,{fixture_index:pt.fixture_index,pick:"D",matchday:A}),d(ze),Nt("D")},disabled:P||ae,className:`h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center ${Ye?.pick==="D"?rt&&rt==="D"&&Ye.pick===rt?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white border-yellow-300 shadow-xl":rt&&(rt==="H"||rt==="A")?"bg-red-500 text-white border-red-400":"bg-purple-600 text-white border-purple-600":rt==="D"?"bg-gray-300 text-slate-700 border-gray-400":P||ae?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:"Draw"}),i.jsx("button",{onClick:()=>{if(P||ae)return;const ze=new Map(c);ze.set(pt.fixture_index,{fixture_index:pt.fixture_index,pick:"A",matchday:A}),d(ze),Nt("A")},disabled:P||ae,className:`h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center ${Ye?.pick==="A"?rt&&rt==="A"&&Ye.pick===rt?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white border-yellow-300 shadow-xl":rt&&(rt==="H"||rt==="D")?"bg-red-500 text-white border-red-400":"bg-purple-600 text-white border-purple-600":rt==="A"?"bg-gray-300 text-slate-700 border-gray-400":P||ae?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:"Away Win"})]})]},pt.id)})})]},mt))})()})}),i.jsx("div",{className:"p-6 bg-white shadow-lg",children:i.jsxs("div",{className:"max-w-2xl mx-auto space-y-4",children:[a.length>0&&a[0].kickoff_time&&i.jsxs("div",{className:"rounded-2xl border border-emerald-200 bg-white px-4 py-3 shadow-sm flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 text-emerald-700",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"text-sm font-semibold",children:"Deadline"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-base font-bold text-emerald-900",children:new Date(new Date(a[0].kickoff_time).getTime()-4500*1e3).toLocaleString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),i.jsx("div",{className:"text-[11px] font-medium text-emerald-600",children:"75 mins before first kickoff"})]})]}),ae?i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"text-lg font-bold text-green-600 mb-2",children:" Predictions Submitted! (TEST)"}),i.jsxs("div",{className:"text-sm text-slate-600",children:["Your test predictions for Test GW ",A," have been confirmed."]}),se>0&&i.jsxs("div",{className:"mt-4 text-2xl font-bold text-purple-700",children:[se,"/",a.length]})]}):P?i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"text-lg font-bold text-red-600 mb-2",children:" Deadline Passed"}),i.jsx("div",{className:"text-sm text-slate-600",children:"Predictions are now closed."})]}):i.jsxs(i.Fragment,{children:[!I&&i.jsx("div",{className:"text-center text-sm text-amber-600 mb-2",children:" You haven't made all your predictions yet"}),i.jsxs("div",{className:"grid gap-3",children:[i.jsx("button",{onClick:rA,disabled:ae||P,className:"w-full py-3 bg-slate-200 text-slate-700 rounded-2xl font-semibold hover:bg-slate-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Start Over"}),i.jsx("button",{onClick:Xt,disabled:!I,className:"w-full py-4 bg-green-600 text-white rounded-2xl font-bold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:I?"Confirm Predictions (TEST)":"Complete All Predictions First"}),i.jsx("button",{onClick:()=>e("/"),className:"w-full py-3 text-slate-600 hover:text-slate-800 font-medium",children:"Cancel"})]})]})]})})]}):i.jsxs("div",{className:"h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex flex-col overflow-hidden",children:[v==="cards"&&i.jsx("div",{className:"sticky top-0 z-40 px-4 pt-4 pb-2 bg-gradient-to-br from-slate-50 to-slate-100",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs("div",{className:"relative flex items-center justify-between mb-4",children:[i.jsx("button",{onClick:()=>e("/"),className:"text-slate-600 hover:text-slate-800 text-3xl font-bold w-10 h-10 flex items-center justify-center",children:""}),i.jsxs("span",{className:"absolute left-1/2 -translate-x-1/2 text-lg font-extrabold text-slate-700",children:["Test GW ",A]}),v==="cards"&&i.jsxs("button",{onClick:()=>w(a.length),className:"inline-flex items-center gap-1.5 rounded-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-emerald-700 px-3 py-1.5 text-xs font-semibold text-white shadow-md transition hover:shadow-lg hover:from-emerald-600 hover:via-emerald-700 hover:to-emerald-800",children:[i.jsx("svg",{className:"h-3.5 w-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),"List View"]})]}),v==="cards"&&i.jsx("div",{className:"mt-4 flex justify-center mb-2",children:i.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-[#e6f3f0] px-3 py-2",children:a.map((le,et)=>{const Le=et<g,Ce=et===g;return i.jsx("div",{className:`flex items-center justify-center transition-all ${Ce?"h-2 w-6 rounded-full bg-[#178f72]":"h-3 w-3 rounded-full"} ${Le&&!Ce?"bg-[#116f59]":Ce?"":"bg-white"}`},et)})})})]})}),v==="list"?i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4",children:[i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("button",{onClick:()=>e("/"),className:"absolute left-0 top-0 w-10 h-10 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 hover:text-slate-800 transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-900 mt-0 mb-2",children:"Test API Predictions"}),i.jsxs("div",{className:"mt-0 mb-4 text-base text-slate-500",children:["Call every game, lock in your results.",i.jsx("br",{}),"This is a TEST game."]})]})]}),i.jsx("div",{className:"mt-2 mb-4",children:i.jsx("div",{className:"rounded-xl border bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"text-purple-900 font-semibold text-lg",children:["Test GW ",A," Complete"]}),i.jsx("div",{className:"text-purple-900 text-sm font-bold mt-1",children:"Your Score"})]}),i.jsx("div",{className:"text-purple-900 text-5xl font-extrabold",children:se})]})})}),i.jsx("div",{className:"flex justify-center mt-4",children:i.jsxs("button",{onClick:()=>{y("cards"),w(0)},className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-emerald-700 px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:shadow-lg",children:[i.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),"Back to Swipe View"]})})]})}):i.jsxs("div",{className:"flex flex-col min-h-0 overflow-hidden flex-1 pb-[90px]",style:{height:"100%"},children:[i.jsxs("div",{className:"flex items-center justify-center px-4 relative overflow-hidden pt-2",style:{minHeight:0},children:[i.jsxs("div",{className:`absolute left-8 top-1/2 -translate-y-1/2 flex flex-col items-center gap-2 transition-opacity z-50 ${O==="home"?"opacity-100":"opacity-0"}`,children:[i.jsx("div",{className:"text-6xl font-bold text-slate-700",children:""}),i.jsx("div",{className:"text-lg font-bold text-slate-700 bg-white px-4 py-2 rounded-full shadow-lg whitespace-nowrap",children:"Home Win"})]}),i.jsxs("div",{className:`absolute right-8 top-1/2 -translate-y-1/2 flex flex-col items-center gap-2 transition-opacity z-50 ${O==="away"?"opacity-100":"opacity-0"}`,children:[i.jsx("div",{className:"text-6xl font-bold text-slate-700",children:""}),i.jsx("div",{className:"text-lg font-bold text-slate-700 bg-white px-4 py-2 rounded-full shadow-lg whitespace-nowrap",children:"Away Win"})]}),i.jsxs("div",{className:`absolute bottom-32 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 transition-opacity z-50 ${O==="draw"?"opacity-100":"opacity-0"}`,children:[i.jsx("div",{className:"text-6xl font-bold text-slate-700",children:""}),i.jsx("div",{className:"text-lg font-bold text-slate-700 bg-white px-4 py-2 rounded-full shadow-lg",children:"Draw"})]}),i.jsxs("div",{className:"max-w-md w-full relative",style:{aspectRatio:"0.75"},children:[g<a.length-1&&(()=>{const le=a[g+1];return i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{transform:"scale(1)",opacity:E||k?.5:0,zIndex:1,transition:"opacity 0.15s ease-out"},children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden select-none",children:[i.jsxs("div",{className:"pt-2 px-8 pb-8",children:[le.kickoff_time&&i.jsx("div",{className:"text-center mb-1",children:i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:new Date(le.kickoff_time).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})})}),i.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(ai,{code:le.home_code,crest:le.home_crest,size:120}),i.jsx("div",{className:"text-sm font-bold text-slate-700 mt-4 text-center max-w-[120px]",children:le.home_name||le.home_team})]}),i.jsx("div",{className:"flex flex-col items-center mb-8",children:le.kickoff_time&&i.jsx("div",{className:"text-sm text-slate-700",children:new Date(le.kickoff_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(ai,{code:le.away_code,crest:le.away_crest,size:120}),i.jsx("div",{className:"text-sm font-bold text-slate-700 mt-4 text-center max-w-[120px]",children:le.away_name||le.away_team})]})]})]}),i.jsxs("div",{className:"h-48 relative overflow-hidden",children:[i.jsx("div",{style:{position:"absolute",inset:0,background:dl(le.home_code,le.home_name),clipPath:"polygon(0 0, 0 100%, 100% 100%)"}}),i.jsx("div",{style:{position:"absolute",inset:0,background:dl(le.away_code,le.away_name),clipPath:"polygon(0 0, 100% 0, 100% 100%)"}})]})]})},g+1)})(),i.jsx("div",{ref:$,className:"absolute inset-0 z-10 cursor-grab active:cursor-grabbing",style:{transform:`translate(${C.x}px, ${C.y}px) rotate(${C.rotation}deg) scale(${C.scale})`,opacity:C.opacity,transition:E||K.current?"none":"all 0.3s ease-out",touchAction:"none"},onMouseDown:le=>!P&&!ae&&He(le.clientX,le.clientY),onMouseMove:le=>!P&&!ae&&We(le.clientX,le.clientY),onMouseUp:ie,onMouseLeave:ie,onTouchStart:he,onTouchMove:Te,onTouchEnd:be,children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden select-none",children:[i.jsxs("div",{className:"pt-2 px-8 pb-8 relative pointer-events-none",children:[i.jsx("div",{className:"absolute top-2 right-4 flex items-center gap-2 text-slate-400 text-xs font-semibold",children:i.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/4603/4603384.png",alt:"Swipe gesture icon",className:"w-6 h-6 opacity-80"})}),te.kickoff_time&&i.jsx("div",{className:"text-center mb-1",children:i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:new Date(te.kickoff_time).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})})}),i.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(ai,{code:te.home_code,crest:te.home_crest,size:120}),i.jsx("div",{className:"text-sm font-bold text-slate-700 mt-4 text-center max-w-[120px]",children:te.home_name||te.home_team})]}),i.jsx("div",{className:"flex flex-col items-center mb-8",children:te.kickoff_time&&i.jsx("div",{className:"text-sm text-slate-700",children:new Date(te.kickoff_time).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(ai,{code:te.away_code,crest:te.away_crest,size:120}),i.jsx("div",{className:"text-sm font-bold text-slate-700 mt-4 text-center max-w-[120px]",children:te.away_name||te.away_team})]})]}),(()=>{const le=f.get(te.fixture_index),et=c.get(te.fixture_index);if(le&&et){const Le=et.pick===le;return i.jsxs("div",{className:"text-center mb-4 space-y-2",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-full text-sm font-semibold",children:[i.jsx("span",{children:""}),i.jsxs("span",{children:["Result: ",le==="H"?"Home Win":le==="A"?"Away Win":"Draw"]})]}),i.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold ${Le?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[i.jsx("span",{children:Le?"":""}),i.jsx("span",{children:Le?"Correct!":"Incorrect"})]})]})}return null})()]}),i.jsxs("div",{className:"h-48 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0",style:{background:dl(te.home_code,te.home_name),clipPath:"polygon(0 0, 0 100%, 100% 100%)"}}),i.jsx("div",{className:"absolute inset-0",style:{background:dl(te.away_code,te.away_name),clipPath:"polygon(0 0, 100% 0, 100% 100%)"}})]})]})})]})]}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 pt-2 px-4 bg-[#eef4f3] z-50",style:{paddingBottom:"calc(1.5625rem + env(safe-area-inset-bottom, 0px))"},children:i.jsx("div",{className:"max-w-md mx-auto",children:i.jsxs("div",{className:"flex items-stretch justify-center gap-3",children:[i.jsx("button",{onClick:()=>gt("H"),disabled:k||P||ae,className:"flex-1 py-4 rounded-2xl font-semibold transition-all flex items-center justify-center bg-[#d7e6e3] text-slate-700 disabled:opacity-70",style:{backgroundColor:C.x<-30?`rgba(34, 197, 94, ${Math.min(.8,Math.abs(C.x)/150)})`:void 0,color:C.x<-30?"#fff":void 0},children:"Home Win"}),i.jsx("button",{onClick:()=>gt("D"),disabled:k||P||ae,className:"flex-1 py-4 rounded-2xl font-semibold transition-all flex items-center justify-center bg-[#d7e6e3] text-slate-700 disabled:opacity-70",style:{backgroundColor:C.y>30?`rgba(59, 130, 246, ${Math.min(.8,C.y/150)})`:void 0,color:C.y>30?"#fff":void 0},children:"Draw"}),i.jsx("button",{onClick:()=>gt("A"),disabled:k||P||ae,className:"flex-1 py-4 rounded-2xl font-semibold transition-all flex items-center justify-center bg-[#d7e6e3] text-slate-700 disabled:opacity-70",style:{backgroundColor:C.x>30?`rgba(34, 197, 94, ${Math.min(.8,C.x/150)})`:void 0,color:C.x>30?"#fff":void 0},children:"Away Win"})]})})})]})]})}const BF=()=>{const r=typeof window<"u"?window.location.hostname:"",e=typeof window<"u"?window.location.origin:"";return r.includes("netlify.app")||r.includes("netlify.com")?`${e}/.netlify/functions/fetchFootballData`:r==="localhost"||r==="127.0.0.1"?"https://totl-staging.netlify.app/.netlify/functions/fetchFootballData":"/.netlify/functions/fetchFootballData"};function yF(){const{user:r}=or(),e=r?.id==="4542c037-5b38-40d0-b189-847b8f17c222"||r?.id==="36f31625-6d6c-4aa4-815a-1493a812841b",[A,n]=x.useState([]),[a,o]=x.useState(new Map),[c,d]=x.useState(!1),[f,m]=x.useState(!1),[g,w]=x.useState(""),[v,y]=x.useState(""),[C,b]=x.useState("PL"),[E,S]=x.useState(null),[k,N]=x.useState(!1),O=async(R,G)=>{try{const H=new Date,ve=new Date(H);ve.setDate(H.getDate()+7);const W=H.toISOString().split("T")[0],ae=ve.toISOString().split("T")[0],fe=new URLSearchParams({competition:R,dateFrom:W,dateTo:ae}),ue=`${BF()}?${fe.toString()}`;console.log("[TestAdminApi] Fetching upcoming matches from:",ue),console.log("[TestAdminApi] Date range:",{dateFrom:W,dateTo:ae});const Y=await fetch(ue,{signal:G}),D=Y.headers.get("content-type"),_=D&&D.includes("application/json");let I=null,$=null;if(!Y.ok)try{if(I=await Y.text(),_||I.trim().startsWith("{")||I.trim().startsWith("["))try{$=JSON.parse(I);const K=$.message||$.error||`API error: ${Y.status}`;return Y.status===429?(S("Rate limit reached. Please wait a moment."),null):(S(K),null)}catch{}return console.error("[TestAdminApi] Got error response:",I.substring(0,200)),Y.status===404?S("Netlify function not found. Make sure 'fetchFootballData' is deployed."):S(`Server error (${Y.status}). The function may not be deployed correctly.`),null}catch{return S(`Failed to read error response: ${Y.status}`),null}try{I=await Y.text(),console.log("[TestAdminApi] Response status:",Y.status),console.log("[TestAdminApi] Response content-type:",D),console.log("[TestAdminApi] Response preview:",I.substring(0,100));try{$=JSON.parse(I),console.log("[TestAdminApi] Successfully parsed JSON")}catch(K){return console.error("[TestAdminApi] Failed to parse JSON. Parse error:",K),console.error("[TestAdminApi] Response text:",I.substring(0,500)),I.trim().startsWith("<!")||I.trim().startsWith("<html")?S("Server returned an HTML error page. The function may not be deployed correctly. Check browser console for details."):I.trim().startsWith("{")||I.trim().startsWith("[")?S("Server returned malformed JSON. Check browser console for details."):S("Server returned invalid response (not JSON). Check browser console for details."),null}}catch(K){return console.error("[TestAdminApi] Failed to read response:",K),S("Failed to read response from server."),null}const Q=$;return!Q.success||!Q.data?(S("Invalid API response format. Make sure the function is working correctly."),null):(S(null),Q.data.matches||[])}catch(H){if(H instanceof Error&&H.name==="AbortError")return console.log("Fetch aborted"),null;console.error("Error fetching API matches:",H);let ve="Failed to fetch matches";return H instanceof TypeError&&H.message.includes("fetch")?ve="Network error. Check your connection and make sure the Netlify function is deployed.":H instanceof Error&&(ve=H.message),S(ve),null}};if(x.useEffect(()=>{if(!e)return;let R=!0;return(async()=>{try{const{error:G}=await z.from("test_api_meta").select("current_test_gw").eq("id",1).maybeSingle();G&&G.code!=="PGRST116"&&!G.message?.includes("404")&&console.warn("Error loading test_api_meta:",G.message);const{data:H,error:ve}=await z.from("test_api_fixtures").select("*").eq("test_gw",1).order("fixture_index",{ascending:!0});if(ve)ve.code!=="PGRST116"&&!ve.message?.includes("404")&&console.warn("Error loading test_api_fixtures:",ve.message);else if(R&&H&&H.length>0){const W=new Map;H.forEach(ae=>{W.set(ae.fixture_index,{...ae,selected:!0})}),o(W)}}catch{}})(),()=>{R=!1}},[e]),!e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:i.jsx("div",{className:"text-red-600",children:"Access denied. Admin only."})});const j=(R,G)=>{const H=new Map(a);if(H.has(G))H.delete(G);else{const ve={test_gw:1,fixture_index:G,api_match_id:R.id,home_team:R.homeTeam.shortName,away_team:R.awayTeam.shortName,home_code:R.homeTeam.tla,away_code:R.awayTeam.tla,home_name:R.homeTeam.name,away_name:R.awayTeam.name,home_crest:R.homeTeam.crest||null,away_crest:R.awayTeam.crest||null,kickoff_time:R.utcDate,selected:!0};H.set(G,ve)}o(H)},L=async()=>{if(a.size===0){w("Please select at least one fixture");return}d(!0),w(""),y("");try{await z.from("test_api_fixtures").delete().eq("test_gw",1);const R=Array.from(a.values()).map(H=>({test_gw:H.test_gw,fixture_index:H.fixture_index,api_match_id:H.api_match_id,home_team:H.home_team,away_team:H.away_team,home_code:H.home_code,away_code:H.away_code,home_name:H.home_name,away_name:H.away_name,home_crest:H.home_crest,away_crest:H.away_crest,kickoff_time:H.kickoff_time})),{error:G}=await z.from("test_api_fixtures").insert(R);if(G)throw G;await z.from("test_api_meta").upsert({id:1,current_test_gw:1},{onConflict:"id"}),y(`Test Gameweek 1 saved with ${a.size} fixtures!`)}catch(R){w(R.message??"Failed to save test gameweek.")}finally{d(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4",style:{pointerEvents:"auto"},children:i.jsxs("div",{className:"max-w-4xl mx-auto",style:{pointerEvents:"auto"},children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight text-slate-900 mb-2",children:"Test API Admin (STAGING ONLY)"}),i.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Select fixtures from the API to create test gameweeks. This is completely separate from the main game."}),g&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g}),v&&i.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:v}),E&&i.jsx("div",{"data-api-error":!0,className:"mb-4 p-4 bg-amber-50 border-2 border-amber-400 rounded-lg text-amber-800 text-sm font-medium shadow-md",children:E.startsWith("API Error:")?E:` ${E}`}),i.jsx("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("label",{className:"font-medium text-slate-700",children:"Test Gameweek:"}),i.jsx("span",{className:"text-lg font-semibold text-slate-900",children:"1"}),i.jsx("span",{className:"text-sm text-slate-500",children:"(API Test league always uses GW 1)"})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Upcoming Matches (Next 7 Days)"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Competition:"}),i.jsxs("select",{value:C,onChange:R=>{b(R.target.value),n([]),S(null)},className:"w-full border rounded px-3 py-2",children:[i.jsx("option",{value:"PL",children:"Premier League"}),i.jsx("option",{value:"BSA",children:"Brazilian Serie A"}),i.jsx("option",{value:"BL1",children:"Bundesliga"}),i.jsx("option",{value:"SA",children:"Serie A"}),i.jsx("option",{value:"FL1",children:"Ligue 1"}),i.jsx("option",{value:"PD",children:"La Liga"}),i.jsx("option",{value:"CL",children:"Champions League"})]})]}),k&&i.jsx("div",{className:"text-center py-4 text-slate-600",children:"Loading upcoming matches..."}),i.jsx("button",{onClick:()=>{if(f){console.log("[TestAdminApi] Already fetching, ignoring click");return}console.log("[TestAdminApi] Refreshing upcoming matches",{competition:C});const R=new AbortController;m(!0),S(null),O(C,R.signal).then(G=>{console.log("[TestAdminApi] Matches fetched",G?.length||0),G&&G.length>0?(n(G),S(null)):G&&G.length===0&&S("No upcoming matches found in the next week for this competition.")}).catch(G=>{console.error("[TestAdminApi] Error refreshing matches",G),G instanceof Error&&G.name!=="AbortError"&&S("Failed to fetch matches. Please try again.")}).finally(()=>{m(!1),N(!1)})},disabled:f,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 transition-transform relative z-10",type:"button",children:f?"Refreshing...":"Refresh Matches"})]}),A.length>0&&i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:["Available Matches (",A.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A.map((R,G)=>{const H=a.has(G),ve=new Date(R.utcDate),W=new Date;W.setHours(0,0,0,0);const ae=new Date(W);ae.setDate(W.getDate()+1);const fe=new Date(ve);fe.setHours(0,0,0,0);let P="";fe.getTime()===W.getTime()?P="TODAY":fe.getTime()===ae.getTime()?P="TOMORROW":P=ve.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});const ue=`${String(ve.getUTCHours()).padStart(2,"0")}:${String(ve.getUTCMinutes()).padStart(2,"0")} UTC`,Y=`${P} ${ue}`;return i.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${H?"bg-purple-50 border-purple-300":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,onClick:()=>j(R,G),children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",checked:H,onChange:()=>j(R,G),className:"w-5 h-5"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"font-medium text-slate-800",children:[R.homeTeam.shortName," vs ",R.awayTeam.shortName]}),i.jsxs("div",{className:"text-xs text-slate-500",children:[Y,"  ",R.status,"  Matchday ",R.matchday]})]})]})},R.id)})})]}),a.size>0&&i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:["Selected Fixtures for Test GW 1 (",a.size,")"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Array.from(a.values()).sort((R,G)=>R.fixture_index-G.fixture_index).map(R=>i.jsxs("div",{className:"p-2 bg-purple-50 border border-purple-200 rounded text-sm",children:[R.fixture_index+1,". ",R.home_team," vs ",R.away_team]},R.fixture_index))}),i.jsx("button",{onClick:L,disabled:c,className:"mt-4 w-full py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 font-semibold",children:c?"Saving...":"Save Test Gameweek 1"})]})]})})}function bF(){const{user:r,signOut:e,session:A}=or(),[n,a]=x.useState(null),[o,c]=x.useState(!0),[d,f]=x.useState(!1),[m,g]=x.useState(null),[w,v]=x.useState(!1),[y,C]=x.useState(null),[b,E]=x.useState(null),[S,k]=x.useState(null),N=r?.id==="4542c037-5b38-40d0-b189-847b8f17c222"||r?.id==="36f31625-6d6c-4aa4-815a-1493a812841b";x.useEffect(()=>{let j=0;const L=40,R=()=>{const H=[globalThis?.despia,typeof window<"u"?window?.despia:null,globalThis?.Despia,typeof window<"u"?window?.Despia:null,globalThis?.DESPIA,typeof window<"u"?window?.DESPIA:null,globalThis?.OneSignal,typeof window<"u"?window?.OneSignal:null,globalThis?.webkit?.messageHandlers?.despia,typeof window<"u"?window?.webkit?.messageHandlers?.despia:null].find(ae=>ae!=null)||null;let ve=null;try{const ae=typeof window<"u"?window:globalThis;for(const fe in ae)if(fe.toLowerCase().includes("despia")||fe.toLowerCase().includes("onesignal")){ve={key:fe,value:ae[fe]};break}}catch{}const W=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null)||globalThis?.oneSignalPlayerId||(typeof window<"u"?window?.oneSignalPlayerId:null);if(H||ve||W){console.log("[Profile] Native API detected:",{despia:!!H,foundInGlobals:ve,directPlayerId:W?String(W).slice(0,12)+"":null,despiaKeys:H?Object.keys(H):[],hasOneSignalRequestPermission:H&&typeof H.oneSignalRequestPermission=="function",hasRequestPermission:H&&typeof H.requestPermission=="function",playerId:H?H.onesignalplayerid||H.oneSignalPlayerId:W}),E(!0);const ae=H?H.onesignalplayerid||H.oneSignalPlayerId:W;return ae&&k(String(ae)),!0}return j++,j<L?setTimeout(R,500):(console.warn("[Profile] Native API not detected after",L,"attempts"),E(!1)),!1};R()},[]),x.useEffect(()=>{O()},[r]);async function O(){if(r)try{const{data:j,error:L}=await z.from("picks").select("*").eq("user_id",r.id);L&&console.error("Error fetching picks:",L);const{data:R,error:G}=await z.from("v_ocp_overall").select("user_id, name, ocp").order("ocp",{ascending:!1});G&&console.error("Error fetching standings:",G);const H=R?R.findIndex(P=>P.user_id===r.id)+1:0,ve=R?.find(P=>P.user_id===r.id),{data:W,error:ae}=await z.from("gw_results").select("gw, fixture_index, result");ae&&console.error("Error fetching results:",ae);let fe=0;j&&W&&j.forEach(P=>{const ue=W.find(Y=>Y.gw===P.gw&&Y.fixture_index===P.fixture_index);ue&&ue.result===P.pick&&fe++}),a({totalPredictions:j?.length||0,correctPredictions:fe,totalPoints:ve?.ocp||0,globalRank:H,totalUsers:R?.length||0})}catch(j){console.error("Error fetching user stats:",j)}finally{c(!1)}}return r?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:i.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[i.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 sm:p-8 mb-6",children:i.jsxs("div",{className:"flex items-start gap-4 sm:gap-6",children:[i.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-[#1C8376] rounded-full flex items-center justify-center text-white text-xl sm:text-2xl font-bold flex-shrink-0",children:(r.user_metadata?.display_name||r.email||"U")[0].toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-2 truncate",children:r.user_metadata?.display_name||"User"}),i.jsx("p",{className:"text-slate-600 break-all text-sm sm:text-base",children:r.email}),i.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Member since ",new Date(r.created_at||"").toLocaleDateString("en-GB",{month:"long",year:"numeric"})]})]})]})}),o?i.jsx("div",{className:"text-center py-12 text-slate-600",children:"Loading stats..."}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-4xl font-bold text-[#1C8376] mb-2",children:n?.totalPoints||0}),i.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"OCP"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:[i.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:n?.globalRank||0}),i.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Global Rank"}),i.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["of ",n?.totalUsers||0,n&&n.globalRank>0&&n.totalUsers>0&&i.jsxs("span",{className:"block mt-1 text-[#1C8376] font-semibold",children:["Top ",Math.round(n.globalRank/n.totalUsers*100),"%"]})]})]})]}),n&&n.totalPredictions>0&&i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Prediction Accuracy"}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"text-slate-600",children:[i.jsx("span",{className:"text-3xl font-bold text-[#1C8376]",children:n.correctPredictions}),i.jsxs("span",{className:"text-slate-500",children:[" / ",n.totalPredictions]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-3xl font-bold text-[#1C8376]",children:[(n.correctPredictions/n.totalPredictions*100).toFixed(1),"%"]}),i.jsx("div",{className:"text-xs text-slate-500",children:"accuracy rate"})]})]}),i.jsx("div",{className:"overflow-hidden h-4 text-xs flex rounded-full bg-[#1C8376]/20",children:i.jsx("div",{style:{width:`${n.correctPredictions/n.totalPredictions*100}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-[#1C8376] transition-all duration-500"})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Account Settings"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex items-center justify-between py-3 border-b border-slate-200",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-800",children:"Display Name"}),i.jsx("div",{className:"text-sm text-slate-600",children:r.user_metadata?.display_name||"Not set"})]})}),i.jsx("div",{className:"flex items-center justify-between py-3 border-b border-slate-200",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-slate-800",children:"Email"}),i.jsx("div",{className:"text-sm text-slate-600 break-all",children:r.email})]})}),i.jsx("div",{className:"flex items-center justify-between py-3 border-b border-slate-200",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-800",children:"User ID"}),i.jsx("div",{className:"text-xs text-slate-500 font-mono",children:r.id})]})})]}),i.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Advanced"}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Check and fix your notification settings to receive chat notifications in mini-leagues."}),i.jsx("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-slate-600 mb-1",children:"OS Permission:"}),i.jsx("div",{className:"font-semibold text-slate-800",children:b===null?" Checking...":b===!1?" Unknown (not native app)":globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null)||S?' Native app (use "Enable Notifications" to check status)':" Unknown (not native app)"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-slate-600 mb-1",children:"OneSignal Status:"}),i.jsx("div",{className:"font-semibold text-slate-800",children:(()=>{if(b===null)return" Checking...";if(b===!1)return" Not initialized";const j=globalThis?.despia||(typeof window<"u"?window?.despia:null),L=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null);return j?.onesignalplayerid||j?.oneSignalPlayerId||L||S?" Player ID found":" Not initialized"})()})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-slate-600 mb-1",children:"Player ID:"}),i.jsx("div",{className:"font-mono text-xs text-slate-700 break-all",children:(()=>{if(b===null)return"Checking...";const j=globalThis?.despia||(typeof window<"u"?window?.despia:null),L=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null),R=j?.onesignalplayerid||j?.oneSignalPlayerId||L||S;if(!R)return"Not available";const G=String(R);return G.slice(0,8)+""+G.slice(-4)})()})]})]})}),i.jsxs("div",{className:"mb-4 p-3 bg-slate-100 rounded-lg border border-slate-300 text-xs",children:[i.jsx("div",{className:"font-semibold text-slate-700 mb-2",children:" Debug Info:"}),i.jsxs("div",{className:"space-y-1 text-slate-600 font-mono break-all",children:[i.jsxs("div",{children:["User Agent: ",typeof navigator<"u"?navigator.userAgent.slice(0,50)+"":"N/A"]}),i.jsxs("div",{children:["globalThis.despia: ",globalThis?.despia?" Found":" Not found"]}),i.jsxs("div",{children:["window.despia: ",typeof window<"u"&&window?.despia?" Found":" Not found"]}),i.jsxs("div",{children:["globalThis.Despia: ",globalThis?.Despia?" Found":" Not found"]}),i.jsxs("div",{children:["window.Despia: ",typeof window<"u"&&window?.Despia?" Found":" Not found"]}),i.jsxs("div",{children:["globalThis.OneSignal: ",globalThis?.OneSignal?" Found":" Not found"]}),i.jsxs("div",{children:["window.OneSignal: ",typeof window<"u"&&window?.OneSignal?" Found":" Not found"]}),(()=>{const L=[globalThis?.despia,typeof window<"u"?window?.despia:null,globalThis?.Despia,typeof window<"u"?window?.Despia:null,globalThis?.DESPIA,typeof window<"u"?window?.DESPIA:null].find(G=>G!=null)||null;let R=[];try{const G=typeof window<"u"?window:globalThis;for(const H in G)(H.toLowerCase().includes("despia")||H.toLowerCase().includes("onesignal"))&&R.push(H)}catch{}return R.length>0?i.jsxs("div",{className:"mt-2 text-green-600",children:[" Found global properties: ",R.join(", ")]}):L?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-2 font-semibold",children:"Despia Object Found:"}),i.jsxs("div",{children:["Keys: ",Object.keys(L).slice(0,10).join(", "),Object.keys(L).length>10?"":""]}),i.jsxs("div",{children:["oneSignalRequestPermission: ",typeof L.oneSignalRequestPermission=="function"?" Function":" Not a function"]}),i.jsxs("div",{children:["requestPermission: ",typeof L.requestPermission=="function"?" Function":" Not a function"]}),i.jsxs("div",{children:["onesignalplayerid: ",L.onesignalplayerid?" "+String(L.onesignalplayerid).slice(0,12)+"":""]}),i.jsxs("div",{children:["oneSignalPlayerId: ",L.oneSignalPlayerId?" "+String(L.oneSignalPlayerId).slice(0,12)+"":""]})]}):i.jsx("div",{className:"mt-2 text-red-600",children:" No Despia object found in any location"})})(),i.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Polling: ",b===null?" Checking...":b?" Detected":" Not detected"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{onClick:async()=>{if(!A?.access_token){g("Error: Not signed in");return}f(!0),g(null);try{const{ensurePushSubscribed:j}=await ln(async()=>{const{ensurePushSubscribed:R}=await Promise.resolve().then(()=>uC);return{ensurePushSubscribed:R}},[]),L=await j(A);L.ok?(g(` Successfully enabled notifications! Player ID: ${L.playerId?.slice(0,8)}`),setTimeout(()=>g(null),5e3)):g(` ${{"permission-denied":"Permission denied. Please enable notifications in iOS Settings.","no-player-id":"OneSignal not initialized. Please wait a few seconds and try again.","api-not-available":"Not available in browser. Please use the native app.","no-session":"Not signed in. Please sign in and try again.",unknown:"Unknown error. Please try again or contact support."}[L.reason||"unknown"]||"Failed to enable notifications"}`)}catch(j){g(` Error: ${j.message||"Failed to enable notifications"}`)}finally{f(!1)}},disabled:d||!A?.access_token,className:"w-full py-3 bg-white border border-slate-300 hover:bg-slate-50 disabled:bg-gray-100 disabled:opacity-50 text-slate-600 hover:text-slate-800 font-medium rounded-xl transition-colors",children:d?"Enabling...":"Enable Notifications"}),i.jsx("button",{onClick:async()=>{let j=null;try{j=(await ln(()=>Promise.resolve().then(()=>Jd),void 0)).default}catch{j=globalThis?.despia||(typeof window<"u"?window?.despia:null)}if(j&&typeof j=="function")try{j("settingsapp://")}catch{alert("Please go to iOS Settings  TotL  Notifications and enable notifications")}else alert("Please go to iOS Settings  TotL  Notifications and enable notifications")},className:"w-full py-2 bg-slate-200 hover:bg-slate-300 text-slate-800 font-medium rounded-xl transition-colors text-sm hidden",children:" Open OS Settings"}),i.jsx("button",{onClick:async()=>{if(!A?.access_token){g("Error: Not signed in");return}v(!0),g(null),C(null);try{const L=await(await fetch("/.netlify/functions/checkMySubscription",{headers:{Authorization:`Bearer ${A.access_token}`}})).json();if(C(L),L.subscribed)g(" Device is subscribed! Notifications should work.");else{const R=L.reasons||[],G=L.suggestion||"Enable notifications in iOS Settings";g(` Not subscribed: ${R.join("; ")}. ${G}`)}}catch(j){g(` Error checking subscription: ${j.message}`)}finally{v(!1)}},disabled:w||!A?.access_token,className:"w-full py-3 bg-white border border-slate-300 hover:bg-slate-50 disabled:bg-gray-100 disabled:opacity-50 text-slate-600 hover:text-slate-800 font-medium rounded-xl transition-colors",children:w?"Checking...":"Check Subscription Status"}),i.jsx("button",{onClick:async()=>{let j=null;try{const R=(await ln(()=>Promise.resolve().then(()=>Jd),void 0)).default;j=R?.onesignalplayerid||R?.oneSignalPlayerId||null}catch{j=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null)}j=j||S,j?(await navigator.clipboard.writeText(String(j)),g(" Player ID copied to clipboard"),setTimeout(()=>g(null),2e3)):g(" Player ID not available")},className:"w-full py-3 bg-white border border-slate-300 hover:bg-slate-50 text-slate-600 hover:text-slate-800 font-medium rounded-xl transition-colors",children:"Copy Player ID"})]}),m&&i.jsx("div",{className:`mt-3 p-3 rounded-lg text-sm ${m.includes("")?"bg-green-50 text-green-800 border border-green-200":m.includes("")?"bg-amber-50 text-amber-800 border border-amber-200":"bg-red-50 text-red-800 border border-red-200"}`,children:m}),y&&y.details&&i.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg border border-slate-200 text-xs",children:[i.jsx("div",{className:"font-semibold text-slate-700 mb-2",children:" OneSignal Status Details:"}),i.jsxs("div",{className:"space-y-1 text-slate-600 font-mono",children:[i.jsxs("div",{children:["Has Token: ",y.details.hasToken?" Yes":" No"]}),i.jsxs("div",{children:["Invalid: ",y.details.invalid?" Yes":" No"]}),i.jsxs("div",{children:["Notification Types: ",y.details.notificationTypes??"null"]}),i.jsxs("div",{children:["Device Type: ",y.details.deviceType||"N/A"]}),i.jsxs("div",{children:["Last Active: ",y.details.lastActive?new Date(y.details.lastActive).toLocaleString():"Never"]}),y.reasons&&y.reasons.length>0&&i.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-300",children:[i.jsx("div",{className:"font-semibold text-red-600",children:"Issues Found:"}),y.reasons.map((j,L)=>i.jsxs("div",{className:"text-red-600",children:[" ",j]},L))]})]})]})]}),N&&i.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Admin"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(IA,{to:"/admin",className:"block w-full py-3 bg-slate-600 hover:bg-slate-700 text-white font-semibold rounded-xl transition-colors text-center",children:"Admin Panel"}),i.jsx(IA,{to:"/test-admin-api",className:"block w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-xl transition-colors text-center",children:"Test API Admin (Staging)"})]})]}),i.jsx("button",{onClick:async()=>{await e()},className:"w-full mt-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-xl transition-colors",children:"Sign Out"})]})]})}):i.jsx("div",{className:"p-6",children:"Please sign in to view your profile."})}function CF(){const{user:r}=or(),[e,A]=cs.useState(!1),[n,a]=cs.useState(null),[o,c]=cs.useState(null),[d,f]=cs.useState(null);return cs.useEffect(()=>{let m=!0;const g=async()=>{try{const{data:b}=await z.from("meta").select("current_gw").eq("id",1).maybeSingle(),E=b?.current_gw??null;if(!m)return;if(a(E),!E)return A(!1);const{count:S}=await z.from("fixtures").select("id",{count:"exact",head:!0}).eq("gw",E);if(!m)return;const{count:k}=await z.from("gw_results").select("gw",{count:"exact",head:!0}).eq("gw",E);if(!m)return;const N=(k??0)>0;if(!S){c("watch-space"),A(!0),f(null);return}const{data:O}=await z.from("fixtures").select("kickoff_time").eq("gw",E).order("kickoff_time",{ascending:!0}).limit(1);if(O&&O.length>0&&O[0].kickoff_time){const G=new Date(O[0].kickoff_time),H=new Date(G.getTime()-4500*1e3),ve=H.toLocaleDateString(void 0,{weekday:"short"}),W=H.toLocaleDateString(void 0,{month:"short"}),ae=H.toLocaleDateString(void 0,{day:"numeric"}),fe=String(H.getUTCHours()).padStart(2,"0"),P=String(H.getUTCMinutes()).padStart(2,"0"),ue=`${ve}, ${W} ${ae}, ${fe}:${P}`;f(ue)}else f(null);if(N){c("watch-space"),A(!0);return}if(!r?.id){A(!1);return}const{data:j}=await z.from("fixtures").select("fixture_index").eq("gw",E);if(!j||j.length===0){A(!1);return}const{data:L}=await z.from("picks").select("fixture_index").eq("user_id",r.id).eq("gw",E);if(!m)return;L&&L.length===j.length?A(!1):(c("predictions"),A(!0))}catch{A(!1)}};g();const w=()=>{g()},v=()=>{g()},y=()=>{g()},C=()=>{document.hidden||g()};return window.addEventListener("predictionsSubmitted",w),window.addEventListener("resultsPublished",v),window.addEventListener("fixturesPublished",y),document.addEventListener("visibilitychange",C),()=>{m=!1,window.removeEventListener("predictionsSubmitted",w),window.removeEventListener("resultsPublished",v),window.removeEventListener("fixturesPublished",y),document.removeEventListener("visibilitychange",C)}},[r?.id]),e?i.jsx(i.Fragment,{children:o==="predictions"?i.jsx("div",{className:"mx-auto max-w-6xl px-4",children:i.jsx(IA,{to:"/new-predictions",className:"block mt-4 rounded-lg bg-blue-600 px-4 py-3 hover:bg-blue-700 transition-colors",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-white",children:["GW",n," is Live - Make your predictions"]}),i.jsx("div",{className:"text-white/90",children:d?i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"Deadline: "}),i.jsx("span",{className:"font-extrabold",children:d})]}):"Don't miss the deadline!"})]})})}):i.jsx("div",{className:"w-full px-4 py-3 relative",style:{backgroundColor:"#e1eae9"},children:i.jsxs("div",{className:"mx-auto max-w-6xl relative",children:[i.jsx("div",{className:"absolute top-3 left-0 w-6 h-6 rounded-full bg-[#1C8376] flex items-center justify-center text-white text-[10px] font-normal",children:"!"}),i.jsxs("div",{className:"pl-10",children:[i.jsxs("div",{className:"font-bold text-slate-900 text-base",children:["GW",(n||1)+1," Coming Soon!"]}),i.jsx("div",{className:"text-sm text-slate-600 mt-0.5",children:"Fixtures will be published soon."})]})]})})}):null}const Np=[{name:"Home",path:"/",icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-7 h-7",children:i.jsx("g",{children:i.jsx("path",{fill:"currentColor",d:"M10.7876 3.66609c0.7159 -0.54548 1.7088 -0.54542 2.4248 0l9.0537 6.89841c0.4392 0.3347 0.524 0.9621 0.1895 1.4014 -0.3347 0.4391 -0.9622 0.524 -1.4014 0.1894l-1.0537 -0.8037v7.6485c0 1.1045 -0.8955 1.9999 -2 2h-4.001c-0.5521 -0.0002 -1 -0.4479 -1 -1v-5h-2v5c0 0.5522 -0.4478 0.9999 -0.99999 1H6.00049c-1.10455 0 -1.99996 -0.8955 -2 -2v-7.6485l-1.05371 0.8037c-0.4393 0.3346 -1.06768 0.2498 -1.40235 -0.1894 -0.3343 -0.4391 -0.24936 -1.0667 0.18946 -1.4014zM6.00049 9.8282v9.1719h2.99902v-5c0 -0.5522 0.44789 -0.9998 1 -1h3.99999c0.5522 0.0001 1 0.4477 1 1v5h3.001V9.8282l-6 -4.57129z",strokeWidth:"1"})})})},{name:"Test API",path:"/test-api-predictions",icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-7 h-7",children:i.jsx("g",{children:i.jsx("path",{fill:"currentColor",d:"M12 2c5.5228 0 10 4.47715 10 10 0 5.5228 -4.4772 10 -10 10 -5.52285 0 -10 -4.4772 -10 -10C2 6.47715 6.47715 2 12 2m1 3c0 0.55228 -0.4477 1 -1 1s-1 -0.44772 -1 -1v-0.93652C7.38148 4.51479 4.51582 7.3815 4.06445 11H5c0.55228 0 1 0.4477 1 1s-0.44772 1 -1 1h-0.93555C4.51581 16.6185 7.38154 19.4842 11 19.9355V19c0 -0.5523 0.4477 -1 1 -1s1 0.4477 1 1v0.9355c3.6185 -0.4513 6.4842 -3.317 6.9355 -6.9355H19c-0.5523 0 -1 -0.4477 -1 -1s0.4477 -1 1 -1h0.9355C19.4842 7.3815 16.6185 4.51479 13 4.06348zm-1 3c0.5523 0 1 0.44772 1 1v2h2c0.5523 0 1 0.4477 1 1s-0.4477 1 -1 1h-2v2c0 0.5523 -0.4477 1 -1 1s-1 -0.4477 -1 -1v-2H9l-0.10254 -0.0049C8.39333 12.9438 8 12.5177 8 12s0.39333 -0.9438 0.89746 -0.9951L9 11h2V9c0 -0.55228 0.4477 -1 1 -1",strokeWidth:"1"})})})},{name:"Mini Leagues",path:"/tables",icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-7 h-7",children:i.jsx("g",{children:i.jsx("path",{fill:"currentColor",d:"M19.7832 15.2832c0.539 -0.1195 1.0736 0.2208 1.1934 0.7598 0.1193 0.5388 -0.2211 1.0734 -0.7598 1.1933 -1.0253 0.2278 -2.7648 0.5291 -5.2168 0.6758V20.5c0 0.5522 -0.4479 0.9998 -1 1h-4c-0.55215 -0.0002 -1 -0.4478 -1 -1v-2.5879c-2.45196 -0.1467 -4.19154 -0.448 -5.2168 -0.6758 -0.53879 -0.1198 -0.87909 -0.6545 -0.75976 -1.1933 0.11981 -0.539 0.65438 -0.8794 1.19336 -0.7598 1.26394 0.2809 3.85843 0.7178 7.7832 0.7178 3.9247 0 6.5193 -0.4369 7.7832 -0.7178M12 11c1.1044 0.0002 2 0.8955 2 2s-0.8956 1.9998 -2 2c-1.1044 -0.0002 -2 -0.8955 -2 -2s0.8956 -1.9998 2 -2M3.5 9c0.82843 0 1.5 0.67157 1.5 1.5 0 0.8284 -0.67157 1.5 -1.5 1.5S2 11.3284 2 10.5C2 9.67157 2.67157 9 3.5 9m17 0c0.8284 0 1.5 0.67157 1.5 1.5 0 0.8284 -0.6716 1.5 -1.5 1.5s-1.5 -0.6716 -1.5 -1.5c0 -0.82843 0.6716 -1.5 1.5 -1.5m-14 -4.5C7.32843 4.5 8 5.17157 8 6s-0.67157 1.5 -1.5 1.5S5 6.82843 5 6s0.67157 -1.5 1.5 -1.5m11 0c0.8284 0 1.5 0.67157 1.5 1.5s-0.6716 1.5 -1.5 1.5S16 6.82843 16 6s0.6716 -1.5 1.5 -1.5m-5.5 -2c0.8284 0 1.5 0.67157 1.5 1.5s-0.6716 1.5 -1.5 1.5 -1.5 -0.67157 -1.5 -1.5 0.6716 -1.5 1.5 -1.5",strokeWidth:"1"})})})},{name:"Leaderboard",path:"/global",icon:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-7 h-7",children:i.jsx("g",{children:i.jsx("path",{fill:"currentColor",d:"M16 3c1.1046 0 2 0.89543 2 2h2c1.1046 0 2 0.89543 2 2v1c0 2.695 -2.1323 4.89 -4.8018 4.9941 -0.8777 1.5207 -2.4019 2.6195 -4.1982 2.9209V19h3c0.5523 0 1 0.4477 1 1s-0.4477 1 -1 1H8c-0.55228 0 -1 -0.4477 -1 -1s0.44772 -1 1 -1h3v-3.085c-1.7965 -0.3015 -3.32148 -1.4 -4.19922 -2.9209C4.13175 12.8895 2 10.6947 2 8V7c0 -1.10457 0.89543 -2 2 -2h2c0 -1.10457 0.89543 -2 2 -2zm-8 7c0 2.2091 1.79086 4 4 4 2.2091 0 4 -1.7909 4 -4V5H8zM4 8c0 1.32848 0.86419 2.4532 2.06055 2.8477C6.02137 10.5707 6 10.2878 6 10V7H4zm14 2c0 0.2878 -0.0223 0.5706 -0.0615 0.8477C19.1353 10.4535 20 9.32881 20 8V7h-2z",strokeWidth:"1"})})})}];function EF(){const r=ws(),e=Dr(),A=x.useRef(null),n=x.useRef([]),[a,o]=x.useState(null);return x.useEffect(()=>{const c=()=>{const f=Np.findIndex(m=>e.pathname===m.path);if(f>=0&&n.current[f]&&A.current){const m=n.current[f],g=A.current,w=m.getBoundingClientRect(),v=g.getBoundingClientRect(),C=w.height,E=w.left+w.width/2-v.left-C/2,k=w.top+w.height/2-v.top-C/2;o({width:C,left:E,top:k,borderRadius:C/2})}},d=setTimeout(c,0);return window.addEventListener("resize",c),()=>{clearTimeout(d),window.removeEventListener("resize",c)}},[e.pathname]),i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        .bottom-nav-absolute {
          position: fixed !important;
          bottom: 0px !important;
          left: 0px !important;
          right: 0px !important;
          width: 100vw !important;
          max-width: 100vw !important;
          z-index: 9999 !important;
          transform: translate3d(0, 0, 0) !important;
          -webkit-transform: translate3d(0, 0, 0) !important;
          will-change: transform !important;
          contain: layout style paint !important;
        }
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
          .bottom-nav-absolute {
            padding-bottom: env(safe-area-inset-bottom) !important;
          }
        }
        @media (max-height: 800px) {
          .bottom-nav-absolute {
            position: fixed !important;
            bottom: 0px !important;
          }
        }
      `}),i.jsx("div",{className:"bottom-nav-absolute flex items-center justify-center px-4 pb-8",children:i.jsxs("div",{ref:A,className:"bg-[#1C8376] border border-[#178f72] rounded-full shadow-2xl flex items-center max-w-md w-full px-2 py-2 mb-4 relative",style:{boxShadow:"0 15px 35px -5px rgba(0, 0, 0, 0.5), 0 10px 15px -5px rgba(0, 0, 0, 0.4)"},children:[a&&i.jsx("div",{className:"absolute bg-[#178f72]",style:{width:`${a.width}px`,height:`${a.width}px`,left:`${a.left}px`,top:`${a.top}px`,borderRadius:`${a.borderRadius}px`,transition:"all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)"}}),Np.map((c,d)=>{const f=e.pathname===c.path;return i.jsx("button",{ref:m=>{n.current[d]=m},onClick:()=>r(c.path),className:`relative z-10 flex-1 flex items-center justify-center py-3 px-4 rounded-full transition-all duration-300 ${f?"text-white":"text-white/70 hover:text-white"}`,children:i.jsx("div",{className:`relative transition-all duration-300 ${f?"scale-110":"scale-100"}`,children:c.icon})},c.name)})]})})]})}function _F(){return i.jsxs("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-2",children:[i.jsx(IA,{to:"/how-to-play",className:"w-12 h-12 rounded-full bg-[#1C8376] shadow-lg flex items-center justify-center hover:bg-[#178f72] transition-all",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:i.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"How To Play",className:"w-6 h-6"})}),i.jsx(IA,{to:"/profile",className:"w-12 h-12 rounded-full bg-[#1C8376] shadow-lg flex items-center justify-center hover:bg-[#178f72] transition-all",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:i.jsx("img",{src:"/assets/Icons/Person--Streamline-Outlined-Material-Pro_white.png",alt:"Profile",className:"w-6 h-6"})})]})}function QF(){const[r,e]=x.useState(0),[A,n]=x.useState(!1);x.useEffect(()=>{const g=setTimeout(()=>{n(!0)},50);return()=>clearTimeout(g)},[]),x.useEffect(()=>{const g=()=>{e(window.scrollY)};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]);const o=Math.min(1,r/300)*180,c=Math.max(0,1-r/250),d=Math.max(.4,1-r/400),f=r<400,m=A?0:-360;return i.jsx("div",{className:"w-full flex justify-center items-start transition-all duration-200",style:{height:f?"110px":"0px",overflow:"hidden",paddingTop:"16px",paddingBottom:"4px",perspective:"1000px"},children:i.jsx("div",{style:{opacity:r===0?A?1:0:c,transform:r===0?`perspective(1000px) rotateY(${m}deg) scale(1)`:`perspective(1000px) rotateY(${o}deg) scale(${d})`,transformStyle:"preserve-3d",transition:r===0?"opacity 0.6s ease-out, transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)":"opacity 0.2s ease-out, transform 0.2s ease-out"},children:i.jsx("img",{src:"/assets/badges/totl-logo1.svg",alt:"TOTL",className:"h-[74px] sm:h-[92px]",style:{filter:"brightness(0)",backfaceVisibility:"hidden"}})})})}function UF(){const[r,e]=x.useState("signup"),[A,n]=x.useState(""),[a,o]=x.useState(""),[c,d]=x.useState(""),[f,m]=x.useState(""),[g,w]=x.useState(""),[v,y]=x.useState(null),[C,b]=x.useState(!1),[E,S]=x.useState(!1),[k,N]=x.useState(!1),[O,j]=x.useState(!1),L=ws();x.useEffect(()=>{(async()=>{console.log("SignIn page loaded, checking for password reset..."),console.log("Current URL:",window.location.href),console.log("Search params:",window.location.search),console.log("Hash:",window.location.hash);const ae=new URLSearchParams(window.location.search),fe=new URLSearchParams(window.location.hash.substring(1)),P=ae.get("type")==="recovery"||fe.get("type")==="recovery"||window.location.search.includes("type=recovery")||window.location.hash.includes("type=recovery");if(console.log("Is recovery detected:",P),P){console.log("Setting password reset mode"),e("password-reset");return}const{data:{session:ue}}=await z.auth.getSession();if(console.log("Session:",ue),ue?.user){if(window.location.hash.includes("type=recovery")||window.location.search.includes("type=recovery")){console.log("Session-based recovery detected"),e("password-reset");return}if(ue.user.app_metadata?.provider==="email"&&(ue.user.app_metadata?.providers?.includes("email")||window.location.href.includes("recovery")||window.location.href.includes("reset"))){console.log("Password reset session detected"),e("password-reset");return}}})()},[]);async function R(){if(f!==g){y("Passwords do not match");return}if(f.length<6){y("Password must be at least 6 characters");return}y(null),b(!0);try{const{error:W}=await z.auth.updateUser({password:f});if(W)throw W;j(!0),setTimeout(()=>{L("/")},2e3)}catch(W){y(W.message||"Failed to update password")}finally{b(!1)}}async function G(W,ae){W&&(ae&&ae.trim()?await z.from("users").upsert({id:W,name:ae.trim()}):await z.from("users").upsert({id:W}))}async function H(){if(!a.trim()){y("Please enter your email address");return}y(null),b(!0);try{const{error:W}=await z.auth.resetPasswordForEmail(a.trim(),{redirectTo:`${window.location.origin}/auth`});if(W)throw W;N(!0)}catch(W){y(W?.message||"Failed to send reset email")}finally{b(!1)}}async function ve(W){W.preventDefault(),y(null),b(!0);try{if(r==="signup"){const{data:ae,error:fe}=await z.from("users").select("name").eq("name",A.trim()).limit(1);if(fe)throw fe;if(ae&&ae.length>0)throw new Error("Username already taken. Please choose a different name.");const{data:P,error:ue}=await z.auth.signUp({email:a.trim(),password:c,options:{data:{display_name:A.trim()},emailRedirectTo:window.location.origin}});if(ue)throw ue;const Y=P.user??(await z.auth.getUser()).data.user;Y&&await G(Y.id,A),S(!0)}else{const{data:ae,error:fe}=await z.auth.signInWithPassword({email:a.trim(),password:c});if(fe)throw fe;const P=ae.user??(await z.auth.getUser()).data.user;if(P){const ue=P.user_metadata?.display_name;await G(P.id,ue)}L("/",{replace:!0})}}catch(ae){y(ae?.message||"Something went wrong")}finally{b(!1)}}return E?i.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6 pt-20",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl border bg-white p-6 shadow space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold text-center",children:"Check Your Email"}),i.jsxs("div",{className:"text-center space-y-3",children:[i.jsxs("p",{className:"text-slate-600",children:["We've sent you a confirmation link at ",i.jsx("strong",{children:a})]}),i.jsx("p",{className:"text-sm text-slate-500",children:"Click the link in your email to activate your account and start playing TOTL!"}),i.jsx("button",{onClick:()=>S(!1),className:"mt-4 px-4 py-2 text-sm text-emerald-600 hover:text-emerald-700 underline",children:"Back to signup"})]})]})}):k?i.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6 pt-20",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl border bg-white p-6 shadow space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold text-center",children:"Check Your Email"}),i.jsxs("div",{className:"text-center space-y-3",children:[i.jsxs("p",{className:"text-slate-600",children:["We've sent a password reset link to ",i.jsx("strong",{children:a})]}),i.jsx("p",{className:"text-sm text-slate-500",children:"Click the link in your email to reset your password."}),i.jsx("button",{onClick:()=>{N(!1),e("signin")},className:"mt-4 px-4 py-2 text-sm text-emerald-600 hover:text-emerald-700 underline",children:"Back to sign in"})]})]})}):O?i.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6 pt-20",children:i.jsxs("div",{className:"w-full max-w-md rounded-2xl border bg-white p-6 shadow space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold text-center text-green-600",children:"Password Updated!"}),i.jsxs("div",{className:"text-center space-y-3",children:[i.jsx("p",{className:"text-slate-600",children:"Your password has been successfully updated."}),i.jsx("p",{className:"text-sm text-slate-500",children:"Redirecting to home page..."})]})]})}):r==="password-reset"?i.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6 pt-20",children:i.jsxs("form",{onSubmit:W=>{W.preventDefault(),R()},className:"w-full max-w-md rounded-2xl border bg-white p-6 shadow space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:"Set New Password"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"New Password"}),i.jsx("input",{type:"password",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:f,onChange:W=>m(W.target.value),placeholder:"At least 6 characters",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Confirm Password"}),i.jsx("input",{type:"password",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:g,onChange:W=>w(W.target.value),placeholder:"Confirm your new password",required:!0})]}),v&&i.jsx("div",{className:"text-sm text-red-600",children:v}),i.jsx("button",{type:"submit",disabled:C,className:"w-full rounded-xl px-4 py-2 font-semibold bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",children:C?"Updating...":"Update Password"})]})}):i.jsx("div",{className:"min-h-screen flex items-start justify-center bg-gray-50 p-6 pt-20",children:i.jsxs("form",{onSubmit:r==="reset"?W=>{W.preventDefault(),H()}:ve,className:"w-full max-w-md rounded-2xl border bg-white p-6 shadow space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:r==="signup"?"Create your account":r==="reset"?"Reset your password":"Sign in"}),r==="signup"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Display name"}),i.jsx("input",{className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:A,onChange:W=>n(W.target.value),placeholder:"e.g. Thomas B",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Email"}),i.jsx("input",{type:"email",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:a,onChange:W=>o(W.target.value),placeholder:"you@example.com",required:!0})]}),r!=="reset"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Password"}),i.jsx("input",{type:"password",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm",value:c,onChange:W=>d(W.target.value),placeholder:"At least 6 characters",required:!0})]}),v&&i.jsx("div",{className:"text-sm text-red-600",children:v}),i.jsx("button",{type:"submit",disabled:C,className:"w-full rounded-xl px-4 py-2 font-semibold bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",children:C?r==="signup"?"Creating":r==="reset"?"Sending":"Signing in":r==="signup"?"Create account":r==="reset"?"Send reset link":"Sign in"}),i.jsx("div",{className:"text-xs text-slate-500",children:r==="signup"?i.jsxs(i.Fragment,{children:["Already have an account?"," ",i.jsx("button",{type:"button",onClick:()=>e("signin"),className:"underline",children:"Sign in"})]}):r==="reset"?i.jsxs(i.Fragment,{children:["Remember your password?"," ",i.jsx("button",{type:"button",onClick:()=>e("signin"),className:"underline",children:"Sign in"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-2",children:["New here?"," ",i.jsx("button",{type:"button",onClick:()=>e("signup"),className:"underline",children:"Create an account"})]}),i.jsxs("div",{children:["Forgot your password?"," ",i.jsx("button",{type:"button",onClick:()=>e("reset"),className:"underline",children:"Reset it"})]})]})})]})})}function wr({children:r}){const{user:e,loading:A}=or();return A?i.jsx("div",{className:"p-6",children:"Loading"}):e?i.jsx(i.Fragment,{children:r}):i.jsx(Kp,{to:"/auth",replace:!0})}function FF(){return i.jsx(SB,{children:i.jsx(SF,{})})}function SF(){const r=Dr(),e=ws(),{showWelcome:A,dismissWelcome:n}=or();return cs.useEffect(()=>{const a=globalThis?.OneSignal||(typeof window<"u"?window?.OneSignal:null);a&&typeof a.on=="function"&&(a.on("notificationDisplay",c=>{console.log("[Notification] Notification displayed:",c)}),a.on("notificationClick",c=>{console.log("[Notification] Notification clicked:",c);const d=c?.notification?.additionalData||c?.data;d?.url?(console.log("[Notification] Navigating to:",d.url),e(d.url)):d?.leagueCode&&(console.log("[Notification] Navigating to league:",d.leagueCode),e(`/league/${d.leagueCode}`))})),(()=>{const c=window.location.hash,d=new URLSearchParams(window.location.search);if(c&&c.startsWith("#/")){const m=c.slice(1);m.startsWith("/league/")&&e(m)}const f=d.get("leagueCode");f&&e(`/league/${f}`)})()},[e]),i.jsxs(i.Fragment,{children:[r.pathname==="/"&&i.jsx(QF,{}),r.pathname==="/"&&i.jsx(_F,{}),r.pathname!=="/auth"&&!r.pathname.startsWith("/league/")&&i.jsx(CF,{}),A&&i.jsx("div",{className:"fixed top-40 left-1/2 transform -translate-x-1/2 z-50 bg-[#1C8376] text-white px-8 py-5 rounded-lg shadow-lg w-11/12 max-w-4xl",children:i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"text-center pr-10",children:[i.jsx("div",{className:"font-bold text-xl",children:"Welcome to TOTL!"}),i.jsx("div",{className:"text-sm text-[#1C8376]/80 mt-1",children:"Your account is now active. Start making predictions!"})]}),i.jsx("button",{onClick:n,className:"absolute top-0 right-0 text-[#1C8376]/60 hover:text-white text-2xl font-bold","aria-label":"Dismiss",children:""})]})}),i.jsxs(iB,{children:[i.jsx(GA,{path:"/auth",element:i.jsx(UF,{})}),i.jsx(GA,{path:"/new-predictions",element:i.jsx(wr,{children:i.jsx(gF,{})})}),i.jsx(GA,{path:"/test-api-predictions",element:i.jsx(wr,{children:i.jsx(vF,{})})}),i.jsx(GA,{path:"/test-admin-api",element:i.jsx(wr,{children:i.jsx(yF,{})})}),i.jsx(GA,{path:"/",element:i.jsx(wr,{children:i.jsx(dF,{})})}),i.jsx(GA,{path:"/tables",element:i.jsx(wr,{children:i.jsx(gC,{})})}),i.jsx(GA,{path:"/league/:code",element:i.jsx(wr,{children:i.jsx(bC,{})})}),i.jsx(GA,{path:"/predictions",element:i.jsx(wr,{children:i.jsx(QC,{})})}),i.jsx(GA,{path:"/global",element:i.jsx(wr,{children:i.jsx(fF,{})})}),i.jsx(GA,{path:"/profile",element:i.jsx(wr,{children:i.jsx(bF,{})})}),i.jsx(GA,{path:"/how-to-play",element:i.jsx(wr,{children:i.jsx(mF,{})})}),i.jsx(GA,{path:"/create-league",element:i.jsx(wr,{children:i.jsx(hF,{})})}),i.jsx(GA,{path:"/admin",element:i.jsx(wr,{children:i.jsx(NC,{})})}),i.jsx(GA,{path:"*",element:i.jsx(Kp,{to:"/",replace:!0})})]}),r.pathname!=="/auth"&&!r.pathname.startsWith("/league/")&&r.pathname!=="/predictions/swipe"&&i.jsx(EF,{})]})}mv.createRoot(document.getElementById("root")).render(i.jsx(cs.StrictMode,{children:i.jsx(dC,{children:i.jsx(FF,{})})}));
