const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/League-XiRxkBkm.js","assets/TeamBadge-DgFcCB14.js","assets/TestApiPredictions-xZ_GpiSt.js","assets/NotificationCentre-DJD1JinL.js","assets/NotificationSection-CEJl_8Ay.js","assets/EmailPreferences-BA6Pgdu_.js","assets/Stats-D5uoGdtF.js"])))=>i.map(i=>d[i]);
(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();const Sg="modulepreload",kg=function(s){return"/"+s},zf={},Tt=function(n,r,o){let a=Promise.resolve();if(r&&r.length>0){let p=function(g){return Promise.all(g.map(w=>Promise.resolve(w).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");a=p(r.map(g=>{if(g=kg(g),g in zf)return;zf[g]=!0;const w=g.endsWith(".css"),_=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const b=document.createElement("link");if(b.rel=w?"stylesheet":Sg,w||(b.as="script"),b.crossOrigin="",b.href=g,f&&b.setAttribute("nonce",f),document.head.appendChild(b),w)return new Promise((S,P)=>{b.addEventListener("load",S),b.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return a.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return n().catch(l)})};function rc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Eg(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var n=s.default;if(typeof n=="function"){var r=function o(){var a=!1;try{a=this instanceof o}catch{}return a?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(o){var a=Object.getOwnPropertyDescriptor(s,o);Object.defineProperty(r,o,a.get?a:{enumerable:!0,get:function(){return s[o]}})}),r}var du={exports:{}},qi={},fu={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf;function Cg(){if(Wf)return nt;Wf=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function b(v){return v===null||typeof v!="object"?null:(v=_&&v[_]||v["@@iterator"],typeof v=="function"?v:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,N={};function k(v,R,z){this.props=v,this.context=R,this.refs=N,this.updater=z||S}k.prototype.isReactComponent={},k.prototype.setState=function(v,R){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,R,"setState")},k.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function A(){}A.prototype=k.prototype;function j(v,R,z){this.props=v,this.context=R,this.refs=N,this.updater=z||S}var T=j.prototype=new A;T.constructor=j,P(T,k.prototype),T.isPureReactComponent=!0;var $=Array.isArray,M=Object.prototype.hasOwnProperty,Y={current:null},re={key:!0,ref:!0,__self:!0,__source:!0};function Ie(v,R,z){var K,D={},B=null,F=null;if(R!=null)for(K in R.ref!==void 0&&(F=R.ref),R.key!==void 0&&(B=""+R.key),R)M.call(R,K)&&!re.hasOwnProperty(K)&&(D[K]=R[K]);var q=arguments.length-2;if(q===1)D.children=z;else if(1<q){for(var H=Array(q),se=0;se<q;se++)H[se]=arguments[se+2];D.children=H}if(v&&v.defaultProps)for(K in q=v.defaultProps,q)D[K]===void 0&&(D[K]=q[K]);return{$$typeof:s,type:v,key:B,ref:F,props:D,_owner:Y.current}}function Me(v,R){return{$$typeof:s,type:v.type,key:R,ref:v.ref,props:v.props,_owner:v._owner}}function He(v){return typeof v=="object"&&v!==null&&v.$$typeof===s}function Ve(v){var R={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(z){return R[z]})}var rt=/\/+/g;function Ye(v,R){return typeof v=="object"&&v!==null&&v.key!=null?Ve(""+v.key):R.toString(36)}function ut(v,R,z,K,D){var B=typeof v;(B==="undefined"||B==="boolean")&&(v=null);var F=!1;if(v===null)F=!0;else switch(B){case"string":case"number":F=!0;break;case"object":switch(v.$$typeof){case s:case n:F=!0}}if(F)return F=v,D=D(F),v=K===""?"."+Ye(F,0):K,$(D)?(z="",v!=null&&(z=v.replace(rt,"$&/")+"/"),ut(D,R,z,"",function(se){return se})):D!=null&&(He(D)&&(D=Me(D,z+(!D.key||F&&F.key===D.key?"":(""+D.key).replace(rt,"$&/")+"/")+v)),R.push(D)),1;if(F=0,K=K===""?".":K+":",$(v))for(var q=0;q<v.length;q++){B=v[q];var H=K+Ye(B,q);F+=ut(B,R,z,H,D)}else if(H=b(v),typeof H=="function")for(v=H.call(v),q=0;!(B=v.next()).done;)B=B.value,H=K+Ye(B,q++),F+=ut(B,R,z,H,D);else if(B==="object")throw R=String(v),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return F}function ue(v,R,z){if(v==null)return v;var K=[],D=0;return ut(v,K,"","",function(B){return R.call(z,B,D++)}),K}function Se(v){if(v._status===-1){var R=v._result;R=R(),R.then(function(z){(v._status===0||v._status===-1)&&(v._status=1,v._result=z)},function(z){(v._status===0||v._status===-1)&&(v._status=2,v._result=z)}),v._status===-1&&(v._status=0,v._result=R)}if(v._status===1)return v._result.default;throw v._result}var Pe={current:null},te={transition:null},we={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:te,ReactCurrentOwner:Y};function C(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:ue,forEach:function(v,R,z){ue(v,function(){R.apply(this,arguments)},z)},count:function(v){var R=0;return ue(v,function(){R++}),R},toArray:function(v){return ue(v,function(R){return R})||[]},only:function(v){if(!He(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},nt.Component=k,nt.Fragment=r,nt.Profiler=a,nt.PureComponent=j,nt.StrictMode=o,nt.Suspense=p,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,nt.act=C,nt.cloneElement=function(v,R,z){if(v==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+v+".");var K=P({},v.props),D=v.key,B=v.ref,F=v._owner;if(R!=null){if(R.ref!==void 0&&(B=R.ref,F=Y.current),R.key!==void 0&&(D=""+R.key),v.type&&v.type.defaultProps)var q=v.type.defaultProps;for(H in R)M.call(R,H)&&!re.hasOwnProperty(H)&&(K[H]=R[H]===void 0&&q!==void 0?q[H]:R[H])}var H=arguments.length-2;if(H===1)K.children=z;else if(1<H){q=Array(H);for(var se=0;se<H;se++)q[se]=arguments[se+2];K.children=q}return{$$typeof:s,type:v.type,key:D,ref:B,props:K,_owner:F}},nt.createContext=function(v){return v={$$typeof:c,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},v.Provider={$$typeof:l,_context:v},v.Consumer=v},nt.createElement=Ie,nt.createFactory=function(v){var R=Ie.bind(null,v);return R.type=v,R},nt.createRef=function(){return{current:null}},nt.forwardRef=function(v){return{$$typeof:f,render:v}},nt.isValidElement=He,nt.lazy=function(v){return{$$typeof:w,_payload:{_status:-1,_result:v},_init:Se}},nt.memo=function(v,R){return{$$typeof:g,type:v,compare:R===void 0?null:R}},nt.startTransition=function(v){var R=te.transition;te.transition={};try{v()}finally{te.transition=R}},nt.unstable_act=C,nt.useCallback=function(v,R){return Pe.current.useCallback(v,R)},nt.useContext=function(v){return Pe.current.useContext(v)},nt.useDebugValue=function(){},nt.useDeferredValue=function(v){return Pe.current.useDeferredValue(v)},nt.useEffect=function(v,R){return Pe.current.useEffect(v,R)},nt.useId=function(){return Pe.current.useId()},nt.useImperativeHandle=function(v,R,z){return Pe.current.useImperativeHandle(v,R,z)},nt.useInsertionEffect=function(v,R){return Pe.current.useInsertionEffect(v,R)},nt.useLayoutEffect=function(v,R){return Pe.current.useLayoutEffect(v,R)},nt.useMemo=function(v,R){return Pe.current.useMemo(v,R)},nt.useReducer=function(v,R,z){return Pe.current.useReducer(v,R,z)},nt.useRef=function(v){return Pe.current.useRef(v)},nt.useState=function(v){return Pe.current.useState(v)},nt.useSyncExternalStore=function(v,R,z){return Pe.current.useSyncExternalStore(v,R,z)},nt.useTransition=function(){return Pe.current.useTransition()},nt.version="18.3.1",nt}var Hf;function sc(){return Hf||(Hf=1,fu.exports=Cg()),fu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function Pg(){if(Vf)return qi;Vf=1;var s=sc(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,g){var w,_={},b=null,S=null;g!==void 0&&(b=""+g),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(S=p.ref);for(w in p)o.call(p,w)&&!l.hasOwnProperty(w)&&(_[w]=p[w]);if(f&&f.defaultProps)for(w in p=f.defaultProps,p)_[w]===void 0&&(_[w]=p[w]);return{$$typeof:n,type:f,key:b,ref:S,props:_,_owner:a.current}}return qi.Fragment=r,qi.jsx=c,qi.jsxs=c,qi}var qf;function jg(){return qf||(qf=1,du.exports=Pg()),du.exports}var h=jg(),x=sc();const Cn=rc(x);var da={},hu={exports:{}},dn={},mu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function Rg(){return Kf||(Kf=1,(function(s){function n(te,we){var C=te.length;te.push(we);e:for(;0<C;){var v=C-1>>>1,R=te[v];if(0<a(R,we))te[v]=we,te[C]=R,C=v;else break e}}function r(te){return te.length===0?null:te[0]}function o(te){if(te.length===0)return null;var we=te[0],C=te.pop();if(C!==we){te[0]=C;e:for(var v=0,R=te.length,z=R>>>1;v<z;){var K=2*(v+1)-1,D=te[K],B=K+1,F=te[B];if(0>a(D,C))B<R&&0>a(F,D)?(te[v]=F,te[B]=C,v=B):(te[v]=D,te[K]=C,v=K);else if(B<R&&0>a(F,C))te[v]=F,te[B]=C,v=B;else break e}}return we}function a(te,we){var C=te.sortIndex-we.sortIndex;return C!==0?C:te.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();s.unstable_now=function(){return c.now()-f}}var p=[],g=[],w=1,_=null,b=3,S=!1,P=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(te){for(var we=r(g);we!==null;){if(we.callback===null)o(g);else if(we.startTime<=te)o(g),we.sortIndex=we.expirationTime,n(p,we);else break;we=r(g)}}function $(te){if(N=!1,T(te),!P)if(r(p)!==null)P=!0,Se(M);else{var we=r(g);we!==null&&Pe($,we.startTime-te)}}function M(te,we){P=!1,N&&(N=!1,A(Ie),Ie=-1),S=!0;var C=b;try{for(T(we),_=r(p);_!==null&&(!(_.expirationTime>we)||te&&!Ve());){var v=_.callback;if(typeof v=="function"){_.callback=null,b=_.priorityLevel;var R=v(_.expirationTime<=we);we=s.unstable_now(),typeof R=="function"?_.callback=R:_===r(p)&&o(p),T(we)}else o(p);_=r(p)}if(_!==null)var z=!0;else{var K=r(g);K!==null&&Pe($,K.startTime-we),z=!1}return z}finally{_=null,b=C,S=!1}}var Y=!1,re=null,Ie=-1,Me=5,He=-1;function Ve(){return!(s.unstable_now()-He<Me)}function rt(){if(re!==null){var te=s.unstable_now();He=te;var we=!0;try{we=re(!0,te)}finally{we?Ye():(Y=!1,re=null)}}else Y=!1}var Ye;if(typeof j=="function")Ye=function(){j(rt)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,ue=ut.port2;ut.port1.onmessage=rt,Ye=function(){ue.postMessage(null)}}else Ye=function(){k(rt,0)};function Se(te){re=te,Y||(Y=!0,Ye())}function Pe(te,we){Ie=k(function(){te(s.unstable_now())},we)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_continueExecution=function(){P||S||(P=!0,Se(M))},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_getFirstCallbackNode=function(){return r(p)},s.unstable_next=function(te){switch(b){case 1:case 2:case 3:var we=3;break;default:we=b}var C=b;b=we;try{return te()}finally{b=C}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(te,we){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var C=b;b=te;try{return we()}finally{b=C}},s.unstable_scheduleCallback=function(te,we,C){var v=s.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?v+C:v):C=v,te){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=C+R,te={id:w++,callback:we,priorityLevel:te,startTime:C,expirationTime:R,sortIndex:-1},C>v?(te.sortIndex=C,n(g,te),r(p)===null&&te===r(g)&&(N?(A(Ie),Ie=-1):N=!0,Pe($,C-v))):(te.sortIndex=R,n(p,te),P||S||(P=!0,Se(M))),te},s.unstable_shouldYield=Ve,s.unstable_wrapCallback=function(te){var we=b;return function(){var C=b;b=we;try{return te.apply(this,arguments)}finally{b=C}}}})(pu)),pu}var Jf;function Tg(){return Jf||(Jf=1,mu.exports=Rg()),mu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf;function Ng(){if(Yf)return dn;Yf=1;var s=sc(),n=Tg();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function b(e){return p.call(_,e)?!0:p.call(w,e)?!1:g.test(e)?_[e]=!0:(w[e]=!0,!1)}function S(e,t,i,u){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P(e,t,i,u){if(t===null||typeof t>"u"||S(e,t,i,u))return!0;if(u)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function N(e,t,i,u,d,m,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=y}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new N(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];k[t]=new N(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new N(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new N(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new N(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new N(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new N(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new N(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new N(e,5,!1,e.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function j(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A,j);k[t]=new N(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A,j);k[t]=new N(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A,j);k[t]=new N(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new N(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new N(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,t,i,u){var d=k.hasOwnProperty(t)?k[t]:null;(d!==null?d.type!==0:u||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(P(t,i,d,u)&&(i=null),u||d===null?b(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):d.mustUseProperty?e[d.propertyName]=i===null?d.type===3?!1:"":i:(t=d.attributeName,u=d.attributeNamespace,i===null?e.removeAttribute(t):(d=d.type,i=d===3||d===4&&i===!0?"":""+i,u?e.setAttributeNS(u,t,i):e.setAttribute(t,i))))}var $=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),Y=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),Ie=Symbol.for("react.strict_mode"),Me=Symbol.for("react.profiler"),He=Symbol.for("react.provider"),Ve=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),Ye=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),te=Symbol.iterator;function we(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var C=Object.assign,v;function R(e){if(v===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);v=t&&t[1]||""}return`
`+v+e}var z=!1;function K(e,t){if(!e||z)return"";z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(W){var u=W}Reflect.construct(e,[],t)}else{try{t.call()}catch(W){u=W}e.call(t.prototype)}else{try{throw Error()}catch(W){u=W}e()}}catch(W){if(W&&u&&typeof W.stack=="string"){for(var d=W.stack.split(`
`),m=u.stack.split(`
`),y=d.length-1,E=m.length-1;1<=y&&0<=E&&d[y]!==m[E];)E--;for(;1<=y&&0<=E;y--,E--)if(d[y]!==m[E]){if(y!==1||E!==1)do if(y--,E--,0>E||d[y]!==m[E]){var L=`
`+d[y].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=y&&0<=E);break}}}finally{z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?R(e):""}function D(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1),e;case 11:return e=K(e.type.render,!1),e;case 1:return e=K(e.type,!0),e;default:return""}}function B(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case re:return"Fragment";case Y:return"Portal";case Me:return"Profiler";case Ie:return"StrictMode";case Ye:return"Suspense";case ut:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ve:return(e.displayName||"Context")+".Consumer";case He:return(e._context.displayName||"Context")+".Provider";case rt:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ue:return t=e.displayName||null,t!==null?t:B(e.type)||"Memo";case Se:t=e._payload,e=e._init;try{return B(e(t))}catch{}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===Ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function se(e){var t=H(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,m=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){u=""+y,m.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ke(e){e._valueTracker||(e._valueTracker=se(e))}function ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),u="";return e&&(u=H(e)?e.checked?"true":"false":e.value),e=u,e!==i?(t.setValue(e),!0):!1}function pe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function O(e,t){var i=t.checked;return C({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function V(e,t){var i=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;i=q(t.value!=null?t.value:i),e._wrapperState={initialChecked:u,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ge(e,t){t=t.checked,t!=null&&T(e,"checked",t,!1)}function J(e,t){ge(e,t);var i=q(t.value),u=t.type;if(i!=null)u==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?X(e,t.type,i):t.hasOwnProperty("defaultValue")&&X(e,t.type,q(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function X(e,t,i){(t!=="number"||pe(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var ce=Array.isArray;function qe(e,t,i,u){if(e=e.options,t){t={};for(var d=0;d<i.length;d++)t["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=t.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&u&&(e[i].defaultSelected=!0)}else{for(i=""+q(i),t=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,u&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Ze(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return C({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function st(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(r(92));if(ce(i)){if(1<i.length)throw Error(r(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:q(i)}}function at(e,t){var i=q(t.value),u=q(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),u!=null&&(e.defaultValue=""+u)}function jt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _t(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ne(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_t(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var de,Q=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,u,d){MSApp.execUnsafeLocalFunction(function(){return e(t,i,u,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(de=de||document.createElement("div"),de.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ye(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Ee={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},De=["Webkit","ms","Moz","O"];Object.keys(Ee).forEach(function(e){De.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ee[t]=Ee[e]})});function Oe(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Ee.hasOwnProperty(e)&&Ee[e]?(""+t).trim():t+"px"}function be(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var u=i.indexOf("--")===0,d=Oe(i,t[i],u);i==="float"&&(i="cssFloat"),u?e.setProperty(i,d):e[i]=d}}var kt=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(kt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function $e(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ze=null;function ae(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fe=null,Ce=null,tt=null;function it(e){if(e=Li(e)){if(typeof fe!="function")throw Error(r(280));var t=e.stateNode;t&&(t=Co(t),fe(e.stateNode,e.type,t))}}function ct(e){Ce?tt?tt.push(e):tt=[e]:Ce=e}function dt(){if(Ce){var e=Ce,t=tt;if(tt=Ce=null,it(e),t)for(e=0;e<t.length;e++)it(t[e])}}function hn(e,t){return e(t)}function kr(){}var jn=!1;function tr(e,t,i){if(jn)return e(t,i);jn=!0;try{return hn(e,t,i)}finally{jn=!1,(Ce!==null||tt!==null)&&(kr(),dt())}}function Fn(e,t){var i=e.stateNode;if(i===null)return null;var u=Co(i);if(u===null)return null;i=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var Yr=!1;if(f)try{var mn={};Object.defineProperty(mn,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",mn,mn),window.removeEventListener("test",mn,mn)}catch{Yr=!1}function Rn(e,t,i,u,d,m,y,E,L){var W=Array.prototype.slice.call(arguments,3);try{t.apply(i,W)}catch(oe){this.onError(oe)}}var pn=!1,Bn=null,Ss=!1,gn=null,Gn={onError:function(e){pn=!0,Bn=e}};function xe(e,t,i,u,d,m,y,E,L){pn=!1,Bn=null,Rn.apply(Gn,arguments)}function Xe(e,t,i,u,d,m,y,E,L){if(xe.apply(this,arguments),pn){if(pn){var W=Bn;pn=!1,Bn=null}else throw Error(r(198));Ss||(Ss=!0,gn=W)}}function et(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function cr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nr(e){if(et(e)!==e)throw Error(r(188))}function ks(e){var t=e.alternate;if(!t){if(t=et(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,u=t;;){var d=i.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){i=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===i)return nr(d),e;if(m===u)return nr(d),t;m=m.sibling}throw Error(r(188))}if(i.return!==u.return)i=d,u=m;else{for(var y=!1,E=d.child;E;){if(E===i){y=!0,i=d,u=m;break}if(E===u){y=!0,u=d,i=m;break}E=E.sibling}if(!y){for(E=m.child;E;){if(E===i){y=!0,i=m,u=d;break}if(E===u){y=!0,u=m,i=d;break}E=E.sibling}if(!y)throw Error(r(189))}}if(i.alternate!==u)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function wn(e){return e=ks(e),e!==null?_e(e):null}function _e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_e(e);if(t!==null)return t;e=e.sibling}return null}var Qe=n.unstable_scheduleCallback,gt=n.unstable_cancelCallback,Nt=n.unstable_shouldYield,rn=n.unstable_requestPaint,Ge=n.unstable_now,Tn=n.unstable_getCurrentPriorityLevel,dr=n.unstable_ImmediatePriority,Bt=n.unstable_UserBlockingPriority,Nn=n.unstable_NormalPriority,Es=n.unstable_LowPriority,Na=n.unstable_IdlePriority,Qr=null,Ln=null;function lo(e){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Qr,e,void 0,(e.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:Ia,pi=Math.log,La=Math.LN2;function Ia(e){return e>>>=0,e===0?32:31-(pi(e)/La|0)|0}var Cs=64,Ne=4194304;function Ke(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var i=e.pendingLanes;if(i===0)return 0;var u=0,d=e.suspendedLanes,m=e.pingedLanes,y=i&268435455;if(y!==0){var E=y&~d;E!==0?u=Ke(E):(m&=y,m!==0&&(u=Ke(m)))}else y=i&~d,y!==0?u=Ke(y):m!==0&&(u=Ke(m));if(u===0)return 0;if(t!==0&&t!==u&&(t&d)===0&&(d=u&-u,m=t&-t,d>=m||d===16&&(m&4194240)!==0))return t;if((u&4)!==0&&(u|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)i=31-vn(t),d=1<<i,u|=e[i],t&=~d;return u}function fr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(e,t){for(var i=e.suspendedLanes,u=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes;0<m;){var y=31-vn(m),E=1<<y,L=d[y];L===-1?((E&i)===0||(E&u)!==0)&&(d[y]=fr(E,t)):L<=t&&(e.expiredLanes|=E),m&=~E}}function wt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zr(){var e=Cs;return Cs<<=1,(Cs&4194240)===0&&(Cs=64),e}function Xr(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function sn(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vn(t),e[t]=i}function uo(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<i;){var d=31-vn(i),m=1<<d;t[d]=0,u[d]=-1,e[d]=-1,i&=~m}}function Oa(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var u=31-vn(i),d=1<<u;d&t|e[u]&t&&(e[u]|=t),i&=~d}}var ft=0;function _c(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var xc,Aa,bc,Sc,kc,Ma=!1,co=[],Cr=null,Pr=null,jr=null,gi=new Map,wi=new Map,Rr=[],Hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ec(e,t){switch(e){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":gi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wi.delete(t.pointerId)}}function vi(e,t,i,u,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:i,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},t!==null&&(t=Li(t),t!==null&&Aa(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Vm(e,t,i,u,d){switch(t){case"focusin":return Cr=vi(Cr,e,t,i,u,d),!0;case"dragenter":return Pr=vi(Pr,e,t,i,u,d),!0;case"mouseover":return jr=vi(jr,e,t,i,u,d),!0;case"pointerover":var m=d.pointerId;return gi.set(m,vi(gi.get(m)||null,e,t,i,u,d)),!0;case"gotpointercapture":return m=d.pointerId,wi.set(m,vi(wi.get(m)||null,e,t,i,u,d)),!0}return!1}function Cc(e){var t=es(e.target);if(t!==null){var i=et(t);if(i!==null){if(t=i.tag,t===13){if(t=cr(i),t!==null){e.blockedOn=t,kc(e.priority,function(){bc(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Da(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var u=new i.constructor(i.type,i);ze=u,i.target.dispatchEvent(u),ze=null}else return t=Li(i),t!==null&&Aa(t),e.blockedOn=i,!1;t.shift()}return!0}function Pc(e,t,i){fo(e)&&i.delete(t)}function qm(){Ma=!1,Cr!==null&&fo(Cr)&&(Cr=null),Pr!==null&&fo(Pr)&&(Pr=null),jr!==null&&fo(jr)&&(jr=null),gi.forEach(Pc),wi.forEach(Pc)}function yi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ma||(Ma=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qm)))}function _i(e){function t(d){return yi(d,e)}if(0<co.length){yi(co[0],e);for(var i=1;i<co.length;i++){var u=co[i];u.blockedOn===e&&(u.blockedOn=null)}}for(Cr!==null&&yi(Cr,e),Pr!==null&&yi(Pr,e),jr!==null&&yi(jr,e),gi.forEach(t),wi.forEach(t),i=0;i<Rr.length;i++)u=Rr[i],u.blockedOn===e&&(u.blockedOn=null);for(;0<Rr.length&&(i=Rr[0],i.blockedOn===null);)Cc(i),i.blockedOn===null&&Rr.shift()}var Ps=$.ReactCurrentBatchConfig,ho=!0;function Km(e,t,i,u){var d=ft,m=Ps.transition;Ps.transition=null;try{ft=1,$a(e,t,i,u)}finally{ft=d,Ps.transition=m}}function Jm(e,t,i,u){var d=ft,m=Ps.transition;Ps.transition=null;try{ft=4,$a(e,t,i,u)}finally{ft=d,Ps.transition=m}}function $a(e,t,i,u){if(ho){var d=Da(e,t,i,u);if(d===null)tl(e,t,u,mo,i),Ec(e,u);else if(Vm(d,e,t,i,u))u.stopPropagation();else if(Ec(e,u),t&4&&-1<Hm.indexOf(e)){for(;d!==null;){var m=Li(d);if(m!==null&&xc(m),m=Da(e,t,i,u),m===null&&tl(e,t,u,mo,i),m===d)break;d=m}d!==null&&u.stopPropagation()}else tl(e,t,u,null,i)}}var mo=null;function Da(e,t,i,u){if(mo=null,e=ae(u),e=es(e),e!==null)if(t=et(e),t===null)e=null;else if(i=t.tag,i===13){if(e=cr(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mo=e,null}function jc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tn()){case dr:return 1;case Bt:return 4;case Nn:case Es:return 16;case Na:return 536870912;default:return 16}default:return 16}}var Tr=null,Ua=null,po=null;function Rc(){if(po)return po;var e,t=Ua,i=t.length,u,d="value"in Tr?Tr.value:Tr.textContent,m=d.length;for(e=0;e<i&&t[e]===d[e];e++);var y=i-e;for(u=1;u<=y&&t[i-u]===d[m-u];u++);return po=d.slice(e,1<u?1-u:void 0)}function go(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wo(){return!0}function Tc(){return!1}function yn(e){function t(i,u,d,m,y){this._reactName=i,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(i=e[E],this[E]=i?i(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?wo:Tc,this.isPropagationStopped=Tc,this}return C(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=wo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=wo)},persist:function(){},isPersistent:wo}),t}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fa=yn(js),xi=C({},js,{view:0,detail:0}),Ym=yn(xi),Ba,Ga,bi,vo=C({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bi&&(bi&&e.type==="mousemove"?(Ba=e.screenX-bi.screenX,Ga=e.screenY-bi.screenY):Ga=Ba=0,bi=e),Ba)},movementY:function(e){return"movementY"in e?e.movementY:Ga}}),Nc=yn(vo),Qm=C({},vo,{dataTransfer:0}),Zm=yn(Qm),Xm=C({},xi,{relatedTarget:0}),za=yn(Xm),ep=C({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),tp=yn(ep),np=C({},js,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rp=yn(np),sp=C({},js,{data:0}),Lc=yn(sp),ip={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ap[e])?!!t[e]:!1}function Wa(){return lp}var up=C({},xi,{key:function(e){if(e.key){var t=ip[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=go(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?op[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(e){return e.type==="keypress"?go(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?go(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cp=yn(up),dp=C({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ic=yn(dp),fp=C({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),hp=yn(fp),mp=C({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),pp=yn(mp),gp=C({},vo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wp=yn(gp),vp=[9,13,27,32],Ha=f&&"CompositionEvent"in window,Si=null;f&&"documentMode"in document&&(Si=document.documentMode);var yp=f&&"TextEvent"in window&&!Si,Oc=f&&(!Ha||Si&&8<Si&&11>=Si),Ac=" ",Mc=!1;function $c(e,t){switch(e){case"keyup":return vp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rs=!1;function _p(e,t){switch(e){case"compositionend":return Dc(t);case"keypress":return t.which!==32?null:(Mc=!0,Ac);case"textInput":return e=t.data,e===Ac&&Mc?null:e;default:return null}}function xp(e,t){if(Rs)return e==="compositionend"||!Ha&&$c(e,t)?(e=Rc(),po=Ua=Tr=null,Rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oc&&t.locale!=="ko"?null:t.data;default:return null}}var bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bp[e.type]:t==="textarea"}function Fc(e,t,i,u){ct(u),t=So(t,"onChange"),0<t.length&&(i=new Fa("onChange","change",null,i,u),e.push({event:i,listeners:t}))}var ki=null,Ei=null;function Sp(e){sd(e,0)}function yo(e){var t=Os(e);if(ve(t))return e}function kp(e,t){if(e==="change")return t}var Bc=!1;if(f){var Va;if(f){var qa="oninput"in document;if(!qa){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),qa=typeof Gc.oninput=="function"}Va=qa}else Va=!1;Bc=Va&&(!document.documentMode||9<document.documentMode)}function zc(){ki&&(ki.detachEvent("onpropertychange",Wc),Ei=ki=null)}function Wc(e){if(e.propertyName==="value"&&yo(Ei)){var t=[];Fc(t,Ei,e,ae(e)),tr(Sp,t)}}function Ep(e,t,i){e==="focusin"?(zc(),ki=t,Ei=i,ki.attachEvent("onpropertychange",Wc)):e==="focusout"&&zc()}function Cp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yo(Ei)}function Pp(e,t){if(e==="click")return yo(t)}function jp(e,t){if(e==="input"||e==="change")return yo(t)}function Rp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:Rp;function Ci(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),u=Object.keys(t);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++){var d=i[u];if(!p.call(t,d)||!zn(e[d],t[d]))return!1}return!0}function Hc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vc(e,t){var i=Hc(e);e=0;for(var u;i;){if(i.nodeType===3){if(u=e+i.textContent.length,e<=t&&u>=t)return{node:i,offset:t-e};e=u}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Hc(i)}}function qc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kc(){for(var e=window,t=pe();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=pe(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Tp(e){var t=Kc(),i=e.focusedElem,u=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&qc(i.ownerDocument.documentElement,i)){if(u!==null&&Ka(i)){if(t=u.start,e=u.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=i.textContent.length,m=Math.min(u.start,d);u=u.end===void 0?m:Math.min(u.end,d),!e.extend&&m>u&&(d=u,u=m,m=d),d=Vc(i,m);var y=Vc(i,u);d&&y&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),m>u?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Np=f&&"documentMode"in document&&11>=document.documentMode,Ts=null,Ja=null,Pi=null,Ya=!1;function Jc(e,t,i){var u=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ya||Ts==null||Ts!==pe(u)||(u=Ts,"selectionStart"in u&&Ka(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pi&&Ci(Pi,u)||(Pi=u,u=So(Ja,"onSelect"),0<u.length&&(t=new Fa("onSelect","select",null,t,i),e.push({event:t,listeners:u}),t.target=Ts)))}function _o(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ns={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionend:_o("Transition","TransitionEnd")},Qa={},Yc={};f&&(Yc=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function xo(e){if(Qa[e])return Qa[e];if(!Ns[e])return e;var t=Ns[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Yc)return Qa[e]=t[i];return e}var Qc=xo("animationend"),Zc=xo("animationiteration"),Xc=xo("animationstart"),ed=xo("transitionend"),td=new Map,nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){td.set(e,t),l(t,[e])}for(var Za=0;Za<nd.length;Za++){var Xa=nd[Za],Lp=Xa.toLowerCase(),Ip=Xa[0].toUpperCase()+Xa.slice(1);Nr(Lp,"on"+Ip)}Nr(Qc,"onAnimationEnd"),Nr(Zc,"onAnimationIteration"),Nr(Xc,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(ed,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Op=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function rd(e,t,i){var u=e.type||"unknown-event";e.currentTarget=i,Xe(u,t,void 0,e),e.currentTarget=null}function sd(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var u=e[i],d=u.event;u=u.listeners;e:{var m=void 0;if(t)for(var y=u.length-1;0<=y;y--){var E=u[y],L=E.instance,W=E.currentTarget;if(E=E.listener,L!==m&&d.isPropagationStopped())break e;rd(d,E,W),m=L}else for(y=0;y<u.length;y++){if(E=u[y],L=E.instance,W=E.currentTarget,E=E.listener,L!==m&&d.isPropagationStopped())break e;rd(d,E,W),m=L}}}if(Ss)throw e=gn,Ss=!1,gn=null,e}function vt(e,t){var i=t[al];i===void 0&&(i=t[al]=new Set);var u=e+"__bubble";i.has(u)||(id(t,e,2,!1),i.add(u))}function el(e,t,i){var u=0;t&&(u|=4),id(i,e,u,t)}var bo="_reactListening"+Math.random().toString(36).slice(2);function Ri(e){if(!e[bo]){e[bo]=!0,o.forEach(function(i){i!=="selectionchange"&&(Op.has(i)||el(i,!1,e),el(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bo]||(t[bo]=!0,el("selectionchange",!1,t))}}function id(e,t,i,u){switch(jc(t)){case 1:var d=Km;break;case 4:d=Jm;break;default:d=$a}i=d.bind(null,t,i,e),d=void 0,!Yr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),u?d!==void 0?e.addEventListener(t,i,{capture:!0,passive:d}):e.addEventListener(t,i,!0):d!==void 0?e.addEventListener(t,i,{passive:d}):e.addEventListener(t,i,!1)}function tl(e,t,i,u,d){var m=u;if((t&1)===0&&(t&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var E=u.stateNode.containerInfo;if(E===d||E.nodeType===8&&E.parentNode===d)break;if(y===4)for(y=u.return;y!==null;){var L=y.tag;if((L===3||L===4)&&(L=y.stateNode.containerInfo,L===d||L.nodeType===8&&L.parentNode===d))return;y=y.return}for(;E!==null;){if(y=es(E),y===null)return;if(L=y.tag,L===5||L===6){u=m=y;continue e}E=E.parentNode}}u=u.return}tr(function(){var W=m,oe=ae(i),le=[];e:{var ie=td.get(e);if(ie!==void 0){var je=Fa,Te=e;switch(e){case"keypress":if(go(i)===0)break e;case"keydown":case"keyup":je=cp;break;case"focusin":Te="focus",je=za;break;case"focusout":Te="blur",je=za;break;case"beforeblur":case"afterblur":je=za;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=hp;break;case Qc:case Zc:case Xc:je=tp;break;case ed:je=pp;break;case"scroll":je=Ym;break;case"wheel":je=wp;break;case"copy":case"cut":case"paste":je=rp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Ic}var Le=(t&4)!==0,Lt=!Le&&e==="scroll",U=Le?ie!==null?ie+"Capture":null:ie;Le=[];for(var I=W,G;I!==null;){G=I;var he=G.stateNode;if(G.tag===5&&he!==null&&(G=he,U!==null&&(he=Fn(I,U),he!=null&&Le.push(Ti(I,he,G)))),Lt)break;I=I.return}0<Le.length&&(ie=new je(ie,Te,null,i,oe),le.push({event:ie,listeners:Le}))}}if((t&7)===0){e:{if(ie=e==="mouseover"||e==="pointerover",je=e==="mouseout"||e==="pointerout",ie&&i!==ze&&(Te=i.relatedTarget||i.fromElement)&&(es(Te)||Te[hr]))break e;if((je||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,je?(Te=i.relatedTarget||i.toElement,je=W,Te=Te?es(Te):null,Te!==null&&(Lt=et(Te),Te!==Lt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(je=null,Te=W),je!==Te)){if(Le=Nc,he="onMouseLeave",U="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(Le=Ic,he="onPointerLeave",U="onPointerEnter",I="pointer"),Lt=je==null?ie:Os(je),G=Te==null?ie:Os(Te),ie=new Le(he,I+"leave",je,i,oe),ie.target=Lt,ie.relatedTarget=G,he=null,es(oe)===W&&(Le=new Le(U,I+"enter",Te,i,oe),Le.target=G,Le.relatedTarget=Lt,he=Le),Lt=he,je&&Te)t:{for(Le=je,U=Te,I=0,G=Le;G;G=Ls(G))I++;for(G=0,he=U;he;he=Ls(he))G++;for(;0<I-G;)Le=Ls(Le),I--;for(;0<G-I;)U=Ls(U),G--;for(;I--;){if(Le===U||U!==null&&Le===U.alternate)break t;Le=Ls(Le),U=Ls(U)}Le=null}else Le=null;je!==null&&od(le,ie,je,Le,!1),Te!==null&&Lt!==null&&od(le,Lt,Te,Le,!0)}}e:{if(ie=W?Os(W):window,je=ie.nodeName&&ie.nodeName.toLowerCase(),je==="select"||je==="input"&&ie.type==="file")var Ae=kp;else if(Uc(ie))if(Bc)Ae=jp;else{Ae=Cp;var Ue=Ep}else(je=ie.nodeName)&&je.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ae=Pp);if(Ae&&(Ae=Ae(e,W))){Fc(le,Ae,i,oe);break e}Ue&&Ue(e,ie,W),e==="focusout"&&(Ue=ie._wrapperState)&&Ue.controlled&&ie.type==="number"&&X(ie,"number",ie.value)}switch(Ue=W?Os(W):window,e){case"focusin":(Uc(Ue)||Ue.contentEditable==="true")&&(Ts=Ue,Ja=W,Pi=null);break;case"focusout":Pi=Ja=Ts=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,Jc(le,i,oe);break;case"selectionchange":if(Np)break;case"keydown":case"keyup":Jc(le,i,oe)}var Fe;if(Ha)e:{switch(e){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Rs?$c(e,i)&&(We="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(We="onCompositionStart");We&&(Oc&&i.locale!=="ko"&&(Rs||We!=="onCompositionStart"?We==="onCompositionEnd"&&Rs&&(Fe=Rc()):(Tr=oe,Ua="value"in Tr?Tr.value:Tr.textContent,Rs=!0)),Ue=So(W,We),0<Ue.length&&(We=new Lc(We,e,null,i,oe),le.push({event:We,listeners:Ue}),Fe?We.data=Fe:(Fe=Dc(i),Fe!==null&&(We.data=Fe)))),(Fe=yp?_p(e,i):xp(e,i))&&(W=So(W,"onBeforeInput"),0<W.length&&(oe=new Lc("onBeforeInput","beforeinput",null,i,oe),le.push({event:oe,listeners:W}),oe.data=Fe))}sd(le,t)})}function Ti(e,t,i){return{instance:e,listener:t,currentTarget:i}}function So(e,t){for(var i=t+"Capture",u=[];e!==null;){var d=e,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=Fn(e,i),m!=null&&u.unshift(Ti(e,m,d)),m=Fn(e,t),m!=null&&u.push(Ti(e,m,d))),e=e.return}return u}function Ls(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function od(e,t,i,u,d){for(var m=t._reactName,y=[];i!==null&&i!==u;){var E=i,L=E.alternate,W=E.stateNode;if(L!==null&&L===u)break;E.tag===5&&W!==null&&(E=W,d?(L=Fn(i,m),L!=null&&y.unshift(Ti(i,L,E))):d||(L=Fn(i,m),L!=null&&y.push(Ti(i,L,E)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var Ap=/\r\n?/g,Mp=/\u0000|\uFFFD/g;function ad(e){return(typeof e=="string"?e:""+e).replace(Ap,`
`).replace(Mp,"")}function ko(e,t,i){if(t=ad(t),ad(e)!==t&&i)throw Error(r(425))}function Eo(){}var nl=null,rl=null;function sl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var il=typeof setTimeout=="function"?setTimeout:void 0,$p=typeof clearTimeout=="function"?clearTimeout:void 0,ld=typeof Promise=="function"?Promise:void 0,Dp=typeof queueMicrotask=="function"?queueMicrotask:typeof ld<"u"?function(e){return ld.resolve(null).then(e).catch(Up)}:il;function Up(e){setTimeout(function(){throw e})}function ol(e,t){var i=t,u=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(u===0){e.removeChild(d),_i(t);return}u--}else i!=="$"&&i!=="$?"&&i!=="$!"||u++;i=d}while(i);_i(t)}function Lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ud(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Is=Math.random().toString(36).slice(2),rr="__reactFiber$"+Is,Ni="__reactProps$"+Is,hr="__reactContainer$"+Is,al="__reactEvents$"+Is,Fp="__reactListeners$"+Is,Bp="__reactHandles$"+Is;function es(e){var t=e[rr];if(t)return t;for(var i=e.parentNode;i;){if(t=i[hr]||i[rr]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=ud(e);e!==null;){if(i=e[rr])return i;e=ud(e)}return t}e=i,i=e.parentNode}return null}function Li(e){return e=e[rr]||e[hr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Co(e){return e[Ni]||null}var ll=[],As=-1;function Ir(e){return{current:e}}function yt(e){0>As||(e.current=ll[As],ll[As]=null,As--)}function ht(e,t){As++,ll[As]=e.current,e.current=t}var Or={},Yt=Ir(Or),on=Ir(!1),ts=Or;function Ms(e,t){var i=e.type.contextTypes;if(!i)return Or;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in i)d[m]=t[m];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function an(e){return e=e.childContextTypes,e!=null}function Po(){yt(on),yt(Yt)}function cd(e,t,i){if(Yt.current!==Or)throw Error(r(168));ht(Yt,t),ht(on,i)}function dd(e,t,i){var u=e.stateNode;if(t=t.childContextTypes,typeof u.getChildContext!="function")return i;u=u.getChildContext();for(var d in u)if(!(d in t))throw Error(r(108,F(e)||"Unknown",d));return C({},i,u)}function jo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Or,ts=Yt.current,ht(Yt,e),ht(on,on.current),!0}function fd(e,t,i){var u=e.stateNode;if(!u)throw Error(r(169));i?(e=dd(e,t,ts),u.__reactInternalMemoizedMergedChildContext=e,yt(on),yt(Yt),ht(Yt,e)):yt(on),ht(on,i)}var mr=null,Ro=!1,ul=!1;function hd(e){mr===null?mr=[e]:mr.push(e)}function Gp(e){Ro=!0,hd(e)}function Ar(){if(!ul&&mr!==null){ul=!0;var e=0,t=ft;try{var i=mr;for(ft=1;e<i.length;e++){var u=i[e];do u=u(!0);while(u!==null)}mr=null,Ro=!1}catch(d){throw mr!==null&&(mr=mr.slice(e+1)),Qe(dr,Ar),d}finally{ft=t,ul=!1}}return null}var $s=[],Ds=0,To=null,No=0,In=[],On=0,ns=null,pr=1,gr="";function rs(e,t){$s[Ds++]=No,$s[Ds++]=To,To=e,No=t}function md(e,t,i){In[On++]=pr,In[On++]=gr,In[On++]=ns,ns=e;var u=pr;e=gr;var d=32-vn(u)-1;u&=~(1<<d),i+=1;var m=32-vn(t)+d;if(30<m){var y=d-d%5;m=(u&(1<<y)-1).toString(32),u>>=y,d-=y,pr=1<<32-vn(t)+d|i<<d|u,gr=m+e}else pr=1<<m|i<<d|u,gr=e}function cl(e){e.return!==null&&(rs(e,1),md(e,1,0))}function dl(e){for(;e===To;)To=$s[--Ds],$s[Ds]=null,No=$s[--Ds],$s[Ds]=null;for(;e===ns;)ns=In[--On],In[On]=null,gr=In[--On],In[On]=null,pr=In[--On],In[On]=null}var _n=null,xn=null,bt=!1,Wn=null;function pd(e,t){var i=Dn(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function gd(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_n=e,xn=Lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_n=e,xn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=ns!==null?{id:pr,overflow:gr}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Dn(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,_n=e,xn=null,!0):!1;default:return!1}}function fl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hl(e){if(bt){var t=xn;if(t){var i=t;if(!gd(e,t)){if(fl(e))throw Error(r(418));t=Lr(i.nextSibling);var u=_n;t&&gd(e,t)?pd(u,i):(e.flags=e.flags&-4097|2,bt=!1,_n=e)}}else{if(fl(e))throw Error(r(418));e.flags=e.flags&-4097|2,bt=!1,_n=e}}}function wd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_n=e}function Lo(e){if(e!==_n)return!1;if(!bt)return wd(e),bt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sl(e.type,e.memoizedProps)),t&&(t=xn)){if(fl(e))throw vd(),Error(r(418));for(;t;)pd(e,t),t=Lr(t.nextSibling)}if(wd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){xn=Lr(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}xn=null}}else xn=_n?Lr(e.stateNode.nextSibling):null;return!0}function vd(){for(var e=xn;e;)e=Lr(e.nextSibling)}function Us(){xn=_n=null,bt=!1}function ml(e){Wn===null?Wn=[e]:Wn.push(e)}var zp=$.ReactCurrentBatchConfig;function Ii(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var u=i.stateNode}if(!u)throw Error(r(147,e));var d=u,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(y){var E=d.refs;y===null?delete E[m]:E[m]=y},t._stringRef=m,t)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function Io(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yd(e){var t=e._init;return t(e._payload)}function _d(e){function t(U,I){if(e){var G=U.deletions;G===null?(U.deletions=[I],U.flags|=16):G.push(I)}}function i(U,I){if(!e)return null;for(;I!==null;)t(U,I),I=I.sibling;return null}function u(U,I){for(U=new Map;I!==null;)I.key!==null?U.set(I.key,I):U.set(I.index,I),I=I.sibling;return U}function d(U,I){return U=zr(U,I),U.index=0,U.sibling=null,U}function m(U,I,G){return U.index=G,e?(G=U.alternate,G!==null?(G=G.index,G<I?(U.flags|=2,I):G):(U.flags|=2,I)):(U.flags|=1048576,I)}function y(U){return e&&U.alternate===null&&(U.flags|=2),U}function E(U,I,G,he){return I===null||I.tag!==6?(I=iu(G,U.mode,he),I.return=U,I):(I=d(I,G),I.return=U,I)}function L(U,I,G,he){var Ae=G.type;return Ae===re?oe(U,I,G.props.children,he,G.key):I!==null&&(I.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Se&&yd(Ae)===I.type)?(he=d(I,G.props),he.ref=Ii(U,I,G),he.return=U,he):(he=ra(G.type,G.key,G.props,null,U.mode,he),he.ref=Ii(U,I,G),he.return=U,he)}function W(U,I,G,he){return I===null||I.tag!==4||I.stateNode.containerInfo!==G.containerInfo||I.stateNode.implementation!==G.implementation?(I=ou(G,U.mode,he),I.return=U,I):(I=d(I,G.children||[]),I.return=U,I)}function oe(U,I,G,he,Ae){return I===null||I.tag!==7?(I=ds(G,U.mode,he,Ae),I.return=U,I):(I=d(I,G),I.return=U,I)}function le(U,I,G){if(typeof I=="string"&&I!==""||typeof I=="number")return I=iu(""+I,U.mode,G),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case M:return G=ra(I.type,I.key,I.props,null,U.mode,G),G.ref=Ii(U,null,I),G.return=U,G;case Y:return I=ou(I,U.mode,G),I.return=U,I;case Se:var he=I._init;return le(U,he(I._payload),G)}if(ce(I)||we(I))return I=ds(I,U.mode,G,null),I.return=U,I;Io(U,I)}return null}function ie(U,I,G,he){var Ae=I!==null?I.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Ae!==null?null:E(U,I,""+G,he);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case M:return G.key===Ae?L(U,I,G,he):null;case Y:return G.key===Ae?W(U,I,G,he):null;case Se:return Ae=G._init,ie(U,I,Ae(G._payload),he)}if(ce(G)||we(G))return Ae!==null?null:oe(U,I,G,he,null);Io(U,G)}return null}function je(U,I,G,he,Ae){if(typeof he=="string"&&he!==""||typeof he=="number")return U=U.get(G)||null,E(I,U,""+he,Ae);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case M:return U=U.get(he.key===null?G:he.key)||null,L(I,U,he,Ae);case Y:return U=U.get(he.key===null?G:he.key)||null,W(I,U,he,Ae);case Se:var Ue=he._init;return je(U,I,G,Ue(he._payload),Ae)}if(ce(he)||we(he))return U=U.get(G)||null,oe(I,U,he,Ae,null);Io(I,he)}return null}function Te(U,I,G,he){for(var Ae=null,Ue=null,Fe=I,We=I=0,Wt=null;Fe!==null&&We<G.length;We++){Fe.index>We?(Wt=Fe,Fe=null):Wt=Fe.sibling;var lt=ie(U,Fe,G[We],he);if(lt===null){Fe===null&&(Fe=Wt);break}e&&Fe&&lt.alternate===null&&t(U,Fe),I=m(lt,I,We),Ue===null?Ae=lt:Ue.sibling=lt,Ue=lt,Fe=Wt}if(We===G.length)return i(U,Fe),bt&&rs(U,We),Ae;if(Fe===null){for(;We<G.length;We++)Fe=le(U,G[We],he),Fe!==null&&(I=m(Fe,I,We),Ue===null?Ae=Fe:Ue.sibling=Fe,Ue=Fe);return bt&&rs(U,We),Ae}for(Fe=u(U,Fe);We<G.length;We++)Wt=je(Fe,U,We,G[We],he),Wt!==null&&(e&&Wt.alternate!==null&&Fe.delete(Wt.key===null?We:Wt.key),I=m(Wt,I,We),Ue===null?Ae=Wt:Ue.sibling=Wt,Ue=Wt);return e&&Fe.forEach(function(Wr){return t(U,Wr)}),bt&&rs(U,We),Ae}function Le(U,I,G,he){var Ae=we(G);if(typeof Ae!="function")throw Error(r(150));if(G=Ae.call(G),G==null)throw Error(r(151));for(var Ue=Ae=null,Fe=I,We=I=0,Wt=null,lt=G.next();Fe!==null&&!lt.done;We++,lt=G.next()){Fe.index>We?(Wt=Fe,Fe=null):Wt=Fe.sibling;var Wr=ie(U,Fe,lt.value,he);if(Wr===null){Fe===null&&(Fe=Wt);break}e&&Fe&&Wr.alternate===null&&t(U,Fe),I=m(Wr,I,We),Ue===null?Ae=Wr:Ue.sibling=Wr,Ue=Wr,Fe=Wt}if(lt.done)return i(U,Fe),bt&&rs(U,We),Ae;if(Fe===null){for(;!lt.done;We++,lt=G.next())lt=le(U,lt.value,he),lt!==null&&(I=m(lt,I,We),Ue===null?Ae=lt:Ue.sibling=lt,Ue=lt);return bt&&rs(U,We),Ae}for(Fe=u(U,Fe);!lt.done;We++,lt=G.next())lt=je(Fe,U,We,lt.value,he),lt!==null&&(e&&lt.alternate!==null&&Fe.delete(lt.key===null?We:lt.key),I=m(lt,I,We),Ue===null?Ae=lt:Ue.sibling=lt,Ue=lt);return e&&Fe.forEach(function(bg){return t(U,bg)}),bt&&rs(U,We),Ae}function Lt(U,I,G,he){if(typeof G=="object"&&G!==null&&G.type===re&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case M:e:{for(var Ae=G.key,Ue=I;Ue!==null;){if(Ue.key===Ae){if(Ae=G.type,Ae===re){if(Ue.tag===7){i(U,Ue.sibling),I=d(Ue,G.props.children),I.return=U,U=I;break e}}else if(Ue.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===Se&&yd(Ae)===Ue.type){i(U,Ue.sibling),I=d(Ue,G.props),I.ref=Ii(U,Ue,G),I.return=U,U=I;break e}i(U,Ue);break}else t(U,Ue);Ue=Ue.sibling}G.type===re?(I=ds(G.props.children,U.mode,he,G.key),I.return=U,U=I):(he=ra(G.type,G.key,G.props,null,U.mode,he),he.ref=Ii(U,I,G),he.return=U,U=he)}return y(U);case Y:e:{for(Ue=G.key;I!==null;){if(I.key===Ue)if(I.tag===4&&I.stateNode.containerInfo===G.containerInfo&&I.stateNode.implementation===G.implementation){i(U,I.sibling),I=d(I,G.children||[]),I.return=U,U=I;break e}else{i(U,I);break}else t(U,I);I=I.sibling}I=ou(G,U.mode,he),I.return=U,U=I}return y(U);case Se:return Ue=G._init,Lt(U,I,Ue(G._payload),he)}if(ce(G))return Te(U,I,G,he);if(we(G))return Le(U,I,G,he);Io(U,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,I!==null&&I.tag===6?(i(U,I.sibling),I=d(I,G),I.return=U,U=I):(i(U,I),I=iu(G,U.mode,he),I.return=U,U=I),y(U)):i(U,I)}return Lt}var Fs=_d(!0),xd=_d(!1),Oo=Ir(null),Ao=null,Bs=null,pl=null;function gl(){pl=Bs=Ao=null}function wl(e){var t=Oo.current;yt(Oo),e._currentValue=t}function vl(e,t,i){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===i)break;e=e.return}}function Gs(e,t){Ao=e,pl=Bs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ln=!0),e.firstContext=null)}function An(e){var t=e._currentValue;if(pl!==e)if(e={context:e,memoizedValue:t,next:null},Bs===null){if(Ao===null)throw Error(r(308));Bs=e,Ao.dependencies={lanes:0,firstContext:e}}else Bs=Bs.next=e;return t}var ss=null;function yl(e){ss===null?ss=[e]:ss.push(e)}function bd(e,t,i,u){var d=t.interleaved;return d===null?(i.next=i,yl(t)):(i.next=d.next,d.next=i),t.interleaved=i,wr(e,u)}function wr(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Mr=!1;function _l(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $r(e,t,i){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(ot&2)!==0){var d=u.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),u.pending=t,wr(e,i)}return d=u.interleaved,d===null?(t.next=t,yl(u)):(t.next=d.next,d.next=t),u.interleaved=t,wr(e,i)}function Mo(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var u=t.lanes;u&=e.pendingLanes,i|=u,t.lanes=i,Oa(e,i)}}function kd(e,t){var i=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var d=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};m===null?d=m=y:m=m.next=y,i=i.next}while(i!==null);m===null?d=m=t:m=m.next=t}else d=m=t;i={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,effects:u.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function $o(e,t,i,u){var d=e.updateQueue;Mr=!1;var m=d.firstBaseUpdate,y=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var L=E,W=L.next;L.next=null,y===null?m=W:y.next=W,y=L;var oe=e.alternate;oe!==null&&(oe=oe.updateQueue,E=oe.lastBaseUpdate,E!==y&&(E===null?oe.firstBaseUpdate=W:E.next=W,oe.lastBaseUpdate=L))}if(m!==null){var le=d.baseState;y=0,oe=W=L=null,E=m;do{var ie=E.lane,je=E.eventTime;if((u&ie)===ie){oe!==null&&(oe=oe.next={eventTime:je,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var Te=e,Le=E;switch(ie=t,je=i,Le.tag){case 1:if(Te=Le.payload,typeof Te=="function"){le=Te.call(je,le,ie);break e}le=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Le.payload,ie=typeof Te=="function"?Te.call(je,le,ie):Te,ie==null)break e;le=C({},le,ie);break e;case 2:Mr=!0}}E.callback!==null&&E.lane!==0&&(e.flags|=64,ie=d.effects,ie===null?d.effects=[E]:ie.push(E))}else je={eventTime:je,lane:ie,tag:E.tag,payload:E.payload,callback:E.callback,next:null},oe===null?(W=oe=je,L=le):oe=oe.next=je,y|=ie;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;ie=E,E=ie.next,ie.next=null,d.lastBaseUpdate=ie,d.shared.pending=null}}while(!0);if(oe===null&&(L=le),d.baseState=L,d.firstBaseUpdate=W,d.lastBaseUpdate=oe,t=d.shared.interleaved,t!==null){d=t;do y|=d.lane,d=d.next;while(d!==t)}else m===null&&(d.shared.lanes=0);as|=y,e.lanes=y,e.memoizedState=le}}function Ed(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],d=u.callback;if(d!==null){if(u.callback=null,u=i,typeof d!="function")throw Error(r(191,d));d.call(u)}}}var Oi={},sr=Ir(Oi),Ai=Ir(Oi),Mi=Ir(Oi);function is(e){if(e===Oi)throw Error(r(174));return e}function xl(e,t){switch(ht(Mi,t),ht(Ai,e),ht(sr,Oi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ne(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ne(t,e)}yt(sr),ht(sr,t)}function zs(){yt(sr),yt(Ai),yt(Mi)}function Cd(e){is(Mi.current);var t=is(sr.current),i=ne(t,e.type);t!==i&&(ht(Ai,e),ht(sr,i))}function bl(e){Ai.current===e&&(yt(sr),yt(Ai))}var Et=Ir(0);function Do(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sl=[];function kl(){for(var e=0;e<Sl.length;e++)Sl[e]._workInProgressVersionPrimary=null;Sl.length=0}var Uo=$.ReactCurrentDispatcher,El=$.ReactCurrentBatchConfig,os=0,Ct=null,$t=null,Gt=null,Fo=!1,$i=!1,Di=0,Wp=0;function Qt(){throw Error(r(321))}function Cl(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!zn(e[i],t[i]))return!1;return!0}function Pl(e,t,i,u,d,m){if(os=m,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Uo.current=e===null||e.memoizedState===null?Kp:Jp,e=i(u,d),$i){m=0;do{if($i=!1,Di=0,25<=m)throw Error(r(301));m+=1,Gt=$t=null,t.updateQueue=null,Uo.current=Yp,e=i(u,d)}while($i)}if(Uo.current=zo,t=$t!==null&&$t.next!==null,os=0,Gt=$t=Ct=null,Fo=!1,t)throw Error(r(300));return e}function jl(){var e=Di!==0;return Di=0,e}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ct.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function Mn(){if($t===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var t=Gt===null?Ct.memoizedState:Gt.next;if(t!==null)Gt=t,$t=e;else{if(e===null)throw Error(r(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Gt===null?Ct.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function Ui(e,t){return typeof t=="function"?t(e):t}function Rl(e){var t=Mn(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var u=$t,d=u.baseQueue,m=i.pending;if(m!==null){if(d!==null){var y=d.next;d.next=m.next,m.next=y}u.baseQueue=d=m,i.pending=null}if(d!==null){m=d.next,u=u.baseState;var E=y=null,L=null,W=m;do{var oe=W.lane;if((os&oe)===oe)L!==null&&(L=L.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),u=W.hasEagerState?W.eagerState:e(u,W.action);else{var le={lane:oe,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};L===null?(E=L=le,y=u):L=L.next=le,Ct.lanes|=oe,as|=oe}W=W.next}while(W!==null&&W!==m);L===null?y=u:L.next=E,zn(u,t.memoizedState)||(ln=!0),t.memoizedState=u,t.baseState=y,t.baseQueue=L,i.lastRenderedState=u}if(e=i.interleaved,e!==null){d=e;do m=d.lane,Ct.lanes|=m,as|=m,d=d.next;while(d!==e)}else d===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Tl(e){var t=Mn(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var u=i.dispatch,d=i.pending,m=t.memoizedState;if(d!==null){i.pending=null;var y=d=d.next;do m=e(m,y.action),y=y.next;while(y!==d);zn(m,t.memoizedState)||(ln=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),i.lastRenderedState=m}return[m,u]}function Pd(){}function jd(e,t){var i=Ct,u=Mn(),d=t(),m=!zn(u.memoizedState,d);if(m&&(u.memoizedState=d,ln=!0),u=u.queue,Nl(Nd.bind(null,i,u,e),[e]),u.getSnapshot!==t||m||Gt!==null&&Gt.memoizedState.tag&1){if(i.flags|=2048,Fi(9,Td.bind(null,i,u,d,t),void 0,null),zt===null)throw Error(r(349));(os&30)!==0||Rd(i,t,d)}return d}function Rd(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Td(e,t,i,u){t.value=i,t.getSnapshot=u,Ld(t)&&Id(e)}function Nd(e,t,i){return i(function(){Ld(t)&&Id(e)})}function Ld(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!zn(e,i)}catch{return!0}}function Id(e){var t=wr(e,1);t!==null&&Kn(t,e,1,-1)}function Od(e){var t=ir();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t.queue=e,e=e.dispatch=qp.bind(null,Ct,e),[t.memoizedState,e]}function Fi(e,t,i,u){return e={tag:e,create:t,destroy:i,deps:u,next:null},t=Ct.updateQueue,t===null?(t={lastEffect:null,stores:null},Ct.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(u=i.next,i.next=e,e.next=u,t.lastEffect=e)),e}function Ad(){return Mn().memoizedState}function Bo(e,t,i,u){var d=ir();Ct.flags|=e,d.memoizedState=Fi(1|t,i,void 0,u===void 0?null:u)}function Go(e,t,i,u){var d=Mn();u=u===void 0?null:u;var m=void 0;if($t!==null){var y=$t.memoizedState;if(m=y.destroy,u!==null&&Cl(u,y.deps)){d.memoizedState=Fi(t,i,m,u);return}}Ct.flags|=e,d.memoizedState=Fi(1|t,i,m,u)}function Md(e,t){return Bo(8390656,8,e,t)}function Nl(e,t){return Go(2048,8,e,t)}function $d(e,t){return Go(4,2,e,t)}function Dd(e,t){return Go(4,4,e,t)}function Ud(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fd(e,t,i){return i=i!=null?i.concat([e]):null,Go(4,4,Ud.bind(null,t,e),i)}function Ll(){}function Bd(e,t){var i=Mn();t=t===void 0?null:t;var u=i.memoizedState;return u!==null&&t!==null&&Cl(t,u[1])?u[0]:(i.memoizedState=[e,t],e)}function Gd(e,t){var i=Mn();t=t===void 0?null:t;var u=i.memoizedState;return u!==null&&t!==null&&Cl(t,u[1])?u[0]:(e=e(),i.memoizedState=[e,t],e)}function zd(e,t,i){return(os&21)===0?(e.baseState&&(e.baseState=!1,ln=!0),e.memoizedState=i):(zn(i,t)||(i=Zr(),Ct.lanes|=i,as|=i,e.baseState=!0),t)}function Hp(e,t){var i=ft;ft=i!==0&&4>i?i:4,e(!0);var u=El.transition;El.transition={};try{e(!1),t()}finally{ft=i,El.transition=u}}function Wd(){return Mn().memoizedState}function Vp(e,t,i){var u=Br(e);if(i={lane:u,action:i,hasEagerState:!1,eagerState:null,next:null},Hd(e))Vd(t,i);else if(i=bd(e,t,i,u),i!==null){var d=tn();Kn(i,e,u,d),qd(i,t,u)}}function qp(e,t,i){var u=Br(e),d={lane:u,action:i,hasEagerState:!1,eagerState:null,next:null};if(Hd(e))Vd(t,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var y=t.lastRenderedState,E=m(y,i);if(d.hasEagerState=!0,d.eagerState=E,zn(E,y)){var L=t.interleaved;L===null?(d.next=d,yl(t)):(d.next=L.next,L.next=d),t.interleaved=d;return}}catch{}finally{}i=bd(e,t,d,u),i!==null&&(d=tn(),Kn(i,e,u,d),qd(i,t,u))}}function Hd(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function Vd(e,t){$i=Fo=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function qd(e,t,i){if((i&4194240)!==0){var u=t.lanes;u&=e.pendingLanes,i|=u,t.lanes=i,Oa(e,i)}}var zo={readContext:An,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},Kp={readContext:An,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:Md,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Bo(4194308,4,Ud.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var i=ir();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var u=ir();return t=i!==void 0?i(t):t,u.memoizedState=u.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},u.queue=e,e=e.dispatch=Vp.bind(null,Ct,e),[u.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:Od,useDebugValue:Ll,useDeferredValue:function(e){return ir().memoizedState=e},useTransition:function(){var e=Od(!1),t=e[0];return e=Hp.bind(null,e[1]),ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var u=Ct,d=ir();if(bt){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),zt===null)throw Error(r(349));(os&30)!==0||Rd(u,t,i)}d.memoizedState=i;var m={value:i,getSnapshot:t};return d.queue=m,Md(Nd.bind(null,u,m,e),[e]),u.flags|=2048,Fi(9,Td.bind(null,u,m,i,t),void 0,null),i},useId:function(){var e=ir(),t=zt.identifierPrefix;if(bt){var i=gr,u=pr;i=(u&~(1<<32-vn(u)-1)).toString(32)+i,t=":"+t+"R"+i,i=Di++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Wp++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jp={readContext:An,useCallback:Bd,useContext:An,useEffect:Nl,useImperativeHandle:Fd,useInsertionEffect:$d,useLayoutEffect:Dd,useMemo:Gd,useReducer:Rl,useRef:Ad,useState:function(){return Rl(Ui)},useDebugValue:Ll,useDeferredValue:function(e){var t=Mn();return zd(t,$t.memoizedState,e)},useTransition:function(){var e=Rl(Ui)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Pd,useSyncExternalStore:jd,useId:Wd,unstable_isNewReconciler:!1},Yp={readContext:An,useCallback:Bd,useContext:An,useEffect:Nl,useImperativeHandle:Fd,useInsertionEffect:$d,useLayoutEffect:Dd,useMemo:Gd,useReducer:Tl,useRef:Ad,useState:function(){return Tl(Ui)},useDebugValue:Ll,useDeferredValue:function(e){var t=Mn();return $t===null?t.memoizedState=e:zd(t,$t.memoizedState,e)},useTransition:function(){var e=Tl(Ui)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Pd,useSyncExternalStore:jd,useId:Wd,unstable_isNewReconciler:!1};function Hn(e,t){if(e&&e.defaultProps){t=C({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Il(e,t,i,u){t=e.memoizedState,i=i(u,t),i=i==null?t:C({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Wo={isMounted:function(e){return(e=e._reactInternals)?et(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var u=tn(),d=Br(e),m=vr(u,d);m.payload=t,i!=null&&(m.callback=i),t=$r(e,m,d),t!==null&&(Kn(t,e,d,u),Mo(t,e,d))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var u=tn(),d=Br(e),m=vr(u,d);m.tag=1,m.payload=t,i!=null&&(m.callback=i),t=$r(e,m,d),t!==null&&(Kn(t,e,d,u),Mo(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=tn(),u=Br(e),d=vr(i,u);d.tag=2,t!=null&&(d.callback=t),t=$r(e,d,u),t!==null&&(Kn(t,e,u,i),Mo(t,e,u))}};function Kd(e,t,i,u,d,m,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,m,y):t.prototype&&t.prototype.isPureReactComponent?!Ci(i,u)||!Ci(d,m):!0}function Jd(e,t,i){var u=!1,d=Or,m=t.contextType;return typeof m=="object"&&m!==null?m=An(m):(d=an(t)?ts:Yt.current,u=t.contextTypes,m=(u=u!=null)?Ms(e,d):Or),t=new t(i,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wo,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=m),t}function Yd(e,t,i,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,u),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function Ol(e,t,i,u){var d=e.stateNode;d.props=i,d.state=e.memoizedState,d.refs={},_l(e);var m=t.contextType;typeof m=="object"&&m!==null?d.context=An(m):(m=an(t)?ts:Yt.current,d.context=Ms(e,m)),d.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(Il(e,t,m,i),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Wo.enqueueReplaceState(d,d.state,null),$o(e,i,d,u),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Ws(e,t){try{var i="",u=t;do i+=D(u),u=u.return;while(u);var d=i}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:d,digest:null}}function Al(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Qp=typeof WeakMap=="function"?WeakMap:Map;function Qd(e,t,i){i=vr(-1,i),i.tag=3,i.payload={element:null};var u=t.value;return i.callback=function(){Qo||(Qo=!0,Ql=u),Ml(e,t)},i}function Zd(e,t,i){i=vr(-1,i),i.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var d=t.value;i.payload=function(){return u(d)},i.callback=function(){Ml(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(i.callback=function(){Ml(e,t),typeof u!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function Xd(e,t,i){var u=e.pingCache;if(u===null){u=e.pingCache=new Qp;var d=new Set;u.set(t,d)}else d=u.get(t),d===void 0&&(d=new Set,u.set(t,d));d.has(i)||(d.add(i),e=dg.bind(null,e,t,i),t.then(e,e))}function ef(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tf(e,t,i,u,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=vr(-1,1),t.tag=2,$r(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Zp=$.ReactCurrentOwner,ln=!1;function en(e,t,i,u){t.child=e===null?xd(t,null,i,u):Fs(t,e.child,i,u)}function nf(e,t,i,u,d){i=i.render;var m=t.ref;return Gs(t,d),u=Pl(e,t,i,u,m,d),i=jl(),e!==null&&!ln?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,yr(e,t,d)):(bt&&i&&cl(t),t.flags|=1,en(e,t,u,d),t.child)}function rf(e,t,i,u,d){if(e===null){var m=i.type;return typeof m=="function"&&!su(m)&&m.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=m,sf(e,t,m,u,d)):(e=ra(i.type,null,u,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,(e.lanes&d)===0){var y=m.memoizedProps;if(i=i.compare,i=i!==null?i:Ci,i(y,u)&&e.ref===t.ref)return yr(e,t,d)}return t.flags|=1,e=zr(m,u),e.ref=t.ref,e.return=t,t.child=e}function sf(e,t,i,u,d){if(e!==null){var m=e.memoizedProps;if(Ci(m,u)&&e.ref===t.ref)if(ln=!1,t.pendingProps=u=m,(e.lanes&d)!==0)(e.flags&131072)!==0&&(ln=!0);else return t.lanes=e.lanes,yr(e,t,d)}return $l(e,t,i,u,d)}function of(e,t,i){var u=t.pendingProps,d=u.children,m=e!==null?e.memoizedState:null;if(u.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Vs,bn),bn|=i;else{if((i&1073741824)===0)return e=m!==null?m.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ht(Vs,bn),bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=m!==null?m.baseLanes:i,ht(Vs,bn),bn|=u}else m!==null?(u=m.baseLanes|i,t.memoizedState=null):u=i,ht(Vs,bn),bn|=u;return en(e,t,d,i),t.child}function af(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function $l(e,t,i,u,d){var m=an(i)?ts:Yt.current;return m=Ms(t,m),Gs(t,d),i=Pl(e,t,i,u,m,d),u=jl(),e!==null&&!ln?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,yr(e,t,d)):(bt&&u&&cl(t),t.flags|=1,en(e,t,i,d),t.child)}function lf(e,t,i,u,d){if(an(i)){var m=!0;jo(t)}else m=!1;if(Gs(t,d),t.stateNode===null)Vo(e,t),Jd(t,i,u),Ol(t,i,u,d),u=!0;else if(e===null){var y=t.stateNode,E=t.memoizedProps;y.props=E;var L=y.context,W=i.contextType;typeof W=="object"&&W!==null?W=An(W):(W=an(i)?ts:Yt.current,W=Ms(t,W));var oe=i.getDerivedStateFromProps,le=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function";le||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==u||L!==W)&&Yd(t,y,u,W),Mr=!1;var ie=t.memoizedState;y.state=ie,$o(t,u,y,d),L=t.memoizedState,E!==u||ie!==L||on.current||Mr?(typeof oe=="function"&&(Il(t,i,oe,u),L=t.memoizedState),(E=Mr||Kd(t,i,E,u,ie,L,W))?(le||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=L),y.props=u,y.state=L,y.context=W,u=E):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{y=t.stateNode,Sd(e,t),E=t.memoizedProps,W=t.type===t.elementType?E:Hn(t.type,E),y.props=W,le=t.pendingProps,ie=y.context,L=i.contextType,typeof L=="object"&&L!==null?L=An(L):(L=an(i)?ts:Yt.current,L=Ms(t,L));var je=i.getDerivedStateFromProps;(oe=typeof je=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==le||ie!==L)&&Yd(t,y,u,L),Mr=!1,ie=t.memoizedState,y.state=ie,$o(t,u,y,d);var Te=t.memoizedState;E!==le||ie!==Te||on.current||Mr?(typeof je=="function"&&(Il(t,i,je,u),Te=t.memoizedState),(W=Mr||Kd(t,i,W,u,ie,Te,L)||!1)?(oe||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,Te,L),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,Te,L)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&ie===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&ie===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=Te),y.props=u,y.state=Te,y.context=L,u=W):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&ie===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&ie===e.memoizedState||(t.flags|=1024),u=!1)}return Dl(e,t,i,u,m,d)}function Dl(e,t,i,u,d,m){af(e,t);var y=(t.flags&128)!==0;if(!u&&!y)return d&&fd(t,i,!1),yr(e,t,m);u=t.stateNode,Zp.current=t;var E=y&&typeof i.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&y?(t.child=Fs(t,e.child,null,m),t.child=Fs(t,null,E,m)):en(e,t,E,m),t.memoizedState=u.state,d&&fd(t,i,!0),t.child}function uf(e){var t=e.stateNode;t.pendingContext?cd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cd(e,t.context,!1),xl(e,t.containerInfo)}function cf(e,t,i,u,d){return Us(),ml(d),t.flags|=256,en(e,t,i,u),t.child}var Ul={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function df(e,t,i){var u=t.pendingProps,d=Et.current,m=!1,y=(t.flags&128)!==0,E;if((E=y)||(E=e!==null&&e.memoizedState===null?!1:(d&2)!==0),E?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),ht(Et,d&1),e===null)return hl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(y=u.children,e=u.fallback,m?(u=t.mode,m=t.child,y={mode:"hidden",children:y},(u&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=y):m=sa(y,u,0,null),e=ds(e,u,i,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=Fl(i),t.memoizedState=Ul,e):Bl(t,y));if(d=e.memoizedState,d!==null&&(E=d.dehydrated,E!==null))return Xp(e,t,y,u,E,d,i);if(m){m=u.fallback,y=t.mode,d=e.child,E=d.sibling;var L={mode:"hidden",children:u.children};return(y&1)===0&&t.child!==d?(u=t.child,u.childLanes=0,u.pendingProps=L,t.deletions=null):(u=zr(d,L),u.subtreeFlags=d.subtreeFlags&14680064),E!==null?m=zr(E,m):(m=ds(m,y,i,null),m.flags|=2),m.return=t,u.return=t,u.sibling=m,t.child=u,u=m,m=t.child,y=e.child.memoizedState,y=y===null?Fl(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},m.memoizedState=y,m.childLanes=e.childLanes&~i,t.memoizedState=Ul,u}return m=e.child,e=m.sibling,u=zr(m,{mode:"visible",children:u.children}),(t.mode&1)===0&&(u.lanes=i),u.return=t,u.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=u,t.memoizedState=null,u}function Bl(e,t){return t=sa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ho(e,t,i,u){return u!==null&&ml(u),Fs(t,e.child,null,i),e=Bl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xp(e,t,i,u,d,m,y){if(i)return t.flags&256?(t.flags&=-257,u=Al(Error(r(422))),Ho(e,t,y,u)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=u.fallback,d=t.mode,u=sa({mode:"visible",children:u.children},d,0,null),m=ds(m,d,y,null),m.flags|=2,u.return=t,m.return=t,u.sibling=m,t.child=u,(t.mode&1)!==0&&Fs(t,e.child,null,y),t.child.memoizedState=Fl(y),t.memoizedState=Ul,m);if((t.mode&1)===0)return Ho(e,t,y,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var E=u.dgst;return u=E,m=Error(r(419)),u=Al(m,u,void 0),Ho(e,t,y,u)}if(E=(y&e.childLanes)!==0,ln||E){if(u=zt,u!==null){switch(y&-y){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(u.suspendedLanes|y))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,wr(e,d),Kn(u,e,d,-1))}return ru(),u=Al(Error(r(421))),Ho(e,t,y,u)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=fg.bind(null,e),d._reactRetry=t,null):(e=m.treeContext,xn=Lr(d.nextSibling),_n=t,bt=!0,Wn=null,e!==null&&(In[On++]=pr,In[On++]=gr,In[On++]=ns,pr=e.id,gr=e.overflow,ns=t),t=Bl(t,u.children),t.flags|=4096,t)}function ff(e,t,i){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),vl(e.return,t,i)}function Gl(e,t,i,u,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=i,m.tailMode=d)}function hf(e,t,i){var u=t.pendingProps,d=u.revealOrder,m=u.tail;if(en(e,t,u.children,i),u=Et.current,(u&2)!==0)u=u&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ff(e,i,t);else if(e.tag===19)ff(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(ht(Et,u),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(i=t.child,d=null;i!==null;)e=i.alternate,e!==null&&Do(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=t.child,t.child=null):(d=i.sibling,i.sibling=null),Gl(t,!1,d,i,m);break;case"backwards":for(i=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Do(e)===null){t.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Gl(t,!0,i,null,m);break;case"together":Gl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),as|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=zr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=zr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function eg(e,t,i){switch(t.tag){case 3:uf(t),Us();break;case 5:Cd(t);break;case 1:an(t.type)&&jo(t);break;case 4:xl(t,t.stateNode.containerInfo);break;case 10:var u=t.type._context,d=t.memoizedProps.value;ht(Oo,u._currentValue),u._currentValue=d;break;case 13:if(u=t.memoizedState,u!==null)return u.dehydrated!==null?(ht(Et,Et.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?df(e,t,i):(ht(Et,Et.current&1),e=yr(e,t,i),e!==null?e.sibling:null);ht(Et,Et.current&1);break;case 19:if(u=(i&t.childLanes)!==0,(e.flags&128)!==0){if(u)return hf(e,t,i);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ht(Et,Et.current),u)break;return null;case 22:case 23:return t.lanes=0,of(e,t,i)}return yr(e,t,i)}var mf,zl,pf,gf;mf=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},zl=function(){},pf=function(e,t,i,u){var d=e.memoizedProps;if(d!==u){e=t.stateNode,is(sr.current);var m=null;switch(i){case"input":d=O(e,d),u=O(e,u),m=[];break;case"select":d=C({},d,{value:void 0}),u=C({},u,{value:void 0}),m=[];break;case"textarea":d=Ze(e,d),u=Ze(e,u),m=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Eo)}me(i,u);var y;i=null;for(W in d)if(!u.hasOwnProperty(W)&&d.hasOwnProperty(W)&&d[W]!=null)if(W==="style"){var E=d[W];for(y in E)E.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(a.hasOwnProperty(W)?m||(m=[]):(m=m||[]).push(W,null));for(W in u){var L=u[W];if(E=d?.[W],u.hasOwnProperty(W)&&L!==E&&(L!=null||E!=null))if(W==="style")if(E){for(y in E)!E.hasOwnProperty(y)||L&&L.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in L)L.hasOwnProperty(y)&&E[y]!==L[y]&&(i||(i={}),i[y]=L[y])}else i||(m||(m=[]),m.push(W,i)),i=L;else W==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,E=E?E.__html:void 0,L!=null&&E!==L&&(m=m||[]).push(W,L)):W==="children"?typeof L!="string"&&typeof L!="number"||(m=m||[]).push(W,""+L):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(a.hasOwnProperty(W)?(L!=null&&W==="onScroll"&&vt("scroll",e),m||E===L||(m=[])):(m=m||[]).push(W,L))}i&&(m=m||[]).push("style",i);var W=m;(t.updateQueue=W)&&(t.flags|=4)}},gf=function(e,t,i,u){i!==u&&(t.flags|=4)};function Bi(e,t){if(!bt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,u=0;if(t)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=u,e.childLanes=i,t}function tg(e,t,i){var u=t.pendingProps;switch(dl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return an(t.type)&&Po(),Zt(t),null;case 3:return u=t.stateNode,zs(),yt(on),yt(Yt),kl(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(Lo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wn!==null&&(eu(Wn),Wn=null))),zl(e,t),Zt(t),null;case 5:bl(t);var d=is(Mi.current);if(i=t.type,e!==null&&t.stateNode!=null)pf(e,t,i,u,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!u){if(t.stateNode===null)throw Error(r(166));return Zt(t),null}if(e=is(sr.current),Lo(t)){u=t.stateNode,i=t.type;var m=t.memoizedProps;switch(u[rr]=t,u[Ni]=m,e=(t.mode&1)!==0,i){case"dialog":vt("cancel",u),vt("close",u);break;case"iframe":case"object":case"embed":vt("load",u);break;case"video":case"audio":for(d=0;d<ji.length;d++)vt(ji[d],u);break;case"source":vt("error",u);break;case"img":case"image":case"link":vt("error",u),vt("load",u);break;case"details":vt("toggle",u);break;case"input":V(u,m),vt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!m.multiple},vt("invalid",u);break;case"textarea":st(u,m),vt("invalid",u)}me(i,m),d=null;for(var y in m)if(m.hasOwnProperty(y)){var E=m[y];y==="children"?typeof E=="string"?u.textContent!==E&&(m.suppressHydrationWarning!==!0&&ko(u.textContent,E,e),d=["children",E]):typeof E=="number"&&u.textContent!==""+E&&(m.suppressHydrationWarning!==!0&&ko(u.textContent,E,e),d=["children",""+E]):a.hasOwnProperty(y)&&E!=null&&y==="onScroll"&&vt("scroll",u)}switch(i){case"input":ke(u),ee(u,m,!0);break;case"textarea":ke(u),jt(u);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(u.onclick=Eo)}u=d,t.updateQueue=u,u!==null&&(t.flags|=4)}else{y=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_t(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=y.createElement(i,{is:u.is}):(e=y.createElement(i),i==="select"&&(y=e,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):e=y.createElementNS(e,i),e[rr]=t,e[Ni]=u,mf(e,t,!1,!1),t.stateNode=e;e:{switch(y=$e(i,u),i){case"dialog":vt("cancel",e),vt("close",e),d=u;break;case"iframe":case"object":case"embed":vt("load",e),d=u;break;case"video":case"audio":for(d=0;d<ji.length;d++)vt(ji[d],e);d=u;break;case"source":vt("error",e),d=u;break;case"img":case"image":case"link":vt("error",e),vt("load",e),d=u;break;case"details":vt("toggle",e),d=u;break;case"input":V(e,u),d=O(e,u),vt("invalid",e);break;case"option":d=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},d=C({},u,{value:void 0}),vt("invalid",e);break;case"textarea":st(e,u),d=Ze(e,u),vt("invalid",e);break;default:d=u}me(i,d),E=d;for(m in E)if(E.hasOwnProperty(m)){var L=E[m];m==="style"?be(e,L):m==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Q(e,L)):m==="children"?typeof L=="string"?(i!=="textarea"||L!=="")&&ye(e,L):typeof L=="number"&&ye(e,""+L):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(a.hasOwnProperty(m)?L!=null&&m==="onScroll"&&vt("scroll",e):L!=null&&T(e,m,L,y))}switch(i){case"input":ke(e),ee(e,u,!1);break;case"textarea":ke(e),jt(e);break;case"option":u.value!=null&&e.setAttribute("value",""+q(u.value));break;case"select":e.multiple=!!u.multiple,m=u.value,m!=null?qe(e,!!u.multiple,m,!1):u.defaultValue!=null&&qe(e,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Eo)}switch(i){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)gf(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(r(166));if(i=is(Mi.current),is(sr.current),Lo(t)){if(u=t.stateNode,i=t.memoizedProps,u[rr]=t,(m=u.nodeValue!==i)&&(e=_n,e!==null))switch(e.tag){case 3:ko(u.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ko(u.nodeValue,i,(e.mode&1)!==0)}m&&(t.flags|=4)}else u=(i.nodeType===9?i:i.ownerDocument).createTextNode(u),u[rr]=t,t.stateNode=u}return Zt(t),null;case 13:if(yt(Et),u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bt&&xn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)vd(),Us(),t.flags|=98560,m=!1;else if(m=Lo(t),u!==null&&u.dehydrated!==null){if(e===null){if(!m)throw Error(r(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[rr]=t}else Us(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Zt(t),m=!1}else Wn!==null&&(eu(Wn),Wn=null),m=!0;if(!m)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Et.current&1)!==0?Dt===0&&(Dt=3):ru())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return zs(),zl(e,t),e===null&&Ri(t.stateNode.containerInfo),Zt(t),null;case 10:return wl(t.type._context),Zt(t),null;case 17:return an(t.type)&&Po(),Zt(t),null;case 19:if(yt(Et),m=t.memoizedState,m===null)return Zt(t),null;if(u=(t.flags&128)!==0,y=m.rendering,y===null)if(u)Bi(m,!1);else{if(Dt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=Do(e),y!==null){for(t.flags|=128,Bi(m,!1),u=y.updateQueue,u!==null&&(t.updateQueue=u,t.flags|=4),t.subtreeFlags=0,u=i,i=t.child;i!==null;)m=i,e=u,m.flags&=14680066,y=m.alternate,y===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,e=y.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return ht(Et,Et.current&1|2),t.child}e=e.sibling}m.tail!==null&&Ge()>qs&&(t.flags|=128,u=!0,Bi(m,!1),t.lanes=4194304)}else{if(!u)if(e=Do(y),e!==null){if(t.flags|=128,u=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Bi(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!bt)return Zt(t),null}else 2*Ge()-m.renderingStartTime>qs&&i!==1073741824&&(t.flags|=128,u=!0,Bi(m,!1),t.lanes=4194304);m.isBackwards?(y.sibling=t.child,t.child=y):(i=m.last,i!==null?i.sibling=y:t.child=y,m.last=y)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=Ge(),t.sibling=null,i=Et.current,ht(Et,u?i&1|2:i&1),t):(Zt(t),null);case 22:case 23:return nu(),u=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(t.flags|=8192),u&&(t.mode&1)!==0?(bn&1073741824)!==0&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function ng(e,t){switch(dl(t),t.tag){case 1:return an(t.type)&&Po(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zs(),yt(on),yt(Yt),kl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return bl(t),null;case 13:if(yt(Et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(Et),null;case 4:return zs(),null;case 10:return wl(t.type._context),null;case 22:case 23:return nu(),null;case 24:return null;default:return null}}var qo=!1,Xt=!1,rg=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Hs(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(u){Rt(e,t,u)}else i.current=null}function Wl(e,t,i){try{i()}catch(u){Rt(e,t,u)}}var wf=!1;function sg(e,t){if(nl=ho,e=Kc(),Ka(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var u=i.getSelection&&i.getSelection();if(u&&u.rangeCount!==0){i=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var y=0,E=-1,L=-1,W=0,oe=0,le=e,ie=null;t:for(;;){for(var je;le!==i||d!==0&&le.nodeType!==3||(E=y+d),le!==m||u!==0&&le.nodeType!==3||(L=y+u),le.nodeType===3&&(y+=le.nodeValue.length),(je=le.firstChild)!==null;)ie=le,le=je;for(;;){if(le===e)break t;if(ie===i&&++W===d&&(E=y),ie===m&&++oe===u&&(L=y),(je=le.nextSibling)!==null)break;le=ie,ie=le.parentNode}le=je}i=E===-1||L===-1?null:{start:E,end:L}}else i=null}i=i||{start:0,end:0}}else i=null;for(rl={focusedElem:e,selectionRange:i},ho=!1,Re=t;Re!==null;)if(t=Re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Re=e;else for(;Re!==null;){t=Re;try{var Te=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Le=Te.memoizedProps,Lt=Te.memoizedState,U=t.stateNode,I=U.getSnapshotBeforeUpdate(t.elementType===t.type?Le:Hn(t.type,Le),Lt);U.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(he){Rt(t,t.return,he)}if(e=t.sibling,e!==null){e.return=t.return,Re=e;break}Re=t.return}return Te=wf,wf=!1,Te}function Gi(e,t,i){var u=t.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&e)===e){var m=d.destroy;d.destroy=void 0,m!==void 0&&Wl(t,i,m)}d=d.next}while(d!==u)}}function Ko(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var u=i.create;i.destroy=u()}i=i.next}while(i!==t)}}function Hl(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function vf(e){var t=e.alternate;t!==null&&(e.alternate=null,vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rr],delete t[Ni],delete t[al],delete t[Fp],delete t[Bp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yf(e){return e.tag===5||e.tag===3||e.tag===4}function _f(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vl(e,t,i){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Eo));else if(u!==4&&(e=e.child,e!==null))for(Vl(e,t,i),e=e.sibling;e!==null;)Vl(e,t,i),e=e.sibling}function ql(e,t,i){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(ql(e,t,i),e=e.sibling;e!==null;)ql(e,t,i),e=e.sibling}var Vt=null,Vn=!1;function Dr(e,t,i){for(i=i.child;i!==null;)xf(e,t,i),i=i.sibling}function xf(e,t,i){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Qr,i)}catch{}switch(i.tag){case 5:Xt||Hs(i,t);case 6:var u=Vt,d=Vn;Vt=null,Dr(e,t,i),Vt=u,Vn=d,Vt!==null&&(Vn?(e=Vt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Vt.removeChild(i.stateNode));break;case 18:Vt!==null&&(Vn?(e=Vt,i=i.stateNode,e.nodeType===8?ol(e.parentNode,i):e.nodeType===1&&ol(e,i),_i(e)):ol(Vt,i.stateNode));break;case 4:u=Vt,d=Vn,Vt=i.stateNode.containerInfo,Vn=!0,Dr(e,t,i),Vt=u,Vn=d;break;case 0:case 11:case 14:case 15:if(!Xt&&(u=i.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var m=d,y=m.destroy;m=m.tag,y!==void 0&&((m&2)!==0||(m&4)!==0)&&Wl(i,t,y),d=d.next}while(d!==u)}Dr(e,t,i);break;case 1:if(!Xt&&(Hs(i,t),u=i.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=i.memoizedProps,u.state=i.memoizedState,u.componentWillUnmount()}catch(E){Rt(i,t,E)}Dr(e,t,i);break;case 21:Dr(e,t,i);break;case 22:i.mode&1?(Xt=(u=Xt)||i.memoizedState!==null,Dr(e,t,i),Xt=u):Dr(e,t,i);break;default:Dr(e,t,i)}}function bf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new rg),t.forEach(function(u){var d=hg.bind(null,e,u);i.has(u)||(i.add(u),u.then(d,d))})}}function qn(e,t){var i=t.deletions;if(i!==null)for(var u=0;u<i.length;u++){var d=i[u];try{var m=e,y=t,E=y;e:for(;E!==null;){switch(E.tag){case 5:Vt=E.stateNode,Vn=!1;break e;case 3:Vt=E.stateNode.containerInfo,Vn=!0;break e;case 4:Vt=E.stateNode.containerInfo,Vn=!0;break e}E=E.return}if(Vt===null)throw Error(r(160));xf(m,y,d),Vt=null,Vn=!1;var L=d.alternate;L!==null&&(L.return=null),d.return=null}catch(W){Rt(d,t,W)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sf(t,e),t=t.sibling}function Sf(e,t){var i=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qn(t,e),or(e),u&4){try{Gi(3,e,e.return),Ko(3,e)}catch(Le){Rt(e,e.return,Le)}try{Gi(5,e,e.return)}catch(Le){Rt(e,e.return,Le)}}break;case 1:qn(t,e),or(e),u&512&&i!==null&&Hs(i,i.return);break;case 5:if(qn(t,e),or(e),u&512&&i!==null&&Hs(i,i.return),e.flags&32){var d=e.stateNode;try{ye(d,"")}catch(Le){Rt(e,e.return,Le)}}if(u&4&&(d=e.stateNode,d!=null)){var m=e.memoizedProps,y=i!==null?i.memoizedProps:m,E=e.type,L=e.updateQueue;if(e.updateQueue=null,L!==null)try{E==="input"&&m.type==="radio"&&m.name!=null&&ge(d,m),$e(E,y);var W=$e(E,m);for(y=0;y<L.length;y+=2){var oe=L[y],le=L[y+1];oe==="style"?be(d,le):oe==="dangerouslySetInnerHTML"?Q(d,le):oe==="children"?ye(d,le):T(d,oe,le,W)}switch(E){case"input":J(d,m);break;case"textarea":at(d,m);break;case"select":var ie=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var je=m.value;je!=null?qe(d,!!m.multiple,je,!1):ie!==!!m.multiple&&(m.defaultValue!=null?qe(d,!!m.multiple,m.defaultValue,!0):qe(d,!!m.multiple,m.multiple?[]:"",!1))}d[Ni]=m}catch(Le){Rt(e,e.return,Le)}}break;case 6:if(qn(t,e),or(e),u&4){if(e.stateNode===null)throw Error(r(162));d=e.stateNode,m=e.memoizedProps;try{d.nodeValue=m}catch(Le){Rt(e,e.return,Le)}}break;case 3:if(qn(t,e),or(e),u&4&&i!==null&&i.memoizedState.isDehydrated)try{_i(t.containerInfo)}catch(Le){Rt(e,e.return,Le)}break;case 4:qn(t,e),or(e);break;case 13:qn(t,e),or(e),d=e.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Yl=Ge())),u&4&&bf(e);break;case 22:if(oe=i!==null&&i.memoizedState!==null,e.mode&1?(Xt=(W=Xt)||oe,qn(t,e),Xt=W):qn(t,e),or(e),u&8192){if(W=e.memoizedState!==null,(e.stateNode.isHidden=W)&&!oe&&(e.mode&1)!==0)for(Re=e,oe=e.child;oe!==null;){for(le=Re=oe;Re!==null;){switch(ie=Re,je=ie.child,ie.tag){case 0:case 11:case 14:case 15:Gi(4,ie,ie.return);break;case 1:Hs(ie,ie.return);var Te=ie.stateNode;if(typeof Te.componentWillUnmount=="function"){u=ie,i=ie.return;try{t=u,Te.props=t.memoizedProps,Te.state=t.memoizedState,Te.componentWillUnmount()}catch(Le){Rt(u,i,Le)}}break;case 5:Hs(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Cf(le);continue}}je!==null?(je.return=ie,Re=je):Cf(le)}oe=oe.sibling}e:for(oe=null,le=e;;){if(le.tag===5){if(oe===null){oe=le;try{d=le.stateNode,W?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(E=le.stateNode,L=le.memoizedProps.style,y=L!=null&&L.hasOwnProperty("display")?L.display:null,E.style.display=Oe("display",y))}catch(Le){Rt(e,e.return,Le)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=W?"":le.memoizedProps}catch(Le){Rt(e,e.return,Le)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===e)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===e)break e;for(;le.sibling===null;){if(le.return===null||le.return===e)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:qn(t,e),or(e),u&4&&bf(e);break;case 21:break;default:qn(t,e),or(e)}}function or(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(yf(i)){var u=i;break e}i=i.return}throw Error(r(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(ye(d,""),u.flags&=-33);var m=_f(e);ql(e,m,d);break;case 3:case 4:var y=u.stateNode.containerInfo,E=_f(e);Vl(e,E,y);break;default:throw Error(r(161))}}catch(L){Rt(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ig(e,t,i){Re=e,kf(e)}function kf(e,t,i){for(var u=(e.mode&1)!==0;Re!==null;){var d=Re,m=d.child;if(d.tag===22&&u){var y=d.memoizedState!==null||qo;if(!y){var E=d.alternate,L=E!==null&&E.memoizedState!==null||Xt;E=qo;var W=Xt;if(qo=y,(Xt=L)&&!W)for(Re=d;Re!==null;)y=Re,L=y.child,y.tag===22&&y.memoizedState!==null?Pf(d):L!==null?(L.return=y,Re=L):Pf(d);for(;m!==null;)Re=m,kf(m),m=m.sibling;Re=d,qo=E,Xt=W}Ef(e)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,Re=m):Ef(e)}}function Ef(e){for(;Re!==null;){var t=Re;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Xt||Ko(5,t);break;case 1:var u=t.stateNode;if(t.flags&4&&!Xt)if(i===null)u.componentDidMount();else{var d=t.elementType===t.type?i.memoizedProps:Hn(t.type,i.memoizedProps);u.componentDidUpdate(d,i.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&Ed(t,m,u);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Ed(t,y,i)}break;case 5:var E=t.stateNode;if(i===null&&t.flags&4){i=E;var L=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&i.focus();break;case"img":L.src&&(i.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var W=t.alternate;if(W!==null){var oe=W.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&_i(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Xt||t.flags&512&&Hl(t)}catch(ie){Rt(t,t.return,ie)}}if(t===e){Re=null;break}if(i=t.sibling,i!==null){i.return=t.return,Re=i;break}Re=t.return}}function Cf(e){for(;Re!==null;){var t=Re;if(t===e){Re=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Re=i;break}Re=t.return}}function Pf(e){for(;Re!==null;){var t=Re;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Ko(4,t)}catch(L){Rt(t,i,L)}break;case 1:var u=t.stateNode;if(typeof u.componentDidMount=="function"){var d=t.return;try{u.componentDidMount()}catch(L){Rt(t,d,L)}}var m=t.return;try{Hl(t)}catch(L){Rt(t,m,L)}break;case 5:var y=t.return;try{Hl(t)}catch(L){Rt(t,y,L)}}}catch(L){Rt(t,t.return,L)}if(t===e){Re=null;break}var E=t.sibling;if(E!==null){E.return=t.return,Re=E;break}Re=t.return}}var og=Math.ceil,Jo=$.ReactCurrentDispatcher,Kl=$.ReactCurrentOwner,$n=$.ReactCurrentBatchConfig,ot=0,zt=null,It=null,qt=0,bn=0,Vs=Ir(0),Dt=0,zi=null,as=0,Yo=0,Jl=0,Wi=null,un=null,Yl=0,qs=1/0,_r=null,Qo=!1,Ql=null,Ur=null,Zo=!1,Fr=null,Xo=0,Hi=0,Zl=null,ea=-1,ta=0;function tn(){return(ot&6)!==0?Ge():ea!==-1?ea:ea=Ge()}function Br(e){return(e.mode&1)===0?1:(ot&2)!==0&&qt!==0?qt&-qt:zp.transition!==null?(ta===0&&(ta=Zr()),ta):(e=ft,e!==0||(e=window.event,e=e===void 0?16:jc(e.type)),e)}function Kn(e,t,i,u){if(50<Hi)throw Hi=0,Zl=null,Error(r(185));sn(e,i,u),((ot&2)===0||e!==zt)&&(e===zt&&((ot&2)===0&&(Yo|=i),Dt===4&&Gr(e,qt)),cn(e,u),i===1&&ot===0&&(t.mode&1)===0&&(qs=Ge()+500,Ro&&Ar()))}function cn(e,t){var i=e.callbackNode;Er(e,t);var u=xt(e,e===zt?qt:0);if(u===0)i!==null&&gt(i),e.callbackNode=null,e.callbackPriority=0;else if(t=u&-u,e.callbackPriority!==t){if(i!=null&&gt(i),t===1)e.tag===0?Gp(Rf.bind(null,e)):hd(Rf.bind(null,e)),Dp(function(){(ot&6)===0&&Ar()}),i=null;else{switch(_c(u)){case 1:i=dr;break;case 4:i=Bt;break;case 16:i=Nn;break;case 536870912:i=Na;break;default:i=Nn}i=$f(i,jf.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function jf(e,t){if(ea=-1,ta=0,(ot&6)!==0)throw Error(r(327));var i=e.callbackNode;if(Ks()&&e.callbackNode!==i)return null;var u=xt(e,e===zt?qt:0);if(u===0)return null;if((u&30)!==0||(u&e.expiredLanes)!==0||t)t=na(e,u);else{t=u;var d=ot;ot|=2;var m=Nf();(zt!==e||qt!==t)&&(_r=null,qs=Ge()+500,us(e,t));do try{ug();break}catch(E){Tf(e,E)}while(!0);gl(),Jo.current=m,ot=d,It!==null?t=0:(zt=null,qt=0,t=Dt)}if(t!==0){if(t===2&&(d=wt(e),d!==0&&(u=d,t=Xl(e,d))),t===1)throw i=zi,us(e,0),Gr(e,u),cn(e,Ge()),i;if(t===6)Gr(e,u);else{if(d=e.current.alternate,(u&30)===0&&!ag(d)&&(t=na(e,u),t===2&&(m=wt(e),m!==0&&(u=m,t=Xl(e,m))),t===1))throw i=zi,us(e,0),Gr(e,u),cn(e,Ge()),i;switch(e.finishedWork=d,e.finishedLanes=u,t){case 0:case 1:throw Error(r(345));case 2:cs(e,un,_r);break;case 3:if(Gr(e,u),(u&130023424)===u&&(t=Yl+500-Ge(),10<t)){if(xt(e,0)!==0)break;if(d=e.suspendedLanes,(d&u)!==u){tn(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=il(cs.bind(null,e,un,_r),t);break}cs(e,un,_r);break;case 4:if(Gr(e,u),(u&4194240)===u)break;for(t=e.eventTimes,d=-1;0<u;){var y=31-vn(u);m=1<<y,y=t[y],y>d&&(d=y),u&=~m}if(u=d,u=Ge()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*og(u/1960))-u,10<u){e.timeoutHandle=il(cs.bind(null,e,un,_r),u);break}cs(e,un,_r);break;case 5:cs(e,un,_r);break;default:throw Error(r(329))}}}return cn(e,Ge()),e.callbackNode===i?jf.bind(null,e):null}function Xl(e,t){var i=Wi;return e.current.memoizedState.isDehydrated&&(us(e,t).flags|=256),e=na(e,t),e!==2&&(t=un,un=i,t!==null&&eu(t)),e}function eu(e){un===null?un=e:un.push.apply(un,e)}function ag(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var u=0;u<i.length;u++){var d=i[u],m=d.getSnapshot;d=d.value;try{if(!zn(m(),d))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gr(e,t){for(t&=~Jl,t&=~Yo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-vn(t),u=1<<i;e[i]=-1,t&=~u}}function Rf(e){if((ot&6)!==0)throw Error(r(327));Ks();var t=xt(e,0);if((t&1)===0)return cn(e,Ge()),null;var i=na(e,t);if(e.tag!==0&&i===2){var u=wt(e);u!==0&&(t=u,i=Xl(e,u))}if(i===1)throw i=zi,us(e,0),Gr(e,t),cn(e,Ge()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cs(e,un,_r),cn(e,Ge()),null}function tu(e,t){var i=ot;ot|=1;try{return e(t)}finally{ot=i,ot===0&&(qs=Ge()+500,Ro&&Ar())}}function ls(e){Fr!==null&&Fr.tag===0&&(ot&6)===0&&Ks();var t=ot;ot|=1;var i=$n.transition,u=ft;try{if($n.transition=null,ft=1,e)return e()}finally{ft=u,$n.transition=i,ot=t,(ot&6)===0&&Ar()}}function nu(){bn=Vs.current,yt(Vs)}function us(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,$p(i)),It!==null)for(i=It.return;i!==null;){var u=i;switch(dl(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Po();break;case 3:zs(),yt(on),yt(Yt),kl();break;case 5:bl(u);break;case 4:zs();break;case 13:yt(Et);break;case 19:yt(Et);break;case 10:wl(u.type._context);break;case 22:case 23:nu()}i=i.return}if(zt=e,It=e=zr(e.current,null),qt=bn=t,Dt=0,zi=null,Jl=Yo=as=0,un=Wi=null,ss!==null){for(t=0;t<ss.length;t++)if(i=ss[t],u=i.interleaved,u!==null){i.interleaved=null;var d=u.next,m=i.pending;if(m!==null){var y=m.next;m.next=d,u.next=y}i.pending=u}ss=null}return e}function Tf(e,t){do{var i=It;try{if(gl(),Uo.current=zo,Fo){for(var u=Ct.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Fo=!1}if(os=0,Gt=$t=Ct=null,$i=!1,Di=0,Kl.current=null,i===null||i.return===null){Dt=1,zi=t,It=null;break}e:{var m=e,y=i.return,E=i,L=t;if(t=qt,E.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var W=L,oe=E,le=oe.tag;if((oe.mode&1)===0&&(le===0||le===11||le===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var je=ef(y);if(je!==null){je.flags&=-257,tf(je,y,E,m,t),je.mode&1&&Xd(m,W,t),t=je,L=W;var Te=t.updateQueue;if(Te===null){var Le=new Set;Le.add(L),t.updateQueue=Le}else Te.add(L);break e}else{if((t&1)===0){Xd(m,W,t),ru();break e}L=Error(r(426))}}else if(bt&&E.mode&1){var Lt=ef(y);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),tf(Lt,y,E,m,t),ml(Ws(L,E));break e}}m=L=Ws(L,E),Dt!==4&&(Dt=2),Wi===null?Wi=[m]:Wi.push(m),m=y;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var U=Qd(m,L,t);kd(m,U);break e;case 1:E=L;var I=m.type,G=m.stateNode;if((m.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Ur===null||!Ur.has(G)))){m.flags|=65536,t&=-t,m.lanes|=t;var he=Zd(m,E,t);kd(m,he);break e}}m=m.return}while(m!==null)}If(i)}catch(Ae){t=Ae,It===i&&i!==null&&(It=i=i.return);continue}break}while(!0)}function Nf(){var e=Jo.current;return Jo.current=zo,e===null?zo:e}function ru(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),zt===null||(as&268435455)===0&&(Yo&268435455)===0||Gr(zt,qt)}function na(e,t){var i=ot;ot|=2;var u=Nf();(zt!==e||qt!==t)&&(_r=null,us(e,t));do try{lg();break}catch(d){Tf(e,d)}while(!0);if(gl(),ot=i,Jo.current=u,It!==null)throw Error(r(261));return zt=null,qt=0,Dt}function lg(){for(;It!==null;)Lf(It)}function ug(){for(;It!==null&&!Nt();)Lf(It)}function Lf(e){var t=Mf(e.alternate,e,bn);e.memoizedProps=e.pendingProps,t===null?If(e):It=t,Kl.current=null}function If(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=tg(i,t,bn),i!==null){It=i;return}}else{if(i=ng(i,t),i!==null){i.flags&=32767,It=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dt=6,It=null;return}}if(t=t.sibling,t!==null){It=t;return}It=t=e}while(t!==null);Dt===0&&(Dt=5)}function cs(e,t,i){var u=ft,d=$n.transition;try{$n.transition=null,ft=1,cg(e,t,i,u)}finally{$n.transition=d,ft=u}return null}function cg(e,t,i,u){do Ks();while(Fr!==null);if((ot&6)!==0)throw Error(r(327));i=e.finishedWork;var d=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var m=i.lanes|i.childLanes;if(uo(e,m),e===zt&&(It=zt=null,qt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Zo||(Zo=!0,$f(Nn,function(){return Ks(),null})),m=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||m){m=$n.transition,$n.transition=null;var y=ft;ft=1;var E=ot;ot|=4,Kl.current=null,sg(e,i),Sf(i,e),Tp(rl),ho=!!nl,rl=nl=null,e.current=i,ig(i),rn(),ot=E,ft=y,$n.transition=m}else e.current=i;if(Zo&&(Zo=!1,Fr=e,Xo=d),m=e.pendingLanes,m===0&&(Ur=null),lo(i.stateNode),cn(e,Ge()),t!==null)for(u=e.onRecoverableError,i=0;i<t.length;i++)d=t[i],u(d.value,{componentStack:d.stack,digest:d.digest});if(Qo)throw Qo=!1,e=Ql,Ql=null,e;return(Xo&1)!==0&&e.tag!==0&&Ks(),m=e.pendingLanes,(m&1)!==0?e===Zl?Hi++:(Hi=0,Zl=e):Hi=0,Ar(),null}function Ks(){if(Fr!==null){var e=_c(Xo),t=$n.transition,i=ft;try{if($n.transition=null,ft=16>e?16:e,Fr===null)var u=!1;else{if(e=Fr,Fr=null,Xo=0,(ot&6)!==0)throw Error(r(331));var d=ot;for(ot|=4,Re=e.current;Re!==null;){var m=Re,y=m.child;if((Re.flags&16)!==0){var E=m.deletions;if(E!==null){for(var L=0;L<E.length;L++){var W=E[L];for(Re=W;Re!==null;){var oe=Re;switch(oe.tag){case 0:case 11:case 15:Gi(8,oe,m)}var le=oe.child;if(le!==null)le.return=oe,Re=le;else for(;Re!==null;){oe=Re;var ie=oe.sibling,je=oe.return;if(vf(oe),oe===W){Re=null;break}if(ie!==null){ie.return=je,Re=ie;break}Re=je}}}var Te=m.alternate;if(Te!==null){var Le=Te.child;if(Le!==null){Te.child=null;do{var Lt=Le.sibling;Le.sibling=null,Le=Lt}while(Le!==null)}}Re=m}}if((m.subtreeFlags&2064)!==0&&y!==null)y.return=m,Re=y;else e:for(;Re!==null;){if(m=Re,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Gi(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,Re=U;break e}Re=m.return}}var I=e.current;for(Re=I;Re!==null;){y=Re;var G=y.child;if((y.subtreeFlags&2064)!==0&&G!==null)G.return=y,Re=G;else e:for(y=I;Re!==null;){if(E=Re,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:Ko(9,E)}}catch(Ae){Rt(E,E.return,Ae)}if(E===y){Re=null;break e}var he=E.sibling;if(he!==null){he.return=E.return,Re=he;break e}Re=E.return}}if(ot=d,Ar(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Qr,e)}catch{}u=!0}return u}finally{ft=i,$n.transition=t}}return!1}function Of(e,t,i){t=Ws(i,t),t=Qd(e,t,1),e=$r(e,t,1),t=tn(),e!==null&&(sn(e,1,t),cn(e,t))}function Rt(e,t,i){if(e.tag===3)Of(e,e,i);else for(;t!==null;){if(t.tag===3){Of(t,e,i);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ur===null||!Ur.has(u))){e=Ws(i,e),e=Zd(t,e,1),t=$r(t,e,1),e=tn(),t!==null&&(sn(t,1,e),cn(t,e));break}}t=t.return}}function dg(e,t,i){var u=e.pingCache;u!==null&&u.delete(t),t=tn(),e.pingedLanes|=e.suspendedLanes&i,zt===e&&(qt&i)===i&&(Dt===4||Dt===3&&(qt&130023424)===qt&&500>Ge()-Yl?us(e,0):Jl|=i),cn(e,t)}function Af(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ne,Ne<<=1,(Ne&130023424)===0&&(Ne=4194304)));var i=tn();e=wr(e,t),e!==null&&(sn(e,t,i),cn(e,i))}function fg(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Af(e,i)}function hg(e,t){var i=0;switch(e.tag){case 13:var u=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(t),Af(e,i)}var Mf;Mf=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||on.current)ln=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return ln=!1,eg(e,t,i);ln=(e.flags&131072)!==0}else ln=!1,bt&&(t.flags&1048576)!==0&&md(t,No,t.index);switch(t.lanes=0,t.tag){case 2:var u=t.type;Vo(e,t),e=t.pendingProps;var d=Ms(t,Yt.current);Gs(t,i),d=Pl(null,t,u,e,d,i);var m=jl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,an(u)?(m=!0,jo(t)):m=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,_l(t),d.updater=Wo,t.stateNode=d,d._reactInternals=t,Ol(t,u,e,i),t=Dl(null,t,u,!0,m,i)):(t.tag=0,bt&&m&&cl(t),en(null,t,d,i),t=t.child),t;case 16:u=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,d=u._init,u=d(u._payload),t.type=u,d=t.tag=pg(u),e=Hn(u,e),d){case 0:t=$l(null,t,u,e,i);break e;case 1:t=lf(null,t,u,e,i);break e;case 11:t=nf(null,t,u,e,i);break e;case 14:t=rf(null,t,u,Hn(u.type,e),i);break e}throw Error(r(306,u,""))}return t;case 0:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:Hn(u,d),$l(e,t,u,d,i);case 1:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:Hn(u,d),lf(e,t,u,d,i);case 3:e:{if(uf(t),e===null)throw Error(r(387));u=t.pendingProps,m=t.memoizedState,d=m.element,Sd(e,t),$o(t,u,null,i);var y=t.memoizedState;if(u=y.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){d=Ws(Error(r(423)),t),t=cf(e,t,u,i,d);break e}else if(u!==d){d=Ws(Error(r(424)),t),t=cf(e,t,u,i,d);break e}else for(xn=Lr(t.stateNode.containerInfo.firstChild),_n=t,bt=!0,Wn=null,i=xd(t,null,u,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Us(),u===d){t=yr(e,t,i);break e}en(e,t,u,i)}t=t.child}return t;case 5:return Cd(t),e===null&&hl(t),u=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,y=d.children,sl(u,d)?y=null:m!==null&&sl(u,m)&&(t.flags|=32),af(e,t),en(e,t,y,i),t.child;case 6:return e===null&&hl(t),null;case 13:return df(e,t,i);case 4:return xl(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Fs(t,null,u,i):en(e,t,u,i),t.child;case 11:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:Hn(u,d),nf(e,t,u,d,i);case 7:return en(e,t,t.pendingProps,i),t.child;case 8:return en(e,t,t.pendingProps.children,i),t.child;case 12:return en(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(u=t.type._context,d=t.pendingProps,m=t.memoizedProps,y=d.value,ht(Oo,u._currentValue),u._currentValue=y,m!==null)if(zn(m.value,y)){if(m.children===d.children&&!on.current){t=yr(e,t,i);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var E=m.dependencies;if(E!==null){y=m.child;for(var L=E.firstContext;L!==null;){if(L.context===u){if(m.tag===1){L=vr(-1,i&-i),L.tag=2;var W=m.updateQueue;if(W!==null){W=W.shared;var oe=W.pending;oe===null?L.next=L:(L.next=oe.next,oe.next=L),W.pending=L}}m.lanes|=i,L=m.alternate,L!==null&&(L.lanes|=i),vl(m.return,i,t),E.lanes|=i;break}L=L.next}}else if(m.tag===10)y=m.type===t.type?null:m.child;else if(m.tag===18){if(y=m.return,y===null)throw Error(r(341));y.lanes|=i,E=y.alternate,E!==null&&(E.lanes|=i),vl(y,i,t),y=m.sibling}else y=m.child;if(y!==null)y.return=m;else for(y=m;y!==null;){if(y===t){y=null;break}if(m=y.sibling,m!==null){m.return=y.return,y=m;break}y=y.return}m=y}en(e,t,d.children,i),t=t.child}return t;case 9:return d=t.type,u=t.pendingProps.children,Gs(t,i),d=An(d),u=u(d),t.flags|=1,en(e,t,u,i),t.child;case 14:return u=t.type,d=Hn(u,t.pendingProps),d=Hn(u.type,d),rf(e,t,u,d,i);case 15:return sf(e,t,t.type,t.pendingProps,i);case 17:return u=t.type,d=t.pendingProps,d=t.elementType===u?d:Hn(u,d),Vo(e,t),t.tag=1,an(u)?(e=!0,jo(t)):e=!1,Gs(t,i),Jd(t,u,d),Ol(t,u,d,i),Dl(null,t,u,!0,e,i);case 19:return hf(e,t,i);case 22:return of(e,t,i)}throw Error(r(156,t.tag))};function $f(e,t){return Qe(e,t)}function mg(e,t,i,u){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,t,i,u){return new mg(e,t,i,u)}function su(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pg(e){if(typeof e=="function")return su(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rt)return 11;if(e===ue)return 14}return 2}function zr(e,t){var i=e.alternate;return i===null?(i=Dn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function ra(e,t,i,u,d,m){var y=2;if(u=e,typeof e=="function")su(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case re:return ds(i.children,d,m,t);case Ie:y=8,d|=8;break;case Me:return e=Dn(12,i,t,d|2),e.elementType=Me,e.lanes=m,e;case Ye:return e=Dn(13,i,t,d),e.elementType=Ye,e.lanes=m,e;case ut:return e=Dn(19,i,t,d),e.elementType=ut,e.lanes=m,e;case Pe:return sa(i,d,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case He:y=10;break e;case Ve:y=9;break e;case rt:y=11;break e;case ue:y=14;break e;case Se:y=16,u=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=Dn(y,i,t,d),t.elementType=e,t.type=u,t.lanes=m,t}function ds(e,t,i,u){return e=Dn(7,e,u,t),e.lanes=i,e}function sa(e,t,i,u){return e=Dn(22,e,u,t),e.elementType=Pe,e.lanes=i,e.stateNode={isHidden:!1},e}function iu(e,t,i){return e=Dn(6,e,null,t),e.lanes=i,e}function ou(e,t,i){return t=Dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gg(e,t,i,u,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xr(0),this.expirationTimes=Xr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function au(e,t,i,u,d,m,y,E,L){return e=new gg(e,t,i,E,L),t===1?(t=1,m===!0&&(t|=8)):t=0,m=Dn(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:u,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},_l(m),e}function wg(e,t,i){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:u==null?null:""+u,children:e,containerInfo:t,implementation:i}}function Df(e){if(!e)return Or;e=e._reactInternals;e:{if(et(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(an(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(an(i))return dd(e,i,t)}return t}function Uf(e,t,i,u,d,m,y,E,L){return e=au(i,u,!0,e,d,m,y,E,L),e.context=Df(null),i=e.current,u=tn(),d=Br(i),m=vr(u,d),m.callback=t??null,$r(i,m,d),e.current.lanes=d,sn(e,d,u),cn(e,u),e}function ia(e,t,i,u){var d=t.current,m=tn(),y=Br(d);return i=Df(i),t.context===null?t.context=i:t.pendingContext=i,t=vr(m,y),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),e=$r(d,t,y),e!==null&&(Kn(e,d,y,m),Mo(e,d,y)),y}function oa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ff(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function lu(e,t){Ff(e,t),(e=e.alternate)&&Ff(e,t)}function vg(){return null}var Bf=typeof reportError=="function"?reportError:function(e){console.error(e)};function uu(e){this._internalRoot=e}aa.prototype.render=uu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));ia(e,t,null,null)},aa.prototype.unmount=uu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ls(function(){ia(null,e,null,null)}),t[hr]=null}};function aa(e){this._internalRoot=e}aa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sc();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Rr.length&&t!==0&&t<Rr[i].priority;i++);Rr.splice(i,0,e),i===0&&Cc(e)}};function cu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function la(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gf(){}function yg(e,t,i,u,d){if(d){if(typeof u=="function"){var m=u;u=function(){var W=oa(y);m.call(W)}}var y=Uf(t,u,e,0,null,!1,!1,"",Gf);return e._reactRootContainer=y,e[hr]=y.current,Ri(e.nodeType===8?e.parentNode:e),ls(),y}for(;d=e.lastChild;)e.removeChild(d);if(typeof u=="function"){var E=u;u=function(){var W=oa(L);E.call(W)}}var L=au(e,0,!1,null,null,!1,!1,"",Gf);return e._reactRootContainer=L,e[hr]=L.current,Ri(e.nodeType===8?e.parentNode:e),ls(function(){ia(t,L,i,u)}),L}function ua(e,t,i,u,d){var m=i._reactRootContainer;if(m){var y=m;if(typeof d=="function"){var E=d;d=function(){var L=oa(y);E.call(L)}}ia(t,y,e,d)}else y=yg(i,t,e,d,u);return oa(y)}xc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Ke(t.pendingLanes);i!==0&&(Oa(t,i|1),cn(t,Ge()),(ot&6)===0&&(qs=Ge()+500,Ar()))}break;case 13:ls(function(){var u=wr(e,1);if(u!==null){var d=tn();Kn(u,e,1,d)}}),lu(e,1)}},Aa=function(e){if(e.tag===13){var t=wr(e,134217728);if(t!==null){var i=tn();Kn(t,e,134217728,i)}lu(e,134217728)}},bc=function(e){if(e.tag===13){var t=Br(e),i=wr(e,t);if(i!==null){var u=tn();Kn(i,e,t,u)}lu(e,t)}},Sc=function(){return ft},kc=function(e,t){var i=ft;try{return ft=e,t()}finally{ft=i}},fe=function(e,t,i){switch(t){case"input":if(J(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var u=i[t];if(u!==e&&u.form===e.form){var d=Co(u);if(!d)throw Error(r(90));ve(u),J(u,d)}}}break;case"textarea":at(e,i);break;case"select":t=i.value,t!=null&&qe(e,!!i.multiple,t,!1)}},hn=tu,kr=ls;var _g={usingClientEntryPoint:!1,Events:[Li,Os,Co,ct,dt,tu]},Vi={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xg={bundleType:Vi.bundleType,version:Vi.version,rendererPackageName:Vi.rendererPackageName,rendererConfig:Vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wn(e),e===null?null:e.stateNode},findFiberByHostInstance:Vi.findFiberByHostInstance||vg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{Qr=ca.inject(xg),Ln=ca}catch{}}return dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g,dn.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(t))throw Error(r(200));return wg(e,t,null,i)},dn.createRoot=function(e,t){if(!cu(e))throw Error(r(299));var i=!1,u="",d=Bf;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=au(e,1,!1,null,null,i,!1,u,d),e[hr]=t.current,Ri(e.nodeType===8?e.parentNode:e),new uu(t)},dn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=wn(t),e=e===null?null:e.stateNode,e},dn.flushSync=function(e){return ls(e)},dn.hydrate=function(e,t,i){if(!la(t))throw Error(r(200));return ua(null,e,t,!0,i)},dn.hydrateRoot=function(e,t,i){if(!cu(e))throw Error(r(405));var u=i!=null&&i.hydratedSources||null,d=!1,m="",y=Bf;if(i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=Uf(t,null,e,1,i??null,d,!1,m,y),e[hr]=t.current,Ri(e),u)for(e=0;e<u.length;e++)i=u[e],d=i._getVersion,d=d(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,d]:t.mutableSourceEagerHydrationData.push(i,d);return new aa(t)},dn.render=function(e,t,i){if(!la(t))throw Error(r(200));return ua(null,e,t,!1,i)},dn.unmountComponentAtNode=function(e){if(!la(e))throw Error(r(40));return e._reactRootContainer?(ls(function(){ua(null,null,e,!1,function(){e._reactRootContainer=null,e[hr]=null})}),!0):!1},dn.unstable_batchedUpdates=tu,dn.unstable_renderSubtreeIntoContainer=function(e,t,i,u){if(!la(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return ua(e,t,i,!1,u)},dn.version="18.3.1-next-f1338f8080-20240426",dn}var Qf;function Hh(){if(Qf)return hu.exports;Qf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),hu.exports=Ng(),hu.exports}var Zf;function Lg(){if(Zf)return da;Zf=1;var s=Hh();return da.createRoot=s.createRoot,da.hydrateRoot=s.hydrateRoot,da}var Ig=Lg();const Og=rc(Ig);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Xf="popstate";function Ag(s={}){function n(o,a){let{pathname:l,search:c,hash:f}=o.location;return $u("",{pathname:l,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(o,a){return typeof a=="string"?a:no(a)}return $g(n,r,null,s)}function St(s,n){if(s===!1||s===null||typeof s>"u")throw new Error(n)}function Un(s,n){if(!s){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Mg(){return Math.random().toString(36).substring(2,10)}function eh(s,n){return{usr:s.state,key:s.key,idx:n}}function $u(s,n,r=null,o){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof n=="string"?ci(n):n,state:r,key:n&&n.key||o||Mg()}}function no({pathname:s="/",search:n="",hash:r=""}){return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function ci(s){let n={};if(s){let r=s.indexOf("#");r>=0&&(n.hash=s.substring(r),s=s.substring(0,r));let o=s.indexOf("?");o>=0&&(n.search=s.substring(o),s=s.substring(0,o)),s&&(n.pathname=s)}return n}function $g(s,n,r,o={}){let{window:a=document.defaultView,v5Compat:l=!1}=o,c=a.history,f="POP",p=null,g=w();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function w(){return(c.state||{idx:null}).idx}function _(){f="POP";let k=w(),A=k==null?null:k-g;g=k,p&&p({action:f,location:N.location,delta:A})}function b(k,A){f="PUSH";let j=$u(N.location,k,A);g=w()+1;let T=eh(j,g),$=N.createHref(j);try{c.pushState(T,"",$)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign($)}l&&p&&p({action:f,location:N.location,delta:1})}function S(k,A){f="REPLACE";let j=$u(N.location,k,A);g=w();let T=eh(j,g),$=N.createHref(j);c.replaceState(T,"",$),l&&p&&p({action:f,location:N.location,delta:0})}function P(k){return Dg(k)}let N={get action(){return f},get location(){return s(a,c)},listen(k){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Xf,_),p=k,()=>{a.removeEventListener(Xf,_),p=null}},createHref(k){return n(a,k)},createURL:P,encodeLocation(k){let A=P(k);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:b,replace:S,go(k){return c.go(k)}};return N}function Dg(s,n=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),St(r,"No window.location.(origin|href) available to create URL");let o=typeof s=="string"?s:no(s);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=r+o),new URL(o,r)}function Vh(s,n,r="/"){return Ug(s,n,r,!1)}function Ug(s,n,r,o){let a=typeof n=="string"?ci(n):n,l=Sr(a.pathname||"/",r);if(l==null)return null;let c=qh(s);Fg(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let g=Qg(l);f=Jg(c[p],g,o)}return f}function qh(s,n=[],r=[],o="",a=!1){let l=(c,f,p=a,g)=>{let w={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(o)&&p)return;St(w.relativePath.startsWith(o),`Absolute route path "${w.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(o.length)}let _=br([o,w.relativePath]),b=r.concat(w);c.children&&c.children.length>0&&(St(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),qh(c.children,n,b,_,p)),!(c.path==null&&!c.index)&&n.push({path:_,score:qg(_,c.index),routesMeta:b})};return s.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let p of Kh(c.path))l(c,f,!0,p)}),n}function Kh(s){let n=s.split("/");if(n.length===0)return[];let[r,...o]=n,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(o.length===0)return a?[l,""]:[l];let c=Kh(o.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&f.push(...c),f.map(p=>s.startsWith("/")&&p===""?"/":p)}function Fg(s){s.sort((n,r)=>n.score!==r.score?r.score-n.score:Kg(n.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}var Bg=/^:[\w-]+$/,Gg=3,zg=2,Wg=1,Hg=10,Vg=-2,th=s=>s==="*";function qg(s,n){let r=s.split("/"),o=r.length;return r.some(th)&&(o+=Vg),n&&(o+=zg),r.filter(a=>!th(a)).reduce((a,l)=>a+(Bg.test(l)?Gg:l===""?Wg:Hg),o)}function Kg(s,n){return s.length===n.length&&s.slice(0,-1).every((o,a)=>o===n[a])?s[s.length-1]-n[n.length-1]:0}function Jg(s,n,r=!1){let{routesMeta:o}=s,a={},l="/",c=[];for(let f=0;f<o.length;++f){let p=o[f],g=f===o.length-1,w=l==="/"?n:n.slice(l.length)||"/",_=Sa({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},w),b=p.route;if(!_&&g&&r&&!o[o.length-1].route.index&&(_=Sa({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!_)return null;Object.assign(a,_.params),c.push({params:a,pathname:br([l,_.pathname]),pathnameBase:t0(br([l,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(l=br([l,_.pathnameBase]))}return c}function Sa(s,n){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,o]=Yg(s.path,s.caseSensitive,s.end),a=n.match(r);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:o.reduce((g,{paramName:w,isOptional:_},b)=>{if(w==="*"){let P=f[b]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const S=f[b];return _&&!S?g[w]=void 0:g[w]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:s}}function Yg(s,n=!1,r=!0){Un(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let o=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(o.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(o.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),o]}function Qg(s){try{return s.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Un(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),s}}function Sr(s,n){if(n==="/")return s;if(!s.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,o=s.charAt(r);return o&&o!=="/"?null:s.slice(r)||"/"}function Zg(s,n="/"){let{pathname:r,search:o="",hash:a=""}=typeof s=="string"?ci(s):s;return{pathname:r?r.startsWith("/")?r:Xg(r,n):n,search:n0(o),hash:r0(a)}}function Xg(s,n){let r=n.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function gu(s,n,r,o){return`Cannot include a '${s}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function e0(s){return s.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function ic(s){let n=e0(s);return n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase)}function oc(s,n,r,o=!1){let a;typeof s=="string"?a=ci(s):(a={...s},St(!a.pathname||!a.pathname.includes("?"),gu("?","pathname","search",a)),St(!a.pathname||!a.pathname.includes("#"),gu("#","pathname","hash",a)),St(!a.search||!a.search.includes("#"),gu("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=r;else{let _=n.length-1;if(!o&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),_-=1;a.pathname=b.join("/")}f=_>=0?n[_]:"/"}let p=Zg(a,f),g=c&&c!=="/"&&c.endsWith("/"),w=(l||c===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||w)&&(p.pathname+="/"),p}var br=s=>s.join("/").replace(/\/\/+/g,"/"),t0=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),n0=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,r0=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function s0(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Jh=["POST","PUT","PATCH","DELETE"];new Set(Jh);var i0=["GET",...Jh];new Set(i0);var di=x.createContext(null);di.displayName="DataRouter";var ja=x.createContext(null);ja.displayName="DataRouterState";x.createContext(!1);var Yh=x.createContext({isTransitioning:!1});Yh.displayName="ViewTransition";var o0=x.createContext(new Map);o0.displayName="Fetchers";var a0=x.createContext(null);a0.displayName="Await";var Zn=x.createContext(null);Zn.displayName="Navigation";var io=x.createContext(null);io.displayName="Location";var Xn=x.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var ac=x.createContext(null);ac.displayName="RouteError";function l0(s,{relative:n}={}){St(fi(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=x.useContext(Zn),{hash:a,pathname:l,search:c}=oo(s,{relative:n}),f=l;return r!=="/"&&(f=l==="/"?r:br([r,l])),o.createHref({pathname:f,search:c,hash:a})}function fi(){return x.useContext(io)!=null}function er(){return St(fi(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(io).location}var Qh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Zh(s){x.useContext(Zn).static||x.useLayoutEffect(s)}function hi(){let{isDataRoute:s}=x.useContext(Xn);return s?x0():u0()}function u0(){St(fi(),"useNavigate() may be used only in the context of a <Router> component.");let s=x.useContext(di),{basename:n,navigator:r}=x.useContext(Zn),{matches:o}=x.useContext(Xn),{pathname:a}=er(),l=JSON.stringify(ic(o)),c=x.useRef(!1);return Zh(()=>{c.current=!0}),x.useCallback((p,g={})=>{if(Un(c.current,Qh),!c.current)return;if(typeof p=="number"){r.go(p);return}let w=oc(p,JSON.parse(l),a,g.relative==="path");s==null&&n!=="/"&&(w.pathname=w.pathname==="/"?n:br([n,w.pathname])),(g.replace?r.replace:r.push)(w,g.state,g)},[n,r,l,a,s])}x.createContext(null);function i_(){let{matches:s}=x.useContext(Xn),n=s[s.length-1];return n?n.params:{}}function oo(s,{relative:n}={}){let{matches:r}=x.useContext(Xn),{pathname:o}=er(),a=JSON.stringify(ic(r));return x.useMemo(()=>oc(s,JSON.parse(a),o,n==="path"),[s,a,o,n])}function c0(s,n){return Xh(s,n)}function Xh(s,n,r,o,a){St(fi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=x.useContext(Zn),{matches:c}=x.useContext(Xn),f=c[c.length-1],p=f?f.params:{},g=f?f.pathname:"/",w=f?f.pathnameBase:"/",_=f&&f.route;{let j=_&&_.path||"";em(g,!_||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let b=er(),S;if(n){let j=typeof n=="string"?ci(n):n;St(w==="/"||j.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${j.pathname}" was given in the \`location\` prop.`),S=j}else S=b;let P=S.pathname||"/",N=P;if(w!=="/"){let j=w.replace(/^\//,"").split("/");N="/"+P.replace(/^\//,"").split("/").slice(j.length).join("/")}let k=Vh(s,{pathname:N});Un(_||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Un(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=p0(k&&k.map(j=>Object.assign({},j,{params:Object.assign({},p,j.params),pathname:br([w,l.encodeLocation?l.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?w:br([w,l.encodeLocation?l.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),c,r,o,a);return n&&A?x.createElement(io.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},A):A}function d0(){let s=_0(),n=s0(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:l},"ErrorBoundary")," or"," ",x.createElement("code",{style:l},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},n),r?x.createElement("pre",{style:a},r):null,c)}var f0=x.createElement(d0,null),h0=class extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){this.props.unstable_onError?this.props.unstable_onError(s,n):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?x.createElement(Xn.Provider,{value:this.props.routeContext},x.createElement(ac.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function m0({routeContext:s,match:n,children:r}){let o=x.useContext(di);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Xn.Provider,{value:s},r)}function p0(s,n=[],r=null,o=null,a=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(n.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let l=s,c=r?.errors;if(c!=null){let g=l.findIndex(w=>w.route.id&&c?.[w.route.id]!==void 0);St(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,p=-1;if(r)for(let g=0;g<l.length;g++){let w=l[g];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=g),w.route.id){let{loaderData:_,errors:b}=r,S=w.route.loader&&!_.hasOwnProperty(w.route.id)&&(!b||b[w.route.id]===void 0);if(w.route.lazy||S){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,w,_)=>{let b,S=!1,P=null,N=null;r&&(b=c&&w.route.id?c[w.route.id]:void 0,P=w.route.errorElement||f0,f&&(p<0&&_===0?(em("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,N=null):p===_&&(S=!0,N=w.route.hydrateFallbackElement||null)));let k=n.concat(l.slice(0,_+1)),A=()=>{let j;return b?j=P:S?j=N:w.route.Component?j=x.createElement(w.route.Component,null):w.route.element?j=w.route.element:j=g,x.createElement(m0,{match:w,routeContext:{outlet:g,matches:k,isDataRoute:r!=null},children:j})};return r&&(w.route.ErrorBoundary||w.route.errorElement||_===0)?x.createElement(h0,{location:r.location,revalidation:r.revalidation,component:P,error:b,children:A(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:o}):A()},null)}function lc(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g0(s){let n=x.useContext(di);return St(n,lc(s)),n}function w0(s){let n=x.useContext(ja);return St(n,lc(s)),n}function v0(s){let n=x.useContext(Xn);return St(n,lc(s)),n}function uc(s){let n=v0(s),r=n.matches[n.matches.length-1];return St(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function y0(){return uc("useRouteId")}function _0(){let s=x.useContext(ac),n=w0("useRouteError"),r=uc("useRouteError");return s!==void 0?s:n.errors?.[r]}function x0(){let{router:s}=g0("useNavigate"),n=uc("useNavigate"),r=x.useRef(!1);return Zh(()=>{r.current=!0}),x.useCallback(async(a,l={})=>{Un(r.current,Qh),r.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:n,...l}))},[s,n])}var nh={};function em(s,n,r){!n&&!nh[s]&&(nh[s]=!0,Un(!1,r))}x.memo(b0);function b0({routes:s,future:n,state:r,unstable_onError:o}){return Xh(s,void 0,r,o,n)}function tm({to:s,replace:n,state:r,relative:o}){St(fi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=x.useContext(Zn);Un(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=x.useContext(Xn),{pathname:c}=er(),f=hi(),p=oc(s,ic(l),c,o==="path"),g=JSON.stringify(p);return x.useEffect(()=>{f(JSON.parse(g),{replace:n,state:r,relative:o})},[f,g,o,n,r]),null}function Pt(s){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function S0({basename:s="/",children:n=null,location:r,navigationType:o="POP",navigator:a,static:l=!1}){St(!fi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof r=="string"&&(r=ci(r));let{pathname:p="/",search:g="",hash:w="",state:_=null,key:b="default"}=r,S=x.useMemo(()=>{let P=Sr(p,c);return P==null?null:{location:{pathname:P,search:g,hash:w,state:_,key:b},navigationType:o}},[c,p,g,w,_,b,o]);return Un(S!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:x.createElement(Zn.Provider,{value:f},x.createElement(io.Provider,{children:n,value:S}))}function k0({children:s,location:n}){return c0(Du(s),n)}function Du(s,n=[]){let r=[];return x.Children.forEach(s,(o,a)=>{if(!x.isValidElement(o))return;let l=[...n,a];if(o.type===x.Fragment){r.push.apply(r,Du(o.props.children,l));return}St(o.type===Pt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=Du(o.props.children,l)),r.push(c)}),r}var _a="get",xa="application/x-www-form-urlencoded";function Ra(s){return s!=null&&typeof s.tagName=="string"}function E0(s){return Ra(s)&&s.tagName.toLowerCase()==="button"}function C0(s){return Ra(s)&&s.tagName.toLowerCase()==="form"}function P0(s){return Ra(s)&&s.tagName.toLowerCase()==="input"}function j0(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function R0(s,n){return s.button===0&&(!n||n==="_self")&&!j0(s)}function Uu(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((n,r)=>{let o=s[r];return n.concat(Array.isArray(o)?o.map(a=>[r,a]):[[r,o]])},[]))}function T0(s,n){let r=Uu(s);return n&&n.forEach((o,a)=>{r.has(a)||n.getAll(a).forEach(l=>{r.append(a,l)})}),r}var fa=null;function N0(){if(fa===null)try{new FormData(document.createElement("form"),0),fa=!1}catch{fa=!0}return fa}var L0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wu(s){return s!=null&&!L0.has(s)?(Un(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xa}"`),null):s}function I0(s,n){let r,o,a,l,c;if(C0(s)){let f=s.getAttribute("action");o=f?Sr(f,n):null,r=s.getAttribute("method")||_a,a=wu(s.getAttribute("enctype"))||xa,l=new FormData(s)}else if(E0(s)||P0(s)&&(s.type==="submit"||s.type==="image")){let f=s.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||f.getAttribute("action");if(o=p?Sr(p,n):null,r=s.getAttribute("formmethod")||f.getAttribute("method")||_a,a=wu(s.getAttribute("formenctype"))||wu(f.getAttribute("enctype"))||xa,l=new FormData(f,s),!N0()){let{name:g,type:w,value:_}=s;if(w==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,_)}}else{if(Ra(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_a,o=null,a=xa,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:o,method:r.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cc(s,n){if(s===!1||s===null||typeof s>"u")throw new Error(n)}function O0(s,n,r){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return o.pathname==="/"?o.pathname=`_root.${r}`:n&&Sr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function A0(s,n){if(s.id in n)return n[s.id];try{let r=await import(s.module);return n[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function M0(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function $0(s,n,r){let o=await Promise.all(s.map(async a=>{let l=n.routes[a.route.id];if(l){let c=await A0(l,r);return c.links?c.links():[]}return[]}));return B0(o.flat(1).filter(M0).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function rh(s,n,r,o,a,l){let c=(p,g)=>r[g]?p.route.id!==r[g].route.id:!0,f=(p,g)=>r[g].pathname!==p.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==p.params["*"];return l==="assets"?n.filter((p,g)=>c(p,g)||f(p,g)):l==="data"?n.filter((p,g)=>{let w=o.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(c(p,g)||f(p,g))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function D0(s,n,{includeHydrateFallback:r}={}){return U0(s.map(o=>{let a=n.routes[o.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function U0(s){return[...new Set(s)]}function F0(s){let n={},r=Object.keys(s).sort();for(let o of r)n[o]=s[o];return n}function B0(s,n){let r=new Set;return new Set(n),s.reduce((o,a)=>{let l=JSON.stringify(F0(a));return r.has(l)||(r.add(l),o.push({key:l,link:a})),o},[])}function nm(){let s=x.useContext(di);return cc(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function G0(){let s=x.useContext(ja);return cc(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var dc=x.createContext(void 0);dc.displayName="FrameworkContext";function rm(){let s=x.useContext(dc);return cc(s,"You must render this element inside a <HydratedRouter> element"),s}function z0(s,n){let r=x.useContext(dc),[o,a]=x.useState(!1),[l,c]=x.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:g,onMouseLeave:w,onTouchStart:_}=n,b=x.useRef(null);x.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let N=A=>{A.forEach(j=>{c(j.isIntersecting)})},k=new IntersectionObserver(N,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[s]),x.useEffect(()=>{if(o){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[o]);let S=()=>{a(!0)},P=()=>{a(!1),c(!1)};return r?s!=="intent"?[l,b,{}]:[l,b,{onFocus:Ki(f,S),onBlur:Ki(p,P),onMouseEnter:Ki(g,S),onMouseLeave:Ki(w,P),onTouchStart:Ki(_,S)}]:[!1,b,{}]}function Ki(s,n){return r=>{s&&s(r),r.defaultPrevented||n(r)}}function W0({page:s,...n}){let{router:r}=nm(),o=x.useMemo(()=>Vh(r.routes,s,r.basename),[r.routes,s,r.basename]);return o?x.createElement(V0,{page:s,matches:o,...n}):null}function H0(s){let{manifest:n,routeModules:r}=rm(),[o,a]=x.useState([]);return x.useEffect(()=>{let l=!1;return $0(s,n,r).then(c=>{l||a(c)}),()=>{l=!0}},[s,n,r]),o}function V0({page:s,matches:n,...r}){let o=er(),{manifest:a,routeModules:l}=rm(),{basename:c}=nm(),{loaderData:f,matches:p}=G0(),g=x.useMemo(()=>rh(s,n,p,a,o,"data"),[s,n,p,a,o]),w=x.useMemo(()=>rh(s,n,p,a,o,"assets"),[s,n,p,a,o]),_=x.useMemo(()=>{if(s===o.pathname+o.search+o.hash)return[];let P=new Set,N=!1;if(n.forEach(A=>{let j=a.routes[A.route.id];!j||!j.hasLoader||(!g.some(T=>T.route.id===A.route.id)&&A.route.id in f&&l[A.route.id]?.shouldRevalidate||j.hasClientLoader?N=!0:P.add(A.route.id))}),P.size===0)return[];let k=O0(s,c,"data");return N&&P.size>0&&k.searchParams.set("_routes",n.filter(A=>P.has(A.route.id)).map(A=>A.route.id).join(",")),[k.pathname+k.search]},[c,f,o,a,g,n,s,l]),b=x.useMemo(()=>D0(w,a),[w,a]),S=H0(w);return x.createElement(x.Fragment,null,_.map(P=>x.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...r})),b.map(P=>x.createElement("link",{key:P,rel:"modulepreload",href:P,...r})),S.map(({key:P,link:N})=>x.createElement("link",{key:P,nonce:r.nonce,...N})))}function q0(...s){return n=>{s.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var sm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sm&&(window.__reactRouterVersion="7.9.4")}catch{}function K0({basename:s,children:n,window:r}){let o=x.useRef();o.current==null&&(o.current=Ag({window:r,v5Compat:!0}));let a=o.current,[l,c]=x.useState({action:a.action,location:a.location}),f=x.useCallback(p=>{x.startTransition(()=>c(p))},[c]);return x.useLayoutEffect(()=>a.listen(f),[a,f]),x.createElement(S0,{basename:s,children:n,location:l.location,navigationType:l.action,navigator:a})}var im=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qn=x.forwardRef(function({onClick:n,discover:r="render",prefetch:o="none",relative:a,reloadDocument:l,replace:c,state:f,target:p,to:g,preventScrollReset:w,viewTransition:_,...b},S){let{basename:P}=x.useContext(Zn),N=typeof g=="string"&&im.test(g),k,A=!1;if(typeof g=="string"&&N&&(k=g,sm))try{let Me=new URL(window.location.href),He=g.startsWith("//")?new URL(Me.protocol+g):new URL(g),Ve=Sr(He.pathname,P);He.origin===Me.origin&&Ve!=null?g=Ve+He.search+He.hash:A=!0}catch{Un(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=l0(g,{relative:a}),[T,$,M]=z0(o,b),Y=Z0(g,{replace:c,state:f,target:p,preventScrollReset:w,relative:a,viewTransition:_});function re(Me){n&&n(Me),Me.defaultPrevented||Y(Me)}let Ie=x.createElement("a",{...b,...M,href:k||j,onClick:A||l?n:re,ref:q0(S,$),target:p,"data-discover":!N&&r==="render"?"true":void 0});return T&&!N?x.createElement(x.Fragment,null,Ie,x.createElement(W0,{page:j})):Ie});Qn.displayName="Link";var J0=x.forwardRef(function({"aria-current":n="page",caseSensitive:r=!1,className:o="",end:a=!1,style:l,to:c,viewTransition:f,children:p,...g},w){let _=oo(c,{relative:g.relative}),b=er(),S=x.useContext(ja),{navigator:P,basename:N}=x.useContext(Zn),k=S!=null&&sw(_)&&f===!0,A=P.encodeLocation?P.encodeLocation(_).pathname:_.pathname,j=b.pathname,T=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(j=j.toLowerCase(),T=T?T.toLowerCase():null,A=A.toLowerCase()),T&&N&&(T=Sr(T,N)||T);const $=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let M=j===A||!a&&j.startsWith(A)&&j.charAt($)==="/",Y=T!=null&&(T===A||!a&&T.startsWith(A)&&T.charAt(A.length)==="/"),re={isActive:M,isPending:Y,isTransitioning:k},Ie=M?n:void 0,Me;typeof o=="function"?Me=o(re):Me=[o,M?"active":null,Y?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let He=typeof l=="function"?l(re):l;return x.createElement(Qn,{...g,"aria-current":Ie,className:Me,ref:w,style:He,to:c,viewTransition:f},typeof p=="function"?p(re):p)});J0.displayName="NavLink";var Y0=x.forwardRef(({discover:s="render",fetcherKey:n,navigate:r,reloadDocument:o,replace:a,state:l,method:c=_a,action:f,onSubmit:p,relative:g,preventScrollReset:w,viewTransition:_,...b},S)=>{let P=nw(),N=rw(f,{relative:g}),k=c.toLowerCase()==="get"?"get":"post",A=typeof f=="string"&&im.test(f),j=T=>{if(p&&p(T),T.defaultPrevented)return;T.preventDefault();let $=T.nativeEvent.submitter,M=$?.getAttribute("formmethod")||c;P($||T.currentTarget,{fetcherKey:n,method:M,navigate:r,replace:a,state:l,relative:g,preventScrollReset:w,viewTransition:_})};return x.createElement("form",{ref:S,method:k,action:N,onSubmit:o?p:j,...b,"data-discover":!A&&s==="render"?"true":void 0})});Y0.displayName="Form";function Q0(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function om(s){let n=x.useContext(di);return St(n,Q0(s)),n}function Z0(s,{target:n,replace:r,state:o,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=hi(),p=er(),g=oo(s,{relative:l});return x.useCallback(w=>{if(R0(w,n)){w.preventDefault();let _=r!==void 0?r:no(p)===no(g);f(s,{replace:_,state:o,preventScrollReset:a,relative:l,viewTransition:c})}},[p,f,g,r,o,n,s,a,l,c])}function X0(s){Un(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=x.useRef(Uu(s)),r=x.useRef(!1),o=er(),a=x.useMemo(()=>T0(o.search,r.current?null:n.current),[o.search]),l=hi(),c=x.useCallback((f,p)=>{const g=Uu(typeof f=="function"?f(new URLSearchParams(a)):f);r.current=!0,l("?"+g,p)},[l,a]);return[a,c]}var ew=0,tw=()=>`__${String(++ew)}__`;function nw(){let{router:s}=om("useSubmit"),{basename:n}=x.useContext(Zn),r=y0();return x.useCallback(async(o,a={})=>{let{action:l,method:c,encType:f,formData:p,body:g}=I0(o,n);if(a.navigate===!1){let w=a.fetcherKey||tw();await s.fetch(w,r,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,n,r])}function rw(s,{relative:n}={}){let{basename:r}=x.useContext(Zn),o=x.useContext(Xn);St(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),l={...oo(s||".",{relative:n})},c=er();if(s==null){l.search=c.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(w=>w==="")){f.delete("index"),p.filter(_=>_).forEach(_=>f.append("index",_));let w=f.toString();l.search=w?`?${w}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:br([r,l.pathname])),no(l)}function sw(s,{relative:n}={}){let r=x.useContext(Yh);St(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=om("useViewTransitionState"),a=oo(s,{relative:n});if(!r.isTransitioning)return!1;let l=Sr(r.currentLocation.pathname,o)||r.currentLocation.pathname,c=Sr(r.nextLocation.pathname,o)||r.nextLocation.pathname;return Sa(a.pathname,c)!=null||Sa(a.pathname,l)!=null}var iw=Hh();const ow=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>Tt(async()=>{const{default:o}=await Promise.resolve().then(()=>mi);return{default:o}},[]).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)};class fc extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}}class sh extends fc{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class ih extends fc{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class oh extends fc{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Fu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Fu||(Fu={}));var aw=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};class lw{constructor(n,{headers:r={},customFetch:o,region:a=Fu.Any}={}){this.url=n,this.headers=r,this.region=a,this.fetch=ow(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return aw(this,arguments,void 0,function*(r,o={}){var a;try{const{headers:l,method:c,body:f,signal:p}=o;let g={},{region:w}=o;w||(w=this.region);const _=new URL(`${this.url}/${r}`);w&&w!=="any"&&(g["x-region"]=w,_.searchParams.set("forceFunctionRegion",w));let b;f&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",b=f):typeof f=="string"?(g["Content-Type"]="text/plain",b=f):typeof FormData<"u"&&f instanceof FormData?b=f:(g["Content-Type"]="application/json",b=JSON.stringify(f)));const S=yield this.fetch(_.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),l),body:b,signal:p}).catch(A=>{throw A.name==="AbortError"?A:new sh(A)}),P=S.headers.get("x-relay-error");if(P&&P==="true")throw new ih(S);if(!S.ok)throw new oh(S);let N=((a=S.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return N==="application/json"?k=yield S.json():N==="application/octet-stream"?k=yield S.blob():N==="text/event-stream"?k=S:N==="multipart/form-data"?k=yield S.formData():k=yield S.text(),{data:k,error:null,response:S}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new sh(l)}:{data:null,error:l,response:l instanceof oh||l instanceof ih?l.context:void 0}}})}}var Ht={},Js={},Ys={},Qs={},Zs={},Xs={},uw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ui=uw();const cw=ui.fetch,am=ui.fetch.bind(ui),lm=ui.Headers,dw=ui.Request,fw=ui.Response,mi=Object.freeze(Object.defineProperty({__proto__:null,Headers:lm,Request:dw,Response:fw,default:am,fetch:cw},Symbol.toStringTag,{value:"Module"})),hw=Eg(mi);var ha={},ah;function um(){if(ah)return ha;ah=1,Object.defineProperty(ha,"__esModule",{value:!0});class s extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ha.default=s,ha}var lh;function cm(){if(lh)return Xs;lh=1;var s=Xs&&Xs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Xs,"__esModule",{value:!0});const n=s(hw),r=s(um());class o{constructor(l){var c,f;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(f=l.isMaybeSingle)!==null&&f!==void 0?f:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let p=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var w,_,b,S;let P=null,N=null,k=null,A=g.status,j=g.statusText;if(g.ok){if(this.method!=="HEAD"){const Y=await g.text();Y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?N=Y:N=JSON.parse(Y))}const $=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),M=(b=g.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");$&&M&&M.length>1&&(k=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(P={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,k=null,A=406,j="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const $=await g.text();try{P=JSON.parse($),Array.isArray(P)&&g.status===404&&(N=[],P=null,A=200,j="OK")}catch{g.status===404&&$===""?(A=204,j="No Content"):P={message:$}}if(P&&this.isMaybeSingle&&(!((S=P?.details)===null||S===void 0)&&S.includes("0 rows"))&&(P=null,A=200,j="OK"),P&&this.shouldThrowOnError)throw new r.default(P)}return{error:P,data:N,count:k,status:A,statusText:j}});return this.shouldThrowOnError||(p=p.catch(g=>{var w,_,b;return{error:{message:`${(w=g?.name)!==null&&w!==void 0?w:"FetchError"}: ${g?.message}`,details:`${(_=g?.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(b=g?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),p.then(l,c)}returns(){return this}overrideTypes(){return this}}return Xs.default=o,Xs}var uh;function dm(){if(uh)return Zs;uh=1;var s=Zs&&Zs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Zs,"__esModule",{value:!0});const n=s(cm());class r extends n.default{select(a){let l=!1;const c=(a??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:p=f}={}){const g=p?`${p}.order`:"order",w=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${w?`${w},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:f=c}={}){const p=typeof f>"u"?"offset":`${f}.offset`,g=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${a}`),this.url.searchParams.set(g,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:p=!1,format:g="text"}={}){var w;const _=[a?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),b=(w=this.headers.get("Accept"))!==null&&w!==void 0?w:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${b}"; options=${_};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Zs.default=r,Zs}var ch;function hc(){if(ch)return Qs;ch=1;var s=Qs&&Qs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Qs,"__esModule",{value:!0});const n=s(dm());class r extends n.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const c=Array.from(new Set(l)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:c,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const g=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${p}fts${g}.${l}`),this}match(a){return Object.entries(a).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(a,l,c){return this.url.searchParams.append(a,`not.${l}.${c}`),this}or(a,{foreignTable:l,referencedTable:c=l}={}){const f=c?`${c}.or`:"or";return this.url.searchParams.append(f,`(${a})`),this}filter(a,l,c){return this.url.searchParams.append(a,`${l}.${c}`),this}}return Qs.default=r,Qs}var dh;function fm(){if(dh)return Ys;dh=1;var s=Ys&&Ys.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ys,"__esModule",{value:!0});const n=s(hc());class r{constructor(a,{headers:l={},schema:c,fetch:f}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(a,l){const{head:c=!1,count:f}=l??{},p=c?"HEAD":"GET";let g=!1;const w=(a??"*").split("").map(_=>/\s/.test(_)&&!g?"":(_==='"'&&(g=!g),_)).join("");return this.url.searchParams.set("select",w),f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var f;const p="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(g.length>0){const w=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:p=!0}={}){var g;const w="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const _=a.reduce((b,S)=>b.concat(Object.keys(S)),[]);if(_.length>0){const b=[...new Set(_)].map(S=>`"${S}"`);this.url.searchParams.set("columns",b.join(","))}}return new n.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(a,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new n.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Ys.default=r,Ys}var fh;function mw(){if(fh)return Js;fh=1;var s=Js&&Js.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Js,"__esModule",{value:!0});const n=s(fm()),r=s(hc());class o{constructor(l,{headers:c={},schema:f,fetch:p}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=p}from(l){const c=new URL(`${this.url}/${l}`);return new n.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new o(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:p=!1,count:g}={}){var w;let _;const b=new URL(`${this.url}/rpc/${l}`);let S;f||p?(_=f?"HEAD":"GET",Object.entries(c).filter(([N,k])=>k!==void 0).map(([N,k])=>[N,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([N,k])=>{b.searchParams.append(N,k)})):(_="POST",S=c);const P=new Headers(this.headers);return g&&P.set("Prefer",`count=${g}`),new r.default({method:_,url:b,headers:P,schema:this.schemaName,body:S,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}}return Js.default=o,Js}var hh;function pw(){if(hh)return Ht;hh=1;var s=Ht&&Ht.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.PostgrestError=Ht.PostgrestBuilder=Ht.PostgrestTransformBuilder=Ht.PostgrestFilterBuilder=Ht.PostgrestQueryBuilder=Ht.PostgrestClient=void 0;const n=s(mw());Ht.PostgrestClient=n.default;const r=s(fm());Ht.PostgrestQueryBuilder=r.default;const o=s(hc());Ht.PostgrestFilterBuilder=o.default;const a=s(dm());Ht.PostgrestTransformBuilder=a.default;const l=s(cm());Ht.PostgrestBuilder=l.default;const c=s(um());return Ht.PostgrestError=c.default,Ht.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},Ht}var gw=pw();const ww=rc(gw),{PostgrestClient:vw,PostgrestQueryBuilder:o_,PostgrestFilterBuilder:a_,PostgrestTransformBuilder:l_,PostgrestBuilder:u_,PostgrestError:c_}=ww;class yw{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const o=r.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const o=this.getWebSocketConstructor();return new o(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const _w="2.75.0",xw=`realtime-js/${_w}`,bw="1.0.0",Bu=1e4,Sw=1e3,kw=100;var Yi;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Yi||(Yi={}));var Ut;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ut||(Ut={}));var Yn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Yn||(Yn={}));var Gu;(function(s){s.websocket="websocket"})(Gu||(Gu={}));var gs;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(gs||(gs={}));class Ew{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,r,o)}_decodeBroadcast(n,r,o){const a=r.getUint8(1),l=r.getUint8(2);let c=this.HEADER_LENGTH+2;const f=o.decode(n.slice(c,c+a));c=c+a;const p=o.decode(n.slice(c,c+l));c=c+l;const g=JSON.parse(o.decode(n.slice(c,n.byteLength)));return{ref:null,topic:f,event:p,payload:g}}}class hm{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(mt||(mt={}));const mh=(s,n,r={})=>{var o;const a=(o=r.skipTypes)!==null&&o!==void 0?o:[];return n?Object.keys(n).reduce((l,c)=>(l[c]=Cw(c,s,n,a),l),{}):{}},Cw=(s,n,r,o)=>{const a=n.find(f=>f.name===s),l=a?.type,c=r[s];return l&&!o.includes(l)?mm(l,c):zu(c)},mm=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Tw(n,r)}switch(s){case mt.bool:return Pw(n);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return jw(n);case mt.json:case mt.jsonb:return Rw(n);case mt.timestamp:return Nw(n);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return zu(n);default:return zu(n)}},zu=s=>s,Pw=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},jw=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Rw=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(n){return console.log(`JSON parse error: ${n}`),s}return s},Tw=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,o=s[r];if(s[0]==="{"&&o==="}"){let l;const c=s.slice(1,r);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>mm(n,f))}return s},Nw=s=>typeof s=="string"?s.replace(" ","T"):s,pm=s=>{let n=s;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class vu{constructor(n,r,o={},a=Bu){this.channel=n,this.event=r,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var ph;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(ph||(ph={}));class Qi{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qi.syncState(this.state,a,l,c),this.pendingDiffs.forEach(p=>{this.state=Qi.syncDiff(this.state,p,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Qi.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,a){const l=this.cloneDeep(n),c=this.transformState(r),f={},p={};return this.map(l,(g,w)=>{c[g]||(p[g]=w)}),this.map(c,(g,w)=>{const _=l[g];if(_){const b=w.map(k=>k.presence_ref),S=_.map(k=>k.presence_ref),P=w.filter(k=>S.indexOf(k.presence_ref)<0),N=_.filter(k=>b.indexOf(k.presence_ref)<0);P.length>0&&(f[g]=P),N.length>0&&(p[g]=N)}else f[g]=w}),this.syncDiff(l,{joins:f,leaves:p},o,a)}static syncDiff(n,r,o,a){const{joins:l,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(l,(f,p)=>{var g;const w=(g=n[f])!==null&&g!==void 0?g:[];if(n[f]=this.cloneDeep(p),w.length>0){const _=n[f].map(S=>S.presence_ref),b=w.filter(S=>_.indexOf(S.presence_ref)<0);n[f].unshift(...b)}o(f,w,p)}),this.map(c,(f,p)=>{let g=n[f];if(!g)return;const w=p.map(_=>_.presence_ref);g=g.filter(_=>w.indexOf(_.presence_ref)<0),n[f]=g,a(f,g,p),g.length===0&&delete n[f]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{const a=n[o];return"metas"in a?r[o]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[o]=a,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gh;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(gh||(gh={}));var Zi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Zi||(Zi={}));var xr;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(xr||(xr={}));class mc{constructor(n,r={config:{}},o){var a,l;if(this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=Ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new vu(this,Yn.join,this.params,this.timeout),this.rejoinTimer=new hm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ut.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yn.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Qi(this),this.broadcastEndpointURL=pm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var o,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ut.closed){const{config:{broadcast:c,presence:f,private:p}}=this.params,g=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(S=>S.filter))!==null&&a!==void 0?a:[],w=!!this.bindings[Zi.PRESENCE]&&this.bindings[Zi.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},b={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:w}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>n?.(xr.CHANNEL_ERROR,S)),this._onClose(()=>n?.(xr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},_)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var P;if(this.socket.setAuth(),S===void 0){n?.(xr.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,k=(P=N?.length)!==null&&P!==void 0?P:0,A=[];for(let j=0;j<k;j++){const T=N[j],{filter:{event:$,schema:M,table:Y,filter:re}}=T,Ie=S&&S[j];if(Ie&&Ie.event===$&&Ie.schema===M&&Ie.table===Y&&Ie.filter===re)A.push(Object.assign(Object.assign({},T),{id:Ie.id}));else{this.unsubscribe(),this.state=Ut.errored,n?.(xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,n&&n(xr.SUBSCRIBED);return}}).receive("error",S=>{this.state=Ut.errored,n?.(xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{n?.(xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this.state===Ut.joined&&n===Zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,r,o)}async send(n,r={}){var o,a;if(!this._canPush()&&n.type==="broadcast"){const{event:l,payload:c}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,p;const g=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ut.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new vu(this,Yn.leave,{},n),o.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ut.closed,this.bindings={}}async _fetchWithTimeout(n,r,o){const a=new AbortController,l=setTimeout(()=>a.abort(),o),c=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),c}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new vu(this,n,r,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>kw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var a,l;const c=n.toLocaleLowerCase(),{close:f,error:p,leave:g,join:w}=Yn;if(o&&[f,p,g,w].indexOf(c)>=0&&o!==this._joinRef())return;let b=this._onMessage(c,r,o);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(S=>{var P,N,k;return((P=S.filter)===null||P===void 0?void 0:P.event)==="*"||((k=(N=S.filter)===null||N===void 0?void 0:N.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===c}).map(S=>S.callback(b,o)):(l=this.bindings[c])===null||l===void 0||l.filter(S=>{var P,N,k,A,j,T;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in S){const $=S.id,M=(P=S.filter)===null||P===void 0?void 0:P.event;return $&&((N=r.ids)===null||N===void 0?void 0:N.includes($))&&(M==="*"||M?.toLocaleLowerCase()===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const $=(j=(A=S?.filter)===null||A===void 0?void 0:A.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return $==="*"||$===((T=r?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===c}).map(S=>{if(typeof b=="object"&&"ids"in b){const P=b.data,{schema:N,table:k,commit_timestamp:A,type:j,errors:T}=P;b=Object.assign(Object.assign({},{schema:N,table:k,commit_timestamp:A,eventType:j,new:{},old:{},errors:T}),this._getPayloadRecords(P))}S.callback(b,o)})}_isClosed(){return this.state===Ut.closed}_isJoined(){return this.state===Ut.joined}_isJoining(){return this.state===Ut.joining}_isLeaving(){return this.state===Ut.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){const a=n.toLocaleLowerCase(),l={type:a,filter:r,callback:o};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(n,r){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===o&&mc.isEqual(a.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const o in n)if(n[o]!==r[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Yn.close,{},n)}_onError(n){this._on(Yn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ut.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=mh(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=mh(n.columns,n.old_record)),r}}const yu=()=>{},ma={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lw=[1e3,2e3,5e3,1e4],Iw=1e4,Ow=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Aw{constructor(n,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bu,this.transport=null,this.heartbeatIntervalMs=ma.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yu,this.ref=0,this.reconnectTimer=null,this.logger=yu,this.conn=null,this.sendBuffer=[],this.serializer=new Ew,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>Tt(async()=>{const{default:f}=await Promise.resolve().then(()=>mi);return{default:f}},void 0).then(({default:f})=>f(...c)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...c)=>l(...c)},!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Gu.websocket}`,this.httpEndpoint=pm(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yw.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bw}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},n?this.conn.close(n,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Yi.connecting:return gs.Connecting;case Yi.open:return gs.Open;case Yi.closing:return gs.Closing;default:return gs.Closed}}isConnected(){return this.connectionState()===gs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const o=`realtime:${n}`,a=this.getChannels().find(l=>l.topic===o);if(a)return a;{const l=new mc(`realtime:${n}`,r,this);return this.channels.push(l),l}}push(n){const{topic:r,event:o,payload:a,ref:l}=n,c=()=>{this.encode(n,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${r} ${o} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Sw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ma.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:a,payload:l,ref:c}=r,f=c?`(${c})`:"",p=l.status||"";this.log("receive",`${p} ${o} ${a} ${f}`.trim(),l),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(a,l,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Yn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const o=n.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${n}${o}${a}`}_workerObjectUrl(n){let r;if(n)r=n;else{const o=new Blob([Ow],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r;n?r=n:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const a={access_token:r,version:xw};r&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(Yn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(r)}catch(a){this.log("error",`error in ${n} callback`,a)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new hm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ma.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,o,a,l,c,f,p,g,w;if(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:Bu,this.heartbeatIntervalMs=(a=n?.heartbeatIntervalMs)!==null&&a!==void 0?a:ma.HEARTBEAT_INTERVAL,this.worker=(l=n?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=n?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=n?.heartbeatCallback)!==null&&f!==void 0?f:yu,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(_=>Lw[_-1]||Iw),this.encode=(g=n?.encode)!==null&&g!==void 0?g:((_,b)=>b(JSON.stringify(_))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class pc extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Mt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Mw extends pc{constructor(n,r,o){super(n),this.name="StorageApiError",this.status=r,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wu extends pc{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var $w=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};const gm=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>Tt(async()=>{const{default:o}=await Promise.resolve().then(()=>mi);return{default:o}},void 0).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)},Dw=()=>$w(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Tt(()=>Promise.resolve().then(()=>mi),void 0)).Response:Response}),Hu=s=>{if(Array.isArray(s))return s.map(r=>Hu(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,o])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));n[a]=Hu(o)}),n},Uw=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var bs=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};const _u=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Fw=(s,n,r)=>bs(void 0,void 0,void 0,function*(){const o=yield Dw();s instanceof o&&!r?.noResolveJson?s.json().then(a=>{const l=s.status||500,c=a?.statusCode||l+"";n(new Mw(_u(a),l,c))}).catch(a=>{n(new Wu(_u(a),a))}):n(new Wu(_u(s),s))}),Bw=(s,n,r,o)=>{const a={method:s,headers:n?.headers||{}};return s==="GET"||!o?a:(Uw(o)?(a.headers=Object.assign({"Content-Type":"application/json"},n?.headers),a.body=JSON.stringify(o)):a.body=o,n?.duplex&&(a.duplex=n.duplex),Object.assign(Object.assign({},a),r))};function ao(s,n,r,o,a,l){return bs(this,void 0,void 0,function*(){return new Promise((c,f)=>{s(r,Bw(n,o,a,l)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>c(p)).catch(p=>Fw(p,f,o))})})}function ka(s,n,r,o){return bs(this,void 0,void 0,function*(){return ao(s,"GET",n,r,o)})}function ar(s,n,r,o,a){return bs(this,void 0,void 0,function*(){return ao(s,"POST",n,o,a,r)})}function Vu(s,n,r,o,a){return bs(this,void 0,void 0,function*(){return ao(s,"PUT",n,o,a,r)})}function Gw(s,n,r,o){return bs(this,void 0,void 0,function*(){return ao(s,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),o)})}function wm(s,n,r,o,a){return bs(this,void 0,void 0,function*(){return ao(s,"DELETE",n,o,a,r)})}var zw=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};class Ww{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}execute(){return zw(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}}var Hw=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};class Vw{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}asStream(){return new Ww(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.execute().then(n,r)}execute(){return Hw(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}}var fn=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};const qw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kw{constructor(n,r={},o,a){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=o,this.fetch=gm(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,r,o,a){return fn(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},wh),a);let f=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&o instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),p&&l.append("metadata",this.encodeMetadata(p)),l.append("",o)):typeof FormData<"u"&&o instanceof FormData?(l=o,l.append("cacheControl",c.cacheControl),p&&l.append("metadata",this.encodeMetadata(p))):(l=o,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),a?.headers&&(f=Object.assign(Object.assign({},f),a.headers));const g=this._removeEmptyFolders(r),w=this._getFinalPath(g),_=yield(n=="PUT"?Vu:ar)(this.fetch,`${this.url}/object/${w}`,l,Object.assign({headers:f},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}upload(n,r,o){return fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,o)})}uploadToSignedUrl(n,r,o,a){return fn(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(n),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",r);try{let p;const g=Object.assign({upsert:wh.upsert},a),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",g.cacheControl)):(p=o,w["cache-control"]=`max-age=${g.cacheControl}`,w["content-type"]=g.contentType);const _=yield Vu(this.fetch,f.toString(),p,{headers:w});return{data:{path:l,fullPath:_.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Mt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,r){return fn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const l=yield ar(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new pc("No token returned by API");return{data:{signedUrl:c.toString(),path:n,token:f},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}update(n,r,o){return fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,o)})}move(n,r,o){return fn(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}copy(n,r,o){return fn(this,void 0,void 0,function*(){try{return{data:{path:(yield ar(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}createSignedUrl(n,r,o){return fn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(n),l=yield ar(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const c=o?.download?`&download=${o.download===!0?"":o.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}createSignedUrls(n,r,o){return fn(this,void 0,void 0,function*(){try{const a=yield ar(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),l=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}download(n,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(r?.transform||{}),c=l?`?${l}`:"",f=this._getFinalPath(n),p=()=>ka(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new Vw(p,this.shouldThrowOnError)}info(n){return fn(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const o=yield ka(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Hu(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}exists(n){return fn(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield Gw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o)&&o instanceof Wu){const a=o.originalError;if([400,404].includes(a?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,r){const o=this._getFinalPath(n),a=[],l=r?.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const f=typeof r?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(r?.transform||{});p!==""&&a.push(p);let g=a.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${o}${g}`)}}}remove(n){return fn(this,void 0,void 0,function*(){try{return{data:yield wm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}list(n,r,o){return fn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},qw),r),{prefix:n||""});return{data:yield ar(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},o),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}listV2(n,r){return fn(this,void 0,void 0,function*(){try{const o=Object.assign({},n);return{data:yield ar(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const Jw="2.75.0",Yw={"X-Client-Info":`storage-js/${Jw}`};var ei=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};class Qw{constructor(n,r={},o,a){this.shouldThrowOnError=!1;const l=new URL(n);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yw),r),this.fetch=gm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ei(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}getBucket(n){return ei(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}createBucket(n){return ei(this,arguments,void 0,function*(r,o={public:!1}){try{return{data:yield ar(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}updateBucket(n,r){return ei(this,void 0,void 0,function*(){try{return{data:yield Vu(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Mt(o))return{data:null,error:o};throw o}})}emptyBucket(n){return ei(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}deleteBucket(n){return ei(this,void 0,void 0,function*(){try{return{data:yield wm(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}}class Zw extends Qw{constructor(n,r={},o,a){super(n,r,o,a)}from(n){return new Kw(this.url,this.headers,n,this.fetch)}}const Xw="2.75.0";let Ji="";typeof Deno<"u"?Ji="deno":typeof document<"u"?Ji="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ji="react-native":Ji="node";const ev={"X-Client-Info":`supabase-js-${Ji}/${Xw}`},tv={headers:ev},nv={schema:"public"},rv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sv={};var iv=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};const ov=s=>{let n;return s?n=s:typeof fetch>"u"?n=am:n=fetch,(...r)=>n(...r)},av=()=>typeof Headers>"u"?lm:Headers,lv=(s,n,r)=>{const o=ov(r),a=av();return(l,c)=>iv(void 0,void 0,void 0,function*(){var f;const p=(f=yield n())!==null&&f!==void 0?f:s;let g=new a(c?.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),o(l,Object.assign(Object.assign({},c),{headers:g}))})};var uv=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};function cv(s){return s.endsWith("/")?s:s+"/"}function dv(s,n){var r,o;const{db:a,auth:l,realtime:c,global:f}=s,{db:p,auth:g,realtime:w,global:_}=n,b={db:Object.assign(Object.assign({},p),a),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},w),c),storage:{},global:Object.assign(Object.assign(Object.assign({},_),f),{headers:Object.assign(Object.assign({},(r=_?.headers)!==null&&r!==void 0?r:{}),(o=f?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>uv(this,void 0,void 0,function*(){return""})};return s.accessToken?b.accessToken=s.accessToken:delete b.accessToken,b}function fv(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vm="2.75.0",oi=30*1e3,qu=3,xu=qu*oi,hv="http://localhost:9999",mv="supabase.auth.token",pv={"X-Client-Info":`gotrue-js/${vm}`},Ku="X-Supabase-Api-Version",ym={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wv=600*1e3;class ro extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function Be(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class vv extends ro{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function yv(s){return Be(s)&&s.name==="AuthApiError"}class ws extends ro{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Jr extends ro{constructor(n,r,o,a){super(n,o,a),this.name=r,this.status=o}}class Vr extends Jr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _v(s){return Be(s)&&s.name==="AuthSessionMissingError"}class ti extends Jr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pa extends Jr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ga extends Jr{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xv(s){return Be(s)&&s.name==="AuthImplicitGrantRedirectError"}class vh extends Jr{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ju extends Jr{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function bu(s){return Be(s)&&s.name==="AuthRetryableFetchError"}class yh extends Jr{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class Yu extends Jr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_h=` 	
\r=`.split(""),bv=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<_h.length;n+=1)s[_h[n].charCodeAt(0)]=-2;for(let n=0;n<Ea.length;n+=1)s[Ea[n].charCodeAt(0)]=n;return s})();function xh(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(Ea[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(Ea[o]),n.queuedBits-=6}}function _m(s,n,r){const o=bv[s];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function bh(s){const n=[],r=c=>{n.push(String.fromCodePoint(c))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{Ev(c,o,r)};for(let c=0;c<s.length;c+=1)_m(s.charCodeAt(c),a,l);return n.join("")}function Sv(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function kv(s,n){for(let r=0;r<s.length;r+=1){let o=s.charCodeAt(r);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(s.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Sv(o,n)}}function Ev(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let o=1;o<6;o+=1)if((s>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function li(s){const n=[],r={queue:0,queuedBits:0},o=a=>{n.push(a)};for(let a=0;a<s.length;a+=1)_m(s.charCodeAt(a),r,o);return new Uint8Array(n)}function Cv(s){const n=[];return kv(s,r=>n.push(r)),new Uint8Array(n)}function ys(s){const n=[],r={queue:0,queuedBits:0},o=a=>{n.push(a)};return s.forEach(a=>xh(a,r,o)),xh(null,r,o),n.join("")}function Pv(s){return Math.round(Date.now()/1e3)+s}function jv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const n=Math.random()*16|0;return(s=="x"?n:n&3|8).toString(16)})}const Sn=()=>typeof window<"u"&&typeof document<"u",fs={tested:!1,writable:!1},xm=()=>{if(!Sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fs.tested)return fs.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),fs.tested=!0,fs.writable=!0}catch{fs.tested=!0,fs.writable=!1}return fs.writable};function Rv(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{n[l]=a})}catch{}return r.searchParams.forEach((o,a)=>{n[a]=o}),n}const bm=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...r)=>Tt(async()=>{const{default:o}=await Promise.resolve().then(()=>mi);return{default:o}},void 0).then(({default:o})=>o(...r)):n=fetch,(...r)=>n(...r)},Tv=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ai=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},hs=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hr=async(s,n)=>{await s.removeItem(n)};class Ta{constructor(){this.promise=new Ta.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Ta.promiseConstructor=Promise;function Su(s){const n=s.split(".");if(n.length!==3)throw new Yu("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!gv.test(n[o]))throw new Yu("JWT not in base64url format");return{header:JSON.parse(bh(n[0])),payload:JSON.parse(bh(n[1])),signature:li(n[2]),raw:{header:n[0],payload:n[1]}}}async function Nv(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Lv(s,n){return new Promise((o,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await s(l);if(!n(l,null,c)){o(c);return}}catch(c){if(!n(l,c)){a(c);return}}})()})}function Iv(s){return("0"+s.toString(16)).substr(-2)}function Ov(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(n),Array.from(n,Iv).join("")}async function Av(s){const r=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(o);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function Mv(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await Av(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ni(s,n,r=!1){const o=Ov();let a=o;r&&(a+="/PASSWORD_RECOVERY"),await ai(s,`${n}-code-verifier`,a);const l=await Mv(o);return[l,o===l?"plain":"s256"]}const $v=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dv(s){const n=s.headers.get(Ku);if(!n||!n.match($v))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Uv(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function Fv(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ri(s){if(!Bv.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ku(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Sh(s){return JSON.parse(JSON.stringify(s))}var Gv=function(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(s);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(s,o[a])&&(r[o[a]]=s[o[a]]);return r};const ps=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),zv=[502,503,504];async function kh(s){var n;if(!Tv(s))throw new Ju(ps(s),0);if(zv.includes(s.status))throw new Ju(ps(s),s.status);let r;try{r=await s.json()}catch(l){throw new ws(ps(l),l)}let o;const a=Dv(s);if(a&&a.getTime()>=ym["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new yh(ps(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new Vr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new yh(ps(r),s.status,r.weak_password.reasons);throw new vv(ps(r),s.status||500,o)}const Wv=(s,n,r,o)=>{const a={method:s,headers:n?.headers||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),r))};async function Je(s,n,r,o){var a;const l=Object.assign({},o?.headers);l[Ku]||(l[Ku]=ym["2024-01-01"].name),o?.jwt&&(l.Authorization=`Bearer ${o.jwt}`);const c=(a=o?.query)!==null&&a!==void 0?a:{};o?.redirectTo&&(c.redirect_to=o.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await Hv(s,n,r+f,{headers:l,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function Hv(s,n,r,o,a,l){const c=Wv(n,o,a,l);let f;try{f=await s(r,Object.assign({},c))}catch(p){throw console.error(p),new Ju(ps(p),0)}if(f.ok||await kh(f),o?.noResolveJson)return f;try{return await f.json()}catch(p){await kh(p)}}function Jn(s){var n;let r=null;Kv(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=Pv(s.expires_in)));const o=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:o},error:null}}function Eh(s){const n=Jn(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Kr(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function Vv(s){return{data:s,error:null}}function qv(s){const{action_link:n,email_otp:r,hashed_token:o,redirect_to:a,verification_type:l}=s,c=Gv(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:n,email_otp:r,hashed_token:o,redirect_to:a,verification_type:l},p=Object.assign({},c);return{data:{properties:f,user:p},error:null}}function Ch(s){return s}function Kv(s){return s.access_token&&s.refresh_token&&s.expires_in}const Eu=["global","local","others"];var Jv=function(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(s);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(s,o[a])&&(r[o[a]]=s[o[a]]);return r};class Yv{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=bm(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Eu[0]){if(Eu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Eu.join(", ")}`);try{return await Je(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await Je(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Kr})}catch(o){if(Be(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:r}=n,o=Jv(n,["options"]),a=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(a.new_email=o?.newEmail,delete a.newEmail),await Je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:qv,redirectTo:r?.redirectTo})}catch(r){if(Be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Je(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Kr})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,a,l,c,f,p;try{const g={nextPage:null,lastPage:0,total:0},w=await Je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=n?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Ch});if(w.error)throw w.error;const _=await w.json(),b=(c=w.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(p=(f=w.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(P=>{const N=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(P.split(";")[1].split("=")[1]);g[`${k}Page`]=N}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(Be(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){ri(n);try{return await Je(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Kr})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){ri(n);try{return await Je(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Kr})}catch(o){if(Be(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){ri(n);try{return await Je(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Kr})}catch(o){if(Be(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){ri(n.userId);try{const{data:r,error:o}=await Je(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:o}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _deleteFactor(n){ri(n.userId),ri(n.id);try{return{data:await Je(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,o,a,l,c,f,p;try{const g={nextPage:null,lastPage:0,total:0},w=await Je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(l=(a=n?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Ch});if(w.error)throw w.error;const _=await w.json(),b=(c=w.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(p=(f=w.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(P=>{const N=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(P.split(";")[1].split("=")[1]);g[`${k}Page`]=N}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(Be(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await Je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await Je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}}function Ph(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const si={debug:!!(globalThis&&xm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sm extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Qv extends Sm{}async function Zv(s,n,r){si.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),si.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){si.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,a.name);try{return await r()}finally{si.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,a.name)}}else{if(n===0)throw si.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Qv(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(si.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Xv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function km(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function ey(s){return parseInt(s,16)}function ty(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,o=>o.toString(16).padStart(2,"0")).join("")}function ny(s){var n;const{chainId:r,domain:o,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:p,resources:g,scheme:w,uri:_,version:b}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const S=km(s.address),P=w?`${w}://${o}`:o,N=s.statement?`${s.statement}
`:"",k=`${P} wants you to sign in with your Ethereum account:
${S}

${N}`;let A=`URI: ${_}
Version: ${b}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),f&&(A+=`
Not Before: ${f.toISOString()}`),p&&(A+=`
Request ID: ${p}`),g){let j=`
Resources:`;for(const T of g){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);j+=`
- ${T}`}A+=j}return`${k}
${A}`}class At extends Error{constructor({message:n,code:r,cause:o,name:a}){var l;super(n,{cause:o}),this.__isWebAuthnError=!0,this.name=(l=a??(o instanceof Error?o.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Ca extends At{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function ry({error:s,options:n}){var r,o,a;const{publicKey:l}=n;if(!l)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new At({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new At({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new At({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new At({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new At({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new At({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new At({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new At({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const c=window.location.hostname;if(Cm(c)){if(l.rp.id!==c)return new At({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new At({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function sy({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new At({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new At({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(Cm(o)){if(r.rpId!==o)return new At({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}var Em=function(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(s);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(s,o[a])&&(r[o[a]]=s[o[a]]);return r};class iy{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const oy=new iy;function ay(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:o}=s,a=Em(s,["challenge","user","excludeCredentials"]),l=li(n).buffer,c=Object.assign(Object.assign({},r),{id:li(r.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:l,user:c});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const g=o[p];f.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:li(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return f}function ly(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,o=Em(s,["challenge","allowCredentials"]),a=li(n).buffer,l=Object.assign(Object.assign({},o),{challenge:a});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:li(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function uy(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:ys(new Uint8Array(s.response.attestationObject)),clientDataJSON:ys(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function cy(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,o=s.getClientExtensionResults(),a=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ys(new Uint8Array(a.authenticatorData)),clientDataJSON:ys(new Uint8Array(a.clientDataJSON)),signature:ys(new Uint8Array(a.signature)),userHandle:a.userHandle?ys(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Cm(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function jh(){var s,n;return!!(Sn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function dy(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Ca("Browser returned unexpected credential type",n)}:{data:null,error:new Ca("Empty credential response",n)}}catch(n){return{data:null,error:ry({error:n,options:s})}}}async function fy(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Ca("Browser returned unexpected credential type",n)}:{data:null,error:new Ca("Empty credential response",n)}}catch(n){return{data:null,error:sy({error:n,options:s})}}}const hy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},my={userVerification:"preferred",hints:["security-key"]};function Pa(...s){const n=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of s)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))o[l]=c;else if(r(c))o[l]=c;else if(n(c)){const f=o[l];n(f)?o[l]=Pa(f,c):o[l]=Pa(c)}else o[l]=c}return o}function py(s,n){return Pa(hy,s,n||{})}function gy(s,n){return Pa(my,s,n||{})}class wy{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:o,signal:a},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!c)return{data:null,error:f};const p=a??oy.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:g}=c.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${o}`),g.displayName||(g.displayName=g.name)}switch(c.webauthn.type){case"create":{const g=py(c.webauthn.credential_options.publicKey,l?.create),{data:w,error:_}=await dy({publicKey:g,signal:p});return w?{data:{factorId:n,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const g=gy(c.webauthn.credential_options.publicKey,l?.request),{data:w,error:_}=await fy(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:g,signal:p}));return w?{data:{factorId:n,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(c){return Be(c)?{data:null,error:c}:{data:null,error:new ws("Unexpected error in challenge",c)}}}async _verify({challengeId:n,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:o})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}},l){if(!r)return{data:null,error:new ro("rpId is required for WebAuthn authentication")};try{if(!jh())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:o},signal:a},{request:l});if(!c)return{data:null,error:f};const{webauthn:p}=c;return this._verify({factorId:n,challengeId:c.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:o,credential_response:p.credential_response}})}catch(c){return Be(c)?{data:null,error:c}:{data:null,error:new ws("Unexpected error in authenticate",c)}}}async _register({friendlyName:n,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a},l){if(!r)return{data:null,error:new ro("rpId is required for WebAuthn registration")};try{if(!jh())return{data:null,error:new ws("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:n});if(!c)return await this.client.mfa.listFactors().then(w=>{var _;return(_=w.data)===null||_===void 0?void 0:_.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===n&&b.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:f};const{data:p,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:a},{create:l});return p?this._verify({factorId:c.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(c){return Be(c)?{data:null,error:c}:{data:null,error:new ws("Unexpected error in register",c)}}}}Xv();const vy={url:hv,storageKey:mv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rh(s,n,r){return await r()}const ii={};class so{get jwks(){var n,r;return(r=(n=ii[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=ii[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{cachedAt:n})}constructor(n){var r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=so.nextInstanceID,so.nextInstanceID+=1,this.instanceID>0&&Sn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},vy),n);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Yv({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=bm(a.fetch),this.lock=a.lock||Rh,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Sn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Zv:this.lock=Rh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wy(this)},this.persistSession?(a.storage?this.storage=a.storage:xm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ph(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Ph(this.memoryStorage)),Sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vm}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Rv(window.location.href);let o="none";if(this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce"),Sn()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,o);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),xv(l)){const p=(n=l.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Be(r)?{error:r}:{error:new ws("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,a;try{const l=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=n?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Jn}),{data:c,error:f}=l;if(f||!c)return{data:{user:null,session:null},error:f};const p=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(l){if(Be(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(n){var r,o,a;try{let l;if("email"in n){const{email:w,password:_,options:b}=n;let S=null,P=null;this.flowType==="pkce"&&([S,P]=await ni(this.storage,this.storageKey)),l=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:w,password:_,data:(r=b?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:S,code_challenge_method:P},xform:Jn})}else if("phone"in n){const{phone:w,password:_,options:b}=n;l=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:_,data:(o=b?.data)!==null&&o!==void 0?o:{},channel:(a=b?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Jn})}else throw new pa("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return{data:{user:null,session:null},error:f};const p=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(l){if(Be(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(n){try{let r;if("email"in n){const{email:l,password:c,options:f}=n;r=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Eh})}else if("phone"in n){const{phone:l,password:c,options:f}=n;r=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Eh})}else throw new pa("You must provide either an email or phone number and a password");const{data:o,error:a}=r;return a?{data:{user:null,session:null},error:a}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ti}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,o,a,l;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=n.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=n.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,o,a,l,c,f,p,g,w,_,b;let S,P;if("message"in n)S=n.message,P=n.signature;else{const{chain:N,wallet:k,statement:A,options:j}=n;let T;if(Sn())if(typeof k=="object")T=k;else{const Me=window;if("ethereum"in Me&&typeof Me.ethereum=="object"&&"request"in Me.ethereum&&typeof Me.ethereum.request=="function")T=Me.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=k}const $=new URL((r=j?.url)!==null&&r!==void 0?r:window.location.href),M=await T.request({method:"eth_requestAccounts"}).then(Me=>Me).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=km(M[0]);let re=(o=j?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!re){const Me=await T.request({method:"eth_chainId"});re=ey(Me)}const Ie={domain:$.host,address:Y,statement:A,uri:$.href,version:"1",chainId:re,nonce:(a=j?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=j?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=j?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=j?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=j?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(w=j?.signInWithEthereum)===null||w===void 0?void 0:w.resources};S=ny(Ie),P=await T.request({method:"personal_sign",params:[ty(S),Y]})}try{const{data:N,error:k}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:P},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Jn});if(k)throw k;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new ti}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:k})}catch(N){if(Be(N))return{data:{user:null,session:null},error:N};throw N}}async signInWithSolana(n){var r,o,a,l,c,f,p,g,w,_,b,S;let P,N;if("message"in n)P=n.message,N=n.signature;else{const{chain:k,wallet:A,statement:j,options:T}=n;let $;if(Sn())if(typeof A=="object")$=A;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))$=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=A}const M=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in $&&$.signIn){const Y=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),j?{statement:j}:null));let re;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")re=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)re=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in re&&"signature"in re&&(typeof re.signedMessage=="string"||re.signedMessage instanceof Uint8Array)&&re.signature instanceof Uint8Array)P=typeof re.signedMessage=="string"?re.signedMessage:new TextDecoder().decode(re.signedMessage),N=re.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${M.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(a=(o=T?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=T?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((f=T?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((p=T?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((g=T?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((_=(w=T?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||_===void 0)&&_.length?["Resources",...T.signInWithSolana.resources.map(re=>`- ${re}`)]:[]].join(`
`);const Y=await $.signMessage(new TextEncoder().encode(P),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=Y}}try{const{data:k,error:A}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:ys(N)},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Jn});if(A)throw A;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new ti}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:A})}catch(k){if(Be(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(n){const r=await hs(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(r??"").split("/");try{const{data:l,error:c}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Jn});if(await Hr(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new ti}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(Be(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(n){try{const{options:r,provider:o,token:a,access_token:l,nonce:c}=n,f=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Jn}),{data:p,error:g}=f;return g?{data:{user:null,session:null},error:g}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new ti}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:g})}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,o,a,l,c;try{if("email"in n){const{email:f,options:p}=n;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await ni(this.storage,this.storageKey));const{error:_}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:w},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in n){const{phone:f,options:p}=n,{data:g,error:w}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=p?.data)!==null&&a!==void 0?a:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(c=p?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:w}}throw new pa("You must provide either an email or phone number.")}catch(f){if(Be(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(n){var r,o;try{let a,l;"options"in n&&(a=(r=n.options)===null||r===void 0?void 0:r.redirectTo,l=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:c,error:f}=await Je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Jn});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,g=c.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:g,session:p},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(n){var r,o,a;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await ni(this.storage,this.storageKey)),await Je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=n?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Vv})}catch(l){if(Be(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new Vr;const{error:a}=await Je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:o,type:a,options:l}=n,{error:c}=await Je(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in n){const{phone:o,type:a,options:l}=n,{data:c,error:f}=await Je(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:f}}throw new pa("You must provide either an email or phone number and a type")}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<xu:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const c=await hs(this.userStorage,this.storageKey+"-user");c?.user?n.user=c.user:n.user=ku()}if(this.storage.isServer&&n.user){let c=this.suppressGetSessionWarning;n=new Proxy(n,{get:(p,g,w)=>(!c&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,g,w))})}return{data:{session:n},error:null}}const{data:a,error:l}=await this._callRefreshToken(n.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Kr}):await this._useSession(async r=>{var o,a,l;const{data:c,error:f}=r;if(f)throw f;return!(!((o=c.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vr}:await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Kr})})}catch(r){if(Be(r))return _v(r)&&(await this._removeSession(),await Hr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{const{data:a,error:l}=o;if(l)throw l;if(!a.session)throw new Vr;const c=a.session;let f=null,p=null;this.flowType==="pkce"&&n.email!=null&&([f,p]=await ni(this.storage,this.storageKey));const{data:g,error:w}=await Je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:f,code_challenge_method:p}),jwt:c.access_token,xform:Kr});if(w)throw w;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(o){if(Be(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Vr;const r=Date.now()/1e3;let o=r,a=!0,l=null;const{payload:c}=Su(n.access_token);if(c.exp&&(o=c.exp,a=o<=r),a){const{data:f,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:p}=await this._getUser(n.access_token);if(p)throw p;l={access_token:n.access_token,refresh_token:n.refresh_token,user:f.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(Be(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){const{data:c,error:f}=r;if(f)throw f;n=(o=c.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new Vr;const{data:a,error:l}=await this._callRefreshToken(n.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Be(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!Sn())throw new ga("No browser detected.");if(n.error||n.error_description||n.error_code)throw new ga(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new vh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ga("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new vh("No code detected.");const{data:j,error:T}=await this._exchangeCodeForSession(n.code);if(T)throw T;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:p,token_type:g}=n;if(!l||!f||!c||!g)throw new ga("No session defined in URL");const w=Math.round(Date.now()/1e3),_=parseInt(f);let b=w+_;p&&(b=parseInt(p));const S=b-w;S*1e3<=oi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const P=b-_;w-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,b,w):w-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,b,w);const{data:N,error:k}=await this._getUser(l);if(k)throw k;const A={provider_token:o,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:b,refresh_token:c,token_type:g,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:n.type},error:null}}catch(o){if(Be(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await hs(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:a,error:l}=r;if(l)return{error:l};const c=(o=a.session)===null||o===void 0?void 0:o.access_token;if(c){const{error:f}=await this.admin.signOut(c,n);if(f&&!(yv(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return n!=="others"&&(await this._removeSession(),await Hr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=jv(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,a;try{const{data:{session:l},error:c}=r;if(c)throw c;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",n,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",l),console.error(l)}})}async resetPasswordForEmail(n,r={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await ni(this.storage,this.storageKey,!0));try{return await Je(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(Be(l))return{data:null,error:l};throw l}}async getUserIdentities(){var n;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:o,error:a}=await this._useSession(async l=>{var c,f,p,g,w;const{data:_,error:b}=l;if(b)throw b;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(c=n.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=n.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Je(this.fetch,"GET",S,{headers:this.headers,jwt:(w=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&w!==void 0?w:void 0})});if(a)throw a;return Sn()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(Be(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var o;try{const{error:a,data:{session:l}}=r;if(a)throw a;const{options:c,provider:f,token:p,access_token:g,nonce:w}=n,_=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=l?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:p,access_token:g,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Jn}),{data:b,error:S}=_;return S?{data:{user:null,session:null},error:S}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new ti}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),{data:b,error:S})}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,a;const{data:l,error:c}=r;if(c)throw c;return await Je(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(a=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await Lv(async a=>(a>0&&await Nv(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Jn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&bu(l)&&Date.now()+c-o<oi})}catch(o){if(this._debug(r,"error",o),Be(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),Sn()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await hs(this.storage,this.storageKey);if(a&&this.userStorage){let c=await hs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await ai(this.userStorage,this.storageKey+"-user",c)),a.user=(n=c?.user)!==null&&n!==void 0?n:ku()}else if(a&&!a.user&&!a.user){const c=await hs(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Hr(this.storage,this.storageKey+"-user"),await ai(this.storage,this.storageKey,a)):a.user=ku()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xu;if(this._debug(o,`session has${l?"":" not"} expired with margin of ${xu}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),bu(c)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(o,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new Vr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ta;const{data:l,error:c}=await this._refreshAccessToken(n);if(c)throw c;if(!l.session)throw new Vr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),Be(l)){const c={data:null,error:l};return bu(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(n,r,o=!0){const a=`#_notifyAllSubscribers(${n})`;this._debug(a,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(n,r)}catch(p){l.push(p)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await ai(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=Sh(a);await ai(this.storage,this.storageKey,l)}else{const a=Sh(r);await ai(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Hr(this.storage,this.storageKey),await Hr(this.storage,this.storageKey+"-code-verifier"),await Hr(this.storage,this.storageKey+"-user"),this.userStorage&&await Hr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Sn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),oi);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-n)/oi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${oi}ms, refresh threshold is ${qu} ticks`),a<=qu&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Sm)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Sn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){const a=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[l,c]=await ni(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(o?.queryParams){const l=new URLSearchParams(o.queryParams);a.push(l.toString())}return o?.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${a.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;const{data:a,error:l}=r;return l?{data:null,error:l}:await Je(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=a?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,a;const{data:l,error:c}=r;if(c)return{data:null,error:c};const f=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:g}=await Je(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&p.type==="totp"&&(!((a=p?.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:a,error:l}=r;if(l)return{data:null,error:l};const c=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?uy(n.webauthn.credential_response):cy(n.webauthn.credential_response)})}:{code:n.code}),{data:f,error:p}=await Je(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:c,headers:this.headers,jwt:(o=a?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:p})})}catch(r){if(Be(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:a,error:l}=r;if(l)return{data:null,error:l};const c=await Je(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=a?.session)===null||o===void 0?void 0:o.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ay(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ly(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Be(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(n=r?.factors)!==null&&n!==void 0?n:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,o;const{data:{session:a},error:l}=n;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Su(a.access_token);let f=null;c.aal&&(f=c.aal);let p=f;((o=(r=a.user.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const w=c.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:w},error:null}}))}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(f=>f.kid===n);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(f=>f.kid===n),o&&this.jwks_cached_at+wv>a)return o;const{data:l,error:c}=await Je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,o=l.keys.find(f=>f.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){const{data:S,error:P}=await this.getSession();if(P||!S.session)return{data:null,error:P};o=S.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:p}}=Su(o);r?.allowExpired||Uv(l.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:S}=await this.getUser(o);if(S)throw S;return{data:{claims:l,header:a,signature:c},error:null}}const w=Fv(a.alg),_=await crypto.subtle.importKey("jwk",g,w,!0,["verify"]);if(!await crypto.subtle.verify(w,_,c,Cv(`${f}.${p}`)))throw new Yu("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(o){if(Be(o))return{data:null,error:o};throw o}}}so.nextInstanceID=0;const yy=so;class _y extends yy{constructor(n){super(n)}}var xy=function(s,n,r,o){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function f(w){try{g(o.next(w))}catch(_){c(_)}}function p(w){try{g(o.throw(w))}catch(_){c(_)}}function g(w){w.done?l(w.value):a(w.value).then(f,p)}g((o=o.apply(s,n||[])).next())})};class by{constructor(n,r,o){var a,l,c;this.supabaseUrl=n,this.supabaseKey=r;const f=fv(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,g={db:nv,realtime:sv,auth:Object.assign(Object.assign({},rv),{storageKey:p}),global:tv},w=dv(o??{},g);this.storageKey=(a=w.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=w.global.headers)!==null&&l!==void 0?l:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(_,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=w.auth)!==null&&c!==void 0?c:{},this.headers,w.global.fetch),this.fetch=lv(r,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.rest=new vw(new URL("rest/v1",f).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),this.storage=new Zw(this.storageUrl.href,this.headers,this.fetch,o?.storage),w.accessToken||this._listenForAuthEvents()}get functions(){return new lw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,o)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return xy(this,void 0,void 0,function*(){var n,r;if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:o,storage:a,userStorage:l,storageKey:c,flowType:f,lock:p,debug:g},w,_){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _y({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),w),storageKey:c,autoRefreshToken:n,persistSession:r,detectSessionInUrl:o,storage:a,userStorage:l,flowType:f,lock:p,debug:g,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Aw(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,o)=>{this._handleTokenChanged(r,"CLIENT",o?.access_token)})}_handleTokenChanged(n,r,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Sy=(s,n,r)=>new by(s,n,r);function ky(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const n=s.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}ky()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ey={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd5amFncnR3cmhjdG1na29vdGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3MzM2OTIsImV4cCI6MjA3NDMwOTY5Mn0.S6TrCrZWkISC7g14QmVriEQSBawLwxpcGYQKcNqpazA",VITE_SUPABASE_URL:"https://gyjagrtwrhctmgkootjj.supabase.co"},Qu="https://gyjagrtwrhctmgkootjj.supabase.co",Cy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd5amFncnR3cmhjdG1na29vdGpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3MzM2OTIsImV4cCI6MjA3NDMwOTY5Mn0.S6TrCrZWkISC7g14QmVriEQSBawLwxpcGYQKcNqpazA";let Zu;console.log("[Supabase] Initializing client...",{hasUrl:!0,hasAnon:!0,urlPreview:Qu.substring(0,30)+"...",allEnvKeys:Object.keys(Ey).filter(s=>s.startsWith("VITE_"))});console.log("[Supabase] Creating client with valid credentials"),console.log("[Supabase] URL:",Qu.substring(0,40)+"..."),Zu=Sy(Qu,Cy,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"supabase.auth.token"}}),console.log("[Supabase] Client created successfully"),Zu.auth.getSession().then(({data:s,error:n})=>{console.log("[Supabase] Initial session check:",n?"ERROR: "+n.message:"OK",s.session?"has session":"no session")}).catch(s=>{console.error("[Supabase] Initial session check failed:",s)});const Z=Zu;let vs=!1,lr=null,Xi=!1;function ba(){vs=!1,lr=null,Xi=!1}function Py(s){if(!s)return console.warn("[PushV2] Cannot set external user ID: no userId provided"),!1;const n=globalThis?.despia||(typeof window<"u"?window?.despia:null);if(!n||typeof n!="function")return console.log("[PushV2] Despia not available - not in native app, skipping setonesignalplayerid"),!1;try{return console.log(`[PushV2] Setting OneSignal external user ID: ${s.slice(0,8)}...`),n(`setonesignalplayerid://?user_id=${s}`),Xi=!0,console.log("[PushV2]  External user ID set successfully"),!0}catch(r){return console.error("[PushV2] Failed to set external user ID:",r),!1}}function Xu(){const s=globalThis?.despia||(typeof window<"u"?window?.despia:null),n=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null);return!!s||!!n}function Pm(){const s=globalThis?.despia||(typeof window<"u"?window?.despia:null);if(s&&typeof s=="function")try{const r=s("checkNativePushPermissions://",["nativePushEnabled"]);if(r&&typeof r=="object"&&"nativePushEnabled"in r)return!!r.nativePushEnabled}catch(r){console.log("[PushV2] Could not check OS permission:",r)}return!!(globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null))}function jm(){const s=globalThis?.onesignalplayerid||(typeof window<"u"?window?.onesignalplayerid:null);if(s&&typeof s=="string"&&s.trim().length>0)return s.trim();const n=globalThis?.despia||(typeof window<"u"?window?.despia:null);if(n){if(n.onesignalplayerid&&typeof n.onesignalplayerid=="string")return n.onesignalplayerid.trim();if(n.oneSignalPlayerId&&typeof n.oneSignalPlayerId=="string")return n.oneSignalPlayerId.trim()}return null}async function jy(s=15e3){const n=Date.now(),r=500;for(;Date.now()-n<s;){const o=jm();if(o)return o;await new Promise(a=>setTimeout(a,r))}return null}async function Ry(s,n={}){if(vs&&!n.force)return console.log("[PushV2] Already registered this session, skipping"),{ok:!0,playerId:lr||void 0,reason:void 0,subscriptionStatus:"subscribed"};if(!Xu())return console.log("[PushV2] Despia not available - not in native app"),{ok:!1,reason:"api-not-available",subscriptionStatus:"not-registered"};if(!s?.access_token)return console.warn("[PushV2] No session token available"),{ok:!1,reason:"no-session",subscriptionStatus:"not-registered"};const r=n.userId||s.user?.id;if(r?Py(r)?console.log("[PushV2]  Despia V2: External user ID linked to device"):console.warn("[PushV2] Could not set external user ID via Despia"):console.warn("[PushV2] No user ID available for setOneSignalExternalUserId"),!Pm())return console.warn("[PushV2] OS permission not granted"),{ok:!1,reason:"permission-denied",subscriptionStatus:"permission-denied"};console.log("[PushV2] Waiting for Player ID...");const a=await jy(15e3);if(!a)return console.warn("[PushV2] Player ID not available after 15 seconds"),Xi?(console.log("[PushV2] External user ID was set, proceeding without player ID"),vs=!0,{ok:!0,reason:void 0,subscriptionStatus:"subscribed"}):{ok:!1,reason:"no-player-id",error:"OneSignal Player ID not available. Please restart the app.",subscriptionStatus:"not-registered"};console.log(`[PushV2] Got Player ID: ${a.slice(0,8)}...`);try{const c=typeof window<"u"&&window.location.hostname==="localhost"?"https://totl-staging.netlify.app":"",f=await fetch(`${c}/.netlify/functions/registerPlayer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({playerId:a,platform:"ios"})});if(!f.ok){const p=await f.json().catch(()=>({}));return console.error("[PushV2] Backend registration failed:",p),Xi?(console.log("[PushV2] External user ID is set, marking as registered despite backend error"),vs=!0,lr=a,{ok:!0,playerId:a,subscriptionStatus:"subscribed"}):{ok:!1,reason:f.status===401?"no-session":"unknown",error:p.error||`Server error (${f.status})`,subscriptionStatus:"not-registered"}}return vs=!0,lr=a,console.log("[PushV2]  Successfully registered device (Despia V2 + backend)"),{ok:!0,playerId:a,subscriptionStatus:"subscribed"}}catch(l){return console.error("[PushV2] Registration error:",l),Xi?(console.log("[PushV2] External user ID is set, marking as registered despite error"),vs=!0,lr=a,{ok:!0,playerId:a,subscriptionStatus:"subscribed"}):{ok:!1,reason:"unknown",error:l.message,subscriptionStatus:"not-registered"}}}async function Th(s){if(!(!lr||!s?.access_token))try{const r=typeof window<"u"&&window.location.hostname==="localhost"?"https://totl-staging.netlify.app":"";await fetch(`${r}/.netlify/functions/registerPlayer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({playerId:lr,platform:"ios"})}),console.log("[PushV2] Heartbeat updated")}catch(n){console.warn("[PushV2] Heartbeat update failed:",n)}}async function Ty(s){if(!lr&&!s?.access_token){console.log("[PushV2] No subscription to deactivate"),ba();return}try{const r=typeof window<"u"&&window.location.hostname==="localhost"?"https://totl-staging.netlify.app":"";console.log("[PushV2] Deactivating subscription for logout");const o={"Content-Type":"application/json"};s?.access_token&&(o.Authorization=`Bearer ${s.access_token}`);const a=await fetch(`${r}/.netlify/functions/deactivateDevice`,{method:"POST",headers:o,body:JSON.stringify({playerId:lr})});if(a.ok){const l=await a.json();console.log("[PushV2]  Subscription deactivated:",l)}else{const l=await a.json().catch(()=>({}));console.warn("[PushV2] Deactivation response not ok:",l)}ba()}catch(n){console.warn("[PushV2] Deactivation failed:",n),ba()}}async function d_(s){const n=Xu()?Pm():!1,r=jm(),o=vs&&!!lr;let a;return Xu()?n?o?a="allowed":a="not_registered":a="muted_by_os":a="not_registered",{hasOsPermission:n,isRegistered:o,isSubscribedInOneSignal:o,effectiveState:a,playerId:r||void 0}}function wa({name:s,level:n="info",data:r}){const a=`[TOTL][${new Date().toISOString()}]`,l=r?`${a} ${s} ${JSON.stringify(r)}`:`${a} ${s}`;switch(n){case"error":console.error(l);break;case"warn":console.warn(l);break;case"debug":console.debug(l);break;case"info":default:console.log(l)}}const pt={info:(s,n)=>wa({name:s,level:"info",data:n}),warn:(s,n)=>wa({name:s,level:"warn",data:n}),error:(s,n)=>wa({name:s,level:"error",data:n}),debug:(s,n)=>wa({name:s,level:"debug",data:n})},_s={authStart:()=>pt.info("boot/auth_start"),authSuccess:s=>pt.info("boot/auth_success",{userId:s?.slice(0,8)}),authTimeout:()=>pt.warn("boot/auth_timeout"),authError:s=>pt.error("boot/auth_error",{error:s}),initialDataStart:s=>pt.info("boot/initial_data_start",{userId:s?.slice(0,8)}),initialDataSuccess:s=>pt.info("boot/initial_data_success",{durationMs:s}),initialDataTimeout:()=>pt.warn("boot/initial_data_timeout"),initialDataError:s=>pt.error("boot/initial_data_error",{error:s})},Nh={leaguesInitial:(s,n,r,o)=>pt.info(`${s}/leagues_initial`,{count:n,firstIds:r.slice(0,3).map(a=>a.slice(0,8)),source:o?.source??"cache",cacheAgeMs:o?.cacheAgeMs??null}),leaguesRefresh:(s,n,r,o)=>pt.info(`${s}/leagues_refresh`,{count:n,firstIds:r.slice(0,3).map(a=>a.slice(0,8)),source:o?.source??"network",fetchDurationMs:o?.fetchDurationMs??null}),cacheHit:(s,n)=>pt.debug("cache/hit",{key:s,...n}),cacheMiss:(s,n)=>pt.debug("cache/miss",{key:s,reason:n})},Rm=x.createContext({user:null,session:null,loading:!0,signOut:async()=>{},showWelcome:!1,dismissWelcome:()=>{}});function Ny({children:s}){const[n,r]=x.useState(null),[o,a]=x.useState(null),[l,c]=x.useState(!0),[f,p]=x.useState(!1),[g,w]=x.useState(!1);x.useEffect(()=>{let P=!0,N=null;try{const T="https://gyjagrtwrhctmgkootjj.supabase.co";if(T){const $=T.match(/https:\/\/([^.]+)\.supabase\.co/)?.[1];if($){const M=`sb-${$}-auth-token`,Y=localStorage.getItem(M);if(Y)try{const re=JSON.parse(Y);re&&re.currentSession&&(N=re.currentSession,console.log("[Auth] Found session in localStorage, using as fallback"),P&&(r(N),a(N.user),c(!1)))}catch(re){console.log("[Auth] Could not parse stored session:",re)}}}}catch(T){console.log("[Auth] Error checking localStorage:",T)}const k=setTimeout(()=>{P&&!N&&(console.warn("[Auth] Auth loading timed out after 5 seconds, proceeding without session"),_s.authTimeout(),c(!1))},5e3);_s.authStart(),console.log("[Auth] Setting up auth state listener...");let A=!1;console.log("[Auth] Setting up onAuthStateChange listener...");const{data:j}=Z.auth.onAuthStateChange((T,$)=>{if(console.log("[Auth] Auth state changed:",T,$?"has session":"no session",$?.user?.id),A=!0,clearTimeout(k),!!P&&(r($),a($?.user??null),c(!1),$?.user&&_s.authSuccess($.user.id),T==="SIGNED_IN"&&$?.user&&!g)){const M=new URLSearchParams(window.location.search),Y=new URLSearchParams(window.location.hash.substring(1));(M.get("type")==="signup"||M.get("confirmation_token")||Y.get("type")==="signup"||Y.get("access_token")||window.location.search.includes("confirmation")||window.location.hash.includes("confirmation"))&&$.user.email_confirmed_at&&(p(!0),w(!0),window.history.replaceState({},document.title,window.location.pathname))}});return console.log("[Auth] Attempting to get session (with 3s timeout)..."),Promise.race([Z.auth.getSession(),new Promise((T,$)=>setTimeout(()=>$(new Error("getSession timeout")),3e3))]).then(T=>{if(A||(clearTimeout(k),!P))return;const{data:$,error:M}=T;console.log("[Auth] Session result:",M?"ERROR: "+M.message:"OK",$?.session?"has session":"no session"),$?.session&&(r($.session),a($.session.user)),c(!1)}).catch(T=>{A||console.log("[Auth] getSession timed out or failed, relying on onAuthStateChange:",T.message)}),()=>{P=!1,clearTimeout(k),j.subscription.unsubscribe()}},[]),x.useEffect(()=>{if(!o||!n?.access_token)return;let P=!1;const N=n;async function k(){if(P||!o)return;console.log(`[PushV2] Starting registration for user ${o.id}`);const $=await Ry(N,{userId:o.id});$.ok?console.log("[PushV2]  Registration successful:",$.playerId?.slice(0,8)+""):$.reason==="api-not-available"?console.log("[PushV2] Not in native app, skipping registration"):console.warn(`[PushV2] Registration issue: ${$.reason}`,$.error||"")}const A=setTimeout(k,500),j=()=>{!document.hidden&&!P&&(console.log("[PushV2] App visible, sending heartbeat..."),Th(N))},T=setInterval(()=>{P||Th(N)},300*1e3);return document.addEventListener("visibilitychange",j),()=>{P=!0,clearTimeout(A),clearInterval(T),document.removeEventListener("visibilitychange",j)}},[o?.id,n?.access_token]);async function _(){await Ty(n),ba(),await Z.auth.signOut()}function b(){p(!1),w(!0)}const S=x.useMemo(()=>({user:o,session:n,loading:l,signOut:_,showWelcome:f,dismissWelcome:b}),[o,n,l,f]);return h.jsx(Rm.Provider,{value:S,children:s})}const ur=()=>x.useContext(Rm);function Ly(){const[s,n]=x.useState(!1),r=x.useRef(null),o=x.useRef(null);x.useEffect(()=>{const l=setTimeout(()=>{n(!0)},50);return()=>clearTimeout(l)},[]),x.useEffect(()=>{let l;const c=()=>{l=requestAnimationFrame(()=>{const f=window.scrollY;if(o.current&&r.current){const g=Math.min(1,f/300)*180,w=Math.max(0,1-f/250),_=Math.max(.4,1-f/400),b=f<400;o.current.style.height=b?"130px":"0px",f>0?(r.current.style.opacity=w.toString(),r.current.style.transform=`perspective(1000px) rotateY(${g}deg) scale(${_})`,r.current.style.transition="opacity 0.1s ease-out, transform 0.1s ease-out"):(r.current.style.opacity="1",r.current.style.transform="perspective(1000px) rotateY(0deg) scale(1)",r.current.style.transition="opacity 0.6s ease-out, transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)")}})};return window.addEventListener("scroll",c,{passive:!0}),()=>{window.removeEventListener("scroll",c),cancelAnimationFrame(l)}},[]);const a=s?0:-360;return h.jsx("div",{ref:o,className:"w-full flex justify-center items-center transition-all duration-200",style:{height:"130px",overflow:"hidden",paddingTop:"0px",paddingBottom:"0px",perspective:"1000px"},children:h.jsx("div",{ref:r,style:{opacity:s?1:0,transform:`perspective(1000px) rotateY(${a}deg) scale(1)`,transformStyle:"preserve-3d",transition:"opacity 0.6s ease-out, transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)",willChange:"transform, opacity"},children:h.jsx("img",{src:"/assets/badges/totl-logo1.svg",alt:"TOTL",className:"h-[88px] sm:h-[110px]",style:{filter:"brightness(0)",backfaceVisibility:"hidden"}})})})}const va=Cn.memo(function({title:n,badgeSrc:r,badgeAlt:o,linkTo:a,rank:l,total:c,score:f,gw:p,totalFixtures:g,subtitle:w,variant:_="default"}){const b=l&&c&&c>0?`TOP ${Math.round(l/c*100)}%`:"";return _==="lastGw"?h.jsx(Qn,{to:a,className:"flex-shrink-0 w-[148px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden cursor-pointer block hover:shadow-md transition-shadow",children:h.jsxs("div",{className:"p-3 h-full flex flex-col relative",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsx("div",{className:"flex items-baseline gap-[3px]",style:{marginTop:"-4px"},children:f!==void 0&&g!==void 0?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-[#1C8376]",style:{fontSize:"38px",fontWeight:"normal",lineHeight:"1"},children:f}),h.jsxs("div",{className:"flex items-baseline gap-[4px]",children:[h.jsx("span",{className:"text-slate-500",style:{fontSize:"18px",fontWeight:"normal",lineHeight:"1"},children:"/"}),h.jsx("span",{className:"text-slate-500",style:{fontSize:"18px",fontWeight:"normal",lineHeight:"1"},children:g})]})]}):h.jsx("span",{className:"leading-none text-slate-900",children:""})}),h.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),h.jsxs("div",{className:"mt-auto",children:[h.jsxs("div",{className:"text-xs text-slate-500 mb-2",children:["Gameweek ",p??""]}),h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("span",{className:"text-xs font-semibold text-slate-900",children:b})})]})]})}):h.jsx(Qn,{to:a,className:"flex-shrink-0 w-[148px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden cursor-pointer block hover:shadow-md transition-shadow",children:h.jsxs("div",{className:"p-3 h-full flex flex-col",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r&&h.jsx("img",{src:r,alt:o||n,className:"w-[32px] h-[32px]"}),h.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),h.jsxs("div",{className:"mt-auto",children:[h.jsx("div",{className:"text-xs text-slate-500 mb-2",children:w||n}),h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("span",{className:"text-xs font-semibold text-slate-900",children:b})})]})]})})}),Iy=Cn.memo(function({streak:n,last10GwScores:r,latestGw:o}){const a=r,l=a.filter(w=>w.score!==null),c=l.length>0?Math.max(...l.map(w=>w.score)):10,f=0,p=c-f||1,g=60;return h.jsx("div",{className:"flex-shrink-0 w-[340px] sm:w-[400px] h-[148px] rounded-xl border bg-white shadow-sm overflow-hidden hover:shadow-md transition-shadow relative",children:h.jsxs("div",{className:"p-3 h-full flex flex-col",children:[h.jsx("div",{className:"flex-1"}),h.jsx("div",{className:"mb-2 relative",style:{height:"70px"},children:h.jsx("div",{className:"relative h-full",children:h.jsx("div",{className:"flex items-end justify-between gap-1 h-full px-1",children:a.map(w=>{const _=w.score!==null,b=w.gw===o,S=w.score??0,P=_?(S-f)/p*g:0;return h.jsxs("div",{className:"flex flex-col items-center justify-end gap-1 flex-1 relative min-w-0",children:[_&&h.jsx("div",{className:`text-xs font-bold mb-0.5 leading-none ${b?"text-[#1C8376]":"text-slate-700"}`,children:S}),h.jsx("div",{className:`w-full rounded-t transition-all ${_?b?"bg-[#1C8376]":"bg-slate-400":"bg-slate-200"}`,style:{height:`${P}px`,minHeight:_?"4px":"0"},title:_?`GW${w.gw}: ${S}`:`GW${w.gw}: Not played`}),h.jsxs("div",{className:`text-[10px] font-medium leading-tight ${_?b?"text-[#1C8376] font-bold":"text-slate-700":"text-slate-400"}`,children:["GW",w.gw]})]},w.gw)})})})}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2}),h.jsx("circle",{cx:"12",cy:"12",r:"6",strokeWidth:2}),h.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]}),h.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Your Streak"," ",h.jsx("span",{className:"font-bold text-orange-500",children:n>0?`${n} ${n===1?"Week":"Weeks"}`:"Start your streak!"})]})]}),h.jsx("span",{className:"text-[10px] font-medium text-slate-400",children:"Last 10"})]})]})})});function Oy({isOpen:s,onClose:n,title:r,description:o,image:a}){if(x.useEffect(()=>{if(!s)return;const c=f=>{f.key==="Escape"&&n()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[s,n]),x.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),!s)return null;const l=h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:n,"aria-hidden":"true",style:{animation:"fadeIn 200ms ease-out",zIndex:999999}}),h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl",role:"dialog","aria-modal":"true","aria-labelledby":"info-sheet-title","aria-describedby":"info-sheet-description",style:{animation:"slideUp 300ms ease-out",zIndex:1e6},children:[h.jsx("div",{className:"flex justify-center pt-3 pb-2",children:h.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full"})}),h.jsxs("div",{className:"flex items-center justify-between px-6 pb-4",children:[h.jsx("h2",{id:"info-sheet-title",className:"text-lg font-medium text-slate-900 uppercase tracking-wide",style:{fontFamily:'"Gramatika", sans-serif',fontWeight:700},children:r}),h.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 transition-colors","aria-label":"Close",children:h.jsx("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"px-6 pb-8 max-h-[70vh] overflow-y-auto relative",children:[h.jsx("div",{id:"info-sheet-description",className:"text-slate-600 leading-relaxed",children:o.split(/\n+/).map(f=>f.trim()).filter(f=>f.length>0).map((f,p)=>{const g=[];let w=f;const _=/\(TB\)/g;if(_.test(w)){const S=w.split(_);S.forEach((P,N)=>{if(P&&g.push(P),N<S.length-1){const k=w.substring(w.indexOf("(TB)")+4),A=k.toLowerCase().includes("gameweek winner"),j=k.toLowerCase().includes("submitted")&&!k.toLowerCase().includes("not");let T="chip-container rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 w-6 h-6 inline-flex mx-1";A?T+=" bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 font-semibold":j?T+=" chip-green":T+=" chip-grey",g.push(h.jsx("span",{className:T,style:{verticalAlign:"middle"},children:"TB"},`chip-${N}`)),w=w.substring(w.indexOf("(TB)")+4)}})}else g.push(w);const b=[];return g.forEach(S=>{if(typeof S=="string"&&S.includes("Start a Mini League ")){const[P,N]=S.split("Start a Mini League ");P&&b.push(P),b.push(h.jsx(Qn,{to:"/tables",onClick:n,className:"text-[#1C8376] font-semibold hover:underline inline-flex items-center gap-1",children:"Start a Mini League "},"start-league")),N&&b.push(N)}else if(typeof S=="string"&&S.includes("How To Play ")){const[P,N]=S.split("How To Play ");P&&b.push(P),b.push(h.jsx(Qn,{to:"/how-to-play",onClick:n,className:"text-[#1C8376] font-semibold hover:underline inline-flex items-center gap-1",children:"How To Play "},"how-to-play")),N&&b.push(N)}else b.push(S)}),b.length>1||b.length===1&&typeof b[0]!="string"?h.jsx("p",{className:p===0?"":"mt-4",children:b},p):h.jsx("p",{className:p===0?"":"mt-4",children:f},p)})}),a&&h.jsx("div",{className:"absolute bottom-4 right-6",children:h.jsx("img",{src:a,alt:"",className:"w-16 h-16 object-contain",style:{imageRendering:"pixelated"}})})]}),h.jsx("div",{className:"flex justify-center pb-3",children:h.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full"})})]})]});return typeof document<"u"&&document.body?iw.createPortal(l,document.body):l}function eo({id:s,title:n,subtitle:r,headerRight:o,className:a,icon:l,collapsible:c=!1,defaultOpen:f=!1,children:p,onToggle:g,infoTitle:w,infoDescription:_,infoImage:b,showInfoIcon:S}){const[P,N]=x.useState(f),[k,A]=x.useState(!1);if(c&&s){const j=()=>{const $=!P;N($),g?.($)},T=typeof l=="string"?h.jsx("span",{className:"text-2xl",children:l}):l;return h.jsxs("div",{className:`border border-slate-200 rounded-xl overflow-hidden bg-white shadow-sm ${a??""}`,children:[h.jsx("button",{onClick:j,className:"w-full px-6 py-4 text-left bg-gradient-to-r from-slate-50 to-slate-100 hover:from-slate-100 hover:to-slate-200 transition-colors border-b border-slate-200",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[T,h.jsx("h2",{className:"text-lg font-bold text-slate-800",children:n})]}),h.jsx("svg",{className:`w-5 h-5 text-slate-600 transition-transform ${P?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),P&&h.jsx("div",{className:"px-6 py-4 text-slate-700",children:p})]})}return h.jsxs(h.Fragment,{children:[h.jsxs("section",{className:a??"",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h2",{className:"text-lg font-medium text-slate-900 uppercase tracking-wide",style:{fontFamily:'"Gramatika", sans-serif',fontWeight:700},children:n}),S!==!1&&(w&&_||S===!0)&&h.jsx("div",{className:`w-4 h-4 rounded-full border border-slate-400 flex items-center justify-center ${w&&_?"hover:bg-slate-50 transition-colors cursor-pointer":""}`,onClick:w&&_?()=>A(!0):void 0,role:w&&_?"button":void 0,"aria-label":w&&_?`Information about ${n}`:void 0,children:h.jsx("span",{className:"text-[10px] text-slate-500 font-bold",children:"i"})})]}),o&&h.jsx("div",{className:"flex items-start",children:o})]}),r&&h.jsx("div",{className:"mt-1 text-sm text-slate-500",children:r}),h.jsx("div",{className:"mt-3",children:p})]}),w&&_&&h.jsx(Oy,{isOpen:k,onClose:()=>A(!1),title:w,description:_,image:b})]})}function Tm({children:s,className:n=""}){return h.jsxs("div",{className:`overflow-x-auto scrollbar-hide ${n}`,style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch",overscrollBehaviorX:"contain",overscrollBehaviorY:"auto",touchAction:"pan-x pan-y pinch-zoom",marginLeft:"-1rem",marginRight:"-1rem",paddingLeft:"1rem",paddingRight:"1rem",width:"calc(100% + 2rem)"},children:[h.jsx("style",{children:".scrollbar-hide::-webkit-scrollbar { display: none; }"}),h.jsx("div",{className:"flex gap-2",style:{width:"max-content",minWidth:"100%"},children:s})]})}function Ay({lastGwRank:s,fiveGwRank:n,tenGwRank:r,seasonRank:o,userStreakData:a,latestGw:l}){return h.jsx(eo,{title:"Leaderboards",className:"mt-6",infoTitle:"Leaderboards",infoDescription:`The leaderboards are where all TOTL players are ranked. Your position is based on OCP (Overall Correct Predictions).

Joined late? No stress  after 5 and 10 weeks you'll show up in the Form leaderboards.

How To Play `,children:h.jsxs(Tm,{children:[h.jsx(va,{title:"Last GW",linkTo:"/global?tab=lastgw",rank:s?.rank??null,total:s?.total??null,score:s?.score,gw:s?.gw,totalFixtures:s?.totalFixtures,variant:"lastGw"}),h.jsx(va,{title:"5-WEEK FORM",badgeSrc:"/assets/5-week-form-badge.png",badgeAlt:"5-Week Form Badge",linkTo:"/global?tab=form5",rank:n?.rank??null,total:n?.total??null}),h.jsx(va,{title:"10-WEEK FORM",badgeSrc:"/assets/10-week-form-badge.png",badgeAlt:"10-Week Form Badge",linkTo:"/global?tab=form10",rank:r?.rank??null,total:r?.total??null}),h.jsx(va,{title:"SEASON RANK",badgeSrc:"/assets/season-rank-badge.png",badgeAlt:"Season Rank Badge",linkTo:"/global?tab=overall",rank:o?.rank??null,total:o?.total??null}),a&&h.jsx(Iy,{streak:a.streak,last10GwScores:a.last10GwScores,latestGw:l??1})]})})}const Lh=["soccer-ball-motion.jpg","trophy.jpg","embrace.jpg","baseball-throw.jpg","smiling-faces.jpg","infinity.jpg","abstract-leaf.jpg","soccer-ball.jpg"],ec=["ML-avatar-1.png","ML-avatar-2.png","ML-avatar-3.png","ML-avatar-4.png","ML-avatar-5.png"];function Nm(s){let n=0;for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);n=(n<<5)-n+o,n=n&n}return Math.abs(n)}function Ih(s){const r=Nm(s)%Lh.length;return Lh[r]}function Lm(s){const r=Nm(s)%ec.length;return ec[r]}function My(s){return s?s.includes("supabase.co/storage/v1/object/public"):!1}function $y(s){return s?ec.includes(s):!1}function Dy(s){return s.avatar&&My(s.avatar)?s.avatar:s.avatar&&$y(s.avatar)?`/assets/league-avatars/${s.avatar}`:`/assets/league-avatars/${Lm(s.id)}`}function Uy(s){const n=["th","st","nd","rd"],r=s%100;return s+(n[(r-20)%10]||n[r]||n[0])}function Oh(s){const n=(s||"?").trim().split(/\s+/);return n.length?n.length===1?n[0].slice(0,1).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase():"?"}function Cu(s){return s?s instanceof Set?s:new Set(s):new Set}function Ah(s,n,r,o,a){if(r<n)return null;const l=o.filter(b=>b.gw>=n&&b.gw<=r),c=new Map;a.forEach(b=>{c.set(b.user_id,{user_id:b.user_id,name:b.name??"User",formPoints:0,weeksPlayed:new Set})}),l.forEach(b=>{const S=c.get(b.user_id);S&&(S.formPoints+=b.points??0,S.weeksPlayed.add(b.gw))});const f=Array.from(c.values()).filter(b=>{for(let S=n;S<=r;S++)if(!b.weeksPlayed.has(S))return!1;return!0}).sort((b,S)=>S.formPoints-b.formPoints||b.name.localeCompare(S.name));if(f.length===0)return null;let p=1;const g=f.map((b,S)=>(S>0&&f[S-1].formPoints!==b.formPoints&&(p=S+1),{...b,rank:p})),w=g.find(b=>b.user_id===s);if(!w)return null;const _=g.filter(b=>b.rank===w.rank).length;return{rank:w.rank,total:g.length,isTied:_>1}}function Fy(s,n,r){if(!n||r.length===0)return null;const o=r.filter(g=>g.gw===n);if(o.length===0)return null;const a=[...o].sort((g,w)=>w.points-g.points);let l=1;const c=a.map((g,w)=>(w>0&&a[w-1].points!==g.points&&(l=w+1),{...g,rank:l})),f=c.find(g=>g.user_id===s);if(!f)return null;const p=c.filter(g=>g.rank===f.rank).length;return{rank:f.rank,total:c.length,score:f.points,gw:n,totalFixtures:10,isTied:p>1}}function By(s,n){if(n.length===0)return null;const r=[...n].sort((f,p)=>(p.ocp??0)-(f.ocp??0)||(f.name??"User").localeCompare(p.name??"User"));let o=1;const a=r.map((f,p)=>(p>0&&(r[p-1].ocp??0)!==(f.ocp??0)&&(o=p+1),{...f,rank:o})),l=a.find(f=>f.user_id===s);if(!l)return null;const c=a.filter(f=>f.rank===l.rank).length;return{rank:l.rank,total:n.length,isTied:c>1}}const Im=x.memo(function({row:n,data:r,unread:o,submissions:a,leagueDataLoading:l,currentGw:c,showRanking:f=!0}){const p=r?.members??[],g=r?.userPosition,w=o>0?Math.min(o,99):0,_=x.useMemo(()=>{if(l||!r)return[];const S=r.members??[];if(!S.length)return[];n.name?.toLowerCase().includes("forget")&&(console.log(`[MiniLeagueCard] ${n.name} data.sortedMemberIds:`,r.sortedMemberIds),console.log(`[MiniLeagueCard] ${n.name} baseMembers:`,S.map(T=>({id:T.id,name:T.name}))));const P=r.sortedMemberIds&&r.sortedMemberIds.length>0?r.sortedMemberIds.map(T=>S.find($=>$.id===T)).filter(T=>T!==void 0):[...S].sort((T,$)=>T.name.localeCompare($.name));n.name?.toLowerCase().includes("forget")&&console.log(`[MiniLeagueCard] ${n.name} orderedMembers (chips order):`,P.map(T=>({id:T.id,name:T.name,initials:Oh(T.name)})));const N=Cu(r.submittedMembers),k=Cu(r.latestGwWinners),A=Cu(r.webUserIds),j=n.name==="API Test";return P.slice(0,8).map((T,$)=>{const M=N.has(T.id),Y=k.has(T.id),re=A.has(T.id);let Ie="chip-container rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 w-6 h-6";Y&&r.latestRelevantGw!==null&&c!==null&&r.latestRelevantGw===c?Ie+=" bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-xl shadow-yellow-400/40 font-semibold relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":M?(Ie+=" chip-green",(re||j)&&(Ie+=" border-2 border-blue-600")):Ie+=" chip-grey",$>0&&(Ie+=" chip-overlap");const He=M&&re?{boxShadow:"0 0 0 2px #2563eb, 0 0 0 4px rgba(37, 99, 235, 0.3)"}:void 0;return h.jsx("div",{className:Ie,title:T.name,style:He,children:Oh(T.name)},T.id)})},[r,l,n.name,c]),b=x.useMemo(()=>{if(!r)return 0;const P=((r.sortedMemberIds&&r.sortedMemberIds.length>0?r.sortedMemberIds:r.members?.map(N=>N.id))??[]).length;return P>8?P-8:0},[r]);return h.jsx("div",{className:"rounded-xl border bg-white overflow-hidden shadow-sm w-full",children:h.jsxs(Qn,{to:`/league/${n.code}`,className:"block p-6 !bg-white no-underline hover:text-inherit relative z-20",children:[h.jsxs("div",{className:"flex items-start gap-3 relative",children:[h.jsx("div",{className:"flex-shrink-0 w-14 h-14 rounded-full flex items-center justify-center overflow-hidden bg-slate-100",children:h.jsx("img",{src:Dy(n),alt:`${n.name} avatar`,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",onError:S=>{const P=S.target,k=`/assets/league-avatars/${Lm(n.id)}`;if(P.src!==k)P.src=k;else{P.style.display="none";const A=P.parentElement;A&&!A.querySelector("svg")&&(A.innerHTML=`
                      <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                      </svg>
                    `)}}})}),h.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1",children:[h.jsx("div",{className:"text-base font-semibold text-slate-900 truncate",children:n.name}),f&&a?.allSubmitted&&h.jsx("span",{className:"text-xs font-normal text-[#1C8376] whitespace-nowrap",children:"All Submitted"}),f&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs("svg",{className:"w-4 h-4 text-slate-500",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsxs("g",{clipPath:"url(#clip0_4045_135263)",children:[h.jsx("path",{d:"M14.0001 14V13.7C14.0001 13.0489 14.0001 12.7234 13.925 12.4571C13.7361 11.7874 13.2127 11.264 12.543 11.0751C12.2767 11 11.9512 11 11.3001 11H8.36675C7.71566 11 7.39011 11 7.12387 11.0751C6.45414 11.264 5.93072 11.7874 5.74184 12.4571C5.66675 12.7234 5.66675 13.0489 5.66675 13.7V14",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M2 11.6667V10.6C2 10.0422 2 9.76328 2.05526 9.53311C2.23083 8.80181 2.80181 8.23083 3.53311 8.05526C3.76328 8 4.04219 8 4.6 8H4.66667",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M12.3334 6.33333C12.3334 7.622 11.2887 8.66667 10.0001 8.66667C8.71142 8.66667 7.66675 7.622 7.66675 6.33333C7.66675 5.04467 8.71142 4 10.0001 4C11.2887 4 12.3334 5.04467 12.3334 6.33333Z",stroke:"currentColor",strokeWidth:"1.33333"}),h.jsx("path",{d:"M7.33325 2.92025C6.94237 2.36557 6.27397 2 5.51507 2C4.31009 2 3.33325 2.92165 3.33325 4.05857C3.33325 4.95488 3.94038 5.7174 4.7878 6",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round"})]}),h.jsx("defs",{children:h.jsx("clipPath",{id:"clip0_4045_135263",children:h.jsx("rect",{width:"16",height:"16",fill:"white"})})})]}),h.jsx("span",{className:"text-sm font-semibold text-slate-900",children:p.length})]}),g!=null?h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"w-4 h-4 text-[#1C8376]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),h.jsx("span",{className:"text-sm font-semibold text-slate-900",children:Uy(g)}),r?.positionChange==="up"&&h.jsx("span",{className:"text-green-600 text-xs",children:""}),r?.positionChange==="down"&&h.jsx("span",{className:"text-red-600 text-xs",children:""}),r?.positionChange==="same"&&h.jsx("span",{className:"text-slate-400 text-xs",children:""})]}):h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"w-4 h-4 text-[#1C8376]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),h.jsx("span",{className:"text-sm font-semibold text-slate-400",children:""})]})]}),h.jsxs("div",{className:"flex items-center mt-1 py-0.5",children:[_,b>0&&h.jsxs("div",{className:`chip-container chip-grey rounded-full flex items-center justify-center text-[10px] font-medium flex-shrink-0 ${b>0?"chip-overlap":""}`,style:{width:"24px",height:"24px"},children:["+",b]})]})]})]}),h.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1.5 z-30",children:[w>0&&h.jsx("span",{className:"inline-flex items-center justify-center h-6 w-6 rounded-full bg-[#1C8376] text-white text-xs font-bold",children:w}),h.jsx("svg",{className:"w-5 h-5 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})},(s,n)=>{const r=s.data?.sortedMemberIds?.join(",")??"",o=n.data?.sortedMemberIds?.join(",")??"";return s.row.id===n.row.id&&s.row.name===n.row.name&&s.unread===n.unread&&s.leagueDataLoading===n.leagueDataLoading&&s.currentGw===n.currentGw&&s.showRanking===n.showRanking&&s.data?.id===n.data?.id&&s.data?.userPosition===n.data?.userPosition&&s.data?.members?.length===n.data?.members?.length&&r===o&&s.submissions?.allSubmitted===n.submissions?.allSubmitted&&s.submissions?.submittedCount===n.submissions?.submittedCount});function Gy({leagues:s,leagueData:n,leagueSubmissions:r,unreadByLeague:o,leagueDataLoading:a,currentGw:l}){const c=x.useMemo(()=>{const f={};for(const p in n){const g=n[p];f[p]=g?{id:g.id,members:g.members,userPosition:g.userPosition,positionChange:g.positionChange,submittedMembers:g.submittedMembers,sortedMemberIds:g.sortedMemberIds,latestGwWinners:g.latestGwWinners,latestRelevantGw:g.latestRelevantGw,webUserIds:g.webUserIds}:void 0}return f},[n]);return!a&&s.length===0?h.jsx(eo,{title:"Mini Leagues",className:"mt-8",infoTitle:"Mini Leagues",infoDescription:`A Mini League is a head-to-head competition for up to 8 players.

You compete each Gameweek and across the full season  with one overall winner at the end of the season.

(TB) Predictions submitted

(TB) Predictions not submitted yet

(TB) Gameweek winner!

Chips are ordered by the current league table.

Start a Mini League 

How To Play `,children:h.jsxs("div",{className:"p-6 bg-white rounded-lg border border-slate-200 text-center",children:[h.jsx("div",{className:"text-slate-600 mb-3",children:"You don't have any mini leagues yet."}),h.jsx(Qn,{to:"/create-league",className:"inline-block px-4 py-2 bg-[#1C8376] text-white font-semibold rounded-lg hover:bg-[#1C8376]/80 transition-colors no-underline",children:"Create one now!"})]})}):s.length===0?h.jsx(eo,{title:"Mini Leagues",className:"mt-8",infoTitle:"Mini Leagues",infoDescription:`A Mini League is a head-to-head competition for up to 8 players.

You compete each Gameweek and across the full season  with one overall winner at the end of the season.

(TB) Predictions submitted

(TB) Predictions not submitted yet

(TB) Gameweek winner!

Chips are ordered by the current league table.

Start a Mini League 

How To Play `,children:h.jsx("div",{className:"p-6 bg-white rounded-lg border border-slate-200 text-center",children:h.jsx("div",{className:"text-slate-600",children:"Loading leagues..."})})}):h.jsx(eo,{title:"Mini Leagues",className:"mt-8",infoTitle:"Mini Leagues",infoDescription:`A Mini League is a head-to-head competition for up to 8 players.

You compete each Gameweek and across the full season  with one overall winner at the end of the season.

(TB) Predictions submitted

(TB) Predictions not submitted yet

(TB) Gameweek winner!

Chips are ordered by the current league table.

Start a Mini League 

How To Play `,children:h.jsx(Tm,{children:Array.from({length:Math.ceil(s.length/3)}).map((f,p)=>{const g=p*3,w=s.slice(g,g+3);return h.jsx("div",{className:"flex flex-col rounded-xl border bg-white overflow-hidden shadow-sm w-[320px]",children:w.map((_,b)=>{const S=o?.[_.id]??0,P=c[_.id];return h.jsxs("div",{className:b<w.length-1?"relative":"",children:[b<w.length-1&&h.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-px bg-slate-200 z-30 pointer-events-none"}),h.jsx("div",{className:"[&>div]:border-0 [&>div]:shadow-none [&>div]:rounded-none [&>div]:bg-transparent relative z-20 [&>div>a]:!p-4",children:h.jsx(Im,{row:_,data:P,unread:S,submissions:r[_.id],leagueDataLoading:a,currentGw:l,showRanking:!1})})]},_.id)})},p)})})})}function Om(s){return String(s||"").toLowerCase().replace(/\s+fc\s*$/i,"").replace(/&/g,"and").replace(/[^a-z0-9]+/g," ").replace(/\s+/g," ").trim()}const xs={arsenal:{medium:"Arsenal",slug:"arsenal",aliases:["arsenal","arsenal fc","ars","the arsenal"]},"aston-villa":{medium:"Villa",slug:"aston-villa",aliases:["aston villa","aston villa fc","villa","avl"]},bournemouth:{medium:"Bournemouth",slug:"bournemouth",aliases:["bournemouth","afc bournemouth","bournemouth fc","bou"]},brentford:{medium:"Brentford",slug:"brentford",aliases:["brentford","brentford fc","bre"]},brighton:{medium:"Brighton",slug:"brighton",aliases:["brighton","brighton and hove albion","brighton & hove albion","brighton and hove albion fc","brighton & hove albion fc","brighton hove","bha"]},chelsea:{medium:"Chelsea",slug:"chelsea",aliases:["chelsea","chelsea fc","che"]},"crystal-palace":{medium:"Palace",slug:"crystal-palace",aliases:["crystal palace","crystal palace fc","palace","cry"]},everton:{medium:"Everton",slug:"everton",aliases:["everton","everton fc","eve"]},fulham:{medium:"Fulham",slug:"fulham",aliases:["fulham","fulham fc","ful"]},ipswich:{medium:"Ipswich",slug:"ipswich",aliases:["ipswich","ipswich town","ips"]},leeds:{medium:"Leeds",slug:"leeds",aliases:["leeds","leeds united","leeds united fc","lee"]},leicester:{medium:"Leicester",slug:"leicester",aliases:["leicester","leicester city","lei"]},liverpool:{medium:"Liverpool",slug:"liverpool",aliases:["liverpool","liverpool fc","liv"]},"man-city":{medium:"Man City",slug:"man-city",aliases:["manchester city","manchester city fc","man city","mci","city"]},"man-united":{medium:"Man United",slug:"man-united",aliases:["manchester united","manchester united fc","man united","man utd","mun","united"]},newcastle:{medium:"Newcastle",slug:"newcastle",aliases:["newcastle","newcastle united","newcastle united fc","new"]},"nottingham-forest":{medium:"Forest",slug:"nottingham-forest",aliases:["nottingham forest","nottingham forest fc","nottingham","forest","nfo","not"]},southampton:{medium:"Southampton",slug:"southampton",aliases:["southampton","southampton fc","sou"]},spurs:{medium:"Spurs",slug:"spurs",aliases:["tottenham","tottenham hotspur","tottenham hotspur fc","spurs","tot"]},"west-ham":{medium:"West Ham",slug:"west-ham",aliases:["west ham","west ham united","west ham united fc","whu"]},wolves:{medium:"Wolves",slug:"wolves",aliases:["wolves","wolverhampton wanderers","wolverhampton wanderers fc","wolverhampton","wol"]},sunderland:{medium:"Sunderland",slug:"sunderland",aliases:["sunderland","sunderland fc","sun"]},burnley:{medium:"Burnley",slug:"burnley",aliases:["burnley","burnley fc","bur"]}},zy=(()=>{const s={};return Object.keys(xs).forEach(n=>{xs[n].aliases.forEach(r=>{s[Om(r)]=n})}),s})();function Am(s){const n=Om(s);return n?zy[n]??null:null}function Kt(s){const n=Am(s);return n?xs[n].medium:s}function f_(s){const n=Am(s);if(!n)return s;const r=xs[n].aliases;return r.length>0?r[0].split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "):xs[n].medium}Object.keys(xs).map(s=>xs[s].slug);function ya(s,n){if(!s||!n)return!1;const r=s.toLowerCase().trim(),o=n.toLowerCase().trim();if(r===o)return!0;const a=r.replace(/[^a-z0-9]/g,""),l=o.replace(/[^a-z0-9]/g,"");if(a.length>=3&&l.length>=3&&(a.includes(l)||l.includes(a)))return!0;const c={psg:["parissaintgermain","paris saint germain","paris saint-germain","paris saintgermain"],spurs:["tottenham","tottenham hotspur"],"man city":["manchester city"],"man united":["manchester united"]};for(const[f,p]of Object.entries(c)){const g=a===f,w=l===f;if(g&&p.some(_=>{const b=_.replace(/[^a-z0-9]/g,"");return l.includes(b)||b.includes(l)})||w&&p.some(_=>{const b=_.replace(/[^a-z0-9]/g,"");return a.includes(b)||b.includes(a)})||p.some(_=>{const b=_.replace(/[^a-z0-9]/g,"");return(a.includes(b)||b.includes(a))&&(l.includes(b)||b.includes(l))}))return!0}return!1}function Wy(s){if(!s)return"Unknown";const n=s.trim();if(n.toLowerCase().includes("own goal")||n.toLowerCase().includes("(og)"))return n;const r=n.split(/\s+/);return r.length===0||r.length===1?n:r[r.length-1]}function Hy(s,n){return s==="FINISHED"?"FT":s==="PAUSED"?"HT":s==="IN_PLAY"?n==null?"LIVE":`${n}'`:"LIVE"}const Vy=({fixture:s,pick:n,liveScore:r,isTestApi:o=!1,showPickButtons:a=!0})=>{const l=s.home_team||s.home_name||s.home_code||"",c=s.away_team||s.away_name||s.away_code||"",f=Kt(l),p=Kt(c),g=s.kickoff_time?(()=>{const ue=new Date(s.kickoff_time),Se=String(ue.getUTCHours()).padStart(2,"0"),Pe=String(ue.getUTCMinutes()).padStart(2,"0");return`${Se}:${Pe}`})():"",w=!!r,_=w&&r.status==="IN_PLAY",b=w&&(r.status==="PAUSED"||r.status==="HALF_TIME"||r.status==="HT"),S=w&&r.status==="FINISHED",P=_||b,N=_||b,k=w&&(P||S),A=!k,j=w&&(P||S)&&!!r.goals,T=w&&(P||S)&&!!r.red_cards,$=a&&(!o||n!==void 0),M=w&&(P||S)&&r.homeScore>r.awayScore,Y=w&&(P||S)&&r.awayScore>r.homeScore,re=ue=>{const Se=n===ue;let Pe=!1;return r&&(r.result?Pe=r.result===ue:(ue==="H"&&r.homeScore>r.awayScore||ue==="A"&&r.awayScore>r.homeScore||ue==="D"&&r.homeScore===r.awayScore)&&(Pe=!0)),{isPicked:Se,isCorrectResult:Pe,isCorrect:Se&&Pe,isWrong:Se&&(P||S)&&!Pe}},Ie=re("H"),Me=re("D"),He=re("A"),Ve=ue=>{const Se="h-16 rounded-xl border text-sm font-medium transition-all flex items-center justify-center select-none";return _||P?ue.isCorrect?`${Se} bg-emerald-600 text-white border-emerald-600 animate-pulse shadow-lg shadow-emerald-500/50`:ue.isWrong?`${Se} bg-[#1C8376] text-white border-[#1C8376]`:ue.isPicked?`${Se} bg-[#1C8376] text-white border-[#1C8376]`:ue.isCorrectResult&&!ue.isPicked?`${Se} bg-slate-50 text-slate-600 border-2 border-slate-300 animate-pulse`:`${Se} bg-slate-50 text-slate-600 border-slate-200`:S?ue.isCorrect?`${Se} bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white shadow-2xl shadow-yellow-400/40 transform scale-110 rotate-1 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]`:ue.isWrong?`${Se} bg-[#1C8376] text-white border-[#1C8376]`:ue.isCorrectResult&&!ue.isPicked?`${Se} bg-slate-50 text-slate-600 border-4 border-emerald-600`:ue.isPicked?`${Se} bg-[#1C8376] text-white border-[#1C8376]`:`${Se} bg-slate-50 text-slate-600 border-slate-200`:ue.isPicked?`${Se} bg-[#1C8376] text-white border-[#1C8376]`:`${Se} bg-slate-50 text-slate-600 border-slate-200`},rt=(ue,Se)=>{if(!T)return 0;const Pe=r.red_cards||[];Pe.length>0&&console.log(`[FixtureCard] Red cards for ${ue} (${Se?"home":"away"}):`,{allRedCards:Pe,teamName:ue,homeName:f,awayName:p,liveScoreHomeTeam:r.home_team,liveScoreAwayTeam:r.away_team});const te=Pe.filter(we=>{if(!we||!we.team)return!1;const C=we.team||"",v=Kt(C),R=Se?r.home_team?Kt(r.home_team):f:r.away_team?Kt(r.away_team):p,z=Ye(v),K=Ye(R),D=Se?f:p,B=Ye(D),F=(q,H)=>{const se=q.toLowerCase().trim(),ke=H.toLowerCase().trim();return se===ke||se.startsWith(ke+" ")};return v===R||v===ue||F(v,R)||F(v,ue)||F(v,D)||F(z,K)||F(z,B)||z===K||z===B||v===Kt(Se?s.home_team||"":s.away_team||"")||v===Kt(Se?s.home_name||"":s.away_name||"")||C.toLowerCase()===ue.toLowerCase()||C.toLowerCase()===D.toLowerCase()||z&&K&&z.toLowerCase()===K.toLowerCase()});return te.length>0&&console.log(`[FixtureCard] Filtered red cards for ${ue}:`,te),te.length},Ye=ue=>ue.replace(/^(Ca|Se|At|Es|Gr|Sc|Cr|Fc|Ac|Ad|Ap|Av|Bo|Br|Ce|Ch|Co|Cu|De|Ec|Fe|Fi|Fl|Fo|Fr|Fu|Ga|Go|Gu|He|Ho|Hu|In|It|Ja|Je|Ju|La|Le|Li|Lo|Lu|Ma|Me|Mi|Mo|Na|Ne|Ni|No|Nu|Ol|Os|Pa|Pe|Pi|Po|Pr|Pu|Qu|Ra|Re|Ri|Ro|Ru|Sa|Si|So|Su|Ta|Te|Ti|To|Tr|Tu|Un|Ur|Va|Ve|Vi|Vo|Vu|We|Wi|Wo|Wu|Xa|Xe|Xi|Xo|Xu|Ya|Ye|Yi|Yo|Yu|Za|Ze|Zi|Zo|Zu)\s+/i,"").trim(),ut=(ue,Se)=>{if(!j)return null;const Pe=r.goals||[],te=r.homeScore||0,we=r.awayScore||0,C=[],v=[],R=[];Pe.forEach(pe=>{if(!pe||!pe.team){R.push(pe);return}const O=pe.team||"",V=Kt(O),ge=O.toLowerCase().trim().replace(/[^a-z0-9]/g,""),J=r.home_team?Kt(r.home_team):f,ee=r.away_team?Kt(r.away_team):p,X=J.toLowerCase().replace(/[^a-z0-9]/g,""),ce=ee.toLowerCase().replace(/[^a-z0-9]/g,""),qe=Ye(V),Ze=Ye(J),st=Ye(ee),at=(Ee,De)=>{const Oe=Ee.toLowerCase().trim(),be=De.toLowerCase().trim();return Oe===be||Oe.startsWith(be+" ")},jt=[f,J,s.home_team||"",s.home_name||"",r.home_team||""].filter(Boolean),_t=ge===X||ge.includes("parissaintgermain")&&X==="psg"||X.includes("parissaintgermain")&&ge==="psg"||ge.includes("parissaintgermain")&&X.includes("parissaintgermain"),ne=ge===ce||ge.includes("parissaintgermain")&&ce==="psg"||ce.includes("parissaintgermain")&&ge==="psg"||ge.includes("parissaintgermain")&&ce.includes("parissaintgermain"),de=V===J||qe===Ze||at(V,J)||at(qe,Ze)||V===Kt(s.home_team||"")||V===Kt(s.home_name||"")||O.toLowerCase()===f.toLowerCase()||_t||jt.some(Ee=>O.toLowerCase()===Ee.toLowerCase()||ya(O,Ee)||ya(V,Kt(Ee))),Q=[p,ee,s.away_team||"",s.away_name||"",r.away_team||""].filter(Boolean),ye=V===ee||qe===st||at(V,ee)||at(qe,st)||V===Kt(s.away_team||"")||V===Kt(s.away_name||"")||O.toLowerCase()===p.toLowerCase()||ne||Q.some(Ee=>O.toLowerCase()===Ee.toLowerCase()||ya(O,Ee)||ya(V,Kt(Ee)));de&&!ye?C.push(pe):ye&&!de?v.push(pe):R.push(pe)});const z=C.length,K=v.length,D=R.length,B=te-z,F=we-K;if(D>0){let pe=0,O=0;R.forEach(V=>{pe<B&&B>0?(C.push(V),pe++):O<F&&F>0&&(v.push(V),O++)})}const q=C.length,H=v.length,se=Pe.length;if(se!==te+we&&console.warn("[FixtureCard] Goal count mismatch:",{totalGoals:se,homeScore:te,awayScore:we,expectedTotal:te+we}),q!==te||H!==we){console.log("[FixtureCard] Score-based correction needed:",{homeCount:q,homeScore:te,awayCount:H,awayScore:we,totalGoals:se});const pe=te-q,O=we-H;if(pe>0&&O<0){const V=Math.min(Math.abs(O),pe),ge=[...v].sort((J,ee)=>(ee.minute??0)-(J.minute??0));for(let J=0;J<V;J++){const ee=ge[J],X=v.indexOf(ee);X>-1&&(v.splice(X,1),C.push(ee),console.log("[FixtureCard] Moved goal from away to home:",ee.scorer,ee.minute))}}else if(O>0&&pe<0){const V=Math.min(Math.abs(pe),O),ge=[...C].sort((J,ee)=>(ee.minute??0)-(J.minute??0));for(let J=0;J<V;J++){const ee=ge[J],X=C.indexOf(ee);X>-1&&(C.splice(X,1),v.push(ee),console.log("[FixtureCard] Moved goal from home to away:",ee.scorer,ee.minute))}}}(ue.toLowerCase().includes("psg")||ue.toLowerCase().includes("paris"))&&console.log("[FixtureCard] PSG goal matching debug:",{teamName:ue,isHome:Se,homeScore:te,awayScore:we,homeGoalCount:C.length,awayGoalCount:v.length,unmatchedCount:D,allGoals:Pe.map(pe=>({team:pe.team,scorer:pe.scorer,minute:pe.minute,teamId:pe.teamId})),homeGoals:C.map(pe=>({team:pe.team,scorer:pe.scorer,minute:pe.minute})),awayGoals:v.map(pe=>({team:pe.team,scorer:pe.scorer,minute:pe.minute}))});const ke=Se?C:v,ve=new Map;return ke.forEach(pe=>{const O=pe.scorer||"Unknown",V=pe.minute,ge=pe.isOwnGoal===!0;ve.has(O)||ve.set(O,[]),V!=null&&ve.get(O).push({minute:V,isOwnGoal:ge})}),ue==="Grmio"&&ke.length>0&&console.log("[FixtureCard] Grmio goals debug:",{teamGoals:ke,goalsByScorer:Array.from(ve.entries()),goalsByScorerSize:ve.size}),ve.size===0?null:h.jsx("div",{className:`mt-3 mb-2 flex flex-col ${Se?"items-end":"items-start"} gap-0.5`,children:Array.from(ve.entries()).map(([pe,O],V)=>{const ge=O.sort((X,ce)=>X.minute-ce.minute),J=Wy(pe),ee=ge.map(X=>X.isOwnGoal?`${X.minute}' (OG)`:`${X.minute}'`).join(", ");return h.jsxs("span",{className:"text-[11px] text-slate-600",children:[J," ",ee]},V)})})};return h.jsxs("div",{className:"p-4 !bg-white relative z-0",children:[N&&h.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2 z-10 pb-6",children:[h.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-xs font-bold text-red-600",children:"LIVE"})]}),h.jsx("div",{className:`flex flex-col px-2 pb-3 ${P?"pt-4":"pt-1"}`,children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1 flex flex-col items-end",children:[h.jsxs("div",{className:"flex items-center gap-1 relative",children:[h.jsx("div",{className:`break-words ${M?"font-bold":"font-medium"}`,children:f}),h.jsx("div",{className:"relative flex flex-col items-center",children:h.jsx("img",{src:`/assets/badges/${(s.home_code||l).toUpperCase()}.png`,alt:f,className:"w-5 h-5",onError:ue=>{ue.currentTarget.style.opacity="0.35"}})})]}),j&&ut(f,!0)]}),h.jsx("div",{className:"px-4 flex flex-col items-center",children:k?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2 relative",children:[h.jsxs("div",{className:"relative flex flex-col items-center",children:[T&&rt(f,!0)>0&&h.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-1.5 h-2.5 bg-red-600 rounded-sm z-10"}),h.jsx("span",{className:"font-bold text-base text-slate-900",children:r.homeScore})]}),h.jsx("span",{className:"font-bold text-base text-slate-900",children:"-"}),h.jsxs("div",{className:"relative flex flex-col items-center",children:[T&&rt(p,!1)>0&&h.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-1.5 h-2.5 bg-red-600 rounded-sm z-10"}),h.jsx("span",{className:"font-bold text-base text-slate-900",children:r.awayScore})]})]}),h.jsx("span",{className:`text-[10px] font-semibold mt-0.5 ${P?"text-red-600":"text-slate-500"}`,children:Hy(r.status,r.minute)})]}):A&&h.jsx("span",{className:"text-slate-500 text-sm",children:g})}),h.jsxs("div",{className:"flex-1 flex flex-col items-start",children:[h.jsxs("div",{className:"flex items-center gap-1 relative",children:[h.jsx("div",{className:"relative flex flex-col items-center",children:h.jsx("img",{src:`/assets/badges/${(s.away_code||c).toUpperCase()}.png`,alt:p,className:"w-5 h-5",onError:ue=>{ue.currentTarget.style.opacity="0.35"}})}),h.jsx("div",{className:`break-words ${Y?"font-bold":"font-medium"}`,children:p})]}),j&&ut(p,!1)]})]})}),$&&h.jsxs("div",{className:"grid grid-cols-3 gap-3 relative",children:[h.jsx("div",{className:`${Ve(Ie)} flex items-center justify-center`,children:h.jsx("span",{className:`${Ie.isCorrect?"font-bold":""} ${Ie.isWrong&&S?"line-through decoration-2 decoration-white":""}`,children:"Home Win"})}),h.jsx("div",{className:`${Ve(Me)} flex items-center justify-center`,children:h.jsx("span",{className:`${Me.isCorrect?"font-bold":""} ${Me.isWrong&&S?"line-through decoration-2 decoration-white":""}`,children:"Draw"})}),h.jsx("div",{className:`${Ve(He)} flex items-center justify-center`,children:h.jsx("span",{className:`${He.isCorrect?"font-bold":""} ${He.isWrong&&S?"line-through decoration-2 decoration-white":""}`,children:"Away Win"})})]})]})};function qy({value:s,onChange:n}){return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-[10px] font-medium transition-colors ${s?"text-slate-400":"text-slate-700"}`,children:"ALL"}),h.jsx("button",{onClick:()=>n(!s),className:"relative inline-flex items-center rounded-full transition-colors focus:outline-none",style:{backgroundColor:s?"#dc2626":"#cbd5e1",width:"48px",height:"24px",border:"none"},"aria-label":s?"Show all games":"Show live games only",children:h.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-sm transform transition-transform duration-200 ease-in-out ${s?"translate-x-6":"translate-x-0.5"}`})}),h.jsx("span",{className:`text-[10px] font-medium transition-colors ${s?"text-slate-700":"text-slate-400"}`,children:"LIVE"})]})}function Ky({date:s,className:n="",rightElement:r}){return h.jsxs("div",{className:`flex items-center justify-between mb-3 px-1 ${n}`,children:[h.jsx("span",{className:"text-sm font-semibold text-slate-700",children:s}),r&&h.jsx("div",{children:r})]})}function Jy({fixtureCards:s,isTestApi:n=!1,showPickButtons:r=!0,headerRightElement:o}){const a=x.useMemo(()=>{const l=new Map;return s.forEach(({fixture:f,liveScore:p,pick:g})=>{const w=f.kickoff_time?new Date(f.kickoff_time).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}):"No date";l.has(w)||l.set(w,[]),l.get(w).push({fixture:f,liveScore:p,pick:g})}),Array.from(l.keys()).sort((f,p)=>{if(f==="No date")return 1;if(p==="No date")return-1;const g=new Date(l.get(f)[0].fixture.kickoff_time),w=new Date(l.get(p)[0].fixture.kickoff_time);return g.getTime()-w.getTime()}).map(f=>({date:f,cards:l.get(f)}))},[s]);return a.length===0?null:h.jsx("div",{className:"space-y-6",children:a.map(({date:l,cards:c},f)=>h.jsxs("div",{className:f>0?"mt-6":"",children:[h.jsx(Ky,{date:l,rightElement:f===0?o:void 0}),h.jsx("div",{className:"flex flex-col rounded-xl border bg-white overflow-hidden shadow-sm",children:c.map(({fixture:p,liveScore:g,pick:w},_)=>h.jsxs("div",{className:_<c.length-1?"relative":"",children:[_<c.length-1&&h.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-px bg-slate-200 z-10"}),h.jsx(Vy,{fixture:p,pick:w,liveScore:g,isTestApi:n,showPickButtons:r})]},p.id))})]},l))})}function Yy({isInApiTestLeague:s,fixtures:n,fixtureCards:r,hasLiveGames:o,showLiveOnly:a,onToggleLiveOnly:l,scoreComponent:c,fixturesLoading:f,hasCheckedCache:p,currentGw:g}){const w=x.useMemo(()=>n.length===0?"Games":`Gameweek ${g??n[0]?.gw??1}`,[n,g]);return h.jsx(eo,{title:w,className:"mt-8",headerRight:c,showInfoIcon:!1,children:!p||f?h.jsx("div",{className:"p-4 text-slate-500",children:"Loading fixtures..."}):n.length===0?h.jsx("div",{className:"p-4 text-slate-500",children:"No fixtures yet."}):n.length>0?h.jsx(Jy,{fixtureCards:r,isTestApi:s,showPickButtons:!0,headerRightElement:o?h.jsx(qy,{value:a,onChange:l}):void 0}):null})}const Qy=75,Zy={"Prem Predictions":0,"FC Football":0,"Easy League":0,"API Test":999,"The Bird league":7,gregVjofVcarl:8,"Let Down":8};function Mm(s){if(s)return Zy[s]}async function Xy(s){const n=typeof s.name!="string",r=typeof s.created_at!="string";if(!n&&!r)return s;const{data:o,error:a}=await Z.from("leagues").select("name, created_at").eq("id",s.id).maybeSingle();return a||!o?s:{...s,name:n?o.name:s.name,created_at:r?o.created_at:s.created_at}}async function $m(s,n){if(!s?.id)return n;const r=await Xy(s),o=Mm(r.name??void 0);if(typeof o=="number")return o;if(r.start_gw!==null&&r.start_gw!==void 0)return r.start_gw;if(r.created_at&&n){const a=new Date(r.created_at),{data:l}=await Z.from("gw_results").select("gw").order("gw",{ascending:!0}),c=l?[...new Set(l.map(f=>f.gw))]:[];for(const f of c){const{data:p}=await Z.from("fixtures").select("kickoff_time").eq("gw",f).order("kickoff_time",{ascending:!0}).limit(1).maybeSingle();if(p?.kickoff_time){const g=new Date(p.kickoff_time),w=new Date(g.getTime()-Qy*60*1e3);if(a<w)return f}}return c.length>0?Math.max(...c)+1:n}return n}function h_(s,n,r){if(s?.name==="API Test")return!0;const o=Mm(s?.name);if(typeof o=="number")return o===999?!0:n>=o;if(s?.start_gw!==null&&s?.start_gw!==void 0)return n>=s.start_gw;if(s?.created_at&&r.has(n)){const a=new Date(s.created_at),l=r.get(n);return a<l}return!0}function Dm(s,n){const[r,o]=x.useState(new Map),[a,l]=x.useState(!0),[c,f]=x.useState(null);return x.useEffect(()=>{let p=null,g=!0,w=null,_=Date.now();async function b(){try{let P=Z.from("live_scores").select("*");s!==void 0?P=P.eq("gw",s):n&&n.length>0&&(P=P.in("api_match_id",n));const{data:N,error:k}=await P;if(k){console.error("[useLiveScores] Error fetching scores:",k),g&&(f(k.message),l(!1));return}console.log("[useLiveScores] Fetched live scores:",(N||[]).length,"records"),n&&n.length>0&&(console.log("[useLiveScores] Looking for api_match_ids:",n),console.log("[useLiveScores] Found api_match_ids in response:",(N||[]).map(j=>j.api_match_id)));const A=new Map;(N||[]).forEach(j=>{A.set(j.api_match_id,j)}),g&&(o(j=>{let T=!1;const $=new Map(j);return A.forEach((M,Y)=>{const re=j.get(Y);(!re||re.home_score!==M.home_score||re.away_score!==M.away_score||re.status!==M.status||re.minute!==M.minute||JSON.stringify(re.goals)!==JSON.stringify(M.goals)||JSON.stringify(re.red_cards)!==JSON.stringify(M.red_cards))&&($.set(Y,M),T=!0)}),j.forEach((M,Y)=>{A.has(Y)||($.delete(Y),T=!0)}),T?new Map($):j}),l(!1),_=Date.now())}catch(P){console.error("[useLiveScores] Error fetching scores:",P),g&&(f(P?.message||"Failed to fetch live scores"),l(!1))}}async function S(){try{await b();const P=`live_scores_${s||"all"}_${n?.join("-")||"all"}_${Date.now()}`;p=Z.channel(P).on("postgres_changes",{event:"*",schema:"public",table:"live_scores"},k=>{if(!g)return;const A=j=>j?s!==void 0?j.gw===s:n&&n.length>0?n.includes(j.api_match_id):!0:!1;o(j=>{const T=new Map(j);let $=!1;if(k.eventType==="INSERT"||k.eventType==="UPDATE"){const M=k.new;if(console.log("[useLiveScores] Real-time update received:",k.eventType,M?.api_match_id),A(M)){const Y=j.get(M.api_match_id);(!Y||Y.home_score!==M.home_score||Y.away_score!==M.away_score||Y.status!==M.status||Y.minute!==M.minute||JSON.stringify(Y.goals)!==JSON.stringify(M.goals)||JSON.stringify(Y.red_cards)!==JSON.stringify(M.red_cards))&&(T.set(M.api_match_id,M),$=!0,_=Date.now(),console.log("[useLiveScores] Updated score for match",M.api_match_id,"minute:",M.minute))}}else if(k.eventType==="DELETE"){const M=k.old;A(M)&&(T.delete(M.api_match_id),$=!0)}return $?new Map(T):new Map(j)})}).subscribe(k=>{console.log("[useLiveScores] Subscription status:",k),k==="SUBSCRIBED"?console.log("[useLiveScores] Successfully subscribed to real-time updates"):(k==="CHANNEL_ERROR"||k==="TIMED_OUT")&&(console.error("[useLiveScores] Channel error:",k),g&&(f("Real-time subscription failed, using polling fallback"),w||(w=window.setInterval(()=>{g&&b()},5e3))))});const N=setInterval(()=>{Date.now()-_>3e4&&!w&&(console.warn("[useLiveScores] No real-time updates for 30s, starting polling fallback"),w=window.setInterval(()=>{g&&b()},5e3))},1e4);return()=>{clearInterval(N)}}catch(P){console.error("[useLiveScores] Error setting up subscription:",P),g&&(f(P?.message||"Failed to set up live scores subscription"),l(!1),w||(w=window.setInterval(()=>{g&&b()},5e3)))}}return S(),()=>{g=!1,p&&Z.removeChannel(p),w&&clearInterval(w)}},[s,n?n.join(","):void 0]),{liveScores:r,loading:a,error:c}}const Ft={LEAGUES:300*1e3,FIXTURES:120*1e3,LEADERBOARD:60*1e3,SUBMISSIONS:30*1e3,LIVE_SCORES:10*1e3,TABLES:300*1e3,HOME:300*1e3,GLOBAL:60*1e3,PREDICTIONS:300*1e3,TEAM_FORMS:1440*60*1e3},Pn="despia:cache:";function nn(s){try{const n=localStorage.getItem(`${Pn}${s}`);if(!n)return null;const r=JSON.parse(n);return Date.now()-r.timestamp>r.ttl?(localStorage.removeItem(`${Pn}${s}`),null):r.data}catch{try{localStorage.removeItem(`${Pn}${s}`)}catch{}return null}}function Mh(s){try{const n=localStorage.getItem(`${Pn}${s}`);if(!n)return{data:null,meta:null};const r=JSON.parse(n),o=Date.now()-r.timestamp,a=o<=r.ttl,l={ageMs:o,ttlMs:r.ttl,isFresh:a,freshnessPercent:a?Math.round((1-o/r.ttl)*100):0};return a?{data:r.data,meta:l}:(localStorage.removeItem(`${Pn}${s}`),{data:null,meta:l})}catch{try{localStorage.removeItem(`${Pn}${s}`)}catch{}return{data:null,meta:null}}}function Jt(s,n,r){try{const o={data:n,timestamp:Date.now(),ttl:r};localStorage.setItem(`${Pn}${s}`,JSON.stringify(o))}catch(o){if(o instanceof Error&&o.name==="QuotaExceededError"){t1();try{localStorage.setItem(`${Pn}${s}`,JSON.stringify({data:n,timestamp:Date.now(),ttl:r}))}catch{}}}}function En(s){try{localStorage.removeItem(`${Pn}${s}`)}catch{}}function e1(){try{const s=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);o?.startsWith(Pn)&&s.push(o)}const n=Date.now();for(const r of s)try{const o=localStorage.getItem(r);if(!o)continue;const a=JSON.parse(o);n-a.timestamp>a.ttl&&localStorage.removeItem(r)}catch{localStorage.removeItem(r)}}catch{}}function t1(){try{const s=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);if(o?.startsWith(Pn))try{const a=localStorage.getItem(o);if(!a)continue;const l=JSON.parse(a);s.push({key:o,timestamp:l.timestamp})}catch{localStorage.removeItem(o)}}s.sort((r,o)=>r.timestamp-o.timestamp);const n=Math.ceil(s.length*.25);for(let r=0;r<n;r++)localStorage.removeItem(s[r].key)}catch{}}function n1(s){try{const n=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);o?.startsWith(Pn)&&o.includes(s)&&n.push(o)}for(const r of n)localStorage.removeItem(r)}catch{}}function Um(s){try{const n=localStorage.getItem(`${Pn}${s}`);return n?JSON.parse(n).timestamp:null}catch{return null}}function tc(s){n1(s),En(`home:basic:${s}`),En(`tables:${s}`)}typeof window<"u"&&e1();function nc(s,n){return[...s].sort((r,o)=>{const a=n?.[r.id]??0,l=n?.[o.id]??0;return l!==a?l-a:r.name.localeCompare(o.name)})}const Fm=s=>`leagues:${s}`,Bm=s=>`leagues:unread:${s}`;async function r1(s){const{data:n,error:r}=await Z.from("league_members").select("leagues(id, name, code, avatar, created_at)").eq("user_id",s);if(r)throw pt.error("api/fetch_leagues_error",{error:r.message}),r;return(n??[]).map(a=>a.leagues).filter(a=>a!==null&&a.name!=="API Test")}async function Gm(s,n){if(n.length===0)return{};try{const{data:r,error:o}=await Z.from("league_message_reads").select("league_id, last_read_at").eq("user_id",s);if(o)return pt.warn("api/fetch_unread_reads_error",{error:o.message}),{};const a=new Map;(r??[]).forEach(p=>a.set(p.league_id,p.last_read_at));const l=n.map(async p=>{const g=a.get(p)??"1970-01-01T00:00:00Z",{count:w,error:_}=await Z.from("league_messages").select("id",{count:"exact",head:!0}).eq("league_id",p).gte("created_at",g).neq("user_id",s);return _?(pt.warn("api/fetch_unread_count_error",{leagueId:p.slice(0,8),error:_.message}),{leagueId:p,count:0}):{leagueId:p,count:typeof w=="number"?w:0}}),c=await Promise.all(l),f={};return c.forEach(({leagueId:p,count:g})=>{f[p]=g}),f}catch(r){return pt.error("api/fetch_unread_error",{error:r?.message}),{}}}async function zm(s,n={}){const{forceRefresh:r=!1,includeUnread:o=!0}=n,a=Fm(s),l=Bm(s);if(!r){const{data:_,meta:b}=Mh(a),{data:S,meta:P}=Mh(l);if(_&&_.length>0)return pt.info("api/leagues_cache_hit",{cacheHit:!0,cacheAgeMs:b?.ageMs??null,freshnessPercent:b?.freshnessPercent??0,source:"cache",count:_.length,unreadCacheAgeMs:P?.ageMs??null}),{leagues:_,unreadByLeague:S??{},fromCache:!0,source:"cache",cacheAgeMs:b?.ageMs??null};pt.info("api/leagues_cache_miss",{cacheHit:!1,reason:_?"empty":"not_found",source:"network"})}pt.info("api/leagues_fetch_start",{userId:s.slice(0,8),forceRefresh:r,source:r?"prewarm":"network"});const c=Date.now(),f=await r1(s),p=Date.now()-c;Jt(a,f,Ft.LEAGUES);let g={};if(o&&f.length>0){const _=f.map(b=>b.id);g=await Gm(s,_),Jt(l,g,Ft.LEAGUES)}const w=r?"prewarm":"network";return pt.info("api/leagues_fetch_success",{cacheHit:!1,source:w,count:f.length,fetchDurationMs:p,totalUnread:Object.values(g).reduce((_,b)=>_+b,0)}),{leagues:f,unreadByLeague:g,fromCache:!1,source:w,cacheAgeMs:null}}function s1(s){const n=Fm(s),r=Bm(s);try{localStorage.removeItem(`despia:cache:${n}`),localStorage.removeItem(`despia:cache:${r}`),pt.debug("api/leagues_cache_invalidated",{userId:s.slice(0,8)})}catch{}}async function i1(s){const n=await zm(s,{forceRefresh:!0,includeUnread:!0});return pt.debug("api/leagues_cache_prewarmed",{userId:s.slice(0,8),count:n.leagues.length}),{leagueIds:n.leagues.map(r=>r.id)}}const Pu=s=>`leagues:${s}`,ju=s=>`leagues:unread:${s}`;function Wm(s={}){const{pageName:n="unknown",skipInitialFetch:r=!1}=s,{user:o}=ur(),a=o?.id,[l,c]=x.useState(()=>a?nn(Pu(a))??[]:[]),[f,p]=x.useState(()=>a?nn(ju(a))??{}:{}),[g,w]=x.useState(()=>{if(!a)return!1;const M=nn(Pu(a));return!M||M.length===0}),[_,b]=x.useState(!1),[S,P]=x.useState(null),N=x.useRef(!1),k=x.useRef(!0),A=x.useCallback(async(M=!1)=>{if(a){M&&b(!0);try{const Y=Date.now(),re=await zm(a,{forceRefresh:M}),Ie=Date.now()-Y;if(!k.current)return;const Me=re.leagues.filter(Ve=>Ve.name!=="API Test"),He=nc(Me,re.unreadByLeague);c(He),p(re.unreadByLeague),P(null),re.fromCache?Nh.leaguesInitial(n,He.length,He.map(Ve=>Ve.id),{source:re.source,cacheAgeMs:re.cacheAgeMs}):Nh.leaguesRefresh(n,He.length,He.map(Ve=>Ve.id),{source:re.source,fetchDurationMs:Ie}),Jt(Pu(a),He,Ft.LEAGUES),Jt(ju(a),re.unreadByLeague,Ft.LEAGUES)}catch(Y){if(!k.current)return;pt.error(`${n}/leagues_error`,{error:Y?.message}),P(Y?.message??"Failed to fetch leagues")}finally{k.current&&(w(!1),b(!1))}}},[a,n]),j=x.useCallback(async()=>{if(!(!a||l.length===0))try{const M=l.map(Ie=>Ie.id),Y=await Gm(a,M);if(!k.current)return;p(Y);const re=nc(l,Y);c(re),Jt(ju(a),Y,Ft.LEAGUES)}catch{}},[a,l]),T=x.useCallback(async()=>{await A(!0)},[A]),$=x.useCallback(async()=>{a&&s1(a),await A(!0)},[a,A]);return x.useEffect(()=>{if(k.current=!0,r){w(!1);return}if(!a){w(!1);return}return l.length>0&&w(!1),N.current||(N.current=!0,A(!1)),()=>{k.current=!1}},[a,r,A,l.length]),x.useEffect(()=>{if(!a)return;const M=()=>{j()};return window.addEventListener("focus",M),()=>window.removeEventListener("focus",M)},[a,j]),{leagues:l,unreadByLeague:f,loading:g,refreshing:_,error:S,refresh:T,invalidateAndRefresh:$}}var gc={};(function s(n,r,o,a){var l=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",f=(function(){if(!n.OffscreenCanvas)return!1;try{var C=new OffscreenCanvas(1,1),v=C.getContext("2d");v.fillRect(0,0,1,1);var R=C.transferToImageBitmap();v.createPattern(R,"no-repeat")}catch{return!1}return!0})();function p(){}function g(C){var v=r.exports.Promise,R=v!==void 0?v:n.Promise;return typeof R=="function"?new R(C):(C(p,p),null)}var w=(function(C,v){return{transform:function(R){if(C)return R;if(v.has(R))return v.get(R);var z=new OffscreenCanvas(R.width,R.height),K=z.getContext("2d");return K.drawImage(R,0,0),v.set(R,z),z},clear:function(){v.clear()}}})(f,new Map),_=(function(){var C=Math.floor(16.666666666666668),v,R,z={},K=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(v=function(D){var B=Math.random();return z[B]=requestAnimationFrame(function F(q){K===q||K+C-1<q?(K=q,delete z[B],D()):z[B]=requestAnimationFrame(F)}),B},R=function(D){z[D]&&cancelAnimationFrame(z[D])}):(v=function(D){return setTimeout(D,C)},R=function(D){return clearTimeout(D)}),{frame:v,cancel:R}})(),b=(function(){var C,v,R={};function z(K){function D(B,F){K.postMessage({options:B||{},callback:F})}K.init=function(F){var q=F.transferControlToOffscreen();K.postMessage({canvas:q},[q])},K.fire=function(F,q,H){if(v)return D(F,null),v;var se=Math.random().toString(36).slice(2);return v=g(function(ke){function ve(pe){pe.data.callback===se&&(delete R[se],K.removeEventListener("message",ve),v=null,w.clear(),H(),ke())}K.addEventListener("message",ve),D(F,se),R[se]=ve.bind(null,{data:{callback:se}})}),v},K.reset=function(){K.postMessage({reset:!0});for(var F in R)R[F](),delete R[F]}}return function(){if(C)return C;if(!o&&l){var K=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{C=new Worker(URL.createObjectURL(new Blob([K])))}catch(D){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",D),null}z(C)}return C}})(),S={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function P(C,v){return v?v(C):C}function N(C){return C!=null}function k(C,v,R){return P(C&&N(C[v])?C[v]:S[v],R)}function A(C){return C<0?0:Math.floor(C)}function j(C,v){return Math.floor(Math.random()*(v-C))+C}function T(C){return parseInt(C,16)}function $(C){return C.map(M)}function M(C){var v=String(C).replace(/[^0-9a-f]/gi,"");return v.length<6&&(v=v[0]+v[0]+v[1]+v[1]+v[2]+v[2]),{r:T(v.substring(0,2)),g:T(v.substring(2,4)),b:T(v.substring(4,6))}}function Y(C){var v=k(C,"origin",Object);return v.x=k(v,"x",Number),v.y=k(v,"y",Number),v}function re(C){C.width=document.documentElement.clientWidth,C.height=document.documentElement.clientHeight}function Ie(C){var v=C.getBoundingClientRect();C.width=v.width,C.height=v.height}function Me(C){var v=document.createElement("canvas");return v.style.position="fixed",v.style.top="0px",v.style.left="0px",v.style.pointerEvents="none",v.style.zIndex=C,v}function He(C,v,R,z,K,D,B,F,q){C.save(),C.translate(v,R),C.rotate(D),C.scale(z,K),C.arc(0,0,1,B,F,q),C.restore()}function Ve(C){var v=C.angle*(Math.PI/180),R=C.spread*(Math.PI/180);return{x:C.x,y:C.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:C.startVelocity*.5+Math.random()*C.startVelocity,angle2D:-v+(.5*R-Math.random()*R),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:C.color,shape:C.shape,tick:0,totalTicks:C.ticks,decay:C.decay,drift:C.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:C.gravity*3,ovalScalar:.6,scalar:C.scalar,flat:C.flat}}function rt(C,v){v.x+=Math.cos(v.angle2D)*v.velocity+v.drift,v.y+=Math.sin(v.angle2D)*v.velocity+v.gravity,v.velocity*=v.decay,v.flat?(v.wobble=0,v.wobbleX=v.x+10*v.scalar,v.wobbleY=v.y+10*v.scalar,v.tiltSin=0,v.tiltCos=0,v.random=1):(v.wobble+=v.wobbleSpeed,v.wobbleX=v.x+10*v.scalar*Math.cos(v.wobble),v.wobbleY=v.y+10*v.scalar*Math.sin(v.wobble),v.tiltAngle+=.1,v.tiltSin=Math.sin(v.tiltAngle),v.tiltCos=Math.cos(v.tiltAngle),v.random=Math.random()+2);var R=v.tick++/v.totalTicks,z=v.x+v.random*v.tiltCos,K=v.y+v.random*v.tiltSin,D=v.wobbleX+v.random*v.tiltCos,B=v.wobbleY+v.random*v.tiltSin;if(C.fillStyle="rgba("+v.color.r+", "+v.color.g+", "+v.color.b+", "+(1-R)+")",C.beginPath(),c&&v.shape.type==="path"&&typeof v.shape.path=="string"&&Array.isArray(v.shape.matrix))C.fill(Pe(v.shape.path,v.shape.matrix,v.x,v.y,Math.abs(D-z)*.1,Math.abs(B-K)*.1,Math.PI/10*v.wobble));else if(v.shape.type==="bitmap"){var F=Math.PI/10*v.wobble,q=Math.abs(D-z)*.1,H=Math.abs(B-K)*.1,se=v.shape.bitmap.width*v.scalar,ke=v.shape.bitmap.height*v.scalar,ve=new DOMMatrix([Math.cos(F)*q,Math.sin(F)*q,-Math.sin(F)*H,Math.cos(F)*H,v.x,v.y]);ve.multiplySelf(new DOMMatrix(v.shape.matrix));var pe=C.createPattern(w.transform(v.shape.bitmap),"no-repeat");pe.setTransform(ve),C.globalAlpha=1-R,C.fillStyle=pe,C.fillRect(v.x-se/2,v.y-ke/2,se,ke),C.globalAlpha=1}else if(v.shape==="circle")C.ellipse?C.ellipse(v.x,v.y,Math.abs(D-z)*v.ovalScalar,Math.abs(B-K)*v.ovalScalar,Math.PI/10*v.wobble,0,2*Math.PI):He(C,v.x,v.y,Math.abs(D-z)*v.ovalScalar,Math.abs(B-K)*v.ovalScalar,Math.PI/10*v.wobble,0,2*Math.PI);else if(v.shape==="star")for(var O=Math.PI/2*3,V=4*v.scalar,ge=8*v.scalar,J=v.x,ee=v.y,X=5,ce=Math.PI/X;X--;)J=v.x+Math.cos(O)*ge,ee=v.y+Math.sin(O)*ge,C.lineTo(J,ee),O+=ce,J=v.x+Math.cos(O)*V,ee=v.y+Math.sin(O)*V,C.lineTo(J,ee),O+=ce;else C.moveTo(Math.floor(v.x),Math.floor(v.y)),C.lineTo(Math.floor(v.wobbleX),Math.floor(K)),C.lineTo(Math.floor(D),Math.floor(B)),C.lineTo(Math.floor(z),Math.floor(v.wobbleY));return C.closePath(),C.fill(),v.tick<v.totalTicks}function Ye(C,v,R,z,K){var D=v.slice(),B=C.getContext("2d"),F,q,H=g(function(se){function ke(){F=q=null,B.clearRect(0,0,z.width,z.height),w.clear(),K(),se()}function ve(){o&&!(z.width===a.width&&z.height===a.height)&&(z.width=C.width=a.width,z.height=C.height=a.height),!z.width&&!z.height&&(R(C),z.width=C.width,z.height=C.height),B.clearRect(0,0,z.width,z.height),D=D.filter(function(pe){return rt(B,pe)}),D.length?F=_.frame(ve):ke()}F=_.frame(ve),q=ke});return{addFettis:function(se){return D=D.concat(se),H},canvas:C,promise:H,reset:function(){F&&_.cancel(F),q&&q()}}}function ut(C,v){var R=!C,z=!!k(v||{},"resize"),K=!1,D=k(v,"disableForReducedMotion",Boolean),B=l&&!!k(v||{},"useWorker"),F=B?b():null,q=R?re:Ie,H=C&&F?!!C.__confetti_initialized:!1,se=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ke;function ve(O,V,ge){for(var J=k(O,"particleCount",A),ee=k(O,"angle",Number),X=k(O,"spread",Number),ce=k(O,"startVelocity",Number),qe=k(O,"decay",Number),Ze=k(O,"gravity",Number),st=k(O,"drift",Number),at=k(O,"colors",$),jt=k(O,"ticks",Number),_t=k(O,"shapes"),ne=k(O,"scalar"),de=!!k(O,"flat"),Q=Y(O),ye=J,Ee=[],De=C.width*Q.x,Oe=C.height*Q.y;ye--;)Ee.push(Ve({x:De,y:Oe,angle:ee,spread:X,startVelocity:ce,color:at[ye%at.length],shape:_t[j(0,_t.length)],ticks:jt,decay:qe,gravity:Ze,drift:st,scalar:ne,flat:de}));return ke?ke.addFettis(Ee):(ke=Ye(C,Ee,q,V,ge),ke.promise)}function pe(O){var V=D||k(O,"disableForReducedMotion",Boolean),ge=k(O,"zIndex",Number);if(V&&se)return g(function(ce){ce()});R&&ke?C=ke.canvas:R&&!C&&(C=Me(ge),document.body.appendChild(C)),z&&!H&&q(C);var J={width:C.width,height:C.height};F&&!H&&F.init(C),H=!0,F&&(C.__confetti_initialized=!0);function ee(){if(F){var ce={getBoundingClientRect:function(){if(!R)return C.getBoundingClientRect()}};q(ce),F.postMessage({resize:{width:ce.width,height:ce.height}});return}J.width=J.height=null}function X(){ke=null,z&&(K=!1,n.removeEventListener("resize",ee)),R&&C&&(document.body.contains(C)&&document.body.removeChild(C),C=null,H=!1)}return z&&!K&&(K=!0,n.addEventListener("resize",ee,!1)),F?F.fire(O,J,X):ve(O,J,X)}return pe.reset=function(){F&&F.reset(),ke&&ke.reset()},pe}var ue;function Se(){return ue||(ue=ut(null,{useWorker:!0,resize:!0})),ue}function Pe(C,v,R,z,K,D,B){var F=new Path2D(C),q=new Path2D;q.addPath(F,new DOMMatrix(v));var H=new Path2D;return H.addPath(q,new DOMMatrix([Math.cos(B)*K,Math.sin(B)*K,-Math.sin(B)*D,Math.cos(B)*D,R,z])),H}function te(C){if(!c)throw new Error("path confetti are not supported in this browser");var v,R;typeof C=="string"?v=C:(v=C.path,R=C.matrix);var z=new Path2D(v),K=document.createElement("canvas"),D=K.getContext("2d");if(!R){for(var B=1e3,F=B,q=B,H=0,se=0,ke,ve,pe=0;pe<B;pe+=2)for(var O=0;O<B;O+=2)D.isPointInPath(z,pe,O,"nonzero")&&(F=Math.min(F,pe),q=Math.min(q,O),H=Math.max(H,pe),se=Math.max(se,O));ke=H-F,ve=se-q;var V=10,ge=Math.min(V/ke,V/ve);R=[ge,0,0,ge,-Math.round(ke/2+F)*ge,-Math.round(ve/2+q)*ge]}return{type:"path",path:v,matrix:R}}function we(C){var v,R=1,z="#000000",K='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof C=="string"?v=C:(v=C.text,R="scalar"in C?C.scalar:R,K="fontFamily"in C?C.fontFamily:K,z="color"in C?C.color:z);var D=10*R,B=""+D+"px "+K,F=new OffscreenCanvas(D,D),q=F.getContext("2d");q.font=B;var H=q.measureText(v),se=Math.ceil(H.actualBoundingBoxRight+H.actualBoundingBoxLeft),ke=Math.ceil(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent),ve=2,pe=H.actualBoundingBoxLeft+ve,O=H.actualBoundingBoxAscent+ve;se+=ve+ve,ke+=ve+ve,F=new OffscreenCanvas(se,ke),q=F.getContext("2d"),q.font=B,q.fillStyle=z,q.fillText(v,pe,O);var V=1/R;return{type:"bitmap",bitmap:F.transferToImageBitmap(),matrix:[V,0,0,V,-se*V/2,-ke*V/2]}}r.exports=function(){return Se().apply(this,arguments)},r.exports.reset=function(){Se().reset()},r.exports.create=ut,r.exports.shapeFromPath=te,r.exports.shapeFromText=we})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),gc,!1);const ms=gc.exports;gc.exports.create;function $h(s){const r={origin:s||{x:.5,y:.5},gravity:1.1,decay:.88,ticks:260,scalar:1.2};ms({...r,particleCount:80,angle:45,spread:35,startVelocity:65}),ms({...r,particleCount:80,angle:135,spread:35,startVelocity:65}),ms({...r,particleCount:80,angle:315,spread:35,startVelocity:65}),ms({...r,particleCount:80,angle:225,spread:35,startVelocity:65}),ms({...r,particleCount:100,angle:90,spread:60,startVelocity:55}),ms({...r,particleCount:100,angle:0,spread:70,startVelocity:50}),ms({...r,particleCount:100,angle:180,spread:70,startVelocity:50})}const o1=["4542c037-5b38-40d0-b189-847b8f17c222","f8a1669e-2512-4edf-9c21-b9f87b3efbe2","9c0bcf50-370d-412d-8826-95371a72b4fe","36f31625-6d6c-4aa4-815a-1493a812841b"];function a1(s){return s.result==="H"||s.result==="D"||s.result==="A"?s.result:null}function l1(){const{user:s}=ur(),r=(()=>{let ne=s?.id;if(!ne&&typeof window<"u")try{const de=localStorage.getItem("totl:user");de&&(ne=JSON.parse(de).id)}catch{}if(typeof window>"u"||!ne)return{gw:1,latestGw:null,gwPoints:[],allGwPoints:[],overall:[],lastGwRank:null,fixtures:[],userPicks:{},fixturesLoading:!0,loading:!0,leagueDataLoading:!0,leaderboardDataLoading:!0};try{if(!ne)return{gw:1,latestGw:null,gwPoints:[],allGwPoints:[],overall:[],lastGwRank:null,fiveGwRank:null,tenGwRank:null,seasonRank:null,fixtures:[],userPicks:{},fixturesLoading:!0,loading:!0,leagueDataLoading:!0,leaderboardDataLoading:!0};const de=`home:basic:${ne}`,Q=nn(de);if(Q&&Q.currentGw){let ye=[],Ee={},De=!0;const Oe=`home:fixtures:${ne}:${Q.currentGw}`;try{const be=nn(Oe);be&&be.fixtures&&Array.isArray(be.fixtures)&&be.fixtures.length>0&&(ye=be.fixtures,Ee=be.userPicks||{},De=!1,H.current=!0),se.current=!0}catch{}return{gw:Q.currentGw,latestGw:Q.latestGw,gwPoints:(Q.allGwPoints||[]).filter(be=>be.user_id===ne),allGwPoints:Q.allGwPoints||[],overall:Q.overall||[],lastGwRank:Q.lastGwRank||null,fiveGwRank:Q.fiveGwRank??null,tenGwRank:Q.tenGwRank??null,seasonRank:Q.seasonRank??null,fixtures:ye,userPicks:Ee,fixturesLoading:De,loading:!1,leagueDataLoading:!1,leaderboardDataLoading:!1}}}catch{}return{gw:1,latestGw:null,gwPoints:[],allGwPoints:[],overall:[],lastGwRank:null,fixtures:[],userPicks:{},fixturesLoading:!0,loading:!0,leagueDataLoading:!0,leaderboardDataLoading:!0}})(),{leagues:o,unreadByLeague:a}=Wm({pageName:"home"}),l=x.useMemo(()=>o.some(ne=>ne.name==="API Test"),[o]),[c,f]=x.useState({}),[p,g]=x.useState(r.gw),[w,_]=x.useState(r.latestGw),b=x.useRef(null);x.useEffect(()=>{if(!s?.id)return;let ne=!0;return(async()=>{try{const de=`home:basic:${s.id}`,ye=nn(de)?.currentGw??r.gw,{data:Ee,error:De}=await Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle();if(!ne||De)return;const Oe=Ee?.current_gw??1;if(ye!==Oe){if(console.log("[Home]  Cached GW is stale on mount! Cached:",ye,"DB:",Oe,"- clearing cache and updating"),En(de),ye){const be=`home:fixtures:${s.id}:${ye}`;En(be)}g(Oe)}else console.log("[Home]  Cached GW is valid:",ye)}catch(de){console.error("[Home] Error validating cached GW:",de)}})(),()=>{ne=!1}},[s?.id,r.gw]),x.useEffect(()=>{const ne=()=>{sessionStorage.getItem("showConfettiOnHome")==="true"&&(sessionStorage.removeItem("showConfettiOnHome"),window.scrollTo({top:0,behavior:"instant"}),setTimeout(()=>{if(b.current){const ye=b.current.getBoundingClientRect(),Ee=(ye.left+ye.width/2)/window.innerWidth,De=(ye.top+ye.height/2)/window.innerHeight;$h({x:Ee,y:De})}else $h()},100))};ne();const de=setTimeout(ne,100);return()=>clearTimeout(de)},[]);const[S,P]=x.useState(0),[N,k]=x.useState(r.gwPoints),[A,j]=x.useState(r.loading),[T,$]=x.useState(r.leagueDataLoading),[M,Y]=x.useState(r.leaderboardDataLoading),[re,Ie]=x.useState(r.lastGwRank),[Me,He]=x.useState(r.fiveGwRank??null),[Ve,rt]=x.useState(r.tenGwRank??null),[Ye,ut]=x.useState(r.seasonRank??null),[ue,Se]=x.useState(r.allGwPoints),[Pe,te]=x.useState(r.overall),[we,C]=x.useState({}),[v,R]=x.useState(r.fixtures),[z,K]=x.useState(r.fixturesLoading),[D,B]=x.useState(r.userPicks),[F,q]=x.useState(!1),H=x.useRef(r.fixtures.length>0),se=x.useRef(r.fixtures.length>0),ke=x.useMemo(()=>{if(!v?.length)return[];const ne=[];for(const de of v)de.api_match_id&&ne.push(de.api_match_id);return ne},[v]),ve=x.useMemo(()=>{if(!v?.length||!s?.id)return new Map;try{if(!p)return new Map;const ne=`home:fixtures:${s.id}:${p}`,de=nn(ne);if(de?.liveScores&&Array.isArray(de.liveScores)){const Q=new Map;return de.liveScores.forEach(ye=>{ye.api_match_id&&Q.set(ye.api_match_id,ye)}),Q}}catch{}return new Map},[v,s?.id]),{liveScores:pe}=Dm(p,ke.length>0?ke:void 0),O=x.useMemo(()=>{const ne=new Map(ve);return pe.forEach((de,Q)=>{ne.set(Q,de)}),ne},[ve,pe]);x.useEffect(()=>{if(!s?.id||!v.length||!O.size||!p)return;const ne=`home:fixtures:${s.id}:${p}`;try{const de=nn(ne);if(de){const Q=[];O.forEach(ye=>{Q.push(ye)}),Jt(ne,{...de,liveScores:Q.length>0?Q:void 0},Ft.HOME)}}catch{}},[s?.id,v,O]);const[V,ge]=x.useState({});x.useEffect(()=>{if(!p||!v.length){ge({});return}if(!v.some(Q=>!Q.api_match_id)){ge({});return}let de=!0;return(async()=>{try{const{data:Q,error:ye}=await Z.from("app_gw_results").select("fixture_index, result").eq("gw",p);if(!de)return;if(!ye&&Q){const Ee={};Q.forEach(De=>{(De.result==="H"||De.result==="D"||De.result==="A")&&(Ee[De.fixture_index]=De.result)}),ge(Ee)}}catch{}})(),()=>{de=!1}},[p,v]);const J=x.useMemo(()=>{const ne={};if(!v?.length)return ne;for(const de of v)if(de.api_match_id){const Q=O.get(de.api_match_id);Q&&(ne[de.fixture_index]={homeScore:Q.home_score??0,awayScore:Q.away_score??0,status:Q.status||"SCHEDULED",minute:Q.minute??null,goals:Q.goals??null,red_cards:Q.red_cards??null,home_team:Q.home_team??null,away_team:Q.away_team??null})}else{const Q=V[de.fixture_index];Q&&(ne[de.fixture_index]={homeScore:Q==="H"?1:0,awayScore:Q==="A"?1:0,status:"FINISHED",minute:null,goals:null,red_cards:null,home_team:null,away_team:null,result:Q})}return ne},[O,v,V]);x.useEffect(()=>{if(console.log("[Home] Data loading effect triggered, user:",s?.id),!s?.id){console.log("[Home] No user ID, skipping data load"),j(!1),Y(!1),$(!1);return}let ne=!0;const de=`home:basic:${s.id}`;return o.length>0&&!A?console.log("[Home] Already loaded from cache, refreshing in background"):(console.log("[Home] No cache found, fetching fresh data"),j(!0),Y(!0),$(!0)),(async()=>{try{console.log("[Home] Starting data fetch for user:",s.id),console.log("[Home] Supabase client:",Z?"exists":"missing");try{const dt=await Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle();console.log("[Home] Test query result:",dt.error?"ERROR: "+dt.error.message:"OK",dt.data)}catch(dt){console.error("[Home] Test query failed:",dt)}const ye=new Promise((dt,hn)=>{setTimeout(()=>hn(new Error("Data fetch timed out after 15 seconds")),15e3)});console.log("[Home] Making Supabase requests (non-league data)...");const Ee=Promise.all([Z.from("app_gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle(),Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle(),Z.from("app_v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0}),Z.from("app_v_ocp_overall").select("user_id, name, ocp")]);console.log("[Home] Waiting for requests to complete...");const[De,Oe,be,kt]=await Promise.race([Ee,ye]);if(console.log("[Home] Requests completed!"),!ne)return;console.log("[Home] Data fetch completed, processing results"),console.log("[Home] Meta result:",Oe.error?"ERROR: "+Oe.error.message:"OK");const me=De.data?.gw??Oe.data?.current_gw??1,$e=Oe.data?.current_gw??1;console.log("[Home]  Fetched current_gw from app_meta:",$e,"metaResult.data:",Oe.data),g($e);const ze=De.data?.gw??$e;console.log("[Home]  Fetched latestGw:",ze,"previous latestGw:",w),ze!==w&&w!==null&&(console.log("[Home]  Detected GW change:",w,"->",ze,"- triggering refetch"),P(dt=>dt+1)),_(ze);let ae=[],fe=null;be.error?(Se([]),k([])):(ae=be.data??[],Se(ae),k(ae.filter(dt=>dt.user_id===s.id)),fe=Fy(s.id,me,ae),fe&&Ie(fe));let Ce=[];kt.error?te([]):(Ce=kt.data??[],te(Ce));const tt=me>=5?Ah(s.id,me-4,me,ae,Ce):null,it=me>=10?Ah(s.id,me-9,me,ae,Ce):null,ct=By(s.id,Ce);ne&&(He(tt),rt(it),ut(ct));try{Jt(de,{currentGw:$e,latestGw:ze,allGwPoints:ae,overall:Ce,lastGwRank:fe,fiveGwRank:tt,tenGwRank:it,seasonRank:ct},Ft.HOME)}catch{}j(!1),Y(!1)}catch(ye){console.error("[Home] Error fetching data:",ye),ne&&(j(!1),Y(!1),$(!1))}})(),()=>{ne=!1}},[s?.id]),x.useEffect(()=>{if(!s?.id)return;console.log("[Home] Setting up realtime subscription for app_meta.current_gw changes");const ne=Z.channel("app_meta_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"app_meta",filter:"id=eq.1"},de=>{console.log("[Home]  app_meta.current_gw changed:",de.new);const Q=de.new?.current_gw;if(Q&&typeof Q=="number"){console.log("[Home]  Detected current_gw change, updating GW to:",Q);const ye=p;g(Q);const Ee=`home:basic:${s.id}`;if(En(Ee),ye){const Oe=`home:fixtures:${s.id}:${ye}`;En(Oe)}const De=`home:fixtures:${s.id}:${Q}`;En(De),P(Oe=>Oe+1),console.log("[Home]  Cleared caches and triggered refetch for GW",Q)}}).subscribe();return()=>{console.log("[Home] Cleaning up app_meta realtime subscription"),Z.removeChannel(ne)}},[s?.id,p]),x.useEffect(()=>{if(!s?.id||!o.length||!p){$(!1);return}let ne=!0;const de=`home:leagueData:${s.id}:${p}`;let Q=!1;try{const ye=nn(de);if(ye&&ye.leagueData&&Object.keys(ye.leagueData).length>0)if(Object.values(ye.leagueData).every(De=>De.webUserIds!==void 0)){const De={};for(const[Oe,be]of Object.entries(ye.leagueData))De[Oe]={...be,submittedMembers:be.submittedMembers?Array.isArray(be.submittedMembers)?new Set(be.submittedMembers):be.submittedMembers:void 0,latestGwWinners:be.latestGwWinners?Array.isArray(be.latestGwWinners)?new Set(be.latestGwWinners):be.latestGwWinners:void 0,webUserIds:be.webUserIds?Array.isArray(be.webUserIds)?new Set(be.webUserIds):be.webUserIds:void 0};C(De),f(ye.leagueSubmissions||{}),$(!1),Q=!0}else console.log("[Home] Cache is stale (missing webUserIds), invalidating and fetching fresh data"),En(de)}catch{}return(async()=>{try{if(!ne)return;Q||(C({}),$(!0));const ye=o.map(xe=>xe.id),[Ee,De,Oe,be,kt,me]=await Promise.all([Z.from("league_members").select("league_id, user_id, users!inner(id, name)").in("league_id",ye),Z.from("league_message_reads").select("league_id, last_read_at").eq("user_id",s.id).in("league_id",ye),Z.from("app_gw_submissions").select("user_id").eq("gw",p),Z.from("app_gw_results").select("gw, fixture_index, result"),Z.from("app_fixtures").select("gw, kickoff_time").in("gw",Array.from({length:Math.min(20,w||20)},(xe,Xe)=>Xe+1)),Z.from("picks").select("user_id").limit(1e4)]);if(!ne)return;const $e={};(Ee.data??[]).forEach(xe=>{$e[xe.league_id]||($e[xe.league_id]=[]),$e[xe.league_id].push({id:xe.users.id,name:xe.users.name})});const ze=new Set(Object.values($e).flat().map(xe=>xe.id)),ae=new Set((Oe.data??[]).map(xe=>xe.user_id).filter(xe=>ze.has(xe))),fe=new Set((me.data??[]).map(xe=>xe.user_id)),Ce=new Set(o1),tt=new Set(Array.from(fe).filter(xe=>ze.has(xe)&&!Ce.has(xe)));console.log("[Home] Web users identification for GW",p,":",{totalWebPicksUsers:fe.size,appTestUsersExcluded:Array.from(fe).filter(xe=>Ce.has(xe)).length,finalWebUserIds:tt.size,sampleWebUserIds:Array.from(tt).slice(0,5),webPicksDataCount:me.data?.length||0,allMemberIdsCount:ze.size}),me.error&&console.error("[Home] Error fetching web picks:",me.error);const it=new Map;(De.data??[]).forEach(xe=>{it.set(xe.league_id,xe.last_read_at)});const ct=o.map(async xe=>{const Xe=($e[xe.id]??[]).map(cr=>cr.id);if(Xe.length===0)return{leagueId:xe.id,picks:[]};const{data:et}=await Z.from("app_picks").select("user_id, gw, fixture_index, pick").in("user_id",Xe);return{leagueId:xe.id,picks:et??[]}}),dt=ye.map(async xe=>{const Xe=it.get(xe)??"1970-01-01T00:00:00Z",{count:et}=await Z.from("league_messages").select("id",{count:"exact",head:!0}).eq("league_id",xe).gte("created_at",Xe).neq("user_id",s.id);return{leagueId:xe,count:typeof et=="number"?et:0}}),[hn,kr]=await Promise.all([Promise.all(dt),Promise.all(ct)]);if(!ne)return;const jn=new Map;(be.data??[]).forEach(xe=>{const Xe=a1(xe);Xe&&jn.set(`${xe.gw}:${xe.fixture_index}`,Xe)});const tr=[...new Set(Array.from(jn.keys()).map(xe=>parseInt(xe.split(":")[0],10)))].sort((xe,Xe)=>xe-Xe),Fn=(kt.data??[]).filter(xe=>tr.length>0?tr.includes(xe.gw):xe.gw===1),Yr={};hn.forEach(({leagueId:xe,count:Xe})=>{Yr[xe]=Xe});const mn=new Map;kr.forEach(({leagueId:xe,picks:Xe})=>{mn.set(xe,Xe)});const Rn=new Map;Fn.forEach(xe=>{if(xe.kickoff_time&&xe.gw){const Xe=new Date(xe.kickoff_time),et=new Date(Xe.getTime()-4500*1e3);(!Rn.has(xe.gw)||et<Rn.get(xe.gw))&&Rn.set(xe.gw,et)}});const pn=new Map,Bn=o.map(async xe=>{const Xe=await $m(xe,p);return{leagueId:xe.id,leagueStartGw:Xe}});(await Promise.all(Bn)).forEach(({leagueId:xe,leagueStartGw:Xe})=>{pn.set(xe,Xe)});const gn={},Gn={};o.forEach(xe=>{const Xe=$e[xe.id]??[],et=Xe.map(Ne=>Ne.id),cr=et.filter(Ne=>ae.has(Ne)).length,nr=et.length;if(Gn[xe.id]={allSubmitted:cr===nr&&nr>0,submittedCount:cr,totalCount:nr},jn.size===0){const Ne=Xe.sort((Ke,xt)=>Ke.name.localeCompare(xt.name));gn[xe.id]={id:xe.id,members:Ne,userPosition:null,positionChange:null,submittedMembers:Array.from(et.filter(Ke=>ae.has(Ke))),sortedMemberIds:Ne.map(Ke=>Ke.id),latestGwWinners:[],latestRelevantGw:null,webUserIds:Array.from(et.filter(Ke=>tt.has(Ke)))};return}const ks=pn.get(xe.id)??p,wn=ks===0?tr:tr.filter(Ne=>Ne>=ks);if(wn.length===0){const Ne=Xe.sort((Ke,xt)=>Ke.name.localeCompare(xt.name));gn[xe.id]={id:xe.id,members:Ne,userPosition:null,positionChange:null,submittedMembers:Array.from(et.filter(Ke=>ae.has(Ke))),sortedMemberIds:Ne.map(Ke=>Ke.id),latestGwWinners:[],latestRelevantGw:null,webUserIds:Array.from(et.filter(Ke=>tt.has(Ke)))};return}const _e=mn.get(xe.id)??[],Qe=new Set(wn),gt=_e.filter(Ne=>Qe.has(Ne.gw)),Nt=new Map;wn.forEach(Ne=>{Nt.set(Ne,new Map)}),jn.forEach((Ne,Ke)=>{const[xt,fr]=Ke.split(":"),Er=parseInt(xt,10),wt=parseInt(fr,10);Qe.has(Er)&&Nt.get(Er)?.set(wt,Ne)});const rn=new Map,Ge=new Map;wn.forEach(Ne=>{const Ke=new Map;Xe.forEach(xt=>Ke.set(xt.id,{user_id:xt.id,score:0,unicorns:0})),rn.set(Ne,Ke)});const Tn=new Map;gt.forEach(Ne=>{const Ke=`${Ne.gw}:${Ne.fixture_index}`,xt=Tn.get(Ke)??[];xt.push(Ne),Tn.set(Ke,xt)});const dr=new Set(Xe.map(Ne=>Ne.id));wn.forEach(Ne=>{const Ke=Nt.get(Ne),xt=rn.get(Ne);Ke.forEach((fr,Er)=>{const wt=`${Ne}:${Er}`,Zr=(Tn.get(wt)??[]).filter(sn=>dr.has(sn.user_id)),Xr=[];if(Zr.forEach(sn=>{if(sn.pick===fr){const uo=xt.get(sn.user_id);uo&&(uo.score+=1,Xr.push(sn.user_id))}}),Xr.length===1&&Xe.length>=3){const sn=xt.get(Xr[0]);sn&&(sn.unicorns+=1)}})});const Bt=new Map,Nn=new Map,Es=new Map;Xe.forEach(Ne=>{Bt.set(Ne.id,0),Nn.set(Ne.id,0),Es.set(Ne.id,0)}),wn.forEach(Ne=>{const Ke=Array.from(rn.get(Ne).values());if(Ke.forEach(wt=>{Nn.set(wt.user_id,(Nn.get(wt.user_id)??0)+wt.score),Es.set(wt.user_id,(Es.get(wt.user_id)??0)+wt.unicorns)}),Ke.sort((wt,Zr)=>Zr.score-wt.score||Zr.unicorns-wt.unicorns),Ke.length===0)return;const xt=Ke[0],fr=Ke.filter(wt=>wt.score===xt.score&&wt.unicorns===xt.unicorns),Er=new Set(fr.map(wt=>wt.user_id));Ge.set(Ne,Er),fr.length===1?Bt.set(xt.user_id,(Bt.get(xt.user_id)??0)+3):fr.forEach(wt=>{Bt.set(wt.user_id,(Bt.get(wt.user_id)??0)+1)})});const Qr=[...Xe.map(Ne=>({user_id:Ne.id,name:Ne.name,mltPts:Bt.get(Ne.id)??0,unicorns:Es.get(Ne.id)??0,ocp:Nn.get(Ne.id)??0}))].sort((Ne,Ke)=>Ke.mltPts-Ne.mltPts||Ke.unicorns-Ne.unicorns||Ke.ocp-Ne.ocp||Ne.name.localeCompare(Ke.name)),Ln=Qr.map(Ne=>Ne.user_id),lo=Qr.findIndex(Ne=>Ne.user_id===s.id),vn=lo!==-1?lo+1:null,pi=wn.length?Math.max(...wn):null,La=pi!==null?Ge.get(pi)??new Set:new Set,Ia=Xe.sort((Ne,Ke)=>Ne.name.localeCompare(Ke.name)),Cs=Array.from(et.filter(Ne=>tt.has(Ne)));gn[xe.id]={id:xe.id,members:Ia,userPosition:vn,positionChange:null,submittedMembers:Array.from(et.filter(Ne=>ae.has(Ne))),sortedMemberIds:Ln,latestGwWinners:Array.from(La),latestRelevantGw:pi,webUserIds:Cs}}),f(Gn),C(gn),$(!1);try{const xe={};for(const[Xe,et]of Object.entries(gn))xe[Xe]={...et,submittedMembers:et.submittedMembers?et.submittedMembers instanceof Set?Array.from(et.submittedMembers):et.submittedMembers:void 0,latestGwWinners:et.latestGwWinners?et.latestGwWinners instanceof Set?Array.from(et.latestGwWinners):et.latestGwWinners:void 0,webUserIds:et.webUserIds?et.webUserIds instanceof Set?Array.from(et.webUserIds):et.webUserIds:void 0};Jt(de,{leagueData:xe,leagueSubmissions:Gn},Ft.HOME)}catch{}}catch{$(!1)}})(),()=>{ne=!1}},[s?.id,o,p,S]),x.useEffect(()=>{if(!s?.id||S===0)return;let ne=!0;return(async()=>{try{console.log("[Home]  Refetching data due to app_gw_results change (gwResultsVersion:",S,")");const[de,Q,ye]=await Promise.all([Z.from("app_gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle(),Z.from("app_v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0}),Z.from("app_v_ocp_overall").select("user_id, name, ocp")]);if(!ne)return;const Ee=de.data?.gw??null,De=Q.data??[],Oe=ye.data??[];console.log("[Home]  Refetched data - newLatestGw:",Ee,"previous latestGw:",w,"changed:",Ee!==w),Ee!==null&&Ee!==w&&(console.log("[Home]  Updating latestGw:",w,"->",Ee),_(Ee)),Se(De),te(Oe),k(De.filter(be=>be.user_id===s.id))}catch(de){console.error("[Home]  Error refetching data after results change:",de)}})(),()=>{ne=!1}},[S,s?.id]),x.useEffect(()=>{if(!s?.id)return;console.log("[Home] Setting up subscription to app_gw_results changes");const ne=Z.channel("home-gw-results-changes").on("postgres_changes",{event:"*",schema:"public",table:"app_gw_results"},Q=>{const ye=Q.new,Ee=Q.old;console.log("[Home]  app_gw_results change detected!",{event:Q.eventType,gw:ye?.gw||Ee?.gw,fixture_index:ye?.fixture_index||Ee?.fixture_index});const De=`home:basic:${s.id}`;try{En(De),En(`home:fixtures:${s.id}:${p}`),console.log("[Home]  Cache cleared, incrementing gwResultsVersion")}catch(Oe){console.error("[Home]  Cache clear failed:",Oe)}P(Oe=>{const be=Oe+1;return console.log("[Home]  gwResultsVersion:",Oe,"->",be),be})}).subscribe(Q=>{console.log("[Home] Subscription status:",Q),Q==="SUBSCRIBED"?console.log("[Home]  Successfully subscribed to app_gw_results changes"):Q==="CHANNEL_ERROR"&&console.error("[Home]  Subscription error - realtime may not be enabled for app_gw_results")}),de=async()=>{if(!document.hidden&&s?.id){console.log("[Home]  Page became visible, checking for GW updates...");try{const{data:Q}=await Z.from("app_gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle(),ye=Q?.gw??null;if(ye!==null&&ye!==w){console.log("[Home]  Visibility change detected GW update:",w,"->",ye);try{En(`home:basic:${s.id}`),En(`home:fixtures:${s.id}:${p}`)}catch(Ee){console.error("[Home] Cache clear failed on visibility change:",Ee)}P(Ee=>Ee+1)}}catch(Q){console.error("[Home] Error checking GW on visibility change:",Q)}}};return document.addEventListener("visibilitychange",de),window.addEventListener("focus",de),()=>{console.log("[Home]  Cleaning up subscription and visibility listeners"),Z.removeChannel(ne),document.removeEventListener("visibilitychange",de),window.removeEventListener("focus",de)}},[s?.id,p,w]),x.useEffect(()=>{if(!s?.id||!p){R([]),K(!1),B({}),H.current=!1;return}if(H.current&&v.length>0){(async()=>{try{const[Q,ye]=await Promise.all([Z.from("app_fixtures").select("id, gw, fixture_index, api_match_id, home_code, away_code, home_team, away_team, home_name, away_name, kickoff_time").eq("gw",p).order("fixture_index",{ascending:!0}),Z.from("app_picks").select("fixture_index, pick").eq("gw",p).eq("user_id",s.id)]),Ee=Q.error?[]:Q.data??[],De={};ye.error||(ye.data??[]).forEach(be=>{De[be.fixture_index]=be.pick}),R(Ee),B(De);const Oe=`home:fixtures:${s.id}:${p}`;try{const be=[];O.forEach(kt=>{be.push(kt)}),Jt(Oe,{fixtures:Ee,userPicks:De,liveScores:be.length>0?be:void 0},Ft.HOME)}catch{}}catch{}})();return}let ne=!0,de=!1;return(async()=>{try{const Q=`home:fixtures:${s.id}:${p}`;try{const be=nn(Q);be&&be.fixtures&&Array.isArray(be.fixtures)&&be.fixtures.length>0&&(R(be.fixtures),B(be.userPicks||{}),K(!1),de=!0,H.current=!0),se.current=!0}catch{}de||K(!0);const[ye,Ee]=await Promise.all([Z.from("app_fixtures").select("id, gw, fixture_index, api_match_id, home_code, away_code, home_team, away_team, home_name, away_name, kickoff_time").eq("gw",p).order("fixture_index",{ascending:!0}),Z.from("app_picks").select("fixture_index, pick").eq("gw",p).eq("user_id",s.id)]);if(!ne)return;const De=ye.error?[]:ye.data??[],Oe={};Ee.error||(Ee.data??[]).forEach(be=>{Oe[be.fixture_index]=be.pick}),R(De),B(Oe),K(!1),H.current=!1,se.current=!0;try{const be=[];O.forEach(kt=>{be.push(kt)}),Jt(Q,{fixtures:De,userPicks:Oe,liveScores:be.length>0?be:void 0},Ft.HOME)}catch{}}catch{ne&&(R([]),K(!1),B({}),se.current=!0)}})(),()=>{ne=!1}},[s?.id,p]);const ee=x.useMemo(()=>{if(!v.length)return null;const ne=Object.keys(D).length>0;let de=0,Q=0,ye=0,Ee=!0,De=!1,Oe=!1;const be=new Date;for(const $e of v){const ze=J[$e.fixture_index],ae=D[$e.fixture_index],fe=ze?.status,Ce=fe==="IN_PLAY"||fe==="PAUSED"||fe==="FINISHED";if($e.kickoff_time&&!ze&&new Date($e.kickoff_time)>be&&(Oe=!0),Ce){if(De=!0,(fe==="IN_PLAY"||fe==="PAUSED")&&Q++,fe==="FINISHED"&&ye++,fe!=="FINISHED"&&(Ee=!1),ae&&ze){let tt=!1;ze.result?tt=ze.result===ae:tt=ae==="H"&&ze.homeScore>ze.awayScore||ae==="A"&&ze.awayScore>ze.homeScore||ae==="D"&&ze.homeScore===ze.awayScore,tt&&de++}}else Ee=!1}if(!De&&!ne&&!Oe)return null;const kt=({score:$e,label:ze,bgColor:ae,icon:fe})=>h.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-white ${ae}`,children:[fe,h.jsx("span",{className:"text-xs sm:text-sm font-medium opacity-90",children:ze}),h.jsxs("span",{className:"flex items-baseline gap-0.5",children:[h.jsx("span",{className:"text-lg sm:text-xl font-extrabold",children:$e}),h.jsx("span",{className:"text-sm sm:text-base font-medium opacity-90",children:"/"}),h.jsx("span",{className:"text-base sm:text-lg font-semibold opacity-80",children:v.length})]})]}),me=()=>h.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-full bg-amber-500 text-white shadow-md shadow-amber-500/30 self-start",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Starting soon"})]});return!De&&Oe?h.jsx(me,{}):!De&&ne?h.jsx(kt,{score:"--",label:"Score",bgColor:"bg-amber-500 shadow-lg shadow-amber-500/30"}):Q===0&&ye>0&&!Ee?h.jsx("div",{className:"flex flex-col items-center gap-2",children:h.jsx(kt,{score:de,label:"Score",bgColor:"bg-slate-600",icon:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}):h.jsx("div",{className:"flex flex-col items-center gap-2",children:h.jsx(kt,{score:de,label:Ee?"Score":"Live",bgColor:Ee?"bg-slate-600":"bg-red-600",icon:Ee?h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}):Q>0?h.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}):void 0})})},[l,v,J,D]),X=x.useMemo(()=>{if(!v.length)return!1;for(const ne of v){const de=J[ne.fixture_index];if(de&&(de.status==="IN_PLAY"||de.status==="PAUSED"))return!0}return!1},[v,J]),[ce,qe]=x.useState(new Set);x.useEffect(()=>{if(!s?.id||!w){qe(new Set);return}let ne=!0;return(async()=>{const{data:de}=await Z.from("app_gw_submissions").select("gw").eq("user_id",s.id).order("gw",{ascending:!1});ne&&de&&qe(new Set(de.map(Q=>Q.gw)))})(),()=>{ne=!1}},[s?.id,w]);const Ze=x.useMemo(()=>{if(!s?.id||!w)return null;const ne=N.filter(Oe=>Oe.user_id===s.id).sort((Oe,be)=>be.gw-Oe.gw);let de=0,Q=w;const ye=new Set(ne.map(Oe=>Oe.gw));for(;Q>=1;){const Oe=ye.has(Q),be=ce.has(Q);if(Oe||be)de++,Q--;else break}const Ee=[],De=Math.max(1,w-9);for(let Oe=w;Oe>=De;Oe--){const be=ne.find(kt=>kt.gw===Oe);Ee.push({gw:Oe,score:be?be.points:null})}return{streak:de,last10GwScores:Ee.reverse()}},[s?.id,N,w,ce]),st=o,at=x.useMemo(()=>F?v.filter(ne=>{const de=J[ne.fixture_index];return de&&(de.status==="IN_PLAY"||de.status==="PAUSED")}):v,[v,J,F]),jt=x.useMemo(()=>at.map(ne=>{const de={id:ne.id,gw:ne.gw,fixture_index:ne.fixture_index,home_code:ne.home_code,away_code:ne.away_code,home_team:ne.home_team,away_team:ne.away_team,home_name:ne.home_name,away_name:ne.away_name,kickoff_time:ne.kickoff_time,api_match_id:ne.api_match_id??null},Q=J[ne.fixture_index],ye=Q?{status:Q.status,minute:Q.minute??null,homeScore:Q.homeScore,awayScore:Q.awayScore,home_team:Q.home_team??null,away_team:Q.away_team??null,goals:Q.goals??void 0,red_cards:Q.red_cards??void 0}:null;return{fixture:de,liveScore:ye,pick:D[ne.fixture_index]}}),[at,J,D]),_t=!A&&!M&&!T;return h.jsxs("div",{className:"max-w-6xl mx-auto px-4 pt-2 pb-4 min-h-screen relative",children:[h.jsx("div",{ref:b,className:"relative mb-4",children:h.jsx(Ly,{})}),_t?h.jsxs(h.Fragment,{children:[h.jsx(Ay,{lastGwRank:re,fiveGwRank:Me,tenGwRank:Ve,seasonRank:Ye,userStreakData:Ze,latestGw:w}),h.jsx(Gy,{leagues:st,leagueData:we,leagueSubmissions:c,unreadByLeague:a,leagueDataLoading:T,currentGw:p}),h.jsx(Yy,{isInApiTestLeague:l,fixtures:v,fixtureCards:jt,hasLiveGames:X,showLiveOnly:F,onToggleLiveOnly:q,scoreComponent:ee,fixturesLoading:z,hasCheckedCache:se.current,currentGw:p}),h.jsx("div",{className:"h-20"})]}):h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1C8376]"})})]})}const wc=Cn.memo(function({title:n,as:r="h1",className:o=""}){const l=`text-xl font-medium text-slate-900 uppercase tracking-wide ${o}`.trim();return h.jsx(r,{className:l,style:{fontFamily:'"Gramatika", sans-serif',fontWeight:700},children:n})});function Dh(s){return s.result==="H"||s.result==="D"||s.result==="A"?s.result:null}function u1(){const{user:s}=ur(),{leagues:n,unreadByLeague:r,loading:o,invalidateAndRefresh:a}=Wm({pageName:"tables"}),c=(()=>{let B=s?.id;if(!B&&typeof window<"u")try{const F=localStorage.getItem("totl:user");F&&(B=JSON.parse(F).id)}catch{}if(typeof window>"u"||!B)return{memberCounts:{},leagueDataLoading:!0,currentGw:null,leagueSubmissions:{},leagueData:{}};try{const F=`tables:${B}`,q=nn(F);if(q){const H=q.memberCounts||{};q.rows&&Array.isArray(q.rows)&&q.rows.forEach(ke=>{ke.memberCount!==void 0&&(H[ke.id]=ke.memberCount)});const se={};if(q.leagueData)for(const[ke,ve]of Object.entries(q.leagueData))se[ke]={...ve,submittedMembers:ve.submittedMembers?Array.isArray(ve.submittedMembers)?new Set(ve.submittedMembers):new Set:void 0,latestGwWinners:ve.latestGwWinners?Array.isArray(ve.latestGwWinners)?new Set(ve.latestGwWinners):new Set:void 0,sortedMemberIds:void 0};return{memberCounts:H,leagueDataLoading:!1,currentGw:q.currentGw,leagueSubmissions:q.leagueSubmissions||{},leagueData:se}}}catch{}return{memberCounts:{},leagueDataLoading:!0,currentGw:null,leagueSubmissions:{},leagueData:{}}})(),[f,p]=x.useState(c.memberCounts),[g,w]=x.useState(c.leagueDataLoading),[_,b]=x.useState(!1),[S,P]=x.useState(""),[N,k]=x.useState(""),[A,j]=x.useState(""),[T,$]=x.useState(c.leagueSubmissions),[M,Y]=x.useState(c.leagueData),[re,Ie]=x.useState(c.currentGw),[Me,He]=x.useState([]),[Ve,rt]=x.useState([]),[Ye,ut]=x.useState(new Map),[ue,Se]=x.useState(new Map),[Pe,te]=x.useState(new Map),[we,C]=x.useState(new Set),v=x.useMemo(()=>n.map(F=>({id:F.id,name:F.name,code:F.code,avatar:F.avatar??Ih(F.id),created_at:F.created_at,start_gw:F.start_gw,memberCount:f[F.id]??0})).sort((F,q)=>!F.created_at||!q.created_at?0:new Date(F.created_at).getTime()-new Date(q.created_at).getTime()),[n,f]),R=o;x.useEffect(()=>{if(!s?.id){w(!1);return}if(o)return;const B=n.map(H=>H.id);if(!B.length){w(!1);return}let F=!0;const q=`tables:${s.id}`;return(async()=>{try{const[H,se]=await Promise.all([Z.from("app_fixtures").select("gw").order("gw",{ascending:!1}).limit(1),Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle()]);if(!F)return;const ke=H.data??[],ve=ke.length?Math.max(...ke.map(ae=>ae.gw)):1,pe=se.data?.current_gw??ve;Ie(ve);const[O,V,ge,J]=await Promise.all([Z.from("league_members").select("league_id,user_id").in("league_id",B).limit(1e4),Z.from("app_gw_results").select("gw,fixture_index,result"),Z.from("app_fixtures").select("gw,kickoff_time").order("gw",{ascending:!0}).order("kickoff_time",{ascending:!0}),Z.from("league_members").select("league_id,user_id, users(id, name)").in("league_id",B).limit(1e4)]);if(O.error)throw O.error;if(!F)return;const ee=new Map;(O.data??[]).forEach(ae=>{const fe=ee.get(ae.league_id)??[];fe.push(ae.user_id),ee.set(ae.league_id,fe)});const X={};B.forEach(ae=>{X[ae]=(ee.get(ae)??[]).length}),p(X);const ce=Array.from(new Set(Array.from(ee.values()).flat())),[qe]=await Promise.all([ce.length>0?Z.from("app_gw_submissions").select("user_id").eq("gw",ve).in("user_id",ce).limit(1e4):Promise.resolve({data:[],error:null})]),Ze=new Set((qe.data??[]).map(ae=>ae.user_id));C(Ze);const st={};for(const ae of n){const fe=ee.get(ae.id)??[],Ce=fe.length,tt=fe.reduce((it,ct)=>it+(Ze.has(ct)?1:0),0);st[ae.id]={allSubmitted:tt===Ce&&Ce>0,submittedCount:tt,totalCount:Ce}}if($(st),!F)return;const at=V.data??[];He(at);const jt=ge.data??[];rt(jt);const _t=new Map;for(const ae of at){const fe=Dh(ae);fe&&_t.set(`${ae.gw}:${ae.fixture_index}`,fe)}const ne=[...new Set(Array.from(_t.keys()).map(ae=>parseInt(ae.split(":")[0],10)))].sort((ae,fe)=>ae-fe),de=new Map;jt.forEach(ae=>{const fe=de.get(ae.gw)??[];fe.push(ae.kickoff_time),de.set(ae.gw,fe)});const Q=new Map;(J.data??[]).forEach(ae=>{if(!ae.users?.name)return;const fe=Q.get(ae.league_id)??[];fe.push({id:ae.user_id,name:ae.users.name}),Q.set(ae.league_id,fe)}),Se(Q);const ye=new Map;n.forEach(ae=>{ye.set(ae.id,ae)});const Ee=new Map,De=n.map(async ae=>{const fe=await $m(ae,pe);return{leagueId:ae.id,leagueStartGw:fe}});(await Promise.all(De)).forEach(({leagueId:ae,leagueStartGw:fe})=>{Ee.set(ae,fe)});const be=n.map(async ae=>{const fe=Q.get(ae.id)??[];if(fe.length===0)return{data:[],error:null};const Ce=Ee.get(ae.id)??pe,tt=Ce===0?ne:ne.filter(dt=>dt>=Ce);if(tt.length===0)return{data:[],error:null};const it=await Z.from("app_picks").select("user_id,gw,fixture_index,pick").in("user_id",fe.map(dt=>dt.id)).in("gw",tt);if(it.error)return console.error(`[Tables] Error fetching picks for ${ae.name}:`,it.error),{data:[],error:it.error};const ct=it.data??[];return ct.length===1e3&&console.warn(`[Tables] WARNING: ${ae.name} may have hit Supabase 1000 row limit! Got exactly 1000 picks.`,{memberIds:fe.length,relevantGws:tt.length,estimatedPicks:fe.length*tt.length*10}),{data:ct,error:null}}),kt=await Promise.all(be);if(!F)return;for(let ae=0;ae<n.length;ae++){const fe=n[ae],Ce=kt[ae];Ce.error&&console.error(`[Tables] Supabase error fetching picks for ${fe.name}:`,Ce.error);const tt=(Ce.data??[]).length,it=Q.get(fe.id)??[],ct=Ee.get(fe.id)??pe,dt=ct===0?ne:ne.filter(hn=>hn>=ct);fe.name?.toLowerCase().includes("forget")&&console.log(`[Tables Initial] ${fe.name} picks query result:`,{picksCount:tt,memberIdsCount:it.length,relevantGws:dt,error:Ce.error,dataLength:Ce.data?.length??0,limit:1e4})}const me=new Map;for(let ae=0;ae<n.length;ae++)me.set(n[ae].id,kt[ae].data??[]);ut(me),te(Ee);const $e=new Set((qe.data??[]).map(ae=>ae.user_id)),ze={};for(let ae=0;ae<n.length;ae++){const fe=n[ae],Ce=Q.get(fe.id)??[];if(Ce.length===0)continue;const tt=Ee.get(fe.id)??pe,it=tt===0?ne:ne.filter(_e=>_e>=tt),ct=kt[ae].data??[];if(it.length===0){fe.name?.toLowerCase().includes("forget")&&console.log(`[Tables Initial] ${fe.name} SKIPPING - relevantGws: ${it.length}, picks: ${ct.length}`);continue}const dt=new Set(it);if(fe.name?.toLowerCase().includes("forget")){const _e=new Map;ct.forEach(Qe=>{_e.set(Qe.gw,(_e.get(Qe.gw)??0)+1)}),console.log(`[Tables Initial] ${fe.name} picks BEFORE filter (from query):`,JSON.stringify(Object.fromEntries(_e)))}const hn=ct.filter(_e=>dt.has(_e.gw));if(fe.name?.toLowerCase().includes("forget")){const _e=new Map;hn.forEach(Qe=>{_e.set(Qe.gw,(_e.get(Qe.gw)??0)+1)}),console.log(`[Tables Initial] ${fe.name} leagueStartGw: ${tt}, relevantGws: [${it.join(",")}]`),console.log(`[Tables Initial] ${fe.name} filtered picks by GW:`,JSON.stringify(Object.fromEntries(_e))),console.log(`[Tables Initial] ${fe.name} total picks before filter: ${ct.length}, after filter: ${hn.length}`)}const kr=new Map;hn.forEach(_e=>{kr.has(_e.user_id)||kr.set(_e.user_id,new Map);const Qe=kr.get(_e.user_id);Qe.has(_e.gw)||Qe.set(_e.gw,new Map),Qe.get(_e.gw).set(_e.fixture_index,_e.pick)});const jn=new Map,tr=new Map;it.forEach(_e=>{const Qe=new Map;Ce.forEach(gt=>Qe.set(gt.id,{user_id:gt.id,score:0,unicorns:0})),jn.set(_e,Qe)});const Fn=new Map;hn.forEach(_e=>{if(!dt.has(_e.gw)){fe.name?.toLowerCase().includes("forget")&&console.error(`[Tables Initial] ERROR: ${fe.name} pick from non-relevant GW ${_e.gw}!`);return}const Qe=`${_e.gw}:${_e.fixture_index}`,gt=Fn.get(Qe)??[];gt.push(_e),Fn.set(Qe,gt)});const Yr=new Set(Ce.map(_e=>_e.id)),mn=new Map;if(it.forEach(_e=>{mn.set(_e,new Map)}),_t.forEach((_e,Qe)=>{const[gt,Nt]=Qe.split(":"),rn=parseInt(gt,10),Ge=parseInt(Nt,10);dt.has(rn)&&mn.get(rn)?.set(Ge,_e)}),fe.name?.toLowerCase().includes("forget")){const _e=new Map;mn.forEach((gt,Nt)=>{_e.set(Nt,gt.size)});const Qe=new Set;_t.forEach((gt,Nt)=>{const rn=parseInt(Nt.split(":")[0],10);Qe.add(rn)}),console.log(`[Tables Initial] ${fe.name} outcomes by GW:`,JSON.stringify(Object.fromEntries(_e))),console.log(`[Tables Initial] ${fe.name} ALL outcome GWs in outcomeByGwIdx:`,Array.from(Qe).sort((gt,Nt)=>gt-Nt))}it.forEach(_e=>{const Qe=mn.get(_e),gt=jn.get(_e);Qe.forEach((Nt,rn)=>{const Ge=`${_e}:${rn}`,Tn=(Fn.get(Ge)??[]).filter(Bt=>Yr.has(Bt.user_id)),dr=[];if(Tn.forEach(Bt=>{if(Bt.pick===Nt){const Nn=gt.get(Bt.user_id);Nn&&(Nn.score+=1,dr.push(Bt.user_id))}}),dr.length===1&&Ce.length>=3){const Bt=gt.get(dr[0]);Bt&&(Bt.unicorns+=1)}})});const Rn=new Map,pn=new Map,Bn=new Map;Ce.forEach(_e=>{Rn.set(_e.id,0),pn.set(_e.id,0),Bn.set(_e.id,0)}),it.forEach(_e=>{if(!dt.has(_e)){fe.name?.toLowerCase().includes("forget")&&console.error(`[Tables Initial] ERROR: ${fe.name} processing non-relevant GW ${_e}!`);return}const Qe=Array.from(jn.get(_e).values());if(Qe.forEach(Ge=>{pn.set(Ge.user_id,(pn.get(Ge.user_id)??0)+Ge.score),Bn.set(Ge.user_id,(Bn.get(Ge.user_id)??0)+Ge.unicorns)}),Qe.sort((Ge,Tn)=>Tn.score-Ge.score||Tn.unicorns-Ge.unicorns),Qe.length===0)return;const gt=Qe[0],Nt=Qe.filter(Ge=>Ge.score===gt.score&&Ge.unicorns===gt.unicorns),rn=new Set(Nt.map(Ge=>Ge.user_id));tr.set(_e,rn),Nt.length===1?Rn.set(gt.user_id,(Rn.get(gt.user_id)??0)+3):Nt.forEach(Ge=>{Rn.set(Ge.user_id,(Rn.get(Ge.user_id)??0)+1)}),fe.name?.toLowerCase().includes("forget")&&console.log(`[Tables Initial] ${fe.name} GW ${_e} winner: ${Nt.map(Ge=>Ce.find(Tn=>Tn.id===Ge.user_id)?.name||Ge.user_id).join(",")}, points: ${Nt.length===1?3:1} each`)});const gn=[...Ce.map(_e=>({user_id:_e.id,name:_e.name,mltPts:Rn.get(_e.id)??0,unicorns:Bn.get(_e.id)??0,ocp:pn.get(_e.id)??0}))].sort((_e,Qe)=>Qe.mltPts-_e.mltPts||Qe.unicorns-_e.unicorns||Qe.ocp-_e.ocp||_e.name.localeCompare(Qe.name)),Gn=gn.map(_e=>_e.user_id);fe.name?.toLowerCase().includes("forget")&&(console.log(`[Tables] ${fe.name} sortedMltRows:`,JSON.stringify(gn.map((_e,Qe)=>({position:Qe+1,name:_e.name,userId:_e.user_id.slice(0,8),mltPts:_e.mltPts,unicorns:_e.unicorns,ocp:_e.ocp})),null,2)),console.log(`[Tables] ${fe.name} sortedMemberIds:`,Gn),console.log(`[Tables] ${fe.name} relevantGws:`,it),console.log(`[Tables] ${fe.name} picks count:`,ct.length));const xe=gn.findIndex(_e=>_e.user_id===s.id),Xe=xe!==-1?xe+1:null,et=Xe&&Xe>1?Xe-1:null,cr=et===null?null:Xe<et?"up":Xe>et?"down":"same",nr=it.length>0?Math.max(...it):pe,ks=nr!==null?tr.get(nr)??new Set:new Set,wn=Array.from(ks);ze[fe.id]={id:fe.id,members:Ce,userPosition:Xe||null,positionChange:cr,submittedMembers:$e,sortedMemberIds:Gn,latestGwWinners:wn,latestRelevantGw:nr},fe.name?.toLowerCase().includes("forget")&&console.log(`[Tables Initial] ${fe.name} STORING leagueData:`,{sortedMemberIds:Gn,sortedMemberNames:Gn.map(_e=>Ce.find(Qe=>Qe.id===_e)?.name||_e),membersCount:Ce.length,sortedMemberIdsCount:Gn.length})}if(F){Y(ze),w(!1);try{const ae={};for(const[fe,Ce]of Object.entries(ze))ae[fe]={...Ce,submittedMembers:Ce.submittedMembers?Ce.submittedMembers instanceof Set?Array.from(Ce.submittedMembers):Ce.submittedMembers:void 0,latestGwWinners:Ce.latestGwWinners?Ce.latestGwWinners instanceof Set?Array.from(Ce.latestGwWinners):Ce.latestGwWinners:void 0};Jt(q,{rows:v,currentGw:ve,leagueSubmissions:st,leagueData:ae,memberCounts:X},Ft.TABLES)}catch{}}}catch(H){F&&(j(H?.message??"Failed to load league data."),w(!1))}})(),()=>{F=!1}},[s?.id,n,o]);const z=x.useMemo(()=>{const B=new Map;for(const F of Me){const q=Dh(F);q&&B.set(`${F.gw}:${F.fixture_index}`,q)}return B},[Me]);x.useEffect(()=>{if(!s?.id||n.length===0||ue.size===0){console.log(`[Tables Reactive] SKIPPING - user: ${!!s?.id}, leagues: ${n.length}, membersByLeagueId: ${ue.size}`);return}const B=[...new Set(Array.from(z.keys()).map(H=>parseInt(H.split(":")[0],10)))].sort((H,se)=>H-se);if(B.length===0){console.log(`[Tables Reactive] SKIPPING - no results loaded yet (outcomeByGwIdx size: ${z.size})`);return}console.log(`[Tables Reactive] RUNNING for ${n.length} leagues, ${B.length} GWs with results`);const F=new Map;Ve.forEach(H=>{const se=F.get(H.gw)??[];se.push(H.kickoff_time),F.set(H.gw,se)});const q={};for(const H of n){const se=ue.get(H.id)??[];if(se.length===0)continue;const ke=Pe.get(H.id)??re??1,ve=B.filter(me=>me>=ke),pe=Ye.get(H.id)??[];if(ve.length===0){H.name?.toLowerCase().includes("forget")&&console.log(`[Tables Reactive] ${H.name} SKIPPING - relevantGws: ${ve.length}, leagueStartGw: ${ke}, updatedGwsWithResults: [${B.join(",")}]`);continue}if(pe.length===0){H.name?.toLowerCase().includes("forget")&&console.log(`[Tables Reactive] ${H.name} SKIPPING - no picks yet (relevantGws: ${ve.length})`);continue}const O=new Set(ve),V=pe.filter(me=>O.has(me.gw));if(H.name?.toLowerCase().includes("forget")){const me=new Map;V.forEach($e=>{me.set($e.gw,(me.get($e.gw)??0)+1)}),console.log(`[Tables Reactive] ${H.name} filtered picks by GW:`,Object.fromEntries(me)),console.log(`[Tables Reactive] ${H.name} total picks before filter: ${pe.length}, after filter: ${V.length}`)}const ge=new Map;V.forEach(me=>{ge.has(me.user_id)||ge.set(me.user_id,new Map);const $e=ge.get(me.user_id);$e.has(me.gw)||$e.set(me.gw,new Map),$e.get(me.gw).set(me.fixture_index,me.pick)});const J=new Map,ee=new Map;ve.forEach(me=>{const $e=new Map;se.forEach(ze=>$e.set(ze.id,{user_id:ze.id,score:0,unicorns:0})),J.set(me,$e)});const X=new Map;V.forEach(me=>{const $e=`${me.gw}:${me.fixture_index}`,ze=X.get($e)??[];ze.push(me),X.set($e,ze)});const ce=new Set(se.map(me=>me.id)),qe=new Map;ve.forEach(me=>{qe.set(me,new Map)}),z.forEach((me,$e)=>{const[ze,ae]=$e.split(":"),fe=parseInt(ze,10),Ce=parseInt(ae,10);O.has(fe)&&qe.get(fe)?.set(Ce,me)}),ve.forEach(me=>{const $e=qe.get(me),ze=J.get(me);$e.forEach((ae,fe)=>{const Ce=`${me}:${fe}`,tt=(X.get(Ce)??[]).filter(ct=>ce.has(ct.user_id)),it=[];if(tt.forEach(ct=>{if(ct.pick===ae){const dt=ze.get(ct.user_id);dt&&(dt.score+=1,it.push(ct.user_id))}}),it.length===1&&se.length>=3){const ct=ze.get(it[0]);ct&&(ct.unicorns+=1)}})});const Ze=new Map,st=new Map,at=new Map;se.forEach(me=>{Ze.set(me.id,0),st.set(me.id,0),at.set(me.id,0)}),ve.forEach(me=>{const $e=Array.from(J.get(me).values());if($e.forEach(Ce=>{st.set(Ce.user_id,(st.get(Ce.user_id)??0)+Ce.score),at.set(Ce.user_id,(at.get(Ce.user_id)??0)+Ce.unicorns)}),$e.sort((Ce,tt)=>tt.score-Ce.score||tt.unicorns-Ce.unicorns),$e.length===0)return;const ze=$e[0],ae=$e.filter(Ce=>Ce.score===ze.score&&Ce.unicorns===ze.unicorns),fe=new Set(ae.map(Ce=>Ce.user_id));ee.set(me,fe),ae.length===1?Ze.set(ze.user_id,(Ze.get(ze.user_id)??0)+3):ae.forEach(Ce=>{Ze.set(Ce.user_id,(Ze.get(Ce.user_id)??0)+1)})});const _t=[...se.map(me=>({user_id:me.id,name:me.name,mltPts:Ze.get(me.id)??0,unicorns:at.get(me.id)??0,ocp:st.get(me.id)??0}))].sort((me,$e)=>$e.mltPts-me.mltPts||$e.unicorns-me.unicorns||$e.ocp-me.ocp||me.name.localeCompare($e.name)),ne=_t.map(me=>me.user_id);H.name?.toLowerCase().includes("forget")&&(console.log(`[Tables Reactive] ${H.name} sortedMltRows:`,JSON.stringify(_t.map((me,$e)=>({position:$e+1,name:me.name,userId:me.user_id.slice(0,8),mltPts:me.mltPts,unicorns:me.unicorns,ocp:me.ocp})),null,2)),console.log(`[Tables Reactive] ${H.name} sortedMemberIds:`,ne),console.log(`[Tables Reactive] ${H.name} relevantGws:`,ve),console.log(`[Tables Reactive] ${H.name} picks count:`,pe.length));const de=_t.findIndex(me=>me.user_id===s.id),Q=de!==-1?de+1:null,ye=Q!==null&&Q>1?Q-1:null,Ee=ye===null||Q===null?null:Q<ye?"up":Q>ye?"down":"same",De=ve.length>0?Math.max(...ve):re,Oe=De!==null?ee.get(De)??new Set:new Set,be=Array.from(Oe),kt=new Set;se.forEach(me=>{we.has(me.id)&&kt.add(me.id)}),q[H.id]={id:H.id,members:se,userPosition:Q||null,positionChange:Ee,submittedMembers:kt,sortedMemberIds:ne,latestGwWinners:be,latestRelevantGw:De},H.name?.toLowerCase().includes("forget")&&console.log(`[Tables Reactive] ${H.name} STORING leagueData:`,{sortedMemberIds:ne,sortedMemberNames:ne.map(me=>se.find($e=>$e.id===me)?.name||me),membersCount:se.length,sortedMemberIdsCount:ne.length})}Y(q)},[s?.id,n,Ye,ue,Pe,Ve,z,re,we]);const K=x.useCallback(async()=>{if(!(!N.trim()||!s?.id)){b(!0),j("");try{const B=N.trim(),F=await f1(),{data:q,error:H}=await Z.from("leagues").insert({name:B,code:F}).select("id,code").single();if(H)throw H;const se=Ih(q.id);await Z.from("leagues").update({avatar:se}).eq("id",q.id),await Z.from("league_members").insert({league_id:q.id,user_id:s.id}),k(""),s?.id&&(tc(s.id),a())}catch(B){j(B?.message??"Failed to create league.")}finally{b(!1)}}},[N,s?.id,a]),D=x.useCallback(async()=>{const B=S.trim().toUpperCase();if(!(!B||!s?.id)){j("");try{const{data:F,error:q}=await Z.from("leagues").select("id").eq("code",B).maybeSingle();if(q)throw q;if(!F){j("League code not found.");return}const{data:H,error:se}=await Z.from("league_members").select("user_id").eq("league_id",F.id);if(se)throw se;if(H&&H.length>=8){j("League is full (max 8 members).");return}await Z.from("league_members").upsert({league_id:F.id,user_id:s.id},{onConflict:"league_id,user_id"}),P(""),s?.id&&(tc(s.id),a())}catch(F){j(F?.message??"Failed to join league.")}}},[S,s?.id,a]);return h.jsx("div",{className:"min-h-screen bg-slate-50",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 pb-16",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(wc,{title:"Mini Leagues",as:"h2"}),v.length>4&&h.jsxs("button",{onClick:()=>{const B=document.getElementById("create-join-section");B&&B.scrollIntoView({behavior:"smooth",block:"start"})},className:"text-[#1C8376] font-semibold text-sm hover:text-[#1C8376] no-underline flex items-center gap-1",children:["Create League",h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),h.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600 w-full",children:"Create or join a private league and battle it out with your friends."}),A&&h.jsx("div",{className:"mt-4 rounded border border-rose-200 bg-rose-50 text-rose-700 px-3 py-2 text-sm",children:A}),R||g?h.jsx("div",{className:"mt-6 flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1C8376]"})}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"mt-6",children:v.length===0?h.jsx("div",{className:"px-4 py-4 text-sm",children:"No leagues yet."}):h.jsx("div",{className:"space-y-3",children:v.map(B=>{const F=M[B.id];return B.name?.toLowerCase().includes("forget")&&console.log(`[Tables Render] ${B.name} passing to MiniLeagueCard:`,{sortedMemberIds:F?.sortedMemberIds,members:F?.members?.map(q=>({id:q.id,name:q.name})),membersLength:F?.members?.length,sortedMemberIdsLength:F?.sortedMemberIds?.length}),h.jsx(Im,{row:B,data:F,unread:r?.[B.id]??0,submissions:T[B.id],leagueDataLoading:!1,currentGw:re},B.id)})})}),h.jsx("div",{id:"create-join-section",className:"mt-10 mb-3 text-xl font-extrabold text-slate-900",children:"Create or Join"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsx(c1,{leagueName:N,setLeagueName:k,creating:_,onCreate:K}),h.jsx(d1,{joinCode:S,setJoinCode:P,onJoin:D})]})]})]})})}function c1({leagueName:s,setLeagueName:n,creating:r,onCreate:o}){return h.jsxs("div",{className:"border rounded-2xl p-4 bg-white",children:[h.jsx("div",{className:"text-sm font-medium mb-2",children:"Create a league"}),h.jsx("input",{className:"border rounded px-3 py-2 w-full bg-white",placeholder:"League name",value:s,onChange:a=>n(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!r&&s.trim()&&o()}}),h.jsx("button",{className:"mt-3 px-3 py-2 rounded bg-slate-900 text-white disabled:opacity-50",onClick:o,disabled:r||!s.trim(),children:r?"Creating":"Create"})]})}function d1({joinCode:s,setJoinCode:n,onJoin:r}){return h.jsxs("div",{className:"border rounded-2xl p-4 bg-white",children:[h.jsx("div",{className:"text-sm font-medium mb-2",children:"Join with code"}),h.jsx("input",{className:"border rounded px-3 py-2 w-full uppercase tracking-widest bg-white",placeholder:"ABCDE",value:s,onChange:o=>n(o.target.value),onKeyDown:o=>{o.key==="Enter"&&s.trim()&&r()}}),h.jsx("button",{className:"mt-3 px-3 py-2 rounded border",onClick:r,children:"Join"})]})}async function f1(){const s="ABCDEFGHJKLMPQRSTVWXYZ23456789";for(let n=0;n<6;n++){let r="";for(let a=0;a<5;a++)r+=s[Math.floor(Math.random()*s.length)];const{data:o}=await Z.from("leagues").select("id").eq("code",r).maybeSingle();if(!o)return r}return Math.random().toString(36).slice(2,7).toUpperCase()}function h1(){const{user:s}=ur(),[n,r]=X0(),o=x.useRef(null),a=x.useRef(null),l=n.get("tab"),c=l==="form5"||l==="form10"||l==="lastgw"||l==="overall"?l:"lastgw",p=(()=>{try{const V=nn("global:leaderboard");if(V&&V.gwPoints&&Array.isArray(V.gwPoints)&&V.gwPoints.length>0)return{loading:!1,latestGw:V.latestGw,gwPoints:V.gwPoints,overall:V.overall||[],prevOcp:V.prevOcp||{}}}catch{}return{loading:!0,latestGw:null,gwPoints:[],overall:[],prevOcp:{}}})(),[g,w]=x.useState(p.loading),[_,b]=x.useState(""),[S,P]=x.useState(p.latestGw),[N,k]=x.useState(p.overall),[A,j]=x.useState(p.gwPoints),[T,$]=x.useState(p.prevOcp),[M,Y]=x.useState(c),[re,Ie]=x.useState(0),[Me,He]=x.useState(!1),[Ve,rt]=x.useState(new Set),[Ye,ut]=x.useState(null);x.useEffect(()=>{let O=!0;return(async()=>{const{data:V}=await Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle();O&&V&&ut(V?.current_gw??null)})(),()=>{O=!1}},[]),x.useEffect(()=>{if(!s?.id){rt(new Set);return}let O=!0;return(async()=>{try{const{data:V,error:ge}=await Z.from("league_members").select("league_id").eq("user_id",s.id);if(ge||!V||V.length===0){O&&rt(new Set);return}const J=V.map(qe=>qe.league_id),{data:ee,error:X}=await Z.from("league_members").select("user_id").in("league_id",J);if(X||!ee){O&&rt(new Set);return}const ce=new Set(ee.map(qe=>qe.user_id));O&&rt(ce)}catch(V){console.error("[Global] Error fetching mini league friends:",V),O&&rt(new Set)}})(),()=>{O=!1}},[s?.id]);const ue=Ye&&S&&Ye>S?Ye:null,{liveScores:Se}=Dm(ue||void 0,void 0),Pe=x.useMemo(()=>{if(!ue||!Ye||!S||!(Ye>S)||Se.size===0)return!1;for(const V of Se.values())if(V.gw===ue)return!0;return!1},[ue,Ye,S,Se]),[te,we]=x.useState([]);x.useEffect(()=>{if(!ue||!Pe||Se.size===0){we([]);return}let O=!0;return(async()=>{const V=new Map;if(Se.forEach(ce=>{if(ce.gw===ue&&ce.status==="FINISHED"){const qe=ce.fixture_index;if(ce.home_score!==null&&ce.away_score!==null){let Ze;ce.home_score>ce.away_score?Ze="H":ce.home_score<ce.away_score?Ze="A":Ze="D",V.set(qe,Ze)}}}),V.size===0){O&&we([]);return}const{data:ge}=await Z.from("app_picks").select("user_id, fixture_index, pick").eq("gw",ue);if(!O||!ge)return;const J=new Map;new Set(ge.map(ce=>ce.user_id)).forEach(ce=>{J.set(ce,0)}),ge.forEach(ce=>{const qe=V.get(ce.fixture_index);if(qe&&ce.pick===qe){const Ze=J.get(ce.user_id)||0;J.set(ce.user_id,Ze+1)}});const X=Array.from(J.entries()).map(([ce,qe])=>({user_id:ce,gw:ue,points:qe}));O&&we(X)})(),()=>{O=!1}},[ue,Pe,Se]),x.useEffect(()=>{l||r({tab:"lastgw"},{replace:!0}),c!==M&&Y(c)},[c,l,M,r]);const C=O=>{Y(O),r({tab:O})};x.useEffect(()=>{let O=!0;const V="global:leaderboard";let ge=!1;if(p.loading)try{const J=nn(V);J&&J.gwPoints&&Array.isArray(J.gwPoints)&&J.gwPoints.length>0&&(P(J.latestGw),j(J.gwPoints),k(J.overall||[]),$(J.prevOcp||{}),w(!1),ge=!0)}catch{}else ge=!0;return(async()=>{try{ge||w(!0),b("");const{data:J,error:ee}=await Z.from("app_gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle();if(ee)throw ee;const X=J?.gw??1;O&&P(X);const{data:ce,error:qe}=await Z.from("app_v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0});if(qe)throw qe;const{data:Ze,error:st}=await Z.from("app_v_ocp_overall").select("user_id, name, ocp");if(st)throw st;if(!O)return;j(ce??[]),k(Ze??[]);let at={};if(X&&X>1){const jt=ce?.filter(ne=>ne.gw<X)??[],_t={};jt.forEach(ne=>{_t[ne.user_id]=(_t[ne.user_id]??0)+(ne.points??0)}),at=_t,O&&$(_t)}else O&&$({});try{Jt(V,{latestGw:X,gwPoints:ce??[],overall:Ze??[],prevOcp:at},Ft.GLOBAL)}catch{}}catch(J){O&&b(J?.message??"Failed to load leaderboard.")}finally{O&&w(!1)}})(),()=>{O=!1}},[re]),x.useEffect(()=>{const O=Z.channel("global-gw-results-changes").on("postgres_changes",{event:"*",schema:"public",table:"app_gw_results"},()=>{const V="global:leaderboard";try{En(V)}catch{}Ie(ge=>ge+1)}).subscribe();return()=>{Z.removeChannel(O)}},[]);function v(O){const V=Object.keys(O);V.sort((J,ee)=>(O[ee]??0)-(O[J]??0)||J.localeCompare(ee));const ge={};return V.forEach((J,ee)=>ge[J]=ee+1),ge}const R=x.useMemo(()=>{const O={};return N.forEach(V=>{O[V.user_id]=V.ocp??0}),A.forEach(V=>{V.user_id in O||(O[V.user_id]=V.points??0)}),v(O)},[N,A]),z=x.useMemo(()=>v(T),[T]),K=x.useMemo(()=>O=>{if(!S||S<O)return[];const V=S-O+1,ge=A.filter(X=>X.gw>=V&&X.gw<=S),J=new Map;return N.forEach(X=>{J.set(X.user_id,{user_id:X.user_id,name:X.name??"User",formPoints:0,weeksPlayed:new Set})}),ge.forEach(X=>{const ce=J.get(X.user_id);ce?(ce.formPoints+=X.points,ce.weeksPlayed.add(X.gw)):J.set(X.user_id,{user_id:X.user_id,name:"User",formPoints:X.points,weeksPlayed:new Set([X.gw])})}),Array.from(J.values()).filter(X=>{for(let ce=V;ce<=S;ce++)if(!X.weeksPlayed.has(ce))return!1;return!0}).map(X=>({user_id:X.user_id,name:X.name,formPoints:X.formPoints,gamesPlayed:O})).sort((X,ce)=>ce.formPoints-X.formPoints||X.name.localeCompare(ce.name))},[N,A,S]),D=x.useMemo(()=>O=>!Me||Ve.size===0?O:O.filter(V=>Ve.has(V.user_id)),[Me,Ve]),B=x.useMemo(()=>K(5),[K]),F=x.useMemo(()=>D(B),[B,D]),q=x.useMemo(()=>K(10),[K]),H=x.useMemo(()=>D(q),[q,D]),se=x.useMemo(()=>{if(!S)return[];const O=Pe&&te.length>0?te:A.filter(ee=>ee.gw===S),V=new Map(N.map(ee=>[ee.user_id,ee.name??"User"])),ge=O.map(ee=>({user_id:ee.user_id,name:V.get(ee.user_id)??"User",points:ee.points})).sort((ee,X)=>X.points-ee.points||ee.name.localeCompare(X.name));let J=1;return ge.map((ee,X)=>(X>0&&ge[X-1].points!==ee.points&&(J=X+1),{...ee,rank:J}))},[A,S,N,Pe,te]),ke=x.useMemo(()=>D(se),[se,D]),ve=x.useMemo(()=>{const O=Pe&&te.length>0&&ue?te:A.filter(X=>X.gw===S),V=new Map;O.forEach(X=>V.set(X.user_id,X.points));const ge=new Set;let J;if(Pe&&ue){const X=A.filter(ce=>ce.gw<ue);J=new Map,X.forEach(ce=>{J.set(ce.user_id,(J.get(ce.user_id)||0)+(ce.points||0))}),O.forEach(ce=>{J.set(ce.user_id,(J.get(ce.user_id)||0)+(ce.points||0))})}else J=new Map,N.forEach(X=>{J.set(X.user_id,X.ocp||0)});const ee=N.map(X=>{ge.add(X.user_id);const ce=V.get(X.user_id)??0,qe=J.get(X.user_id)||0;return{user_id:X.user_id,name:X.name??"User",this_gw:ce,ocp:qe}});return O.forEach(X=>{if(!ge.has(X.user_id)){ge.add(X.user_id);const ce=J.get(X.user_id)||X.points;ee.push({user_id:X.user_id,name:"User",this_gw:X.points,ocp:ce})}}),ee.sort((X,ce)=>ce.ocp-X.ocp||X.name.localeCompare(ce.name)),ee},[N,A,S,Pe,te,ue]),pe=x.useMemo(()=>D(ve),[ve,D]);return x.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),x.useEffect(()=>{o.current&&(o.current.scrollTop=0)},[M]),x.useEffect(()=>{const O=o.current;if(!O)return;const V=()=>{O.scrollTop<0&&(O.scrollTop=0),requestAnimationFrame(()=>{O.scrollTop<0&&(O.scrollTop=0)})};O.addEventListener("scroll",V,{passive:!1}),O.addEventListener("touchmove",V,{passive:!1});const ge=ee=>{O.scrollTop<=0&&ee.deltaY<0&&(ee.preventDefault(),ee.stopPropagation(),O.scrollTop=0)};O.addEventListener("wheel",ge,{passive:!1});const J=ee=>{if(O.scrollTop<=0){const X=ee.touches[0];if(X){const ce=X.clientY,qe=Ze=>{const st=Ze.touches[0];st&&st.clientY<ce&&Ze.preventDefault()};O.addEventListener("touchmove",qe,{passive:!1}),O.addEventListener("touchend",()=>{O.removeEventListener("touchmove",qe)},{once:!0})}}};return O.addEventListener("touchstart",J,{passive:!1}),()=>{O.removeEventListener("scroll",V),O.removeEventListener("touchmove",V),O.removeEventListener("wheel",ge),O.removeEventListener("touchstart",J)}},[]),x.useEffect(()=>{if(!g&&s?.id&&o.current&&a.current){const O=M==="overall"?pe:M==="form5"?F:M==="form10"?H:ke,V=O.findIndex(ee=>ee.user_id===s.id),ge=V>=0?O[V].rank||V+1:null;if(ge!==null&&ge<=8)return;o.current&&(o.current.scrollTop=0);const J=setTimeout(()=>{const ee=o.current,X=a.current;ee&&X&&setTimeout(()=>{if(ee&&X){const ce=X.offsetTop,qe=ee.clientHeight,Ze=X.offsetHeight,st=ce-qe/2+Ze/2;ee.style.scrollBehavior="smooth",ee.scrollTop=st,setTimeout(()=>{ee&&(ee.style.scrollBehavior="auto")},1e3)}},500)},150);return()=>clearTimeout(J)}},[g,s?.id,M,ve,F,H,ke]),h.jsxs("div",{className:"fixed inset-0 bg-slate-50 overflow-hidden flex flex-col",children:[h.jsx("style",{children:`
        @keyframes sparkle {
          0%, 100% {
            opacity: 1;
            transform: scale(1) rotate(0deg);
          }
          25% {
            opacity: 0.8;
            transform: scale(1.1) rotate(-5deg);
          }
          50% {
            opacity: 1;
            transform: scale(1.15) rotate(5deg);
          }
          75% {
            opacity: 0.9;
            transform: scale(1.05) rotate(-3deg);
          }
        }
        .sparkle-trophy {
          animation: sparkle 2s ease-in-out infinite;
          filter: drop-shadow(0 0 4px rgba(251, 191, 36, 0.6));
        }
        .sparkle-trophy svg {
          filter: drop-shadow(0 0 2px rgba(251, 191, 36, 0.8));
        }
        @keyframes flash {
          0%, 100% {
            background-color: rgb(209, 250, 229);
          }
          25% {
            background-color: rgb(167, 243, 208);
          }
          50% {
            background-color: rgb(209, 250, 229);
          }
          75% {
            background-color: rgb(167, 243, 208);
          }
        }
        .flash-you-badge {
          animation: flash 1.5s ease-in-out 3;
        }
        .full-width-header-border::after {
          content: '';
          position: absolute;
          left: -1rem;
          right: -1rem;
          bottom: 0;
          height: 1px;
          background-color: #cbd5e1;
          z-index: 1;
        }
      `}),h.jsxs("div",{className:"max-w-6xl mx-auto px-4 pb-0 flex-1 flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"flex-shrink-0 bg-slate-50 py-4",children:[h.jsx("div",{className:"flex flex-col gap-3",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(wc,{title:"Leaderboard",as:"h2"}),(M==="lastgw"||M==="overall")&&Pe&&ue&&h.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700 border border-red-200 animate-pulse",children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),"LIVE GW",ue]})]})}),h.jsx("div",{className:"flex justify-center mb-6 mt-6",children:h.jsxs("div",{className:"flex rounded-full bg-slate-100 p-1.5 border border-slate-200 shadow-sm w-full max-w-md",children:[h.jsx("button",{onClick:()=>C("lastgw"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all ${M==="lastgw"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"GW"}),h.jsx("button",{onClick:()=>C("form5"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all ${M==="form5"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"5"}),h.jsx("button",{onClick:()=>C("form10"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all ${M==="form10"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:"10"}),h.jsx("button",{onClick:()=>C("overall"),className:`flex-1 py-2.5 rounded-full text-base font-semibold transition-all flex items-center justify-center ${M==="overall"?"bg-[#1C8376] text-white shadow-md":"text-slate-600 hover:text-slate-900 hover:bg-white/50"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-5 h-5",children:h.jsx("g",{children:h.jsx("path",{fill:"currentColor",d:"M16 3c1.1046 0 2 0.89543 2 2h2c1.1046 0 2 0.89543 2 2v1c0 2.695 -2.1323 4.89 -4.8018 4.9941 -0.8777 1.5207 -2.4019 2.6195 -4.1982 2.9209V19h3c0.5523 0 1 0.4477 1 1s-0.4477 1 -1 1H8c-0.55228 0 -1 -0.4477 -1 -1s0.44772 -1 1 -1h3v-3.085c-1.7965 -0.3015 -3.32148 -1.4 -4.19922 -2.9209C4.13175 12.8895 2 10.6947 2 8V7c0 -1.10457 0.89543 -2 2 -2h2c0 -1.10457 0.89543 -2 2 -2zm-8 7c0 2.2091 1.79086 4 4 4 2.2091 0 4 -1.7909 4 -4V5H8zM4 8c0 1.32848 0.86419 2.4532 2.06055 2.8477C6.02137 10.5707 6 10.2878 6 10V7H4zm14 2c0 0.2878 -0.0223 0.5706 -0.0615 0.8477C19.1353 10.4535 20 9.32881 20 8V7h-2z",strokeWidth:"1"})})})})]})}),h.jsx("div",{className:"flex justify-center mb-4",children:h.jsxs("div",{className:"inline-flex rounded-lg bg-slate-100 p-1 border border-slate-200 shadow-sm",children:[h.jsx("button",{onClick:()=>He(!1),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${Me?"text-slate-600 hover:text-slate-900":"bg-white text-[#1C8376] shadow-sm"}`,children:"All Players"}),h.jsx("button",{onClick:()=>He(!0),className:`px-4 py-2 text-sm font-semibold rounded-md transition-all ${Me?"bg-white text-[#1C8376] shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Mini League Friends"})]})}),M==="overall"&&h.jsx("div",{className:"text-center mb-2",children:h.jsx("div",{className:"text-sm text-slate-600",children:"All Players since the start of the season"})}),M==="form5"&&h.jsx("div",{className:"text-center mb-2",children:S&&S>=5?h.jsx("div",{className:"text-sm text-slate-600",children:"All Players who completed the last 5 Rounds"}):h.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Watch this space! Complete 5 GW in a row to see the 5 Week Form Leaderboard."})}),M==="form10"&&h.jsx("div",{className:"text-center mb-2",children:S&&S>=10?h.jsx("div",{className:"text-sm text-slate-600",children:"All Players who completed the last 10 Rounds"}):h.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Watch this space! Complete 10 GW in a row to see the 10 Week Form Leaderboard."})}),M==="lastgw"&&!Pe&&h.jsx("div",{className:"text-center mb-2",children:h.jsxs("div",{className:"text-sm text-slate-600",children:["Players who completed GW",S]})})]}),h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[_&&h.jsx("div",{className:"mb-6 rounded border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700 flex-shrink-0",children:_}),g?h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1C8376]"})}):M==="form5"&&S&&S<5?h.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[h.jsx("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:"5 Week Form Leaderboard Coming Soon"}),h.jsx("div",{className:"text-slate-600",children:"Complete 5 gameweeks in a row to unlock the 5 Week Form Leaderboard and see who's in the best form!"})]}):M==="form10"&&S&&S<10?h.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-12 text-center",children:[h.jsx("div",{className:"text-lg font-semibold text-slate-700 mb-2",children:"10 Week Form Leaderboard Coming Soon"}),h.jsx("div",{className:"text-slate-600",children:"Complete 10 gameweeks in a row to unlock the 10 Week Form Leaderboard and see who's in the best form!"})]}):(M==="overall"?pe:M==="form5"?F:M==="form10"?H:ke).length===0?h.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 text-slate-600",children:"No leaderboard data yet."}):h.jsx("div",{ref:o,className:"flex-1 overflow-y-auto overflow-x-hidden -mx-4 sm:mx-0 rounded-none sm:rounded-2xl border-x-0 sm:border-x border-b border-slate-200 bg-slate-50 shadow-sm",style:{overscrollBehavior:"contain",WebkitOverflowScrolling:"touch",minHeight:0,paddingBottom:"100px",paddingLeft:"1rem",paddingRight:"1rem",backgroundColor:"#f8fafc",touchAction:"pan-y"},children:h.jsxs("table",{className:"w-full text-sm border-collapse",style:{tableLayout:"fixed",backgroundColor:"#f8fafc"},children:[h.jsx("thead",{className:"sticky top-0 full-width-header-border",style:{position:"sticky",top:0,zIndex:25,backgroundColor:"#f8fafc",display:"table-header-group"},children:h.jsxs("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"1px solid #cbd5e1"},children:[h.jsx("th",{className:"py-3 text-left font-normal",style:{backgroundColor:"#f8fafc",width:"45px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:"#"}),h.jsx("th",{className:"px-4 py-3 text-left font-normal text-xs",style:{backgroundColor:"#f8fafc",color:"#64748b"},children:"Player"}),M==="overall"&&h.jsxs(h.Fragment,{children:[h.jsx("th",{className:"px-4 py-3 text-center font-semibold",style:{backgroundColor:"#f8fafc",width:"40px",borderTop:"none",paddingLeft:"0.5rem",paddingRight:"0.5rem"}}),h.jsx("th",{className:"px-1 py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"55px",color:"#64748b",paddingLeft:"0.5rem",paddingRight:"0.5rem"},children:h.jsxs("div",{className:"flex items-center justify-center gap-1",children:["GW",Pe&&ue?ue:S||"?",Pe&&ue&&h.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-red-500"})]})]})}),h.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:h.jsxs("div",{className:"flex items-center justify-center gap-1",children:["OCP",Pe&&ue&&h.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-red-500"})]})]})})]}),(M==="form5"||M==="form10")&&h.jsxs(h.Fragment,{children:[h.jsx("th",{className:"px-4 py-3 text-center font-semibold",style:{backgroundColor:"#f8fafc",width:"40px",borderTop:"none",paddingLeft:"0.5rem",paddingRight:"0.5rem"}}),h.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:"PTS"})]}),M==="lastgw"&&h.jsxs(h.Fragment,{children:[h.jsx("th",{className:"px-4 py-3 text-center font-semibold",style:{backgroundColor:"#f8fafc",width:"40px",borderTop:"none",paddingLeft:"0.5rem",paddingRight:"0.5rem"}}),h.jsx("th",{className:"py-3 text-center font-normal",style:{backgroundColor:"#f8fafc",width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",color:"#64748b"},children:h.jsxs("div",{className:"flex items-center justify-center gap-1",children:["GW",ue||S||"?",Pe&&ue&&h.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-red-500"})]})]})})]})]})}),h.jsx("tbody",{children:(M==="overall"?pe:M==="form5"?F:M==="form10"?H:ke).map((O,V,ge)=>{const J=O.user_id===s?.id,ee="rank"in O?O.rank:V+1,ce=ge.filter((at,jt)=>("rank"in at?at.rank:jt+1)===ee).length>1,qe=ee===1;let Ze="",st="bg-gray-300";if(M==="overall"){const at=z[O.user_id],jt=R[O.user_id];jt&&at?jt<at?(Ze="",st="bg-green-500 text-white"):jt>at?(Ze="",st="bg-red-500 text-white"):(Ze="",st="bg-gray-500 text-white"):jt&&!at&&(Ze="",st="bg-gray-400")}return h.jsxs("tr",{ref:J?a:null,className:"",style:{...V>0?{borderTop:"1px solid #e2e8f0",position:"relative",backgroundColor:"#f8fafc"}:{position:"relative",backgroundColor:"#f8fafc"}},children:[h.jsx("td",{className:"py-3 text-left tabular-nums whitespace-nowrap relative",style:{width:"45px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:h.jsxs("span",{children:[ee,ce?"=":""]})}),h.jsx("td",{className:"px-4 py-3",style:{backgroundColor:"#f8fafc"},children:h.jsxs("div",{className:"flex items-center gap-2",children:[(Ze||st)&&M==="overall"&&h.jsx("span",{className:`inline-flex items-center justify-center w-4 h-4 rounded-full text-xs font-bold ${st} align-middle flex-shrink-0`,"aria-hidden":!0,children:Ze}),qe&&h.jsx("span",{className:"inline-flex items-center sparkle-trophy flex-shrink-0",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-4 h-4 text-yellow-500",children:h.jsx("g",{children:h.jsx("path",{fill:"currentColor",d:"M16 3c1.1046 0 2 0.89543 2 2h2c1.1046 0 2 0.89543 2 2v1c0 2.695 -2.1323 4.89 -4.8018 4.9941 -0.8777 1.5207 -2.4019 2.6195 -4.1982 2.9209V19h3c0.5523 0 1 0.4477 1 1s-0.4477 1 -1 1H8c-0.55228 0 -1 -0.4477 -1 -1s0.44772 -1 1 -1h3v-3.085c-1.7965 -0.3015 -3.32148 -1.4 -4.19922 -2.9209C4.13175 12.8895 2 10.6947 2 8V7c0 -1.10457 0.89543 -2 2 -2h2c0 -1.10457 0.89543 -2 2 -2zm-8 7c0 2.2091 1.79086 4 4 4 2.2091 0 4 -1.7909 4 -4V5H8zM4 8c0 1.32848 0.86419 2.4532 2.06055 2.8477C6.02137 10.5707 6 10.2878 6 10V7H4zm14 2c0 0.2878 -0.0223 0.5706 -0.0615 0.8477C19.1353 10.4535 20 9.32881 20 8V7h-2z",strokeWidth:"1"})})})}),h.jsx("span",{className:"font-normal text-sm truncate min-w-0 whitespace-nowrap",style:{color:"rgb(0, 0, 0)",overflow:"hidden",textOverflow:"ellipsis"},children:O.name}),J&&h.jsx("span",{className:"ml-2 rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-800 flex-shrink-0 flash-you-badge",children:"you"})]})}),M==="overall"&&h.jsxs(h.Fragment,{children:[h.jsx("td",{className:"px-4 py-3 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"}}),h.jsx("td",{className:"px-1 py-3 text-center tabular-nums font-bold",style:{width:"55px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"this_gw"in O?O.this_gw:0}),h.jsx("td",{className:"py-3 text-center tabular-nums font-bold",style:{width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"ocp"in O?O.ocp:0})]}),(M==="form5"||M==="form10")&&h.jsxs(h.Fragment,{children:[h.jsx("td",{className:"px-4 py-3 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"}}),h.jsx("td",{className:"py-3 text-center tabular-nums font-bold",style:{width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"formPoints"in O?O.formPoints:0})]}),M==="lastgw"&&h.jsxs(h.Fragment,{children:[h.jsx("td",{className:"px-4 py-3 text-center tabular-nums font-bold",style:{width:"40px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"}}),h.jsx("td",{className:"py-3 text-center tabular-nums font-bold",style:{width:"60px",paddingLeft:"0.5rem",paddingRight:"0.5rem",backgroundColor:"#f8fafc"},children:"points"in O?O.points:0})]})]},O.user_id)})})]})})]})]})]})}function m1(...s){return s.filter(Boolean).join(" ")}function Ru({label:s,active:n,disabled:r,onClick:o}){return h.jsx("button",{type:"button",disabled:r,onClick:o,className:m1("h-16 rounded-xl border text-sm font-medium transition-colors","flex items-center justify-center",n?"bg-emerald-600 text-white border-emerald-600":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100",r&&"opacity-60 cursor-not-allowed"),children:s})}var Tu,Uh;function p1(){if(Uh)return Tu;Uh=1;var s={linear:function(n,r,o,a){var l=o-r;return l*n/a+r},easeInQuad:function(n,r,o,a){var l=o-r;return l*(n/=a)*n+r},easeOutQuad:function(n,r,o,a){var l=o-r;return-l*(n/=a)*(n-2)+r},easeInOutQuad:function(n,r,o,a){var l=o-r;return(n/=a/2)<1?l/2*n*n+r:-l/2*(--n*(n-2)-1)+r},easeInCubic:function(n,r,o,a){var l=o-r;return l*(n/=a)*n*n+r},easeOutCubic:function(n,r,o,a){var l=o-r;return l*((n=n/a-1)*n*n+1)+r},easeInOutCubic:function(n,r,o,a){var l=o-r;return(n/=a/2)<1?l/2*n*n*n+r:l/2*((n-=2)*n*n+2)+r},easeInQuart:function(n,r,o,a){var l=o-r;return l*(n/=a)*n*n*n+r},easeOutQuart:function(n,r,o,a){var l=o-r;return-l*((n=n/a-1)*n*n*n-1)+r},easeInOutQuart:function(n,r,o,a){var l=o-r;return(n/=a/2)<1?l/2*n*n*n*n+r:-l/2*((n-=2)*n*n*n-2)+r},easeInQuint:function(n,r,o,a){var l=o-r;return l*(n/=a)*n*n*n*n+r},easeOutQuint:function(n,r,o,a){var l=o-r;return l*((n=n/a-1)*n*n*n*n+1)+r},easeInOutQuint:function(n,r,o,a){var l=o-r;return(n/=a/2)<1?l/2*n*n*n*n*n+r:l/2*((n-=2)*n*n*n*n+2)+r},easeInSine:function(n,r,o,a){var l=o-r;return-l*Math.cos(n/a*(Math.PI/2))+l+r},easeOutSine:function(n,r,o,a){var l=o-r;return l*Math.sin(n/a*(Math.PI/2))+r},easeInOutSine:function(n,r,o,a){var l=o-r;return-l/2*(Math.cos(Math.PI*n/a)-1)+r},easeInExpo:function(n,r,o,a){var l=o-r;return n==0?r:l*Math.pow(2,10*(n/a-1))+r},easeOutExpo:function(n,r,o,a){var l=o-r;return n==a?r+l:l*(-Math.pow(2,-10*n/a)+1)+r},easeInOutExpo:function(n,r,o,a){var l=o-r;return n===0?r:n===a?r+l:(n/=a/2)<1?l/2*Math.pow(2,10*(n-1))+r:l/2*(-Math.pow(2,-10*--n)+2)+r},easeInCirc:function(n,r,o,a){var l=o-r;return-l*(Math.sqrt(1-(n/=a)*n)-1)+r},easeOutCirc:function(n,r,o,a){var l=o-r;return l*Math.sqrt(1-(n=n/a-1)*n)+r},easeInOutCirc:function(n,r,o,a){var l=o-r;return(n/=a/2)<1?-l/2*(Math.sqrt(1-n*n)-1)+r:l/2*(Math.sqrt(1-(n-=2)*n)+1)+r},easeInElastic:function(n,r,o,a){var l=o-r,c,f,p;return p=1.70158,f=0,c=l,n===0?r:(n/=a)===1?r+l:(f||(f=a*.3),c<Math.abs(l)?(c=l,p=f/4):p=f/(2*Math.PI)*Math.asin(l/c),-(c*Math.pow(2,10*(n-=1))*Math.sin((n*a-p)*(2*Math.PI)/f))+r)},easeOutElastic:function(n,r,o,a){var l=o-r,c,f,p;return p=1.70158,f=0,c=l,n===0?r:(n/=a)===1?r+l:(f||(f=a*.3),c<Math.abs(l)?(c=l,p=f/4):p=f/(2*Math.PI)*Math.asin(l/c),c*Math.pow(2,-10*n)*Math.sin((n*a-p)*(2*Math.PI)/f)+l+r)},easeInOutElastic:function(n,r,o,a){var l=o-r,c,f,p;return p=1.70158,f=0,c=l,n===0?r:(n/=a/2)===2?r+l:(f||(f=a*(.3*1.5)),c<Math.abs(l)?(c=l,p=f/4):p=f/(2*Math.PI)*Math.asin(l/c),n<1?-.5*(c*Math.pow(2,10*(n-=1))*Math.sin((n*a-p)*(2*Math.PI)/f))+r:c*Math.pow(2,-10*(n-=1))*Math.sin((n*a-p)*(2*Math.PI)/f)*.5+l+r)},easeInBack:function(n,r,o,a,l){var c=o-r;return l===void 0&&(l=1.70158),c*(n/=a)*n*((l+1)*n-l)+r},easeOutBack:function(n,r,o,a,l){var c=o-r;return l===void 0&&(l=1.70158),c*((n=n/a-1)*n*((l+1)*n+l)+1)+r},easeInOutBack:function(n,r,o,a,l){var c=o-r;return l===void 0&&(l=1.70158),(n/=a/2)<1?c/2*(n*n*(((l*=1.525)+1)*n-l))+r:c/2*((n-=2)*n*(((l*=1.525)+1)*n+l)+2)+r},easeInBounce:function(n,r,o,a){var l=o-r,c;return c=s.easeOutBounce(a-n,0,l,a),l-c+r},easeOutBounce:function(n,r,o,a){var l=o-r;return(n/=a)<1/2.75?l*(7.5625*n*n)+r:n<2/2.75?l*(7.5625*(n-=1.5/2.75)*n+.75)+r:n<2.5/2.75?l*(7.5625*(n-=2.25/2.75)*n+.9375)+r:l*(7.5625*(n-=2.625/2.75)*n+.984375)+r},easeInOutBounce:function(n,r,o,a){var l=o-r,c;return n<a/2?(c=s.easeInBounce(n*2,0,l,a),c*.5+r):(c=s.easeOutBounce(n*2-a,0,l,a),c*.5+l*.5+r)}};return Tu=s,Tu}var g1=p1();function w1(s){return s*Math.PI/180}function kn(s,n){return s+Math.random()*(n-s)}function v1(s,n){return Math.floor(s+Math.random()*(n-s+1))}var to;(function(s){s[s.Circle=0]="Circle",s[s.Square=1]="Square",s[s.Strip=2]="Strip"})(to||(to={}));var qr;(function(s){s[s.Positive=1]="Positive",s[s.Negative=-1]="Negative"})(qr||(qr={}));const y1=1e3/60;class _1{constructor(n,r,o,a){this.getOptions=r;const{colors:l,initialVelocityX:c,initialVelocityY:f}=this.getOptions();this.context=n,this.x=o,this.y=a,this.w=kn(5,20),this.h=kn(5,20),this.radius=kn(5,10),this.vx=typeof c=="number"?kn(-c,c):kn(c.min,c.max),this.vy=typeof f=="number"?kn(-f,0):kn(f.min,f.max),this.shape=v1(0,2),this.angle=w1(kn(0,360)),this.angularSpin=kn(-.2,.2),this.color=l[Math.floor(Math.random()*l.length)],this.rotateY=kn(0,1),this.rotationDirection=kn(0,1)?qr.Positive:qr.Negative}update(n){const{gravity:r,wind:o,friction:a,opacity:l,drawShape:c}=this.getOptions(),f=n/y1;this.x+=this.vx*f,this.y+=this.vy*f,this.vy+=r*f,this.vx+=o*f,this.vx*=a**f,this.vy*=a**f,this.rotateY>=1&&this.rotationDirection===qr.Positive?this.rotationDirection=qr.Negative:this.rotateY<=-1&&this.rotationDirection===qr.Negative&&(this.rotationDirection=qr.Positive);const p=.1*this.rotationDirection*f;if(this.rotateY+=p,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=l,this.context.lineCap="round",this.context.lineWidth=2,c&&typeof c=="function")c.call(this,this.context);else switch(this.shape){case to.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case to.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case to.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class x1{constructor(n,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=a=>{this.particles.splice(a,1)},this.getParticle=()=>{const a=kn(this.x,this.w+this.x),l=kn(this.y,this.h+this.y);return new _1(this.context,this.getOptions,a,l)},this.animate=a=>{const{canvas:l,context:c,particlesGenerated:f,lastNumberOfPieces:p}=this,{run:g,recycle:w,numberOfPieces:_,debug:b,tweenFunction:S,tweenDuration:P}=this.getOptions();if(!g)return!1;const N=this.particles.length,k=w?N:f;if(k<_){p!==_&&(this.tweenProgress=0,this.tweenFrom=k,this.lastNumberOfPieces=_),this.tweenProgress=Math.min(P,Math.max(0,this.tweenProgress+a));const A=S(this.tweenProgress,this.tweenFrom,_,P),j=Math.round(A-k);for(let T=0;T<j;T++)this.particles.push(this.getParticle());this.particlesGenerated+=j}b&&(c.font="12px sans-serif",c.fillStyle="#333",c.textAlign="right",c.fillText(`Particles: ${N}`,l.width-10,l.height-20));for(let A=this.particles.length-1;A>=0;A--){const j=this.particles[A];j.update(a),(j.y>l.height||j.y<-100||j.x>l.width+100||j.x<-100)&&(w&&k<=_?this.particles[A]=this.getParticle():this.removeParticleAt(A))}return N>0||k<_},this.canvas=n;const o=this.canvas.getContext("2d");if(!o)throw new Error("Could not get canvas context");this.context=o,this.getOptions=r}}const vc={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:g1.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class b1{constructor(n,r){this.lastFrameTime=0,this.setOptionsWithDefaults=a=>{const l={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...l,...vc,...a},Object.assign(this,a.confettiSource)},this.update=(a=0)=>{const{options:{run:l,onConfettiComplete:c,frameRate:f},canvas:p,context:g}=this,w=Math.min(a-this.lastFrameTime,50);if(f&&w<1e3/f){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=a-(f?w%f:0),l&&(g.fillStyle="white",g.clearRect(0,0,p.width,p.height)),this.generator.animate(w)?this.rafId=requestAnimationFrame(this.update):(c&&typeof c=="function"&&this.generator.particlesGenerated>0&&c.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=n;const o=this.canvas.getContext("2d");if(!o)throw new Error("Could not get canvas context");this.context=o,this.generator=new x1(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(n){const r=this._options?.run,o=this._options?.recycle;this.setOptionsWithDefaults(n),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof n.recycle=="boolean"&&n.recycle&&o===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof n.run=="boolean"&&n.run&&r===!1&&this.update()}}const S1=Cn.createRef();class yc extends Cn.Component{constructor(n){super(n),this.canvas=Cn.createRef(),this.canvas=n.canvasRef||S1}componentDidMount(){if(this.canvas.current){const n=Nu(this.props)[0];this.confetti=new b1(this.canvas.current,n)}}componentDidUpdate(){const n=Nu(this.props)[0];this.confetti&&(this.confetti.options=n)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[n,r]=Nu(this.props),o={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return h.jsx("canvas",{width:n.width,height:n.height,ref:this.canvas,...r,style:o})}}yc.defaultProps={...vc};yc.displayName="ReactConfetti";function Nu(s){const n={},r={},o={},a=[...Object.keys(vc),"confettiSource","drawShape","onConfettiComplete","frameRate"],l=["canvasRef"];for(const c in s){const f=s[c];a.includes(c)?n[c]=f:l.includes(c)?l[c]=f:o[c]=f}return[n,o,r]}const k1=Cn.forwardRef((s,n)=>h.jsx(yc,{canvasRef:n,...s}));function Fh(s,n){const r=s?.[`${n}_name`],o=s?.[`${n}_team`],l=s?.[`${n}_code`]||r||o||"";return Kt(l)||(n==="home"?"Home":"Away")}function Bh(...s){return s.filter(Boolean).join(" ")}function E1(s){return s?s.result==="H"||s.result==="D"||s.result==="A"?s.result:typeof s.home_goals=="number"&&typeof s.away_goals=="number"?s.home_goals>s.away_goals?"H":s.home_goals<s.away_goals?"A":"D":null:null}function Lu({label:s,correct:n,isCorrectResult:r}){const o="h-16 rounded-xl border text-sm font-medium transition-colors flex items-center justify-center select-none",a=n===!0?"bg-gradient-to-br from-yellow-400 via-orange-500 via-pink-500 to-purple-600 text-white !border-0 !border-none shadow-2xl shadow-yellow-400/40 transform scale-110 rotate-1 relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-transparent before:via-white/70 before:to-transparent before:animate-[shimmer_1.2s_ease-in-out_infinite] after:absolute after:inset-0 after:bg-gradient-to-r after:from-transparent after:via-yellow-200/50 after:to-transparent after:animate-[shimmer_1.8s_ease-in-out_infinite_0.4s]":r?"bg-emerald-600 text-white border-emerald-600":n===!1?"bg-rose-100 text-rose-700 border-rose-200":"bg-slate-50 text-slate-600 border-slate-200";return h.jsx("div",{className:[o,a].join(" "),children:h.jsx("span",{className:n===!0?"font-bold":"",children:s})})}function C1(){const{user:s}=ur(),n=hi(),[r]=x.useState(()=>{const v=localStorage.getItem("oldSchoolMode");return v?JSON.parse(v):!1});x.useEffect(()=>{localStorage.setItem("oldSchoolMode",JSON.stringify(r))},[r]);const[o,a]=x.useState(null),[l,c]=x.useState([]),[f,p]=x.useState({}),[g,w]=x.useState([]),[_,b]=x.useState(!1),[S,P]=x.useState(!1),[N,k]=x.useState(!1),[A,j]=x.useState(!0),[T,$]=x.useState(""),[M,Y]=x.useState(!1),[re,Ie]=x.useState(!1),[Me,He]=x.useState(!1),[Ve,rt]=x.useState({width:0,height:0});x.useEffect(()=>{const v=()=>{rt({width:window.innerWidth,height:window.innerHeight})};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),x.useEffect(()=>{_&&window.scrollTo({top:0,behavior:"smooth"})},[_]),x.useEffect(()=>{let v=!0;(async()=>{const z=await Gh();v&&a(z)})();const R=async()=>{const z=await Gh();a(z)};return window.addEventListener("focus",R),()=>{v=!1,window.removeEventListener("focus",R)}},[s?.id]),x.useEffect(()=>{let v=!0;return(async()=>{if(j(!0),$(""),o==null){c([]),p({}),b(!1),j(!1);return}const{data:R,error:z}=await Z.from("fixtures").select("gw, fixture_index, home_name, away_name, home_team, away_team, home_code, away_code, kickoff_time").eq("gw",o).order("fixture_index",{ascending:!0});if(z){v&&($(z.message),c([]),p({}),b(!1),j(!1));return}const K=R??[];if(!v)return;if(c(K),K.length>0&&K[0].kickoff_time){const ve=new Date(K[0].kickoff_time),pe=new Date(ve.getTime()-4500*1e3);Ie(new Date>pe)}else Ie(!1);const{data:D,error:B}=await Z.from("picks").select("gw, fixture_index, pick").eq("gw",o).eq("user_id",s?.id);B&&v&&$(B.message);const F={};if(K.forEach(ve=>F[ve.fixture_index]=null),D?.forEach(ve=>{F[ve.fixture_index]=ve.pick}),!v)return;p(F);const{data:q,error:H}=await Z.from("gw_submissions").select("gw, submitted_at").eq("gw",o).eq("user_id",s?.id).maybeSingle();if(H&&v&&$(H.message),!v)return;b(!!q?.submitted_at);const{data:se,error:ke}=await Z.from("gw_results").select("gw, fixture_index, result").eq("gw",o);ke&&v&&$(ke.message),v&&w(se??[]),j(!1)})(),()=>{v=!1}},[o,s?.id]);const Ye=x.useMemo(()=>{const v=new Map;return l.forEach(z=>{const K=z.kickoff_time?new Date(z.kickoff_time):null,D=K?K.toISOString().slice(0,10):"unknown",B=K?P1(K):"TBC";v.has(D)||v.set(D,{label:B,items:[]}),v.get(D).items.push(z)}),[...v.entries()].sort((z,K)=>{const D=z[1].items[0]?.fixture_index??0,B=K[1].items[0]?.fixture_index??0;return D-B}).map(([,z])=>z)},[l]);function ut(v,R){_||p(z=>({...z,[v]:R}))}async function ue(){if(!(_||!s?.id)){P(!0),$("");try{const v=Object.entries(f).filter(([,R])=>R).map(([R,z])=>({user_id:s.id,gw:o,fixture_index:Number(R),pick:z}));if(v.length){const{error:R}=await Z.from("picks").upsert(v,{onConflict:"user_id,gw,fixture_index"});if(R)throw R}k(!0),window.setTimeout(()=>k(!1),2500)}catch(v){$(v?.message??"Failed to save picks.")}finally{P(!1)}}}async function Se(){if(!_){if(l.length>0&&l[0].kickoff_time){const v=new Date(l[0].kickoff_time),R=new Date(v.getTime()-4500*1e3);if(new Date>R){const K=R.toLocaleDateString(void 0,{weekday:"short"}),D=R.toLocaleDateString(void 0,{month:"short"}),B=R.toLocaleDateString(void 0,{day:"numeric"}),F=String(R.getUTCHours()).padStart(2,"0"),q=String(R.getUTCMinutes()).padStart(2,"0"),H=`${K}, ${D} ${B}, ${F}:${q}`;$(` Too late! Submissions closed at ${H}. The deadline was 75 minutes before the first kickoff.`);return}}Y(!0)}}async function Pe(){if(_)return;if(l.length>0&&l[0].kickoff_time){const K=new Date(l[0].kickoff_time),D=new Date(K.getTime()-4500*1e3);if(new Date>D){const F=D.toLocaleDateString(void 0,{weekday:"short"}),q=D.toLocaleDateString(void 0,{month:"short"}),H=D.toLocaleDateString(void 0,{day:"numeric"}),se=String(D.getUTCHours()).padStart(2,"0"),ke=String(D.getUTCMinutes()).padStart(2,"0"),ve=`${F}, ${q} ${H}, ${se}:${ke}`;$(` Too late! Submissions closed at ${ve}. The deadline was 75 minutes before the first kickoff.`),Y(!1);return}}await ue();const v=l.length,R=Object.values(f).filter(Boolean).length;if(R!==v){$(`Please make predictions for all ${v} fixtures before submitting. You have ${R}/${v} completed.`);return}const{error:z}=await Z.from("gw_submissions").upsert([{user_id:s?.id,gw:o,submitted_at:new Date().toISOString()}],{onConflict:"user_id,gw"});if(z)$(z.message);else{b(!0),s?.id&&tc(s.id),window.dispatchEvent(new CustomEvent("predictionsSubmitted")),He(!0);const{data:K}=await Z.from("league_members").select("league_id").eq("user_id",s?.id);K&&K.length>0&&K.forEach(({league_id:D})=>{fetch("/.netlify/functions/notifyFinalSubmission",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leagueId:D,matchday:o,isTestApi:!1})}).catch(B=>{console.error("[Predictions] Failed to check final submission:",B)})}),setTimeout(()=>{He(!1),n("/")},3e3)}Y(!1)}const te=new Map;g.forEach(v=>{const R=E1(v);R&&te.set(v.fixture_index,R)});const we=l.length>0&&te.size>0&&te.size===l.length,C=Object.entries(f).reduce((v,[R,z])=>{const K=Number(R),D=te.get(K);return!D||!z?v:v+(z===D?1:0)},0);return A?h.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:h.jsx("div",{className:"text-slate-500",children:"Loading"})}):h.jsxs("div",{className:`min-h-screen bg-slate-50 ${r?"oldschool-theme":""}`,children:[Me&&Ve.width>0&&Ve.height>0&&h.jsx(k1,{width:Ve.width,height:Ve.height,recycle:!1,numberOfPieces:500,gravity:.3}),h.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[h.jsx(wc,{title:"Predictions Center",as:"h2"}),h.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600 w-full",children:"Call every game, lock in your results, and climb the table."}),h.jsxs("div",{className:"text-slate-600 text-lg font-semibold mt-1",children:["Gameweek ",Iu(o)]}),h.jsx("div",{className:"mt-3",children:we?h.jsx("div",{className:"rounded-xl border bg-gradient-to-r from-emerald-50 to-blue-50 border-emerald-200 px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-emerald-900 font-semibold text-lg",children:["GW ",Iu(o)," Complete"]}),h.jsx("div",{className:"text-emerald-900 text-sm font-bold mt-1",children:"Your Score"})]}),h.jsx("div",{className:"text-emerald-900 text-5xl font-extrabold",children:C})]})}):null}),T&&h.jsx("div",{className:"mt-4 rounded border border-rose-200 bg-rose-50 text-rose-700 px-3 py-2 text-sm",children:T}),!_&&l.length>0&&l[0].kickoff_time&&!re&&(()=>{const v=new Date(l[0].kickoff_time),R=new Date(v.getTime()-4500*1e3),z=new Date,D=(R.getTime()-z.getTime())/(1e3*60*60);if(D<=2&&D>0){const B=R.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return h.jsxs("div",{className:"mt-4 rounded border border-amber-200 bg-amber-50 text-amber-800 px-3 py-2 text-sm",children:[" ",h.jsx("strong",{children:"Deadline approaching!"})," Submissions close at ",B," (75 minutes before first kickoff)."]})}return null})(),Ye.length===0?h.jsxs("div",{className:"mt-6 rounded border bg-white p-4 text-slate-600",children:["No fixtures found for GW ",Iu(o),". Add fixtures on the Admin page, then come back."]}):h.jsxs("div",{className:"mt-6 space-y-6",children:[!we&&_&&h.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-600 rounded-2xl p-6 text-center shadow-2xl shadow-emerald-500/30 transform scale-105 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-[shimmer_2s_ease-in-out_infinite]"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"text-white font-bold text-2xl mb-1",children:"Predictions Submitted!"}),h.jsxs("div",{className:"text-emerald-100 text-lg",children:["Your picks are locked in for GW ",o]}),h.jsx("div",{className:"text-emerald-200 text-sm mt-2",children:"Good luck!"})]})]}),Ye.map((v,R)=>h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-3",children:v.label}),h.jsx("div",{className:"space-y-4",children:v.items.map(z=>{const K=Fh(z,"home"),D=Fh(z,"away"),B=z.kickoff_time?j1(new Date(z.kickoff_time)):"",F=f[z.fixture_index]??null,q=te.get(z.fixture_index)??null;return h.jsxs("div",{className:"rounded-2xl border bg-white p-3 shadow-sm",children:[h.jsxs("div",{className:"flex items-center px-2 pt-1 pb-3",children:[h.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-end",children:[h.jsx("div",{className:"truncate font-medium",children:K}),h.jsx("img",{src:`/assets/badges/${z.home_code?.toUpperCase()||"UNK"}.png`,alt:K,className:"w-5 h-5",onError:H=>{H.currentTarget.style.display="none"}})]}),h.jsx("div",{className:"text-slate-500 text-sm px-4",children:B}),h.jsxs("div",{className:"flex items-center gap-1 flex-1 justify-start",children:[h.jsx("img",{src:`/assets/badges/${z.away_code?.toUpperCase()||"UNK"}.png`,alt:D,className:"w-5 h-5",onError:H=>{H.currentTarget.style.display="none"}}),h.jsx("div",{className:"truncate font-medium",children:D})]})]}),(K==="Home"||D==="Away")&&h.jsxs("div",{className:"px-2 pb-2 text-[11px] text-slate-400",children:[K==="Home"?"[no home name/code]":""," ",D==="Away"?"[no away name/code]":""]}),we?h.jsx("div",{className:"grid grid-cols-3 gap-3",children:(()=>{const H=f[z.fixture_index]??null,se=ke=>H!==ke||!q?null:q===ke;return h.jsxs(h.Fragment,{children:[h.jsx(Lu,{label:"Home Win",correct:se("H"),isCorrectResult:q==="H"}),h.jsx(Lu,{label:"Draw",correct:se("D"),isCorrectResult:q==="D"}),h.jsx(Lu,{label:"Away Win",correct:se("A"),isCorrectResult:q==="A"})]})})()}):h.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[h.jsx(Ru,{label:"Home Win",active:F==="H",onClick:()=>ut(z.fixture_index,"H"),disabled:_}),h.jsx(Ru,{label:"Draw",active:F==="D",onClick:()=>ut(z.fixture_index,"D"),disabled:_}),h.jsx(Ru,{label:"Away Win",active:F==="A",onClick:()=>ut(z.fixture_index,"A"),disabled:_})]})]},z.fixture_index)})})]},R))]}),!we&&!_&&l.length>0&&h.jsxs("div",{className:"mt-6",children:[N&&h.jsx("div",{className:"mb-3 text-center",children:h.jsx("span",{"aria-live":"polite",className:"text-sm rounded border border-emerald-200 bg-emerald-50 text-emerald-900 px-3 py-2 inline-block",children:"Saved  don't forget to submit before the deadline."})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:ue,disabled:S,className:Bh("flex-1 px-4 py-3 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors",S&&"opacity-50 cursor-not-allowed"),children:S?"Saving":N?"Saved":"Save GW"}),h.jsx("button",{onClick:Se,disabled:re||Object.values(f).filter(Boolean).length!==l.length,className:Bh("flex-1 px-4 py-3 rounded-md text-white font-semibold transition-colors",re?"bg-red-500 cursor-not-allowed":Object.values(f).filter(Boolean).length===l.length?"bg-emerald-600 hover:bg-emerald-700":"bg-gray-400 cursor-not-allowed"),title:re?" Submissions closed - deadline has passed":Object.values(f).filter(Boolean).length===l.length?"Submitting locks your picks for this GW.":`Complete all ${l.length} predictions before submitting`,children:re?" Deadline Passed":"Submit GW"})]}),h.jsx("div",{className:"mt-2 text-center",children:h.jsx("span",{className:"text-xs text-slate-500",children:"Submitting locks your picks for this GW."})})]}),_&&l.length>0&&h.jsx("div",{className:"mt-6 pb-6",children:h.jsx("button",{onClick:()=>{sessionStorage.setItem("showConfettiOnHome","true"),n("/"),window.scrollTo({top:0,behavior:"instant"})},className:"w-full py-4 bg-green-600 text-white rounded-2xl font-bold hover:bg-green-700 transition-colors",children:"SUBMIT YOUR PREDICTIONS"})}),M&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Confirm Submission"}),h.jsx("p",{className:"text-slate-600 mb-6",children:"Are you sure you want to submit your predictions? Once submitted, they'll be locked for this Gameweek."}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>Y(!1),className:"flex-1 px-4 py-2 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:Pe,className:"flex-1 px-4 py-2 rounded-md bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-colors",children:"Submit GW"})]})]})})]})]})}async function Gh(){const{data:s}=await Z.from("meta").select("current_gw").eq("id",1).single();return s?.current_gw??null}function Iu(s,n=1){return typeof s=="number"&&s>0?s:n}function P1(s){return s.toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})}function j1(s){const n=String(s.getUTCHours()).padStart(2,"0"),r=String(s.getUTCMinutes()).padStart(2,"0");return`${n}:${r}`}function R1(s){if(!s)return null;try{const n=s.split(", ");if(n.length<3)return null;const r=n[1],o=n[2],[a,l]=o.split(":").map(Number);if(isNaN(a)||isNaN(l))return null;const c=new Date,f=c.getUTCFullYear(),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=r.match(/(\w+)\s+(\d+)/);if(!g)return null;const w=g[1],_=parseInt(g[2],10),b=p.indexOf(w);if(b===-1)return null;const S=new Date(Date.UTC(f,b,_,a,l));if(S<=c){const j=new Date(Date.UTC(f+1,b,_,a,l));if(j<=c)return null;const T=j.getTime()-c.getTime(),$=Math.floor(T/(1e3*60*60*24)),M=Math.floor(T%(1e3*60*60*24)/(1e3*60*60)),Y=Math.floor(T%(1e3*60*60)/(1e3*60));return $>0?`${$}d ${M}h ${Y}m`:M>0?`${M}h ${Y}m`:`${Y}m`}const P=S.getTime()-c.getTime(),N=Math.floor(P/(1e3*60*60*24)),k=Math.floor(P%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(P%(1e3*60*60)/(1e3*60));return N>0?`${N}d ${k}h ${A}m`:k>0?`${k}h ${A}m`:`${A}m`}catch{return null}}function zh({gameweek:s,variant:n="coming-soon",message:r,linkTo:o,deadlineText:a}){const l=n==="live",c=x.useMemo(()=>l&&a?R1(a):null,[l,a]),f=l?"#e9f0ef":"#e1eae9",p="text-slate-900",g="text-slate-600",_=r||"Fixtures will be published soon.";return h.jsx("div",{className:"w-full px-4 py-3 relative gameweek-banner z-40",style:{backgroundColor:f},"data-banner-height":!0,children:h.jsxs("div",{className:"mx-auto max-w-6xl flex items-start justify-between gap-4",children:[h.jsx("div",{className:"flex flex-col gap-0 flex-1 min-w-0",children:l?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-[#1C8376] flex items-center justify-center text-white text-[10px] font-normal",children:"!"}),h.jsxs("div",{className:`font-bold ${p} text-base`,children:["Gameweek ",s," is now live!"]})]}),h.jsxs("div",{className:`text-sm ${g} ml-[32px]`,children:["Make your predictions"," ",c?h.jsxs(h.Fragment,{children:["before the window closes in"," ",h.jsx("span",{className:"text-[#1C8376] font-bold",children:c})]}):h.jsx("span",{children:"now"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-[#1C8376] flex items-center justify-center text-white text-[10px] font-normal",children:"!"}),h.jsxs("div",{className:`font-bold ${p} text-base`,children:["GW",s," Coming Soon!"]})]}),h.jsx("div",{className:`text-sm ${g} ml-[32px]`,children:_})]})}),l&&o&&h.jsxs(Qn,{to:o,className:"flex-shrink-0 px-4 py-2 bg-[#1C8376] text-white rounded-[20px] font-medium hover:bg-[#1C8376]/90 transition-colors flex items-center gap-1",onClick:b=>b.stopPropagation(),children:["Go",h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})}function T1(){const{user:s}=ur();console.log("[PredictionsBanner] Component rendered, checking visibility...");const[n,r]=Cn.useState(!1),[o,a]=Cn.useState(null),[l,c]=Cn.useState(null),[f,p]=Cn.useState(null);return Cn.useEffect(()=>{let g=!0;const w=async()=>{try{console.log("[PredictionsBanner]  Starting banner check...");const{data:T,error:$}=await Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle();if($){console.error("[PredictionsBanner]  Error fetching current_gw:",$),g&&setTimeout(()=>{g&&w()},5e3);return}const M=T?.current_gw??null;if(!g)return;if(console.log("[PredictionsBanner]  Current GW:",M),a(M),!M){console.log("[PredictionsBanner]  No current_gw found"),g&&r(!1);return}const{count:Y,error:re}=await Z.from("app_fixtures").select("id",{count:"exact",head:!0}).eq("gw",M);if(re){console.error("[PredictionsBanner]  Error fetching fixtures:",re),g&&setTimeout(()=>{g&&w()},5e3);return}if(!g)return;console.log("[PredictionsBanner]  Current GW fixtures count:",Y||0);const{count:Ie,error:Me}=await Z.from("app_gw_results").select("gw",{count:"exact",head:!0}).eq("gw",M);if(Me){console.error("[PredictionsBanner]  Error fetching results:",Me),g&&setTimeout(()=>{g&&w()},5e3);return}if(!g)return;const He=(Ie??0)>0;if(console.log("[PredictionsBanner]  Results published for GW",M,":",He,"(count:",Ie||0,")"),!Y){c("watch-space"),r(!0),p(null);return}const{data:Ve}=await Z.from("app_fixtures").select("kickoff_time").eq("gw",M).order("kickoff_time",{ascending:!0}).limit(1);if(Ve&&Ve.length>0&&Ve[0].kickoff_time){const ue=new Date(Ve[0].kickoff_time),Se=new Date(ue.getTime()-4500*1e3),Pe=Se.toLocaleDateString(void 0,{weekday:"short"}),te=Se.toLocaleDateString(void 0,{month:"short"}),we=Se.toLocaleDateString(void 0,{day:"numeric"}),C=String(Se.getUTCHours()).padStart(2,"0"),v=String(Se.getUTCMinutes()).padStart(2,"0"),R=`${Pe}, ${te} ${we}, ${C}:${v}`;p(R)}else p(null);if(He){const ue=M+1;console.log(`[PredictionsBanner]  Checking if GW ${ue} fixtures exist...`);const{count:Se,error:Pe}=await Z.from("app_fixtures").select("id",{count:"exact",head:!0}).eq("gw",ue);if(!g)return;if(Pe){console.error("[PredictionsBanner]  Error checking next GW fixtures:",Pe),console.log(`[PredictionsBanner]  Error checking GW ${ue} fixtures - assuming they don't exist, showing banner`),g&&(c("watch-space"),r(!0));return}console.log(`[PredictionsBanner]  Results published for GW ${M}, checking GW ${ue} fixtures:`,Se||0),Se!=null&&Se>0?(console.log(`[PredictionsBanner] Next GW ${ue} fixtures exist (${Se}), hiding banner`),g&&r(!1)):(console.log(`[PredictionsBanner]  Results published for GW ${M}, GW ${ue} fixtures not ready (count: ${Se}) - showing coming soon banner`),g&&(c("watch-space"),r(!0)));return}if(!s?.id){r(!1);return}const{data:rt}=await Z.from("app_fixtures").select("fixture_index").eq("gw",M);if(!rt||rt.length===0){r(!1);return}const{data:Ye}=await Z.from("app_gw_submissions").select("submitted_at").eq("user_id",s.id).eq("gw",M).maybeSingle();if(!g)return;Ye?.submitted_at!==null&&Ye?.submitted_at!==void 0?(console.log("[PredictionsBanner] User has already submitted, hiding banner"),r(!1)):(console.log("[PredictionsBanner] User has not submitted, showing predictions banner"),c("predictions"),r(!0))}catch(T){console.error("[PredictionsBanner] Error in refreshBanner:",T),g&&r(!1)}};w();let _=0;const b=setInterval(()=>{g&&(_++,console.log(`[PredictionsBanner]  Periodic refresh check #${_}`),w())},1e4),S=Z.channel("predictions-banner-gw-results").on("postgres_changes",{event:"*",schema:"public",table:"app_gw_results"},T=>{console.log("[PredictionsBanner]  app_gw_results change detected, refreshing banner"),g&&w()}).subscribe(T=>{T==="SUBSCRIBED"?console.log("[PredictionsBanner]  Subscribed to app_gw_results changes"):T==="CHANNEL_ERROR"&&console.error("[PredictionsBanner]  Subscription error for app_gw_results")}),P=Z.channel("predictions-banner-fixtures").on("postgres_changes",{event:"*",schema:"public",table:"app_fixtures"},T=>{console.log("[PredictionsBanner]  app_fixtures change detected, refreshing banner"),g&&w()}).subscribe(T=>{T==="SUBSCRIBED"?console.log("[PredictionsBanner]  Subscribed to app_fixtures changes"):T==="CHANNEL_ERROR"&&console.error("[PredictionsBanner]  Subscription error for app_fixtures")}),N=()=>{w()},k=()=>{w()},A=()=>{w()},j=()=>{document.hidden||w()};return window.addEventListener("predictionsSubmitted",N),window.addEventListener("resultsPublished",k),window.addEventListener("fixturesPublished",A),document.addEventListener("visibilitychange",j),()=>{g=!1,clearInterval(b),Z.removeChannel(S),Z.removeChannel(P),window.removeEventListener("predictionsSubmitted",N),window.removeEventListener("resultsPublished",k),window.removeEventListener("fixturesPublished",A),document.removeEventListener("visibilitychange",j)}},[s?.id]),n?l==="predictions"&&o?h.jsx(zh,{gameweek:o,variant:"live",deadlineText:f,linkTo:"/predictions"}):l==="watch-space"&&o?h.jsx(zh,{gameweek:(o||1)+1,variant:"coming-soon"}):null:null}const Ou=[{name:"Home",path:"/",icon:h.jsx("svg",{width:"24",height:"21",viewBox:"0 0 24 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M1.00586 10.7812C0.380859 10.7812 0 10.3516 0 9.84375C0 9.57031 0.126953 9.28711 0.380859 9.07227L10.5566 0.527344C10.9863 0.175781 11.4551 0 11.9238 0C12.3926 0 12.8613 0.175781 13.291 0.527344L18.1152 4.58984V2.85156C18.1152 2.42188 18.4082 2.13867 18.8477 2.13867H20.166C20.5957 2.13867 20.8789 2.42188 20.8789 2.85156V6.9043L23.4668 9.07227C23.7207 9.28711 23.8477 9.57031 23.8477 9.84375C23.8477 10.3516 23.4668 10.7812 22.8516 10.7812C22.5488 10.7812 22.2754 10.625 22.041 10.4199L20.8789 9.45312V18.623C20.8789 20.0684 20.0098 20.918 18.5352 20.918H5.32227C3.83789 20.918 2.96875 20.0684 2.96875 18.623V9.45312L1.80664 10.4199C1.57227 10.625 1.30859 10.7812 1.00586 10.7812ZM14.7461 13.3301V19.0039H18.0273C18.6328 19.0039 18.9648 18.6621 18.9648 18.0469V7.8418L12.3438 2.28516C12.207 2.16797 12.0605 2.11914 11.9238 2.11914C11.7871 2.11914 11.6406 2.16797 11.5137 2.28516L4.88281 7.8418V18.0469C4.88281 18.6621 5.21484 19.0039 5.82031 19.0039H9.10156V13.3301C9.10156 12.8711 9.4043 12.5781 9.86328 12.5781H13.9941C14.4531 12.5781 14.7461 12.8711 14.7461 13.3301Z",fill:"currentColor"})})},{name:"Predictions",path:"/predictions",icon:h.jsx("svg",{width:"41",height:"22",viewBox:"0 0 41 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M29.5 0C35.3447 0 40.0928 4.74805 40.0928 10.5928C40.0925 16.4373 35.3446 21.1846 29.5 21.1846C23.6554 21.1846 18.9085 16.4373 18.9082 10.5928C18.9082 4.74805 23.6553 0 29.5 0ZM18 17.9961C18.5523 17.9961 19 18.4438 19 18.9961C19 19.5484 18.5523 19.9961 18 19.9961H8C7.44772 19.9961 7 19.5484 7 18.9961C7 18.4438 7.44772 17.9961 8 17.9961H18ZM26.3008 16.1504L27.0088 19.1855C27.7982 19.4213 28.6389 19.5439 29.5 19.5439C30.3613 19.5439 31.2026 19.4214 31.9922 19.1855L32.6895 16.1914L31.3359 14.4688H27.6133L26.3008 16.1504ZM33.2432 10.3057L32.207 13.5254L33.6631 15.4014L37.0166 15.4531C37.9189 14.0483 38.4521 12.3867 38.4521 10.6025L35.96 9.20801L33.2432 10.3057ZM20.5488 10.6025C20.5591 12.3765 21.0718 14.0278 21.9639 15.4121L25.3271 15.3604L26.7832 13.4844L25.7578 10.3057L23.04 9.20801L20.5488 10.6025ZM12.1025 9.00098C12.6067 9.05231 13 9.47842 13 9.99609C13 10.5138 12.6067 10.9399 12.1025 10.9912L12 10.9961H1C0.447715 10.9961 0 10.5484 0 9.99609C0 9.44381 0.447715 8.99609 1 8.99609H12L12.1025 9.00098ZM26.3525 2.21484C24.8556 2.76852 23.5532 3.72228 22.5586 4.94238L23.502 8.03906L26.1064 9.0957L28.875 6.96289V4.24512L26.3525 2.21484ZM30.126 4.22461V6.96289L32.8945 9.0957L35.499 8.03906L36.4424 4.94238C35.4479 3.72233 34.135 2.76907 32.6279 2.20508L30.126 4.22461ZM18 0.996094C18.5523 0.996094 19 1.44381 19 1.99609C19 2.54838 18.5523 2.99609 18 2.99609H8C7.44772 2.99609 7 2.54838 7 1.99609C7 1.44381 7.44772 0.996094 8 0.996094H18Z",fill:"currentColor"})})},{name:"Mini Leagues",path:"/tables",icon:h.jsx("svg",{width:"29",height:"23",viewBox:"0 0 29 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M15.0586 18.9746C13.0664 18.9746 11.709 18.2031 11.0938 16.7871L7.7832 19.707C7.11914 20.3027 6.70898 20.5664 6.16211 20.5664C5.38086 20.5664 4.92188 20.0195 4.92188 19.1602V16.748H4.52148C1.68945 16.748 0 15.0684 0 12.1582V4.58984C0 1.67969 1.65039 0 4.58984 0H17.041C19.9805 0 21.6309 1.68945 21.6309 4.58984V4.87305H24.2676C27.0801 4.87305 28.6133 6.43555 28.6133 9.18945V14.7168C28.6133 17.4414 27.0996 18.9746 24.3262 18.9746H24.1504V21.2109C24.1504 22.0605 23.6914 22.6074 22.9199 22.6074C22.3926 22.6074 21.9434 22.3145 21.3086 21.7578L18.0566 18.9746H15.0586ZM6.64062 15.6348V18.418L9.73633 15.3516C10.0684 15.0098 10.3223 14.8828 10.7129 14.8438C10.7129 14.8047 10.7031 14.7656 10.7031 14.7266V9.18945C10.7031 6.43555 12.2461 4.87305 15.0586 4.87305H19.7168V4.64844C19.7168 2.85156 18.8281 1.91406 16.9824 1.91406H4.63867C2.79297 1.91406 1.91406 2.85156 1.91406 4.64844V12.0996C1.91406 13.8965 2.79297 14.834 4.63867 14.834H5.83984C6.39648 14.834 6.64062 15.0488 6.64062 15.6348ZM15.2051 17.0996H18.0176C18.4668 17.0996 18.8477 17.2559 19.2188 17.6074L22.4316 20.5176V17.9785C22.4316 17.3926 22.793 17.0996 23.2715 17.0996H24.1211C25.9082 17.0996 26.7188 16.2207 26.7188 14.5117V9.33594C26.7188 7.62695 25.9082 6.74805 24.1211 6.74805H15.2051C13.418 6.74805 12.6074 7.62695 12.6074 9.33594V14.5117C12.6074 16.2207 13.418 17.0996 15.2051 17.0996ZM16.3184 10.9961C15.8691 10.9961 15.5469 10.6445 15.5469 10.2148C15.5469 9.76562 15.8691 9.43359 16.3184 9.43359H23.0566C23.5059 9.43359 23.8379 9.76562 23.8379 10.2148C23.8379 10.6445 23.5059 10.9961 23.0566 10.9961H16.3184ZM16.3184 14.5605C15.8691 14.5605 15.5469 14.2285 15.5469 13.7891C15.5469 13.3496 15.8691 12.998 16.3184 12.998H21.2109C21.6504 12.998 21.9922 13.3496 21.9922 13.7891C21.9922 14.2285 21.6504 14.5605 21.2109 14.5605H16.3184Z",fill:"currentColor"})})},{name:"Leaderboards",path:"/global",icon:h.jsx("svg",{width:"20",height:"22",viewBox:"0 0 20 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M0 3.36914C0 2.28516 0.693359 1.61133 1.82617 1.61133H3.68164C3.88672 0.595703 4.63867 0 5.84961 0H13.7012C14.9219 0 15.6738 0.605469 15.8691 1.61133H17.7246C18.8574 1.61133 19.5508 2.28516 19.5508 3.36914C19.5508 7.34375 17.5879 9.90234 13.7109 11.1133C13.2031 11.7676 12.6172 12.2949 12.0605 12.6855V16.6309H13.2031C14.5996 16.6309 15.3613 17.4609 15.3613 18.7891V20.8496C15.3613 21.3672 14.9609 21.7188 14.4727 21.7188H5.07812C4.58984 21.7188 4.18945 21.3672 4.18945 20.8496V18.7891C4.18945 17.4609 4.95117 16.6309 6.34766 16.6309H7.49023V12.6758C6.93359 12.2949 6.35742 11.7676 5.84961 11.1133C1.96289 9.90234 0 7.34375 0 3.36914ZM5.35156 5.40039C5.35156 8.84766 8.49609 11.8555 9.77539 11.8555C11.0547 11.8555 14.1992 8.84766 14.1992 5.40039V2.32422C14.1992 1.98242 13.9648 1.75781 13.623 1.75781H5.92773C5.58594 1.75781 5.35156 1.98242 5.35156 2.32422V5.40039ZM1.63086 3.59375C1.63086 6.09375 2.60742 7.85156 4.47266 8.84766C3.93555 7.75391 3.60352 6.48438 3.60352 5.12695V3.33008H1.9043C1.73828 3.33008 1.63086 3.4375 1.63086 3.59375ZM15.0781 8.84766C16.9434 7.85156 17.9199 6.09375 17.9199 3.59375C17.9199 3.4375 17.8125 3.33008 17.6465 3.33008H15.9473V5.12695C15.9473 6.48438 15.6152 7.75391 15.0781 8.84766ZM9.16016 16.6309H10.3906V13.5059C10.1758 13.5645 9.9707 13.5938 9.77539 13.5938C9.58008 13.5938 9.375 13.5645 9.16016 13.5059V16.6309ZM5.9375 19.9707H13.6133V18.9355C13.6133 18.6035 13.3887 18.3887 13.0566 18.3887H6.49414C6.16211 18.3887 5.9375 18.6035 5.9375 18.9355V19.9707Z",fill:"currentColor"})})}];function N1({shouldHide:s=!1}){const n=hi(),r=er(),{user:o}=ur(),a=x.useRef(null),l=x.useRef([]),[c,f]=x.useState(null),[p,g]=x.useState(!1);return x.useEffect(()=>{const w=()=>{const b=Ou.findIndex(S=>r.pathname===S.path);if(b>=0&&a.current){const P=a.current.getBoundingClientRect(),N=P.width,k=P.height,A=N*.25,j=k,T=b*A,$=b===0,M=b===Ou.length-1,Y=60,re=72;f({width:A,height:j,left:T,borderRadius:Y,borderTopLeftRadius:$?Y:re,borderBottomLeftRadius:$?Y:re,borderTopRightRadius:M?Y:re,borderBottomRightRadius:M?Y:re,activeIndex:b})}},_=setTimeout(w,0);return window.addEventListener("resize",w),()=>{clearTimeout(_),window.removeEventListener("resize",w)}},[r.pathname]),x.useEffect(()=>{let w=!0;const _=async()=>{if(!o?.id){g(!1);return}try{const{data:S}=await Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle(),P=S?.current_gw??null;if(!P||!w){g(!1);return}const{count:N}=await Z.from("app_fixtures").select("id",{count:"exact",head:!0}).eq("gw",P);if(!N||!w){g(!1);return}const{count:k}=await Z.from("app_gw_results").select("gw",{count:"exact",head:!0}).eq("gw",P);if((k??0)>0||!w){g(!1);return}const{data:j}=await Z.from("app_gw_submissions").select("submitted_at").eq("user_id",o.id).eq("gw",P).maybeSingle();if(!w)return;const T=j?.submitted_at!==null&&j?.submitted_at!==void 0;g(!T)}catch(S){console.error("[BottomNav] Error checking predictions:",S),w&&g(!1)}};_();const b=()=>{_()};return window.addEventListener("predictionsSubmitted",b),()=>{w=!1,window.removeEventListener("predictionsSubmitted",b)}},[o?.id]),h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        .bottom-nav-absolute {
          position: fixed !important;
          bottom: 0px !important;
          left: 0px !important;
          right: 0px !important;
          width: 100vw !important;
          max-width: 100vw !important;
          z-index: 99999 !important;
          transform: translate3d(0, 0, 0) !important;
          -webkit-transform: translate3d(0, 0, 0) !important;
          will-change: transform !important;
          contain: layout style paint !important;
          pointer-events: auto !important;
          transition: transform 0.3s ease-in-out !important;
        }
        .bottom-nav-slide-out {
          transform: translate3d(0, 100%, 0) !important;
          -webkit-transform: translate3d(0, 100%, 0) !important;
        }
        .bottom-nav-slide-in {
          transform: translate3d(0, 0, 0) !important;
          -webkit-transform: translate3d(0, 0, 0) !important;
        }
        @supports (padding-bottom: env(safe-area-inset-bottom)) {
          .bottom-nav-absolute {
            padding-bottom: env(safe-area-inset-bottom) !important;
          }
        }
        @media (max-height: 800px) {
          .bottom-nav-absolute {
            position: fixed !important;
            bottom: 0px !important;
          }
        }
        @keyframes shimmer {
          0% {
            transform: translateX(-100%) skewX(-15deg);
            opacity: 0;
          }
          50% {
            opacity: 1;
          }
          100% {
            transform: translateX(100%) skewX(-15deg);
            opacity: 0;
          }
        }
        .predictions-shiny {
          animation: shiny-gradient 3s ease-in-out infinite;
        }
        @keyframes shiny-gradient {
          0%, 100% {
            color: #facc15; /* yellow-400 */
          }
          25% {
            color: #f97316; /* orange-500 */
          }
          50% {
            color: #ec4899; /* pink-500 */
          }
          75% {
            color: #9333ea; /* purple-600 */
          }
        }
        .predictions-shiny svg {
          position: relative;
          z-index: 2;
          overflow: visible;
        }
        .predictions-shiny svg path {
          fill: currentColor;
        }
        .predictions-shiny-icon-wrapper {
          position: relative;
          display: inline-flex;
          width: 41px;
          height: 22px;
          overflow: hidden;
        }
        .predictions-shiny-icon-wrapper svg {
          position: relative;
          z-index: 2;
        }
        .predictions-shiny-icon-wrapper::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: linear-gradient(
            90deg,
            transparent 0%,
            transparent 40%,
            rgba(255, 255, 255, 0.7) 50%,
            transparent 60%,
            transparent 100%
          );
          animation: shimmer 1.2s ease-in-out infinite;
          pointer-events: none;
          z-index: 3;
          mix-blend-mode: overlay;
        }
        .predictions-shiny-icon-wrapper::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: linear-gradient(
            90deg,
            transparent 0%,
            transparent 40%,
            rgba(254, 240, 138, 0.5) 50%,
            transparent 60%,
            transparent 100%
          );
          animation: shimmer 1.8s ease-in-out infinite 0.4s;
          pointer-events: none;
          z-index: 3;
          mix-blend-mode: overlay;
        }
        .predictions-shiny-text {
          position: relative;
          z-index: 2;
        }
      `}),h.jsx("div",{className:`bottom-nav-absolute flex items-center justify-center px-4 pb-8 ${s?"bottom-nav-slide-out":"bottom-nav-slide-in"}`,children:h.jsxs("div",{ref:a,className:"bg-white border border-[#E5E7EB] flex items-center relative overflow-hidden",style:{width:"360px",height:"70px",borderRadius:"60px",marginBottom:"1.5rem"},children:[c&&h.jsx("div",{className:"absolute",style:{width:`${c.width}px`,height:`${c.height}px`,left:`${c.left}px`,top:"0",backgroundColor:"rgba(28, 131, 118, 0.1)",borderTopLeftRadius:`${c.borderTopLeftRadius}px`,borderBottomLeftRadius:`${c.borderBottomLeftRadius}px`,borderTopRightRadius:`${c.borderTopRightRadius}px`,borderBottomRightRadius:`${c.borderBottomRightRadius}px`,transition:"all 0.3s ease",zIndex:0}}),Ou.map((w,_)=>{const b=r.pathname===w.path,P=w.name==="Predictions"&&p&&!b;return h.jsxs("button",{ref:N=>{l.current[_]=N},onClick:()=>n(w.path),className:"relative z-10 flex flex-col items-center justify-center transition-all duration-300",style:{width:"25%",height:"70px",padding:"0",gap:"4px",flexShrink:0},children:[h.jsx("div",{className:`flex items-center justify-center w-full ${P?"predictions-shiny":""}`,style:{height:"26px",padding:"4px",...P?{}:{color:b?"#1C8376":"#353536"}},children:h.jsx("div",{className:`flex items-center justify-center ${P?"predictions-shiny-icon-wrapper":""}`,style:{height:"21px",width:"auto",fontSize:"20px",position:"relative"},children:w.icon})}),h.jsx("div",{className:`flex items-center justify-center w-full ${P?"predictions-shiny":""}`,style:{height:"10px",padding:"0px 2px",overflow:"hidden",position:"relative"},children:h.jsx("span",{className:`relative z-10 font-medium whitespace-nowrap ${P?"predictions-shiny-text":""}`,style:{fontSize:"8px",lineHeight:"10px",color:b?"#1C8376":"#353536",textAlign:"center",maxWidth:"100%"},children:w.name})})]},w.name)})]})})]})}function L1(){const[s,n]=x.useState(0);x.useEffect(()=>{const o=()=>{const c=document.querySelector(".gameweek-banner, [data-banner-height]");if(c){const g=c.getBoundingClientRect();if(g.height>0&&g.top>=0&&g.top<200){n(g.height);return}}const f=document.querySelectorAll('[style*="background-color: #1C8376"], [style*="background-color: #e1eae9"]');let p=0;f.forEach(g=>{const w=g.getBoundingClientRect();w.top>=0&&w.top<200&&w.height>40&&w.height<200&&(p=Math.max(p,w.height))}),n(p)},a=setTimeout(o,100),l=new MutationObserver(()=>{setTimeout(o,50)});return l.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("resize",o),window.addEventListener("scroll",o),()=>{clearTimeout(a),l.disconnect(),window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}},[]);const r=s>0?s+16:16;return h.jsxs("div",{className:"fixed right-4 z-50 flex items-center gap-2",style:{top:`${r}px`,transition:"top 0.2s ease-in-out"},children:[h.jsx(Qn,{to:"/how-to-play",className:"w-12 h-12 rounded-full bg-[#1C8376] shadow-lg flex items-center justify-center hover:bg-[#178f72] transition-all",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:h.jsx("img",{src:"/assets/Icons/School--Streamline-Outlined-Material-Pr0_White.png",alt:"How To Play",className:"w-6 h-6"})}),h.jsx(Qn,{to:"/profile",className:"w-12 h-12 rounded-full bg-[#1C8376] shadow-lg flex items-center justify-center hover:bg-[#178f72] transition-all",style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:h.jsx("img",{src:"/assets/Icons/Person--Streamline-Outlined-Material-Pro_white.png",alt:"Profile",className:"w-6 h-6"})})]})}class Wh extends x.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("[ErrorBoundary] Caught error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:h.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl border border-slate-200 shadow-sm p-6 text-center",children:[h.jsx("div",{className:"text-4xl mb-4",children:""}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Something went wrong"}),h.jsx("p",{className:"text-slate-600 mb-4",children:"The app encountered an error. Please try refreshing."}),h.jsx("button",{onClick:()=>{window.location.reload()},className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Reload App"}),this.state.error&&h.jsxs("details",{className:"mt-4 text-left",children:[h.jsx("summary",{className:"text-sm text-slate-500 cursor-pointer",children:"Error details"}),h.jsx("pre",{className:"mt-2 text-xs bg-slate-100 p-2 rounded overflow-auto",children:this.state.error.toString()})]})]})}):this.props.children}}const I1={LOAD_EVERYTHING_FIRST:"loadEverythingFirst"};function O1(s){if(typeof window>"u")return!1;try{return localStorage.getItem(`feature:${s}`)==="true"}catch{return!1}}function A1(){return O1(I1.LOAD_EVERYTHING_FIRST)}async function Au(s){const n=`home:basic:${s}`,r=Um(n),o=r?Date.now()-r:1/0;if(!r||o>Ft.HOME*.5)try{Promise.all([Z.from("league_members").select("leagues(id, name, code, avatar, created_at)").eq("user_id",s),Z.from("gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle(),Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle(),Z.from("v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0}),Z.from("v_ocp_overall").select("user_id, name, ocp")]).catch(()=>{})}catch{}}async function Mu(s){const n=`tables:${s}`,r=Um(n),o=r?Date.now()-r:1/0;if(!r||o>Ft.TABLES*.5)try{const a=await Z.from("league_members").select("league_id").eq("user_id",s);if(a.error||!a.data?.length)return;const l=a.data.map(c=>c.league_id);Promise.all([Z.from("leagues").select("id,name,code,created_at,avatar").in("id",l).order("created_at",{ascending:!0}),Z.from("league_members").select("league_id,user_id").in("league_id",l).limit(1e4),Z.from("league_message_reads").select("league_id,last_read_at").eq("user_id",s),Z.from("gw_results").select("gw,fixture_index,result"),Z.from("fixtures").select("gw,kickoff_time").order("gw",{ascending:!0}).order("kickoff_time",{ascending:!0})]).catch(()=>{})}catch{}}function M1(){const{user:s}=ur();x.useEffect(()=>{if(A1()||!s?.id)return;Au(s.id),Mu(s.id);const n=()=>{!document.hidden&&s.id&&(Au(s.id),Mu(s.id))};document.addEventListener("visibilitychange",n);const r=()=>{s.id&&(Au(s.id),Mu(s.id))};return window.addEventListener("focus",r),()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("focus",r)}},[s?.id])}function $1(){return h.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center z-50",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-8",children:h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-[#1C8376] mx-auto"})}),h.jsxs("div",{className:"text-slate-700",children:[h.jsx("div",{className:"text-2xl font-bold mb-2",children:"Loading TOTL..."}),h.jsx("div",{className:"text-sm text-slate-500",children:"Fetching your data"})]})]})})}async function D1(s){pt.debug("preload/leagues_prewarm_start",{userId:s.slice(0,8)});const{leagueIds:n}=await i1(s);pt.debug("preload/leagues_prewarm_complete",{count:n.length});const r=nn(`leagues:${s}`)||[],[o,a,l,c,f,p,g,w,_,b,S,P,N]=await Promise.all([Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle(),Z.from("app_v_gw_points").select("user_id, gw, points").order("gw",{ascending:!0}),Z.from("app_v_ocp_overall").select("user_id, name, ocp").order("ocp",{ascending:!1}),Promise.resolve({data:null,error:null}),Promise.resolve({data:null,error:null}),Z.from("league_members").select("league_id, user_id").limit(1e4),Z.from("app_gw_results").select("gw").order("gw",{ascending:!1}).limit(1).maybeSingle(),Z.from("picks").select("user_id").limit(1e4),Promise.resolve({data:null,error:null}),Promise.resolve({data:null,error:null}),Z.from("app_gw_results").select("gw, fixture_index, result"),Z.from("app_fixtures").select("gw, kickoff_time").order("gw",{ascending:!0}).order("kickoff_time",{ascending:!0}),Promise.resolve({data:null,error:null})]);if(o.error)throw new Error(`Failed to load current GW: ${o.error.message}`);if(a.error)throw new Error(`Failed to load GW points: ${a.error.message}`);if(l.error)throw new Error(`Failed to load overall standings: ${l.error.message}`);if(p.error)throw new Error(`Failed to load league members: ${p.error.message}`);if(g.error)throw new Error(`Failed to load latest GW: ${g.error.message}`);if(w.error)throw new Error(`Failed to load Web picks: ${w.error.message}`);const k=o.data?.current_gw??1,A=g.data?.gw??null,[j,T]=await Promise.all([Z.from("app_fixtures").select("*").eq("gw",k).order("fixture_index",{ascending:!0}),Z.from("app_picks").select("fixture_index, pick").eq("user_id",s).eq("gw",k)]);if(j.error)throw new Error(`Failed to load fixtures: ${j.error.message}`);if(T.error)throw new Error(`Failed to load picks: ${T.error.message}`);const $=r;n.length>0&&(async()=>{try{const[D,B,F]=await Promise.all([Z.from("leagues").select("id, name, code, created_at, avatar").in("id",n).order("created_at",{ascending:!0}),Z.from("league_members").select("league_id, user_id, users(id, name)").in("league_id",n).limit(1e4),Z.from("app_gw_submissions").select("user_id").eq("gw",k).limit(1e4)]);if(!D.error&&!B.error&&!F.error){const q=nn(`leagues:unread:${s}`)||{},H=D.data||[],se=new Map;(B.data||[]).forEach(V=>{const ge=se.get(V.league_id)??[];ge.push(V.user_id),se.set(V.league_id,ge)});const ke=new Set((F.data||[]).map(V=>V.user_id)),ve=H.filter(V=>V.name!=="API Test").map(V=>{const ge=se.get(V.id)??[];return{id:V.id,name:V.name,code:V.code,memberCount:ge.length,avatar:V.avatar||null,created_at:V.created_at||null}}),pe=nc(ve,q);pt.debug("preload/tables_leagues_sorted",{count:pe.length});const O={};for(const V of H){const ge=se.get(V.id)??[],J=ge.length,ee=ge.reduce((X,ce)=>X+(ke.has(ce)?1:0),0);O[V.id]={allSubmitted:ee===J&&J>0,submittedCount:ee,totalCount:J}}Jt(`tables:${s}`,{rows:pe,currentGw:k,leagueSubmissions:O,unreadByLeague:q,leagueData:{}},Ft.TABLES),console.log("[Pre-loading] Tables page data cached successfully")}}catch(D){console.warn("[Pre-loading] Failed to load Tables page data:",D)}})();const M={};(T.data||[]).forEach(D=>{M[D.fixture_index]=D.pick});const Y=new Set;(w.data||[]).forEach(D=>{D.user_id&&Y.add(D.user_id)});const Me=(a.data||[]).filter(D=>D.user_id===s).filter(D=>D.gw===A).reduce((D,B)=>D+(B.points||0),0),Ve=(a.data||[]).filter(D=>D.gw===A).map(D=>({user_id:D.user_id,points:D.points||0})).sort((D,B)=>B.points-D.points),rt=Ve.findIndex(D=>D.user_id===s),Ye=rt>=0?{rank:rt+1,total:Ve.length,score:Me,gw:A||1,totalFixtures:j.data?.length||0,isTied:rt>0&&Ve[rt-1]?.points===Me}:null,ut=(D,B,F,q,H)=>{if(B<D||!A||A<B)return null;const se=F.filter(J=>J.gw>=D&&J.gw<=B),ke=new Map;q.forEach(J=>{ke.set(J.user_id,{user_id:J.user_id,name:J.name??"User",formPoints:0,weeksPlayed:new Set})}),se.forEach(J=>{const ee=ke.get(J.user_id);ee&&(ee.formPoints+=J.points??0,ee.weeksPlayed.add(J.gw))});const ve=Array.from(ke.values()).filter(J=>{for(let ee=D;ee<=B;ee++)if(!J.weeksPlayed.has(ee))return!1;return!0}).sort((J,ee)=>ee.formPoints-J.formPoints||J.name.localeCompare(ee.name));if(ve.length===0)return null;let pe=1;const O=ve.map((J,ee)=>(ee>0&&ve[ee-1].formPoints!==J.formPoints&&(pe=ee+1),{...J,rank:pe})),V=O.find(J=>J.user_id===H);if(!V)return null;const ge=O.filter(J=>J.rank===V.rank).length;return{rank:V.rank,total:O.length,isTied:ge>1}},ue=A&&A>=5?ut(A-4,A,a.data||[],l.data||[],s):null,Se=A&&A>=10?ut(A-9,A,a.data||[],l.data||[],s):null;let Pe=null;if(l.data&&l.data.length>0){const D=[...l.data].sort((H,se)=>(se.ocp??0)-(H.ocp??0)||(H.name??"User").localeCompare(se.name??"User"));let B=1;const F=D.map((H,se)=>(se>0&&(D[se-1].ocp??0)!==(H.ocp??0)&&(B=se+1),{...H,rank:B})),q=F.find(H=>H.user_id===s);if(q){const H=F.filter(se=>se.rank===q.rank).length;Pe={rank:q.rank,total:l.data.length,isTied:H>1}}}const te={},we=new Set($.map(D=>D.id));(p.data||[]).forEach(D=>{we.has(D.league_id)&&(te[D.league_id]||(te[D.league_id]={id:D.league_id,members:[],userPosition:null,positionChange:null}))});const C=$.some(D=>D.name==="API Test"),v=`home:basic:${s}`;Jt(v,{leagues:$,currentGw:k,latestGw:A,allGwPoints:a.data||[],overall:l.data||[],lastGwRank:Ye,fiveGwRank:ue,tenGwRank:Se,seasonRank:Pe,isInApiTestLeague:C},Ft.HOME);const R=`home:fixtures:${s}:${k}`;Jt(R,{fixtures:j.data||[],userPicks:M},Ft.HOME);const z=A??1,K={};return z>1&&(a.data||[]).filter(B=>B.gw<z).forEach(B=>{K[B.user_id]=(K[B.user_id]??0)+(B.points||0)}),Jt("global:leaderboard",{latestGw:z,gwPoints:a.data||[],overall:l.data||[],prevOcp:K},Ft.GLOBAL),console.log("[Pre-loading] Global page data cached:",{latestGw:z,gwPointsCount:(a.data||[]).length}),(async()=>{try{const{data:D,error:B}=await Z.from("app_fixtures").select("*").eq("gw",k).order("fixture_index",{ascending:!0});if(!B&&D&&D.length>0){const{data:F,error:q}=await Z.from("app_picks").select("gw, fixture_index, pick").eq("user_id",s).eq("gw",k),{data:H,error:se}=await Z.from("app_gw_submissions").select("submitted_at").eq("gw",k).eq("user_id",s).maybeSingle();if(!q&&!se){const ke=D.map(O=>({id:O.id||String(O.api_match_id||O.fixture_index),gw:k,fixture_index:O.fixture_index,home_team:O.home_team,away_team:O.away_team,home_code:O.home_code,away_code:O.away_code,home_name:O.home_name,away_name:O.away_name,home_crest:null,away_crest:null,kickoff_time:O.kickoff_time,api_match_id:O.api_match_id||null})),ve=(F||[]).map(O=>({fixture_index:O.fixture_index,pick:O.pick,matchday:k})),pe=`predictions:${s}:${k}`;Jt(pe,{fixtures:ke,picks:ve,submitted:!!H?.submitted_at,results:[]},Ft.HOME),console.log("[Pre-loading] TestApiPredictions page data cached:",{fixturesCount:ke.length,picksCount:ve.length,submitted:!!H?.submitted_at})}}}catch(D){console.warn("[Pre-loading] Failed to preload TestApiPredictions data:",D)}})(),{currentGw:k,latestGw:A,leagues:$,allGwPoints:a.data||[],overall:l.data||[],lastGwRank:Ye,fixtures:j.data||[],userPicks:M,leagueData:te,webUserIds:Y,isInApiTestLeague:C}}const U1=x.lazy(()=>Tt(()=>import("./League-XiRxkBkm.js"),__vite__mapDeps([0,1]))),F1=x.lazy(()=>Tt(()=>import("./Admin-DI8UFuY6.js"),[])),B1=x.lazy(()=>Tt(()=>import("./AdminData-QmeSEV7Z.js"),[])),G1=x.lazy(()=>Tt(()=>import("./TempGlobal-CrkKAXEQ.js"),[])),z1=x.lazy(()=>Tt(()=>import("./CreateLeague-Tg4j3fwF.js"),[])),W1=x.lazy(()=>Tt(()=>import("./HowToPlay-B-FZGexV.js"),[])),H1=x.lazy(()=>Tt(()=>import("./NewPredictionsCentre-Tl4LpzXz.js"),[])),V1=x.lazy(()=>Tt(()=>import("./TestApiPredictions-xZ_GpiSt.js"),__vite__mapDeps([2,1]))),q1=x.lazy(()=>Tt(()=>import("./TestAdminApi-BYaIIZY6.js"),[])),K1=x.lazy(()=>Tt(()=>import("./ApiAdmin-Bh0KeycP.js"),[])),J1=x.lazy(()=>Tt(()=>import("./TestFixtures-BAswr_C6.js"),[])),Y1=x.lazy(()=>Tt(()=>import("./TestDespia-BbTrGHxZ.js"),[])),Q1=x.lazy(()=>Tt(()=>import("./Profile-ijh7O53Q.js"),[])),Z1=x.lazy(()=>Tt(()=>import("./NotificationCentre-DJD1JinL.js"),__vite__mapDeps([3,4]))),X1=x.lazy(()=>Tt(()=>import("./EmailPreferences-BA6Pgdu_.js"),__vite__mapDeps([5,4]))),e_=x.lazy(()=>Tt(()=>import("./Stats-D5uoGdtF.js"),__vite__mapDeps([6,1]))),t_=x.lazy(()=>Tt(()=>import("./SignIn-DCblC3t8.js"),[])),n_=()=>h.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1C8376]"})});function Ot({children:s}){const{user:n,loading:r}=ur();return r?h.jsx("div",{className:"p-6",children:"Loading"}):n?h.jsx(h.Fragment,{children:s}):h.jsx(tm,{to:"/auth",replace:!0})}function r_(){return h.jsx(K0,{children:h.jsx(s_,{})})}function s_(){const s=er(),n=hi(),{showWelcome:r,dismissWelcome:o,user:a,loading:l}=ur(),[c,f]=x.useState(!1),[p,g]=x.useState(!1),[w,_]=x.useState(!1),[b,S]=x.useState(!1),[P,N]=x.useState(null),[k,A]=x.useState(()=>{const j=localStorage.getItem("feature:loadEverythingFirst");return j===null?!0:j==="true"});return x.useEffect(()=>{const j=()=>{const $=localStorage.getItem("feature:loadEverythingFirst"),M=$===null?!0:$==="true";M!==k&&(console.log(`[Pre-loading] Flag changed: ${k} -> ${M}`),A(M))};j(),window.addEventListener("storage",j);const T=setInterval(j,1e3);return()=>{window.removeEventListener("storage",j),clearInterval(T)}},[k]),x.useEffect(()=>{k&&(console.log("[Pre-loading] Load everything first mode is ENABLED"),console.log('[Pre-loading] To disable, run: localStorage.setItem("feature:loadEverythingFirst", "false")'))},[k]),x.useEffect(()=>{if(console.log(`[Pre-loading] Effect triggered - flag: ${k}, authLoading: ${l}, userId: ${a?.id||"null"}, loaded: ${p}`),!k||l||!a?.id){!l&&a&&(console.log("[Pre-loading] Skipping pre-load (flag off or no user), setting loaded=true"),g(!0));return}if(p){console.log("[Pre-loading] Already loaded, skipping");return}console.log("[Pre-loading] Starting initial data load for user:",a.id),_s.initialDataStart(a.id);const j=Date.now();f(!0);const T=setTimeout(()=>{console.warn("[Pre-loading] Initial data loading timed out after 10 seconds, showing app anyway"),_s.initialDataTimeout(),g(!0),f(!1)},1e4);return console.log("[Pre-loading] Calling loadInitialData..."),D1(a.id).then(()=>{clearTimeout(T);const $=Date.now()-j;console.log("[Pre-loading] Initial data loaded successfully"),_s.initialDataSuccess($),g(!0),f(!1)}).catch($=>{clearTimeout(T),console.error("[Pre-loading] Failed to load initial data:",$),_s.initialDataError($?.message||"Unknown error"),g(!0),f(!1)}),()=>{clearTimeout(T)}},[k,l,a?.id,p]),M1(),x.useEffect(()=>{const j=()=>{const M=document.body.getAttribute("data-swipe-mode")==="true";S(M)};j();const T=new MutationObserver(j);T.observe(document.body,{attributes:!0,attributeFilter:["data-swipe-mode"]});const $=setInterval(j,200);return()=>{T.disconnect(),clearInterval($)}},[s.pathname]),x.useEffect(()=>{let j=!0;const T=async()=>{if(!a?.id||s.pathname!=="/predictions"){N(null);return}try{const{data:M}=await Z.from("app_meta").select("current_gw").eq("id",1).maybeSingle(),Y=M?.current_gw??null;if(!Y||!j){N(null);return}const{data:re}=await Z.from("gw_submissions").select("submitted_at").eq("user_id",a.id).eq("gw",Y).maybeSingle();if(!j)return;const Ie=re?.submitted_at!==null&&re?.submitted_at!==void 0;N(Ie)}catch(M){console.error("[AppContent] Error checking predictions submission:",M),j&&N(null)}};T();const $=()=>{T()};return window.addEventListener("predictionsSubmitted",$),()=>{j=!1,window.removeEventListener("predictionsSubmitted",$)}},[a?.id,s.pathname]),x.useEffect(()=>{const j=globalThis?.OneSignal||(typeof window<"u"?window?.OneSignal:null);j&&typeof j.on=="function"&&(j.on("notificationDisplay",$=>{console.log("[Notification] Notification displayed:",$)}),j.on("notificationClick",$=>{console.log("[Notification] Notification clicked:",$);const M=$?.notification?.additionalData||$?.data;M?.url?(console.log("[Notification] Navigating to:",M.url),n(M.url)):M?.leagueCode&&(console.log("[Notification] Navigating to league:",M.leagueCode),n(`/league/${M.leagueCode}`))})),(()=>{const $=window.location.hash,M=new URLSearchParams(window.location.search);if($&&$.startsWith("#/")){const re=$.slice(1);re.startsWith("/league/")&&n(re)}const Y=M.get("leagueCode");Y&&n(`/league/${Y}`)})()},[n]),x.useEffect(()=>{if(k){const j=setTimeout(()=>{console.warn("[Pre-loading] Maximum loading timeout reached (15s), forcing app to show"),_(!0)},15e3);return()=>clearTimeout(j)}},[k]),k&&!w&&(l||c||!p)?h.jsx($1,{}):h.jsxs(h.Fragment,{children:[s.pathname==="/"&&h.jsx(L1,{}),s.pathname!=="/auth"&&!s.pathname.startsWith("/league/")&&s.pathname!=="/predictions"&&s.pathname!=="/global"&&h.jsx(T1,{}),r&&h.jsx("div",{className:"fixed top-40 left-1/2 transform -translate-x-1/2 z-50 bg-[#1C8376] text-white px-8 py-5 rounded-lg shadow-lg w-11/12 max-w-4xl",children:h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"text-center pr-10",children:[h.jsx("div",{className:"font-bold text-xl",children:"Welcome to TOTL!"}),h.jsx("div",{className:"text-sm text-[#1C8376]/80 mt-1",children:"Your account is now active. Start making predictions!"})]}),h.jsx("button",{onClick:o,className:"absolute top-0 right-0 text-[#1C8376]/60 hover:text-white text-2xl font-bold","aria-label":"Dismiss",children:""})]})}),h.jsx(Wh,{children:h.jsx(x.Suspense,{fallback:h.jsx(n_,{}),children:h.jsxs(k0,{children:[h.jsx(Pt,{path:"/auth",element:h.jsx(t_,{})}),h.jsx(Pt,{path:"/new-predictions",element:h.jsx(Ot,{children:h.jsx(H1,{})})}),h.jsx(Pt,{path:"/predictions",element:h.jsx(Ot,{children:h.jsx(V1,{})})}),h.jsx(Pt,{path:"/test-admin-api",element:h.jsx(Ot,{children:h.jsx(q1,{})})}),h.jsx(Pt,{path:"/api-admin",element:h.jsx(Ot,{children:h.jsx(K1,{})})}),h.jsx(Pt,{path:"/test-fixtures",element:h.jsx(Ot,{children:h.jsx(J1,{})})}),h.jsx(Pt,{path:"/test-despia",element:h.jsx(Ot,{children:h.jsx(Y1,{})})}),h.jsx(Pt,{path:"/",element:h.jsx(Ot,{children:h.jsx(Wh,{children:h.jsx(l1,{})})})}),h.jsx(Pt,{path:"/tables",element:h.jsx(Ot,{children:h.jsx(u1,{})})}),h.jsx(Pt,{path:"/league/:code",element:h.jsx(Ot,{children:h.jsx(U1,{})})}),h.jsx(Pt,{path:"/predictions",element:h.jsx(Ot,{children:h.jsx(C1,{})})}),h.jsx(Pt,{path:"/global",element:h.jsx(Ot,{children:h.jsx(h1,{})})}),h.jsx(Pt,{path:"/temp-global",element:h.jsx(Ot,{children:h.jsx(G1,{})})}),h.jsx(Pt,{path:"/profile",element:h.jsx(Ot,{children:h.jsx(Q1,{})})}),h.jsx(Pt,{path:"/profile/notifications",element:h.jsx(Ot,{children:h.jsx(Z1,{})})}),h.jsx(Pt,{path:"/profile/email-preferences",element:h.jsx(Ot,{children:h.jsx(X1,{})})}),h.jsx(Pt,{path:"/profile/stats",element:h.jsx(Ot,{children:h.jsx(e_,{})})}),h.jsx(Pt,{path:"/how-to-play",element:h.jsx(Ot,{children:h.jsx(W1,{})})}),h.jsx(Pt,{path:"/create-league",element:h.jsx(Ot,{children:h.jsx(z1,{})})}),h.jsx(Pt,{path:"/admin",element:h.jsx(Ot,{children:h.jsx(F1,{})})}),h.jsx(Pt,{path:"/admin-data",element:h.jsx(Ot,{children:h.jsx(B1,{})})}),h.jsx(Pt,{path:"*",element:h.jsx(tm,{to:"/",replace:!0})})]})})}),s.pathname!=="/auth"&&s.pathname!=="/predictions/swipe"&&!(s.pathname==="/predictions"&&b)&&h.jsx(N1,{shouldHide:s.pathname==="/predictions"&&P===!1||s.pathname.startsWith("/league/")})]})}Og.createRoot(document.getElementById("root")).render(h.jsx(Cn.StrictMode,{children:h.jsx(Ny,{children:h.jsx(r_,{})})}));export{Ft as C,Ky as D,Vy as F,Oy as I,Qn as L,wc as P,k1 as R,eo as S,Tt as _,i_ as a,Dm as b,$m as c,iw as d,Dy as e,h_ as f,Kt as g,hi as h,X0 as i,h as j,nn as k,Jt as l,En as m,tc as n,Cn as o,d_ as p,f_ as q,x as r,Z as s,rc as t,ur as u};
