import React from 'react';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { useTokens } from '@totl/ui';
import { SvgXml } from 'react-native-svg';

import HomeScreen from '../screens/HomeScreen';
import GlobalScreen from '../screens/GlobalScreen';
import LeaguesNavigator from './LeaguesNavigator';

export type RootTabsParamList = {
  Predictions: undefined;
  Leagues: undefined;
  Global: undefined;
};

const Tab = createBottomTabNavigator<RootTabsParamList>();

const PREDICTIONS_SVG = `<svg width="24" height="24" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M23.5 7C29.3447 7 34.0928 11.748 34.0928 17.5928C34.0925 23.4373 29.3446 28.1846 23.5 28.1846C17.6554 28.1846 12.9085 23.4373 12.9082 17.5928C12.9082 11.748 17.6553 7 23.5 7ZM12.1025 25.001C12.6067 25.0523 13 25.4784 13 25.9961C13 26.5138 12.6067 26.9399 12.1025 26.9912L12 26.9961H7C6.44772 26.9961 6 26.5484 6 25.9961C6 25.4438 6.44772 24.9961 7 24.9961H12L12.1025 25.001ZM20.3008 23.1504L21.0088 26.1855C21.7982 26.4213 22.6389 26.5439 23.5 26.5439C24.3613 26.5439 25.2026 26.4214 25.9922 26.1855L26.6895 23.1914L25.3359 21.4688H21.6133L20.3008 23.1504ZM27.2432 17.3057L26.207 20.5254L27.6631 22.4014L31.0166 22.4531C31.9189 21.0483 32.4521 19.3867 32.4521 17.6025L29.96 16.208L27.2432 17.3057ZM14.5488 17.6025C14.5591 19.3765 15.0718 21.0278 15.9639 22.4121L19.3271 22.3604L20.7832 20.4844L19.7578 17.3057L17.04 16.208L14.5488 17.6025ZM8.10254 16.001C8.60667 16.0523 9 16.4784 9 16.9961C9 17.5138 8.60667 17.9399 8.10254 17.9912L8 17.9961H3C2.44772 17.9961 2 17.5484 2 16.9961C2 16.4438 2.44772 15.9961 3 15.9961H8L8.10254 16.001ZM20.3525 9.21484C18.8556 9.76852 17.5532 10.7223 16.5586 11.9424L17.502 15.0391L20.1064 16.0957L22.875 13.9629V11.2451L20.3525 9.21484ZM24.126 11.2246V13.9629L26.8945 16.0957L29.499 15.0391L30.4424 11.9424C29.4479 10.7223 28.135 9.76907 26.6279 9.20508L24.126 11.2246ZM12.1025 8.00098C12.6067 8.05231 13 8.47842 13 8.99609C13 9.51377 12.6067 9.93988 12.1025 9.99121L12 9.99609H7C6.44772 9.99609 6 9.54838 6 8.99609C6 8.44381 6.44772 7.99609 7 7.99609H12L12.1025 8.00098Z" fill="currentColor"/>
</svg>`;
const MINI_LEAGUES_SVG = `<svg width="24" height="24" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M23.668 18.0762C21.0791 18.0762 18.9736 15.7988 18.9736 12.9951C18.9736 10.2344 21.0898 8 23.668 8C26.2676 8 28.373 10.2021 28.373 12.9736C28.373 15.7881 26.2676 18.0762 23.668 18.0762ZM11.2178 18.1943C8.97266 18.1943 7.13574 16.1963 7.13574 13.7256C7.13574 11.3301 8.9834 9.34277 11.2178 9.34277C13.4844 9.34277 15.3105 11.2979 15.3105 13.7041C15.3105 16.1855 13.4844 18.1943 11.2178 18.1943ZM23.668 16.2178C25.1719 16.2178 26.4287 14.7891 26.4287 12.9736C26.4287 11.2012 25.1826 9.8584 23.668 9.8584C22.1641 9.8584 20.918 11.2227 20.918 12.9951C20.918 14.8105 22.1855 16.2178 23.668 16.2178ZM11.2178 16.3574C12.4531 16.3574 13.4951 15.1865 13.4951 13.7041C13.4951 12.2969 12.4746 11.1689 11.2178 11.1689C9.99316 11.1689 8.96191 12.3184 8.96191 13.7256C8.96191 15.1865 10.0039 16.3574 11.2178 16.3574ZM5.30957 28.0664C3.77344 28.0664 3 27.4111 3 26.1328C3 22.5664 6.67383 19.3223 11.2178 19.3223C12.8936 19.3223 14.5908 19.7734 15.9551 20.6221C15.375 20.998 14.9238 21.4492 14.5693 21.9541C13.6348 21.4385 12.4209 21.1377 11.2178 21.1377C7.80176 21.1377 4.90137 23.501 4.90137 25.9717C4.90137 26.1543 4.9873 26.251 5.19141 26.251H12.7539C12.6787 26.96 13.0762 27.7227 13.6562 28.0664H5.30957ZM16.9648 28.0664C15.1172 28.0664 14.2256 27.4756 14.2256 26.2188C14.2256 23.2861 17.8994 19.333 23.668 19.333C29.4365 19.333 33.1104 23.2861 33.1104 26.2188C33.1104 27.4756 32.2188 28.0664 30.3604 28.0664H16.9648ZM16.6104 26.208H30.7256C30.9727 26.208 31.0693 26.1328 31.0693 25.9287C31.0693 24.2852 28.416 21.1914 23.668 21.1914C18.9199 21.1914 16.2559 24.2852 16.2559 25.9287C16.2559 26.1328 16.3525 26.208 16.6104 26.208Z" fill="currentColor"/>
</svg>`;
const LEADERBOARDS_SVG = `<svg width="24" height="24" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8 10.3691C8 9.28516 8.69336 8.61133 9.82617 8.61133H11.6816C11.8867 7.5957 12.6387 7 13.8496 7H21.7012C22.9219 7 23.6738 7.60547 23.8691 8.61133H25.7246C26.8574 8.61133 27.5508 9.28516 27.5508 10.3691C27.5508 14.3438 25.5879 16.9023 21.7109 18.1133C21.2031 18.7676 20.6172 19.2949 20.0605 19.6855V23.6309H21.2031C22.5996 23.6309 23.3613 24.4609 23.3613 25.7891V27.8496C23.3613 28.3672 22.9609 28.7188 22.4727 28.7188H13.0781C12.5898 28.7188 12.1895 28.3672 12.1895 27.8496V25.7891C12.1895 24.4609 12.9512 23.6309 14.3477 23.6309H15.4902V19.6758C14.9336 19.2949 14.3574 18.7676 13.8496 18.1133C9.96289 16.9023 8 14.3438 8 10.3691ZM13.3516 12.4004C13.3516 15.8477 16.4961 18.8555 17.7754 18.8555C19.0547 18.8555 22.1992 15.8477 22.1992 12.4004V9.32422C22.1992 8.98242 21.9648 8.75781 21.623 8.75781H13.9277C13.5859 8.75781 13.3516 8.98242 13.3516 9.32422V12.4004ZM9.63086 10.5938C9.63086 13.0938 10.6074 14.8516 12.4727 15.8477C11.9355 14.7539 11.6035 13.4844 11.6035 12.127V10.3301H9.9043C9.73828 10.3301 9.63086 10.4375 9.63086 10.5938ZM23.0781 15.8477C24.9434 14.8516 25.9199 13.0938 25.9199 10.5938C25.9199 10.4375 25.8125 10.3301 25.6465 10.3301H23.9473V12.127C23.9473 13.4844 23.6152 14.7539 23.0781 15.8477ZM17.1602 23.6309H18.3906V20.5059C18.1758 20.5645 17.9707 20.5938 17.7754 20.5938C17.5801 20.5938 17.375 20.5645 17.1602 20.5059V23.6309ZM13.9375 26.9707H21.6133V25.9355C21.6133 25.6035 21.3887 25.3887 21.0566 25.3887H14.4941C14.1621 25.3887 13.9375 25.6035 13.9375 25.9355V26.9707Z" fill="currentColor"/>
</svg>`;

function TabSvgIcon({ xml, color, size }: { xml: string; color: string; size: number }) {
  return <SvgXml xml={xml} width={size} height={size} color={color} />;
}

export default function TabsNavigator() {
  const t = useTokens();

  return (
    <Tab.Navigator
      initialRouteName="Predictions"
      screenOptions={{
        headerShown: false,
        tabBarActiveTintColor: '#0F172A',
        tabBarInactiveTintColor: '#475569',
        tabBarStyle: {
          backgroundColor: t.color.surface,
          borderTopColor: t.color.border,
          paddingHorizontal: 28,
          height: 86,
        },
        tabBarItemStyle: {
          maxWidth: 112,
          paddingTop: 6,
        },
        tabBarLabelStyle: {
          fontSize: 10,
          lineHeight: 12,
          fontWeight: '700',
          marginBottom: 2,
        },
        tabBarHideOnKeyboard: true,
      }}
    >
      <Tab.Screen
        name="Predictions"
        component={HomeScreen}
        options={{
          title: 'Predictions',
          tabBarIcon: ({ color }) => <TabSvgIcon xml={PREDICTIONS_SVG} size={35} color={color} />,
        }}
      />
      <Tab.Screen
        name="Leagues"
        component={LeaguesNavigator as any}
        options={{
          title: 'Mini leagues',
          tabBarIcon: ({ color }) => <TabSvgIcon xml={MINI_LEAGUES_SVG} size={35} color={color} />,
        }}
      />
      <Tab.Screen
        name="Global"
        component={GlobalScreen}
        options={{
          title: '2025/26',
          tabBarIcon: ({ color }) => <TabSvgIcon xml={LEADERBOARDS_SVG} size={35} color={color} />,
        }}
      />
    </Tab.Navigator>
  );
}

